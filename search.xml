<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Javaä¹‹Streamæµ</title>
    <url>/2020/09/22/JavaStream/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨å†™javaå®éªŒçš„è¿‡ç¨‹ä¸­ï¼Œæƒ³ç”¨Streamæµçœäº‹æ—¶ï¼Œå´å‘ç°è‡ªå·±å¯¹Streamæµæœ‰ç‚¹ç”Ÿç–äº†ï¼Œæ‰€ä»¥ç‰¹åœ°ç¿»å¼€ä»¥å‰å†™çš„Streamæµçš„demoè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åŠ æ·±å°è±¡ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ"></a><strong><em>ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ</em></strong></h2><p>Streamæµæ˜¯java8 APIä¸­æ·»åŠ çš„ä¸€ä¸ªæ–°çš„æŠ½è±¡ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç±»ä¼¼SQLè¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹Javaé›†åˆè¿ç®—å’Œè¡¨è¾¾çš„æŠ½è±¡ã€‚</p>
<p>å®ƒå°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç®¡é“ä¸Šè¿›è¡Œå¯¹é›†åˆçš„å¤„ç†ï¼Œæ¯”å¦‚å¯¹é›†åˆå°±è¡Œç­›é€‰è¿‡æ»¤ã€æ’åºï¼ˆè‡ªå®šä¹‰æˆ–æ˜¯é»˜è®¤ï¼‰ã€èšåˆç­‰æ“ä½œã€‚</p>
<p>Streamæµçš„å¤„ç†ä¸­ï¼Œå…ƒç´ åœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œçš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œå¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚</p>
<blockquote>
</blockquote>
<h2 id="äºŒ-Streamæµçš„ç‰¹ç‚¹"><a href="#äºŒ-Streamæµçš„ç‰¹ç‚¹" class="headerlink" title="äºŒ.Streamæµçš„ç‰¹ç‚¹"></a><strong><em>äºŒ.Streamæµçš„ç‰¹ç‚¹</em></strong></h2><p>1.Streamæµä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå®ƒä¸ä¼šä¿å­˜æ•°æ®ï¼Œæµå¯ä»¥æ˜¯ä¸€ä¸ªæ³›å‹ã€‚</p>
<p>2.å¯ä»¥å¯¹é›†åˆã€æ•°ç»„è¿›è¡Œè¿ç»­çš„æ“ä½œã€‚</p>
<p>3.Streamæµçš„æ•°æ®æºå¯ä»¥æœ‰é›†åˆã€æ•°ç»„ç­‰ã€‚</p>
<p>4.å®ƒä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°æ®æºï¼Œå®ƒä¼šå°†æ“ä½œåçš„æ•°æ®ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p>
<p>5.Streamæ˜¯æƒ°æ€§æ±‚å€¼ï¼Œæµåœ¨ä¸­é—´å¤„ç†è¿‡ç¨‹ä¸­ï¼Œåªæ˜¯å¯¹æ“ä½œè¿›è¡Œäº†è®°å½•ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦ç­‰åˆ°æ‰§è¡Œç»ˆæ­¢æ“ä½œçš„æ—¶å€™æ‰ä¼šè¿›è¡Œå®é™…çš„è®¡ç®—ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"><a href="#ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ" class="headerlink" title="ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"></a><strong><em>ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ</em></strong></h2><p>Stream API å¯ä»¥æå¤§æé«˜ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œä¸€è¡Œä»£ç å¯¹é›†åˆè¿›è¡Œå¤šç§æ“ä½œï¼Œè®©æˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆã€ç®€æ´ã€æœ‰æ•ˆç‡çš„ä»£ç ã€‚</p>
<blockquote>
</blockquote>
<h2 id="å››-Streamæµçš„ç”¨æ³•"><a href="#å››-Streamæµçš„ç”¨æ³•" class="headerlink" title="å››.Streamæµçš„ç”¨æ³•"></a><strong><em>å››.Streamæµçš„ç”¨æ³•</em></strong></h2><p><strong>å¦å¤–ï¼Œåœ¨ä½¿ç”¨æµçš„æ—¶å€™ï¼Œå…ˆä¸è¦é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæµï¼Œåé¢ä¼šè®²åˆ°åŸå› </strong></p>
<h3 id="1-æµçš„åˆ›å»º"><a href="#1-æµçš„åˆ›å»º" class="headerlink" title="1.æµçš„åˆ›å»º"></a><strong>1.æµçš„åˆ›å»º</strong></h3><p>å¯¹äºé›†åˆï¼Œæµçš„åˆ›å»ºé€šå¸¸ä½¿ç”¨ é›†åˆ.stream() æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();
Stream&lt;String&gt; stream = list.stream();</code></pre>
<p>å¯¹äºæ•°ç»„ï¼Œé€šå¸¸ä½¿ç”¨é›†åˆçš„å·¥å…·ç±» Arrays.stream() ã€å°†æ•°ç»„è½¬æ¢ä¸ºé›†åˆList åˆæˆ–æ˜¯Stream.of(array) æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<pre><code>String[] strs = new String[10];
Stream&lt;String&gt; stream = Arrays.stream(strs);

Stream&lt;String&gt; stream = Arrays.asList(strs).stream();

Stream&lt;String&gt; stream = Stream.of(1,2,3,4,6);</code></pre>
<p>å°†å­—ç¬¦ä¸²åˆ†éš”æˆæµï¼š</p>
<pre><code>String newstr = &quot;123,456,789&quot;;
Pattern pattern = Pattern.compile(&quot;,&quot;);
Stream&lt;String&gt; spiltStream = pattern.splitAsStream(newstr);
splitStream.sorted.forEach(v-&gt;System.out.println(v));            // è¾“å‡ºï¼š123 456 789 </code></pre>
<hr>
<h3 id="2-æµçš„ä¸­é—´æ“ä½œ"><a href="#2-æµçš„ä¸­é—´æ“ä½œ" class="headerlink" title="2.æµçš„ä¸­é—´æ“ä½œ"></a><strong>2.æµçš„ä¸­é—´æ“ä½œ</strong></h3><p>å®šä¹‰ä¸€ä¸ªæ•´å½¢æ•°ç»„</p>
<pre><code>Integer[] integers = &#123;1,23,4,5,6,7,3,3,23,6,8,93,2,4,5&#125;;</code></pre>
<p>ä»¥ä¸‹æµçš„æ“ä½œå‡ä»¥æ­¤æ•°ç»„ä¸ºä¾‹</p>
<p><strong>forEachå¾ªç¯ï¼š</strong></p>
<p>ä½¿ç”¨forEach()æ–¹æ³•å¯ä»¥å¾ªç¯è¾“å‡ºæµ</p>
<pre><code>Stream.of(integers).forEach(v-&gt;System.out.println(v)); // å¾ªç¯è¾“å‡ºæ•´å½¢æ•°ç»„</code></pre>
<p><strong>ç­›é€‰ï¼š</strong></p>
<p>ä½¿ç”¨Streamæµä¸­çš„filter()æ–¹æ³•å¯ä»¥è¿‡æ»¤æŸäº›å…ƒç´ ï¼Œå¦‚ï¼š</p>
<pre><code>Stream&lt;Integer&gt; stream1 = Stream.of(integers);
stream1.filter(v-&gt;v&gt;20).forEach(v-&gt;System.out.println(v));    //23,23,93</code></pre>
<p><strong>è·å–nä¸ªå…ƒç´ ï¼š</strong></p>
<p>ä½¿ç”¨limit(n)æ–¹æ³•å¯ä»¥è·å–æµä¸­nä¸ªå…ƒç´ ï¼Œé¡ºåºä¸ºä» 0 â€“ n-1ï¼Œå¦‚ï¼š</p>
<pre><code>Stream.of(integers).limit(5).forEach(v-&gt;System.out.println(v));    //1,23,4,5,6</code></pre>
<p><strong>è·³è¿‡å‰nä¸ªå…ƒç´ </strong></p>
<p>ä½¿ç”¨skip(n)æ–¹æ³•å¯ä»¥è·³è¿‡æµä¸­å‰nä¸ªå…ƒç´ ï¼Œå¦‚ï¼š</p>
<pre><code>Stream.of(integers).skip(7).forEach(v-&gt;System.out.println(v));    //8,93,2,4,5</code></pre>
<p><strong>å»é™¤é‡å¤å…ƒç´ </strong></p>
<p>ä½¿ç”¨distinct()æ–¹æ³•å¯ä»¥å»é™¤æµä¸­é‡å¤å…ƒç´ ï¼ˆä½¿ç”¨hashcodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰å®ç°ï¼‰</p>
<pre><code>Stream.of(integers).distinct().forEach(v-&gt;System.out.println(v));    //1,23,4,5,6,7,3,8,93,2</code></pre>
<p><strong>ç”Ÿæˆæ˜ å°„</strong></p>
<p>map()æ–¹æ³•æ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ </p>
<pre><code>Stream.of(integers).filter(i-&gt;i&gt;20).distinct().map(v-&gt;v*=2).forEach(v-&gt;System.out.println(v));        //46,186</code></pre>
<p><strong>æ’åº</strong></p>
<p>sorted()æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤æ’åºï¼Œæµä¸­å…ƒç´ éœ€è¦å®sç°Comparableæ¥å£</p>
<p>sorted(Comparator cmp) æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå®ç°Comparatoræ¥å£çš„å®ç°ç±»ï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰æ’åº</p>
<pre><code>Stream.of(integers).sorted().filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v))         // 23,23,93

Stream.of(integers).sorted(
        new Comparator&lt;Integer&gt;() &#123;
        public int compare(Integer o1, Integer o2) &#123;
            return o2-o1;
        &#125;
    &#125;
    ).filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v))    // 93,23,23</code></pre>
<p><strong>æ¶ˆè´¹æ–¹æ³•</strong></p>
<p><del>å¾…ç»­</del></p>
<hr>
<h3 id="3-æµçš„ç»ˆæ­¢æ“ä½œ"><a href="#3-æµçš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="3.æµçš„ç»ˆæ­¢æ“ä½œ"></a><strong>3.æµçš„ç»ˆæ­¢æ“ä½œ</strong></h3><p><strong>å‰é¢è¯´è¿‡ä¸è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªæµï¼Œå› ä¸ºæµçš„ç»ˆæ­¢æ“ä½œä¼šå°†æµå…³é—­ï¼Œå…³é—­æµåå°±ä¸èƒ½ç»§ç»­ä½¿ç”¨è¿™ä¸ªæµï¼Œå¦‚æœç»§ç»­ä½¿ç”¨æµåˆ™ä¼šå‡ºç°å¼‚å¸¸</strong></p>
<p>æµçš„ç»ˆæ­¢æ“ä½œæœ‰ï¼šåŒ¹é…ã€èšåˆã€æ”¶é›†</p>
<hr>
<p><strong>åŒ¹é…</strong></p>
<p>åŒ¹é…æ“ä½œæ˜¯åˆ¤æ–­å…ƒç´ åœ¨æµä¸­çš„å­˜åœ¨å…³ç³»</p>
<pre><code>Stream&lt;Integer&gt; stream = Stream.of(integers);
boolean bool1 = stream.allMatch(v-&gt;v&gt;5);    //false
boolean bool2 = stream.allMatch(v-&gt;v&gt;10);    //æ­¤æ—¶ä¼šå‡ºç°å¼‚å¸¸ï¼Œå› ä¸ºæ‰§è¡Œäº†æµçš„ç»ˆæ­¢æ“ä½œã€‚

boolean allMatch = Stream.of(integers).allMatch(v-&gt;v&gt;5);
System.out.println(allMatch);    //åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ç¬¦åˆæŸç§å…³ç³»

boolean nonMatch = Stream.of(integers).noneMatch(v-&gt;v&gt;100);
System.out.println(nonMatch);    //åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸ç¬¦åˆæŸç§å…³ç³»

boolean anyMatch = Stream.of(integers).anyMatch(v-&gt;v&gt;90);
System.out.println(anyMatch);    //åˆ¤æ–­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆ

int res = Stream.of(integers).findFirst().get();
System.out.println(res);        //è¿”å›æµä¸­ç¬¬ä¸€ä¸ªå…ƒç´ 

int any = Stream.of(integers).findAny().get();
System.out.println(any);        //éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ </code></pre>
<hr>
<p><strong>èšåˆ</strong></p>
<p>èšåˆæ“ä½œæœ‰ï¼šè¿”å›æµä¸­å…ƒç´ ä¸ªæ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€‚</p>
<pre><code>long count = Stream.of(integers).count();    //è¿”å›longå‹

int maxElement = Stream.of(integers).max(Integer::compareTo).get();

int minElement = Stream.of(integers).min(Integer::compareTo).get();</code></pre>
<hr>
<p><strong>æ”¶é›†</strong></p>
<p>æ”¶é›†æ“ä½œå¯ä»¥å°†æµä¸­çš„å…ƒç´ åŒ…è£…æˆä¸€ä¸ªæœ€ç»ˆç»“æœé›†ï¼šListã€mapã€setç­‰ï¼Œå¦‚ï¼š</p>
<pre><code>å…¶ä¸­ collect æ¥å—ä¸€ä¸ªCollectorå®ä¾‹ï¼Œå¯å°†å…ƒç´ æ”¶é›†æˆå¦å¤–ä¸€ä¸ªæ•°æ®ç»“æ„

Set&lt;Integer&gt; set = Stream.of(integers).collect(Collectors.toSet());    //[1, 2, 3, 4, 5, 6, 23, 7, 8, 93]

List&lt;Integer&gt; list = Stream.of(integers).collect(Collectors.toList());        //[1, 23, 4, 5, 6, 7, 3, 3, 23, 6, 8, 93, 2, 4, 5]

Map&lt;Integer,Integer&gt; map = Stream.of(integers).distinct().filter(v-&gt;v&gt;20).collect(Collectors.toMap(Integer::intValue,Integer::intValue));    //&#123;23=23, 93=93&#125;</code></pre>
<p>æ”¶é›†æ“ä½œä¸­æ±‚æœ€å¤§ã€æœ€å°ã€æ±‚å’Œã€å¹³å‡å€¼ï¼š</p>
<pre><code>int max = Stream.of(integers).collect(Collectors.maxBy(Integer::compare)).get();

int min = Stream.of(integers).collect(Collectors.minBy(Integer::compare)).get();

double average = Stream.of(integers).collect(Collectors.averagingDouble(Integer::intValue));

int sum = Stream.of(integers).collect(Collectors.summarizingInt(Integer::intValue));</code></pre>
<p>ä»¥ä¸‹æ–¹æ³•å¯ä»¥é›†ä»¥ä¸Šå››ç§æ“ä½œäºä¸€èº«ï¼š</p>
<pre><code>IntSummaryStatistics sta = Stream.of(integers).collect(Collectors.summarizingInt(Integer::intValue));
int max = sta.getMax();
int min = sta.getMin();
double average = sta.getAverage();
long count = sta.getCount();
long sum = sta.getSum();</code></pre>
<hr>
<p><strong>åˆ†ç»„</strong></p>
<p>åˆ†ç»„æ“ä½œå°†æµä¸­ç›¸åŒå…ƒç´ å½’ä¸ºä¸€ç»„</p>
<pre><code>Map&lt;Integer,List&lt;Integer&gt;&gt; map = Stream.of(integers).distinct().collect(Collectors.groupingBy(Integer::intValue));        //&#123;1=[1], 2=[2], 3=[3], 4=[4], 5=[5], 6=[6], 7=[7], 23=[23], 8=[8], 93=[93]&#125;</code></pre>
<hr>
<p><strong>åˆ†åŒº</strong></p>
<p>åˆ†åŒºæ“ä½œä¸­ï¼Œè®¾ç½®æ¡ä»¶å°†æµä¸­å…ƒç´ åˆ†æˆä¸¤ç»„ï¼Œæ»¡è¶³æ¡ä»¶çš„ä¸ºtrueï¼Œä¸æ»¡è¶³çš„ä¸ºfalse</p>
<pre><code>Map&lt;Boolean,List&lt;Integer&gt;&gt; newmap = Stream.of(integers).distinct().collect(Collectors.partitioningBy(v-&gt;v&gt;20));

    System.out.println(newmap);

    System.out.println(newmap.get(true));</code></pre>
<p>ä½¿ç”¨newmap.get(true)è®¿é—®æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚</p>
]]></content>
      <tags>
        <tag>JavaStreamæµ</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkDownå…¥é—¨</title>
    <url>/2020/09/21/MarkDown/</url>
    <content><![CDATA[<p>MarkDown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç›®å‰è®¸å¤šç½‘ç«™éƒ½åœ¨å¹¿æ³›ä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« æˆ–æ˜¯åœ¨è®ºå›å‘è¡¨æ–‡ç« ï¼Œå½“ç„¶ä¸ªäººåšå®¢ä¸­ä¹Ÿæ”¯æŒä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« ï¼Œä¸ºäº†æ›´å¥½åœ°æ­å»ºä¸ªäººåšå®¢ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ä½¿ç”¨MarkDownæ¥å¸®åŠ©æˆ‘ä»¬æ¥ç¼–å†™æ ¼å¼æ›´å¥½çš„æ–‡ç« ã€‚</p>
<hr>
<h3 id="ä¸€-æ ‡é¢˜"><a href="#ä¸€-æ ‡é¢˜" class="headerlink" title="ä¸€.æ ‡é¢˜"></a><strong><em>ä¸€.æ ‡é¢˜</em></strong></h3><p>æ ‡é¢˜ä½¿ç”¨#å·æ ‡è®°</p>
<p>ä¸€ä¸ª#æ˜¯ä¸€çº§æ ‡é¢˜ï¼ŒäºŒä¸ª#æ˜¯äºŒçº§æ ‡é¢˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ”¯æŒå…­çº§æ ‡é¢˜ã€‚</p>
<h1 id="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><p><strong>æ³¨ï¼š#åé¢è¦æœ‰ç©ºæ ¼ï¼Œä¸ç„¶æ— æ³•æ­£ç¡®æ˜¾ç¤º</strong></p>
<hr>
<h3 id="äºŒ-æ®µè½æ ¼å¼"><a href="#äºŒ-æ®µè½æ ¼å¼" class="headerlink" title="äºŒ.æ®µè½æ ¼å¼"></a><strong><em>äºŒ.æ®µè½æ ¼å¼</em></strong></h3><p>MarkDownå¯ä»¥ä½¿ç”¨ä¸‰ç§å­—ä½“ï¼šæ–œä½“ã€åŠ ç²—ã€æ–œä½“åŠ ç²—ã€‚</p>
<p>æ–œä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸€ä¸ª*</p>
<p><em>è¿™æ˜¯æ–œä½“</em></p>
<p>ç²—ä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸¤ä¸ª*</p>
<p><strong>è¿™æ˜¯ç²—ä½“</strong></p>
<p>æ–œä½“åŠ ç²—ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸‰ä¸ª***</p>
<p><strong><em>è¿™æ˜¯æ–œä½“åŠ ç²—</em></strong></p>
<hr>
<p>åˆ†å‰²çº¿ä½¿ç”¨ â€” æ¥å»ºç«‹åˆ†å‰²çº¿</p>
<hr>
<p>æ–‡å­—ä¸¤ç«¯ä½¿ç”¨ ï½ï½ æ¥ä½¿æ–‡å­—å˜æˆåˆ é™¤æ ¼å¼</p>
<p><del>è¿™æ˜¯æ–‡å­—çš„åˆ é™¤æ ¼å¼</del></p>
<p><strong>æ³¨ï¼šï½ï½å¿…é¡»æ˜¯è‹±æ–‡çš„ï½</strong></p>
<hr>
<p>ä¸‹åˆ’çº¿æ˜¯é€šè¿‡htmlçš„ u æ ‡ç­¾æ¥å®ç°çš„ï¼Œåœ¨æ–‡å­—ä¸¤ç«¯åŠ ä¸Šå³å¯</p>
<p><u>è¿™æ˜¯ä¸‹åˆ’çº¿</u></p>
<hr>
<h3 id="ä¸‰-åˆ—è¡¨"><a href="#ä¸‰-åˆ—è¡¨" class="headerlink" title="ä¸‰.åˆ—è¡¨"></a><strong><em>ä¸‰.åˆ—è¡¨</em></strong></h3><p>åˆ—è¡¨åˆ†ä¸º <u>æœ‰åºåˆ—è¡¨</u> å’Œ <u>æ— åºåˆ—è¡¨</u></p>
<p><strong>æ— åºåˆ—è¡¨</strong>ä½¿ç”¨ *ã€+ã€- ä½œä¸ºåˆ—è¡¨æ ‡è®°</p>
<ul>
<li>ç¬¬ä¸€é¡¹</li>
<li>ç¬¬äºŒé¡¹</li>
<li>ç¬¬ä¸‰é¡¹</li>
</ul>
<p><strong>æœ‰åºåˆ—è¡¨</strong>ä½¿ç”¨ 1. 2. 3.æ ‡è®°</p>
<p>1.ç¬¬ä¸€é¡¹<br>2.ç¬¬äºŒé¡¹<br>3.ç¬¬ä¸‰é¡¹</p>
<p><strong><em>åˆ—è¡¨åµŒå¥—</em></strong></p>
<p>ç¬¬äºŒå±‚ä¸ºç¬¬ä¸€å±‚æ¢è¡ŒååŠ ä¸€ä¸ªtab</p>
<ul>
<li>ç¬¬ä¸€å±‚<ul>
<li>ç¬¬äºŒå±‚<ul>
<li>ç¬¬ä¸‰å±‚ <ul>
<li>ç¬¬å››å±‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong><em>åŒºå—å¼•ç”¨å’ŒåµŒå¥—</em></strong></p>
<p>åŒºå—å¼•ç”¨ï¼šåœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å·ï¼Œåé¢è·Ÿä¸€ä¸ªç©ºæ ¼</p>
<blockquote>
<p>è¿™æ˜¯åŒºå—ä¸€</p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯åŒºå—äºŒ</p>
</blockquote>
<p>åŒºå—åµŒå¥—ï¼šä¸€ä¸ª&gt;æ˜¯æœ€å¤–å±‚ï¼Œä¸¤ä¸ªæ˜¯ç¬¬ä¸€å±‚åµŒå¥—ï¼Œä»¥æ­¤ç±»æ¨</p>
<blockquote>
<p>çˆ¶äº²</p>
<blockquote>
<p>å„¿å­</p>
<blockquote>
<p>å­™å­</p>
</blockquote>
</blockquote>
</blockquote>
<p><strong><em>æ³¨ï¼šåŒºå—åµŒå¥—ä¸­&gt;ä¹Ÿè¦éš”ä¸€ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å››-é“¾æ¥å’Œå›¾ç‰‡"><a href="#å››-é“¾æ¥å’Œå›¾ç‰‡" class="headerlink" title="å››.é“¾æ¥å’Œå›¾ç‰‡"></a><strong><em>å››.é“¾æ¥å’Œå›¾ç‰‡</em></strong></h3><p>é“¾æ¥ä½¿ç”¨ï¼š<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">é“¾æ¥åç§°</a></p>
<p>å¦‚ï¼š<a href="https://zleo-bug.github.io/">zleoçš„åšå®¢</a>    </p>
<p>å›¾ç‰‡ä½¿ç”¨ï¼šå›¾ç‰‡çš„ä½¿ç”¨å’Œé“¾æ¥ä½¿ç”¨ä¸€æ ·</p>
<p>å¦‚ï¼š<a href="http://static.runoob.com/images/runoob-logo.png">èœé¸Ÿæ•™ç¨‹</a></p>
<p>è‹¥ä½¿ç”¨æœ¬åœ°å›¾ç‰‡ï¼Œåˆ™é“¾æ¥ä¸º åœ¨ä¸æœ¬mdæ–‡ä»¶åŒåçš„æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡åç§°ï¼Œæœ¬æ–‡çš„æ–‡ä»¶åä¸ºMarkDownï¼Œåˆ™é“¾æ¥ä¸ºMarkDownå›¾ç‰‡çš„åç§°</p>
<p><img src="/2020/09/21/MarkDown/f4131bc77889e084f2b3648261cc43df.jpg" alt="å›¾ç‰‡"></p>
<p>MarkDownè¿˜ä¸æ”¯æŒæŒ‡å®šå›¾ç‰‡çš„é«˜åº¦å’Œå¤§å°ï¼Œè‹¥æœ‰éœ€è¦å¯ä»¥ä½¿ç”¨htmlçš„imgæ ‡ç­¾</p>
<hr>
<h3 id="äº”-è¡¨æ ¼"><a href="#äº”-è¡¨æ ¼" class="headerlink" title="äº”.è¡¨æ ¼"></a><strong><em>äº”.è¡¨æ ¼</em></strong></h3><p>MarkDownä¸­ç”¨|åˆ†éš”ä¸åŒå•å…ƒæ ¼ï¼Œç”¨-æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œ</p>
<p>å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
</tr>
</tbody></table>
<br>
è¡¨æ ¼ä¸­é»˜è®¤ä¸ºå‘å·¦çœ‹é½

<p>å‘å³çœ‹é½ï¼šå³è¾¹åŠ  :</p>
<p>æ–‡å­—å±…ä¸­ï¼šä¸¤è¾¹åŠ  :</p>
<p><strong><em>æ³¨ï¼š&amp;emsp; è¡¨ç¤ºä¸¤ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å…­-ä»£ç å—"><a href="#å…­-ä»£ç å—" class="headerlink" title="å…­.ä»£ç å—"></a><strong><em>å…­.ä»£ç å—</em></strong></h3><p>å¦‚æœæ˜¯æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ç‰‡æ®µä»£ç å¯ä»¥ç”¨åå¼•å·åŒ…èµ·æ¥</p>
<p>å¦‚ï¼š<code>printf()</code> å‡½æ•°</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œåˆ™å…¨é€‰ä»£ç å—åŠ ä¸€ä¸ªtabå³å¯</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
using namespace std;</code></pre>
<hr>
<h3 id="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"><a href="#ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚" class="headerlink" title="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"></a>ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚</h3>]]></content>
      <tags>
        <tag>MarkDown</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡</title>
    <url>/2020/09/21/NewPassage/</url>
    <content><![CDATA[<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»¥åè¦æŠŠå­¦ä¹ è¿‡ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹å†™åœ¨è‡ªå·±çš„åšå®¢ä¸ŠğŸ˜</p>
]]></content>
  </entry>
  <entry>
    <title>Pythonå…¥é—¨å­¦ä¹ </title>
    <url>/2020/09/21/Python/</url>
    <content><![CDATA[<p>è¿™å­¦æœŸé€‰ä¿®äº†ä¿¡æ¯æ£€ç´¢ï¼ˆpythonåŸºç¡€å…¥é—¨ï¼‰ï¼Œæ‰€ä»¥æœ‰å¿…è¦å°†pythonçš„åŸºç¡€markdownï¼Œä¾¿äºä»¥åå­¦ä¹ ã€‚è¯­è¨€éƒ½å…·æœ‰ç›¸ä¼¼æ€§ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºpythonä¸å…¶ä»–è¯­è¨€ä¸åŒçš„åœ°æ–¹</p>
<h1 id="ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š"><a href="#ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š"></a>ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š</h1><p>pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>pythonè¯­è¨€æ˜¯ä¸€ç§è§£é‡Šæ€§è¯­è¨€ï¼šè¿™æ„å‘³ç€åœ¨ä»£ç ç¼–å†™ã€æ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰äº†ç¼–è¯‘è¿™ä¸ªç¯èŠ‚</p>
<h1 id="äºŒ-pythonåŸºç¡€ï¼š"><a href="#äºŒ-pythonåŸºç¡€ï¼š" class="headerlink" title="äºŒ.pythonåŸºç¡€ï¼š"></a>äºŒ.pythonåŸºç¡€ï¼š</h1><h2 id="è¯­å¥ç»“æŸç¬¦ï¼š"><a href="#è¯­å¥ç»“æŸç¬¦ï¼š" class="headerlink" title="è¯­å¥ç»“æŸç¬¦ï¼š"></a>è¯­å¥ç»“æŸç¬¦ï¼š</h2><p>pythonä¸­å¯ä»¥ä¸å†™ç»“æŸç¬¦ï¼› å¦‚ï¼šprint(val)    </p>
<h2 id="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"><a href="#å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š" class="headerlink" title="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"></a>å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š</h2><p>pythonä¸­å˜é‡ç±»å‹æ˜¯å¼±ç±»å‹ï¼Œå®šä¹‰å˜é‡æ—¶ä¸ç”¨å£°æ˜æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨delåˆ é™¤å˜é‡</p>
<h2 id="æ³¨é‡Šï¼š"><a href="#æ³¨é‡Šï¼š" class="headerlink" title="æ³¨é‡Šï¼š"></a>æ³¨é‡Šï¼š</h2><h2 id="è¡Œä¸ç¼©è¿›ï¼š"><a href="#è¡Œä¸ç¼©è¿›ï¼š" class="headerlink" title="è¡Œä¸ç¼©è¿›ï¼š"></a>è¡Œä¸ç¼©è¿›ï¼š</h2><p>è¡Œä¸ç¼©è¿›æ˜¯pythonè¯­è¨€æœ€å…·ç‰¹è‰²çš„ä¸€ä¸ªåœ°æ–¹ï¼Œpythonä¸åƒå…¶ä»–è¯­è¨€ä¸€æ ·ä½¿ç”¨å¤§æ‹¬å·æ¥åŒ…å«ä¸€ä¸ªä»£ç å—ï¼Œè€Œæ˜¯ä½¿ç”¨ï¼šæ¥åŒ…å«ä»£ç å—ï¼Œç¼©è¿›ç›¸åŒçš„ä»£ç å—ä¸ºåŒä¸€å±‚æ¬¡ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code>if True:
        print(&quot;True&quot;);
    else:
        print(&quot;False&quot;);</code></pre>
<h2 id="å¤šè¡Œè¯­å¥ï¼š"><a href="#å¤šè¡Œè¯­å¥ï¼š" class="headerlink" title="å¤šè¡Œè¯­å¥ï¼š"></a>å¤šè¡Œè¯­å¥ï¼š</h2><p>å¦‚æœä¸€è¡Œä»£ç å¾ˆé•¿ï¼Œå¯ä»¥ç”¨ \ æ¥å°†ä»£ç åˆ†è¡Œ<br>å¦‚ï¼š</p>
<pre><code>total = item_one + \
   item_two + \
   item_three</code></pre>
<h2 id="å¯¼å…¥æ¨¡å—ï¼š"><a href="#å¯¼å…¥æ¨¡å—ï¼š" class="headerlink" title="å¯¼å…¥æ¨¡å—ï¼š"></a>å¯¼å…¥æ¨¡å—ï¼š</h2><p>pythonä¸­å¯¼å…¥æ¨¡å—ä½¿ç”¨ import [somemoudle] å’Œ from [somemoudle] import [moudle1],[moudle2]â€¦å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨importå¯ä»¥å¯¼å…¥å…¶ä»–pythonæ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼äºjavaä¸­çš„åŒ…ï¼Œå¯¼å…¥å…¶ä»–æ–‡ä»¶åä¼šè‡ªåŠ¨è¿è¡Œæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ä¸»æ–‡ä»¶ä¸­å°†ä»£ç å—æ”¾å…¥ <strong>name</strong> == <strong>main</strong> </p>
<h2 id="è¾“å…¥ä¸è¾“å‡ºï¼š"><a href="#è¾“å…¥ä¸è¾“å‡ºï¼š" class="headerlink" title="è¾“å…¥ä¸è¾“å‡ºï¼š"></a>è¾“å…¥ä¸è¾“å‡ºï¼š</h2><p>pythonä¸­ç”¨ input(â€œâ€)è¯­å¥è¾“å…¥ï¼Œè¾“å…¥é»˜è®¤ä¸ºå­—ç¬¦ä¸²ï¼Œè‹¥æƒ³å°†è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„å€¼å¯ç”¨å¼ºåˆ¶è½¬æ¢ã€‚å¦‚ val = int(input(â€œenter a val:â€))</p>
<p>pythonä¸­ç”¨ print()è¯­å¥è¾“å‡ºï¼Œè¾“å‡ºé»˜è®¤æ¢è¡Œï¼Œè‹¥æƒ³å–æ¶ˆæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼ï¼šprint(â€œâ€,end=â€ â€œ) ä½†endè¿™ä¸ªè¯­æ³•åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„python3æ‰æ”¯æŒã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨str.format()æ¥æ ¼å¼åŒ–è¾“å‡º</p>
<p>æ¡ä»¶æ§åˆ¶ï¼š</p>
<p>pythonä¸­æ²¡æœ‰switch caseè¡¨è¾¾å¼ï¼Œelifä»£æ›¿äº†elseï¼Œè¿˜æ·»åŠ äº†for elseã€while elseçš„è¡¨è¾¾å¼</p>
<h2 id="é”™è¯¯å’Œå¼‚å¸¸ï¼š"><a href="#é”™è¯¯å’Œå¼‚å¸¸ï¼š" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸ï¼š"></a>é”™è¯¯å’Œå¼‚å¸¸ï¼š</h2><p>pythonä¸­ä½¿ç”¨ try-expect-finally ä»£æ›¿ try-catch-else-finallyï¼Œå…¶ä¸­elseæ˜¯æ²¡æœ‰å¼‚å¸¸æ‰§è¡Œçš„ä»£ç </p>
<p>ç”¨raiseä»£æ›¿throwæŠ›å‡ºå¼‚å¸¸</p>
<h2 id="ç»§æ‰¿ï¼š"><a href="#ç»§æ‰¿ï¼š" class="headerlink" title="ç»§æ‰¿ï¼š"></a>ç»§æ‰¿ï¼š</h2><p>pythonæ”¯æŒå¤šç»§æ‰¿</p>
<h2 id="è¿ç®—ç¬¦ï¼š"><a href="#è¿ç®—ç¬¦ï¼š" class="headerlink" title="è¿ç®—ç¬¦ï¼š"></a>è¿ç®—ç¬¦ï¼š</h2><p>pythonä¸­è¿ç®—ç¬¦é™¤äº† æ¯”è¾ƒè¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ å¤– å…¶ä»–è¿ç®—ç¬¦å’Œå…¶ä»–è¯­è¨€æœ‰æ‰€ä¸åŒã€‚</p>
<h3 id="ç®—æ•°è¿ç®—ç¬¦ï¼š"><a href="#ç®—æ•°è¿ç®—ç¬¦ï¼š" class="headerlink" title="ç®—æ•°è¿ç®—ç¬¦ï¼š"></a>ç®—æ•°è¿ç®—ç¬¦ï¼š</h3><p>x/y çš„è¿ç®—ç»“æœä¸ºæµ®ç‚¹æ•° </p>
<p>x//y çš„ç»“æœä¸ºå‘ä¸‹å–æ•´çš„æ•´æ•°</p>
<p>x/<em>/</em>(val) è¡¨ç¤ºxçš„valæ¬¡å¹‚</p>
<h3 id="é€»è¾‘è¿ç®—ç¬¦ï¼š"><a href="#é€»è¾‘è¿ç®—ç¬¦ï¼š" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦ï¼š"></a>é€»è¾‘è¿ç®—ç¬¦ï¼š</h3><p>ä¸è¿ç®—ç¬¦ä¸ºï¼šand</p>
<p>æˆ–è¿ç®—ç¬¦ä¸ºï¼šor</p>
<p>éè¿ç®—ç¬¦ä¸ºï¼šnot</p>
<h3 id="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"><a href="#æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­" class="headerlink" title="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"></a>æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­</h3><p>inï¼šè¡¨ç¤ºæŸå…ƒç´ åœ¨æŒ‡å®šçš„åºåˆ—ä¸­ </p>
<p>not inï¼šè¡¨ç¤ºæŸå…ƒç´ ä¸åœ¨æŒ‡å®šåºåˆ—ä¸­</p>
<h3 id="Pythonå¾ªç¯ï¼š"><a href="#Pythonå¾ªç¯ï¼š" class="headerlink" title="Pythonå¾ªç¯ï¼š"></a>Pythonå¾ªç¯ï¼š</h3><p>Pythonå¾ªç¯ä¸­é€šå¸¸ä½¿ç”¨range(i,j)æ¥æŒ‡å®šéå†çš„èŒƒå›´ï¼Œrangeä¸ºå·¦é—­å³å¼€åŸåˆ™ï¼Œå¦‚for(i in range(0,5)) éå†ä¸‹æ ‡ä¸º0-4</p>
<h3 id="èº«ä»½è¿ç®—ç¬¦ï¼š"><a href="#èº«ä»½è¿ç®—ç¬¦ï¼š" class="headerlink" title="èº«ä»½è¿ç®—ç¬¦ï¼š"></a>èº«ä»½è¿ç®—ç¬¦ï¼š</h3><p>is æˆ– id() ï¼šç”¨æ¥è¡¨ç¤ºæŸå˜é‡çš„åœ°å€ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­åºåˆ—</p>
<p>== ï¼šç”¨æ¥åˆ¤æ–­å˜é‡å€¼æ˜¯å¦ç›¸ç­‰ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­å˜é‡</p>
<p>ç±»ä¼¼äºåœ¨javaä¸­ï¼ŒString str1 = â€œ123â€;String str2 = â€œ123â€; String str3 = new String(â€œ123â€);<br>str1 == str2 /true<br>str1 == str3 /false<br>ä¹‹é—´çš„åŒºåˆ«</p>
<h2 id="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"><a href="#åŸºæœ¬æ•°æ®ç±»å‹ï¼š" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"></a>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</h2><p>pythonä¸­ä½¿ç”¨type()è¿”å›å˜é‡çš„ç±»å‹ï¼Œä½¿ç”¨isinstanceæ–¹æ³•æ¥åˆ¤æ–­å˜é‡æ˜¯å¦ä¸æŒ‡å®šç±»å‹ç›¸åŒ</p>
<pre><code>a = 10;
print(type(a))    #    &lt;class &#39;int&#39;&gt;
print(isinstance(a,int))    #True</code></pre>
<ul>
<li><h3 id="Number-æ•°å­—ç±»å‹-ï¼š"><a href="#Number-æ•°å­—ç±»å‹-ï¼š" class="headerlink" title="Number (æ•°å­—ç±»å‹)ï¼š"></a>Number (æ•°å­—ç±»å‹)ï¼š</h3></li>
</ul>
<p>pythonä¸­æ•°å­—ç±»å‹åªæœ‰intã€boolã€floatã€complexå››ç§</p>
<p>å¼ºåˆ¶è½¬æ¢ï¼šintï¼ˆï¼‰ã€boolï¼ˆï¼‰ã€floatï¼ˆï¼‰ã€complexï¼ˆx,yï¼‰</p>
<ul>
<li><h3 id="String-å­—ç¬¦ä¸²-ï¼š"><a href="#String-å­—ç¬¦ä¸²-ï¼š" class="headerlink" title="String (å­—ç¬¦ä¸²)ï¼š"></a>String (å­—ç¬¦ä¸²)ï¼š</h3></li>
</ul>
<p>pythonä¸­å­—ç¬¦ä¸²ç”¨â€˜â€™æˆ–â€œâ€æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨ä¸‹æ ‡è®¿é—®å­—ç¬¦ä¸²ï¼Œæœ‰æ­£åºè®¿é—®å’Œé€†åºè®¿é—®ä¸¤ç§æ–¹å¼</p>
<p>å­—ç¬¦ä¸²è¿ç®—ç¬¦ï¼š</p>
<ul>
<li><p>è¿ç®—ç¬¦ï¼šé‡å¤è¾“å‡º</p>
<p>  str = â€œ123â€<br>  print(str * 3) #123123123</p>
</li>
</ul>
<p>[]è¿ç®—ç¬¦ï¼šé€šè¿‡ç´¢å¼•æˆªå–å­—ç¬¦ä¸²çš„å­ä¸²(å·¦é—­å³å¼€)</p>
<pre><code>str = &quot;12312312412412&quot;
print(str[0:4]);</code></pre>
<p>Pythonä¸­å­—ç¬¦ä¸²ä¸‹æ ‡æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯å¸¸è§„çš„ï¼š0â€¦n-1ï¼Œå¦ä¸€ç§æ˜¯ä»åé¢ç´¢å¼•ï¼š-nâ€¦-1</p>
<p>å¦‚ï¼š</p>
<pre><code>str = &quot;123456789&quot;
print(str[0:9])        #123456789
print(str[-9:0])     #123456789</code></pre>
<p>in å’Œ not in æˆå‘˜è¿ç®—ç¬¦ï¼šåˆ¤æ–­å­—ç¬¦æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²ä¸­</p>
<pre><code>str = &quot;12312312412412&quot;
print(&#39;0&#39; in str);        #False</code></pre>
<p>r/Rè¿ç®—ç¬¦ï¼šå°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦è½¬ä¹‰ï¼Œå˜æˆæ™®é€šå­—ç¬¦</p>
<pre><code>str = r&quot;12\n312312412412&quot;
print(str)            #12\n312312412412</code></pre>
<p>%å­—ç¬¦ä¸²æ ¼å¼åŒ–è¿ç®—ç¬¦ï¼š</p>
<pre><code>str = &quot;12312312412412&quot;
print(&quot;string is %s&quot; %str)        #string is 12312312412412</code></pre>
<p>f-string å­—é¢é‡æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</p>
<p>f-string æ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥ f å¼€å¤´ï¼Œåé¢è·Ÿç€å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­çš„è¡¨è¾¾å¼ç”¨å¤§æ‹¬å·{} åŒ…èµ·æ¥ï¼Œå®ƒä¼šå°†å˜é‡æˆ–è¡¨è¾¾å¼è®¡ç®—åçš„å€¼æ›¿æ¢è¿›å»</p>
<pre><code>name=&quot;åäºŒç‚¹å‰è¦ç¡è§‰&quot;
print(f&quot;æˆ‘&#123;name&#125;&quot;)        #æˆ‘åäºŒç‚¹å‰è¦ç¡è§‰

print(f&quot;&#123;1+2&#125;&quot;)     # 3</code></pre>
<p>str.format()æ ¼å¼åŒ–ï¼š</p>
<pre><code>print(&#39;&#123;0&#125; å’Œ &#123;1&#125;&#39;.format(&#39;Google&#39;, &#39;Runoob&#39;))    #Google å’Œ Runoob

print(&#39;&#123;name&#125;ç½‘å€ï¼š &#123;site&#125;&#39;.format(name=&#39;èœé¸Ÿæ•™ç¨‹&#39;, site=&#39;www.runoob.com&#39;))    #èœé¸Ÿæ•™ç¨‹ç½‘å€ï¼š www.runoob.com

import math
print(&#39;å¸¸é‡ PI çš„å€¼è¿‘ä¼¼ä¸º &#123;0:.3f&#125;ã€‚&#39;.format(math.pi))

table = &#123;&#39;Google&#39;: 1, &#39;Runoob&#39;: 2, &#39;Taobao&#39;: 3&#125;
print(&#39;Runoob: &#123;0[Runoob]&#125;; Google: &#123;0[Google]&#125;; Taobao: &#123;0[Taobao]&#125;&#39;.format(table))</code></pre>
<ul>
<li><h3 id="List-åˆ—è¡¨-ï¼š"><a href="#List-åˆ—è¡¨-ï¼š" class="headerlink" title="List (åˆ—è¡¨)ï¼š"></a>List (åˆ—è¡¨)ï¼š</h3></li>
</ul>
<p>åˆ—è¡¨æ˜¯pythonä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬å’Œæ•°ç»„ç›¸ä¼¼ï¼Œä¸è¿‡åˆ—è¡¨å…è®¸å­˜åœ¨ä¸åŒç±»å‹çš„å€¼ï¼Œåˆ—è¡¨ç”¨[]å°†å…ƒç´ åŒ…è£…ï¼Œåˆ—è¡¨æ˜¯å¯å˜çš„</p>
<pre><code>list = [1,2,3,4,]
list = [&quot;abc&quot;,&quot;def&quot;]
list = [1,2,3,&quot;abc&quot;,&quot;def&quot;]</code></pre>
<p>åˆ—è¡¨ä¹Ÿå¯ä»¥åƒå­—ç¬¦ä¸²ç±»å‹ä¸€æ ·ä»å°¾éƒ¨å¼€å§‹éå†ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ä¸º-1<br>åˆ—è¡¨çš„æˆªå–ä¹Ÿæ˜¯[]è¿ç®—ç¬¦ï¼Œå·¦é—­å³å¼€åŸåˆ™</p>
<pre><code>print(list[-1])    # def</code></pre>
<p><strong>åˆ—è¡¨å¢åŠ å…ƒç´ ï¼š</strong></p>
<p>åˆ—è¡¨ä¸­ç”¨appendå¢åŠ å…ƒç´ ï¼š</p>
<pre><code>list.append(1)
print(list)    #    [1, 2, 3, &#39;abc&#39;, &#39;def&#39;, 1]</code></pre>
<p>æˆ–è€…ä½¿ç”¨+è¿ç®—ç¬¦å¾€åˆ—è¡¨ä¸­å¢åŠ åˆ—è¡¨</p>
<pre><code>print(list+[1,2,3])        #[2, 3, &#39;abc&#39;, &#39;def&#39;, 1, 2, 3]</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨insert(i,x)å¾€ä¸‹æ ‡iæ’å…¥å…ƒç´ x</p>
<p><strong>åˆ—è¡¨åˆ é™¤å…ƒç´ </strong></p>
<p>ç”¨delæˆ–åˆ é™¤å…ƒç´ ï¼š</p>
<pre><code>del list[0]
print(list)    #    [2, 3, &#39;abc&#39;, &#39;def&#39;, 1]</code></pre>
<p>ç”¨popåˆ é™¤å…ƒç´ ï¼Œé»˜è®¤åˆ é™¤å¹¶æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥åœ¨popæ–¹æ³•ä¸­é™å®šä¸‹æ ‡</p>
<pre><code>x = list.pop()    #def
print(x)    #[2, 3, &#39;abc&#39;]

list.pop(0)
print(list)    #[3, &#39;abc&#39;]</code></pre>
<ul>
<li><h3 id="Tuple-å…ƒç»„-ï¼š"><a href="#Tuple-å…ƒç»„-ï¼š" class="headerlink" title="Tuple (å…ƒç»„)ï¼š"></a>Tuple (å…ƒç»„)ï¼š</h3></li>
</ul>
<p>å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œå…ƒç»„ä¸å¯ä¿®æ”¹ï¼Œå…ƒç»„ç”¨()æ¥å£°æ˜</p>
<pre><code>tuple = (1,2,3,4,5)
print(tuple)    #(1, 2, 3, 4, 5)</code></pre>
<p>å…ƒç»„ä¸åˆ—è¡¨å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å…ƒç»„ä¸­æ²¡æœ‰appendæ·»åŠ å…ƒç´ æ–¹æ³•ï¼Œä¸è¿‡å¯ä»¥ç”¨+è¿ç®—è¿›è¡Œç»„åˆ<br>å¯ä»¥ç”¨list(tuple)å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨</p>
<pre><code>print(tuple+(9,8,7))    #(1, 2, 3, 4, 5, 9, 8, 7)</code></pre>
<ul>
<li><h3 id="åˆ—è¡¨æ¨å¯¼å¼ï¼š"><a href="#åˆ—è¡¨æ¨å¯¼å¼ï¼š" class="headerlink" title="åˆ—è¡¨æ¨å¯¼å¼ï¼š"></a>åˆ—è¡¨æ¨å¯¼å¼ï¼š</h3></li>
</ul>
<p>åˆ—è¡¨æ¨å¯¼å¼å¾ˆå¤§ç®€ä¾¿äº†pythonçš„ç¼–ç¨‹ï¼Œåˆ—è¡¨æ¨å¯¼å¼æœ‰é‚£ä¹ˆä¸€ç‚¹åƒJavaä¸­çš„ é›†åˆ.foreach(lambda) æ–¹æ³•ï¼Œä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼å¯ä»¥å®ç°ä¸€è¡Œä»£ç å®ç°å¤šä¸ªæ“ä½œçš„åŠŸèƒ½</p>
<p>ç”Ÿæˆæ–°çš„åˆ—è¡¨ï¼š</p>
<pre><code>vec = [1,3,5]
print([x*3 for x in vec])    #[3,9,15]
print(vec)    #[1,3,5]</code></pre>
<p>ä½¿ç”¨æ¨å¯¼å¼è¿›è¡Œç­›é€‰ï¼š</p>
<pre><code>print([x for x in vec if x&gt;=3])    #[3,5]</code></pre>
<p>æ¨å¯¼å¼ä¸­ä½¿ç”¨if-elseï¼š</p>
<pre><code>print([x if x%2==0 else -x for x in range(1,10)])    #[-1, 2, -3, 4, -5, 6, -7, 8, -9]</code></pre>
<p>ç”Ÿæˆé›†åˆï¼š</p>
<pre><code>vec = [1,3,5,4,4,4,4,4]
print(&#123;x for x in vec&#125;)    #&#123;1, 3, 4, 5&#125;</code></pre>
<p>ç”ŸæˆåµŒå¥—åˆ—è¡¨ï¼š</p>
<pre><code>print([[x,x**2] for x in vec])    #[[1, 1], [3, 9], [5, 25]]</code></pre>
<p>ç”Ÿæˆå­—å…¸ï¼š</p>
<pre><code>print(&#123;x:x**2 for x in vec&#125;)    #&#123;1, 3, 4, 5&#125;</code></pre>
<p>æ¨å¯¼å¼ä¹Ÿå¯ä»¥è¿›è¡Œå¯¹åˆ—è¡¨çš„åè½¬ã€æ­£åºã€é€†åºè¾“å‡ºï¼š</p>
<pre><code>vec = [1,3,5,4,4,4,4,4]
print([x for x in reversed(vec)])    #[4, 4, 4, 4, 4, 5, 3, 1]
print([x for x in sorted(vec)]) #[1, 3, 4, 4, 4, 4, 4, 5]
print([x for x in reversed(sorted(vec))]) #[5, 4, 4, 4, 4, 4, 3, 1]</code></pre>
<ul>
<li><h3 id="set-é›†åˆ-ï¼š"><a href="#set-é›†åˆ-ï¼š" class="headerlink" title="set (é›†åˆ)ï¼š"></a>set (é›†åˆ)ï¼š</h3></li>
</ul>
<p>é›†åˆæ˜¯æ— åºçš„ï¼Œé›†åˆä½¿ç”¨{}æˆ–set()å‡½æ•°åˆ›å»ºé›†åˆ</p>
<pre><code>set = &#123;1,2,3,4,5,6&#125;
print(set)        #&#123;1, 2, 3, 4, 5, 6&#125;
print(set(&quot;123321&quot;))    #&#123;&#39;1&#39;, &#39;3&#39;, &#39;2&#39;&#125;</code></pre>
<p>æ·»åŠ å…ƒç´ ï¼š</p>
<p>ç”¨addæ–¹æ³•å¾€é›†åˆæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥ç”¨updateæ·»åŠ é›†åˆã€å…ƒç»„ã€åˆ—è¡¨ç­‰    </p>
<pre><code>set.add(4)
print(set)    #&#123;&#39;3&#39;, &#39;2&#39;, 4, &#39;1&#39;&#125;

set.update(&#123;5&#125;)    #&#123;&#39;2&#39;, 4, 5, &#39;3&#39;, &#39;1&#39;&#125;
print(set)</code></pre>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<p>ç”¨removeæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯å¦‚æœé›†åˆä¸­ä¸å­˜åœ¨å…ƒç´ ä¼šæŠ¥é”™</p>
<p>ç”¨discardæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¦‚æœé›†åˆä¸å­˜åœ¨å…ƒç´ ä¹Ÿä¸ä¼šæŠ¥é”™</p>
<pre><code>set.discard(5)
print(set)        #&#123;4, &#39;3&#39;, &#39;2&#39;, &#39;1&#39;&#125;</code></pre>
<p>é›†åˆå¹¶äº¤å·®è¡¥è¿ç®—</p>
<p>set1|set2: å¹¶é›†<br>set1&amp;set2: äº¤é›†<br>set1-set2: å·®é›†<br>set1^set2: ä¸åŒæ—¶å±äºset1å’Œset2çš„</p>
<ul>
<li><h3 id="Dictionary-å­—å…¸-ï¼š"><a href="#Dictionary-å­—å…¸-ï¼š" class="headerlink" title="Dictionary (å­—å…¸)ï¼š"></a>Dictionary (å­—å…¸)ï¼š</h3></li>
</ul>
<p>pythonä¸­å­—å…¸ç”¨{}å£°æ˜ï¼Œé”®å€¼å¯¹ç”¨:åˆ†éš”ï¼Œç”¨{}å£°æ˜ç©ºå­—å…¸ï¼Œå­—å…¸å€¼å¯ä¿®æ”¹</p>
<pre><code>dict = &#123;&quot;1&quot;:1,&quot;2&quot;:2&#125;
print(dict)    &#123;&#39;1&#39;: 1, &#39;2&#39;: 2&#125;
print(dict[&quot;1&quot;])    # 1

dict[&quot;1&quot;] = 100
print(dict)    #&#123;&#39;1&#39;: 100, &#39;2&#39;: 2&#125;</code></pre>
<p>å­—å…¸ä¸­ç”¨updateå¢åŠ ä¸€ä¸ªé”®å€¼å¯¹</p>
<pre><code>dict.update(&#123;&quot;3&quot;:3&#125;)
print(dict)</code></pre>
<p>pop(key)åˆ é™¤é”®ä¸ºkeyçš„å€¼</p>
<pre><code>val = dict.pop(&quot;1&quot;)
print(val)    #100</code></pre>
<p>ç”¨popitemåˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªé”®å€¼å¯¹</p>
<pre><code>d = dict.popitem();
print(d)    #(&#39;3&#39;, 3)</code></pre>
<h2 id="pythonå‡½æ•°"><a href="#pythonå‡½æ•°" class="headerlink" title="pythonå‡½æ•°"></a>pythonå‡½æ•°</h2><p>pythonä¸­ç”¨defå®šä¹‰ä¸€ä¸ªå‡½æ•°</p>
<pre><code>def Method():
print(&quot;éš¾é¡¶&quot;)
Method()    #éš¾é¡¶</code></pre>
<p><strong>å‡½æ•°å‚æ•°ï¼š</strong></p>
<p>å‡½æ•°å‚æ•°ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ <strong>å…³é”®å­—å‚æ•°</strong> ã€<strong>é»˜è®¤å‚æ•°</strong> ã€<strong>ä¸å®šé•¿å‚æ•°</strong>ã€<strong>åŒ¿åå‡½æ•°</strong></p>
<p><strong>å…³é”®å­—å‚æ•°</strong><br>å‡½æ•°è°ƒç”¨å¯ä»¥ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥ç¡®å®šä¼ å…¥çš„å‚æ•°å€¼ï¼Œä½¿ç”¨å…³é”®å­—å‚æ•°æ—¶å…è®¸å‚æ•°é¡ºåºçš„ä¸ä¸€è‡´</p>
<pre><code>def Method(name, age):
print(name, age)

Method(age=21, name=&quot;zl&quot;)        #zl 21</code></pre>
<p><strong>é»˜è®¤å‚æ•°</strong><br>å‡½æ•°ä¸­å¯ä»¥å¯¹å‚æ•°è®¾ç½®é»˜è®¤å€¼</p>
<pre><code>def Method(name,age,address=&quot;guangdong&quot;):
print(name, age,address)    #zl 21 guangdong
Method(age=21, name=&quot;zl&quot;)</code></pre>
<p><strong>ä¸å®šé•¿å‚æ•°</strong><br>ä¸å®šé•¿å‚æ•°ä¸­ï¼Œç”¨*å¯¼å…¥ä¸€ä¸ªå…ƒç»„ï¼Œ**å¯¼å…¥ä¸€ä¸ªå­—å…¸</p>
<pre><code>def Method(*tuple):
print(tuple)
Method(1,2,3,4,5,6,7)    #(1, 2, 3, 4, 5, 6, 7)

def Method(**dict):
print(dict)
Method(a=1,b=2,c=3,d=4);    #&#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4&#125;</code></pre>
<p>ä¸å®šé•¿å‚æ•°åçš„å‚æ•°è¦ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¼ å…¥</p>
<p><strong>åŒ¿åå‡½æ•°</strong><br>åŒ¿åå‡½æ•°ä¸­ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¡¨è¾¾å¼ä¸­ä¼šæä¾›è¿”å›å€¼</p>
<pre><code>Method = lambda val1=1,val2=2:val1+val2
print(Method())</code></pre>
<h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><p>pythonç±»ä¸­ä¸ç”¨åƒc++ã€javaä¸­å£°æ˜å±æ€§ï¼Œå¯ä»¥ç›´æ¥åœ¨æ„é€ æ–¹æ³•def <strong>init</strong>(self)ä½¿ç”¨ï¼Œå±æ€§æˆ–æ–¹æ³•å‰åŠ __ä»£è¡¨ç§æœ‰ï¼Œå¦å¤–ï¼Œåœ¨ç±»ä¸­çš„ä»»ä½•æ–¹æ³•éƒ½è¦åœ¨å‚æ•°åˆ—è¡¨ç¬¬ä¸€ä¸ªåŠ ä¸Šselfï¼Œç±»ä¼¼c++ã€javaçš„thiså…³é”®å­—ï¼Œåœ¨æ–¹æ³•ä¸­è°ƒç”¨å±æ€§æ—¶è¦ä½¿ç”¨self.çš„æ–¹å¼ï¼Œè€Œä¸”æ–°å»ºå¯¹è±¡ä¸ç”¨ä½¿ç”¨newå…³é”®å­—ï¼ŒAclass=Myclass()å³å¯ï¼Œç»§æ‰¿åˆ™ä½¿ç”¨Aclass(Bclass)å£°æ˜</p>
<pre><code>class person:
    name = &quot; &quot;
    age = 0
    sex = &quot; &quot;

def __init__(self, name, age, sex):
    self.name = name
    self.age = age
    self.sex = sex

def show(self):
    return (&quot;&#123;0&#125; is a &#123;1&#125; years old &#123;2&#125;&quot;.format(self.name, self.age, self.sex))

class student(person):
grade = &quot; &quot;

def __init__(self, name, age, sex, grade):
    person.__init__(self, name, age, sex)
    self.grade = grade

def show(self):
    return person.show(self) + &quot; å¤§å­¦ &#123;&#125; å¹´çº§&quot;.format(self.grade)

def print(self):
    print(person.show(self))
    print(super().show())


class graduate(student, person):
    salary = 0

def __init__(self, name, age, sex, grade, salary):
    student.__init__(self, name, age, sex, grade)
    self.salary = salary</code></pre>
<h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><ul>
<li>å†…ç½®å‘½å</li>
<li>å…¨å±€å‘½å</li>
<li>å±€éƒ¨å‘½å</li>
</ul>
<p>è‹¥è¦åœ¨æ–¹æ³•æˆ–ç±»ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä½¿ç”¨globalå…³é”®å­—</p>
<pre><code>count = 1
def change():
    global count
    print(count)
    count = 100

change()
print(count)    #100</code></pre>
<p>è‹¥è¦åœ¨åµŒå¥—æ–¹æ³•ä¸­ä½¿ç”¨å¤–å±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œä½¿ç”¨nonlocalå…³é”®å­—</p>
<pre><code>def outer():
    num = 10
    def inner():
        nonlocal num
        print(num)    #10
        num = &quot;str&quot;
    inner()
    print(num)    #str
outer()</code></pre>
]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç®€ä»‹</title>
    <url>/2020/09/22/Spring/</url>
    <content><![CDATA[<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Spring"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Spring"></a><strong>ä¸€.ä»€ä¹ˆæ˜¯Spring</strong></h2><p>Springè½»é‡çº§çš„javaå¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼ŒSpringçš„æ ¸å¿ƒæ˜¯æ§åˆ¶åè½¬(IOC)å’Œé¢å‘åˆ‡é¢(AOP)ã€‚</p>
<p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€å…·æœ‰æ§åˆ¶åè½¬å’Œé¢å‘åˆ‡é¢çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯IOC"><a href="#ä»€ä¹ˆæ˜¯IOC" class="headerlink" title="ä»€ä¹ˆæ˜¯IOC"></a><strong>ä»€ä¹ˆæ˜¯IOC</strong></h3><p>IOCçš„å®šä¹‰ï¼šæ‰€è°“IOCï¼Œå°±æ˜¯ç”±Spring IOCå®¹å™¨æ¥è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚<br>åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éƒ½æ˜¯ä½¿ç”¨newç›´æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ‰€éœ€è¦çš„å¯¹è±¡æ˜¯ç”±è‡ªå·±å¹¶æ§åˆ¶çš„ï¼Œä½†æ˜¯æœ‰äº†IOCå®¹å™¨åæˆ‘ä»¬æ‰€éœ€è¦çš„å¯¹è±¡ç”±IOCå®¹å™¨è´Ÿè´£ç®¡ç†ï¼Œç”±åŸæ¥çš„ä¸»åŠ¨ç”Ÿæˆå¯¹è±¡ -&gt; ç”±IOCå®¹å™¨ç”Ÿæˆå¯¹è±¡ ï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼æ”¹å˜äº†ï¼Œè¿™å°±æ˜¯æ§åˆ¶åè½¬ã€‚<br>åœ¨IOCä¸­ï¼Œé€šè¿‡ä»¥é…ç½®xmlæ–‡ä»¶æˆ–æ˜¯æ³¨è§£çš„æ–¹å¼å°†æˆ‘ä»¬æ‰€éœ€è¦çš„ç±»å’Œç±»çš„è·¯å¾„è¿›è¡Œè¯´æ˜ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­é€šè¿‡<strong>ä¸Šä¸‹æ–‡æ¨¡å—</strong>è·å–xmlæ–‡ä»¶çš„è·¯å¾„ï¼Œç”±IOCå®¹å™¨æä¾›æ‰€éœ€è¦çš„ç±»<br><a href="https://zhuanlan.zhihu.com/p/64001753">IOCå‚è€ƒé“¾æ¥</a></p>
<h3 id="ä»€ä¹ˆæ˜¯AOP"><a href="#ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯AOP"></a><strong>ä»€ä¹ˆæ˜¯AOP</strong></h3><p>AOPï¼šAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤å’Œå¤„ç†çš„ä¸€ç§æŠ€æœ¯ã€‚ä½†å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¤šä¸ªæ¨¡å—é—´æœ‰æŸäº›åŠŸèƒ½ç›¸åŒçš„ä»£ç ï¼Œä½†æ˜¯æ¨¡å—é—´åˆä¸å­˜åœ¨ä¸€ç§å±‚æ¬¡é—´çš„å…³ç³»ï¼Œè¿™æ—¶å€™åŠŸèƒ½å¦‚æœéœ€è¦æ”¹å˜ï¼Œé‚£ä¹ˆéœ€è¦å¯¹æ¯ä¸ªç±»è¿›è¡Œæ”¹åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å·¥ç¨‹ï¼Œè¿™æ—¶å€™æ€ä¹ˆè§£å†³ä»£ç é‡å¤è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä½¿ç”¨AOPï¼ŒAOPæŠ€æœ¯åˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œè§£å‰–å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†ç±»é—´å…±åŒçš„è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªæ–°çš„å¯é‡ç”¨æ¨¡å—ä¸­ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ã€‚</p>
<h3 id="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"><a href="#AOPçš„å®ç°æ–¹å¼æœ‰ï¼š" class="headerlink" title="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"></a>AOPçš„å®ç°æ–¹å¼æœ‰ï¼š</h3><ul>
<li>é¢„ç¼–è¯‘ï¼šAspectJ</li>
<li>è¿è¡ŒæœŸåŠ¨æ€ä»£ç†ï¼ˆJDKåŠ¨æ€ä»£ç†ã€CGLibåŠ¨æ€ä»£ç†ï¼‰ï¼šSpringAOPã€JbossAOP</li>
</ul>
<h3 id="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#AOPçš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"></a>AOPçš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul>
<li>æ—¥å¿—è®°å½•</li>
<li>æ€§èƒ½ç»Ÿè®¡</li>
<li>å®‰å…¨æ§åˆ¶</li>
<li>äº‹åŠ¡å¤„ç†</li>
<li>å¼‚å¸¸å¤„ç†</li>
</ul>
<h3 id="AOPçš„ä¸»è¦æ„å›¾ï¼š"><a href="#AOPçš„ä¸»è¦æ„å›¾ï¼š" class="headerlink" title="AOPçš„ä¸»è¦æ„å›¾ï¼š"></a>AOPçš„ä¸»è¦æ„å›¾ï¼š</h3><p>å°†æ—¥å¿—è®°å½•ï¼Œæ€§èƒ½ç»Ÿè®¡ï¼Œå®‰å…¨æ§åˆ¶ï¼Œäº‹åŠ¡å¤„ç†ï¼Œå¼‚å¸¸å¤„ç†ç­‰ä»£ç ä»ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­åˆ’åˆ†å‡ºæ¥ï¼Œé€šè¿‡å¯¹è¿™äº›è¡Œä¸ºçš„åˆ†ç¦»ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°†å®ƒä»¬ç‹¬ç«‹åˆ°éæŒ‡å¯¼ä¸šåŠ¡é€»è¾‘çš„æ–¹æ³•ä¸­ï¼Œè¿›è€Œæ”¹å˜è¿™äº›è¡Œä¸ºçš„æ—¶å€™ä¸å½±å“ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä½¿ä¸šåŠ¡é€»è¾‘æ›´åŠ çº¯ç²¹</p>
<h3 id="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"><a href="#AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š" class="headerlink" title="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"></a><strong>AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š</strong></h3><ul>
<li><p>Aspect å£°æ˜ç±»ä¼¼äº Java ä¸­çš„ç±»å£°æ˜ï¼Œåœ¨ Aspect ä¸­ä¼šåŒ…å«ç€ä¸€äº› Pointcut ä»¥åŠç›¸åº”çš„ Adviceã€‚ åŸºäºé…ç½®çš„åˆ‡é¢åªæ”¯æŒsingletonæ¨¡å¼</p>
</li>
<li><p>Joint pointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šè¡¨ç¤ºåœ¨ç¨‹åºä¸­æ˜ç¡®å®šä¹‰çš„ç‚¹ï¼Œå…¸å‹çš„åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ï¼Œå¯¹ç±»æˆå‘˜çš„è®¿é—®ä»¥åŠå¼‚å¸¸å¤„ç†ç¨‹åºå—çš„æ‰§è¡Œç­‰ç­‰ï¼Œå®ƒè‡ªèº«è¿˜å¯ä»¥åµŒå¥—å…¶å®ƒ joint pointã€‚</p>
</li>
<li><p>Pointcutï¼ˆåˆ‡ç‚¹ï¼‰ï¼šè¡¨ç¤ºä¸€ç»„ joint pointï¼Œè¿™äº› joint point æˆ–æ˜¯é€šè¿‡é€»è¾‘å…³ç³»ç»„åˆèµ·æ¥ï¼Œæˆ–æ˜¯é€šè¿‡é€šé…ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹å¼é›†ä¸­èµ·æ¥ï¼Œå®ƒå®šä¹‰äº†ç›¸åº”çš„ Advice å°†è¦å‘ç”Ÿçš„åœ°æ–¹ã€‚</p>
</li>
<li><p>Adviceï¼ˆå¢å¼ºï¼‰ï¼šAdvice å®šä¹‰äº†åœ¨ Pointcut é‡Œé¢å®šä¹‰çš„ç¨‹åºç‚¹å…·ä½“è¦åšçš„æ“ä½œï¼Œæœ‰beforeã€afterã€after-returingã€after-throwingã€aroundäº”ç§å¢å¼ºã€‚</p>
</li>
<li><p>Introductionï¼ˆå¼•å…¥ï¼‰ï¼šåœ¨ä¸ä¿®æ”¹ç±»ä»£ç çš„å‰æä¸‹ï¼Œä¸ºç±»æ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚<br>å…è®¸ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡</p>
</li>
<li><p>Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šç»‡å…¥ Advice çš„ç›®æ ‡å¯¹è±¡ã€‚</p>
</li>
<li><p>AOP Proxyï¼ˆAOPä»£ç†ï¼‰ AOPæ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨æ¥å®ç°åˆ‡é¢å¥‘çº¦</p>
</li>
<li><p>Weavingï¼ˆç»‡å…¥ï¼‰ï¼šå°† Aspect å’Œå…¶ä»–å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åˆ›å»º Adviced object çš„è¿‡ç¨‹</p>
</li>
</ul>
<h3 id="ä¸ªäººç†è§£ï¼š"><a href="#ä¸ªäººç†è§£ï¼š" class="headerlink" title="ä¸ªäººç†è§£ï¼š"></a><strong>ä¸ªäººç†è§£ï¼š</strong></h3><ul>
<li><p>Joint pointï¼šæ˜¯æ‰€æœ‰å¯èƒ½è¢«ç»‡å…¥åˆ°Adviceä¸­çš„ç‚¹,ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯è¿æ¥ç‚¹</p>
</li>
<li><p>Pointcutï¼šæä¾›ä¸€ç»„è§„åˆ™ï¼Œå°†ç¬¦åˆè§„åˆ™çš„ä¸€ç»„Joint pointç»‡å…¥åˆ°Adviceä¸­</p>
</li>
<li><p>Adviceï¼šAdviceè¯´æ˜äº†Pointcutä¸­Joint Pointä¸Šå°†è¦æ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œï¼Œå³ä¸€ä¸²ä»£ç </p>
</li>
<li><p>Aspectï¼šåˆ‡é¢æ˜¯Adviceå’ŒPointcutçš„ç»„åˆï¼Œæè¿°äº†åˆ‡ç‚¹çš„è¡Œä¸º</p>
</li>
</ul>
<h2 id="äºŒ-Springçš„ç»„æˆ"><a href="#äºŒ-Springçš„ç»„æˆ" class="headerlink" title="äºŒ.Springçš„ç»„æˆ"></a><strong><em>äºŒ.Springçš„ç»„æˆ</em></strong></h2><p><img src="/2020/09/22/Spring/SpringFramworkRuntime.png" alt="framework"></p>
<p><a href="https://www.cnblogs.com/jpwz/p/10556012.html">å‚è€ƒé“¾æ¥</a></p>
<p>springç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œä¸‹é¢ä»‹ç»springæ¯ä¸ªæ¨¡å—åŠå…¶åŠŸèƒ½</p>
<h3 id="Core-Container-æ ¸å¿ƒå®¹å™¨"><a href="#Core-Container-æ ¸å¿ƒå®¹å™¨" class="headerlink" title="Core Container æ ¸å¿ƒå®¹å™¨"></a><strong>Core Container æ ¸å¿ƒå®¹å™¨</strong></h3><p>Springæ ¸å¿ƒå®¹å™¨å»ºç«‹åœ¨Beansã€Coreã€Contextã€SpElæ¨¡å—ä¹‹ä¸Š</p>
<p>Beansæ¨¡å—æä¾›äº†BeanFactoryï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç»å…¸ä½“ç°ï¼Œæ‰€æœ‰è¢«Springç®¡ç†çš„å¯¹è±¡éƒ½ç§°ä¸ºBeans</p>
<p>Coreæ¨¡å—æä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬IOCå’Œã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰åŠŸèƒ½</p>
<p>Contextä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨Beanså’ŒCoreæ¨¡å—åŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªæ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹å¼ï¼Œæ˜¯è®¿é—®å®šä¹‰å’Œé…ç½®ä¸­Beanså¯¹è±¡çš„åª’ä»‹ï¼ŒApplicationContextæ¥å£é€šè¿‡xmlæ–‡æœ¬çš„è·¯å¾„è®¿é—®é…ç½®ä¸­çš„beanså¯¹è±¡ã€‚</p>
<p>SpElæ˜¯Springè¡¨è¾¾å¼è¯­è¨€ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€å»æ”¯æŒè¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡</p>
<h3 id="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"><a href="#é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—" class="headerlink" title="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"></a><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—</strong></h3><p>AOPæ¨¡å—æä¾›äº†ç¬¦åˆAOPè¦æ±‚çš„é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå…è®¸å®šä¹‰æ–¹æ³•æ‹¦æˆªå™¨å’Œåˆ‡å…¥ç‚¹ï¼Œå°†ä»£ç æŒ‰ç…§åŠŸèƒ½è¿›è¡Œåˆ†ç¦»ï¼Œæ˜¯çº¯Javaå®ç°</p>
<p>Aspectsæ¨¡å—æä¾›äº†AspectJçš„é›†æˆåŠŸèƒ½ï¼ŒAspectJæ˜¯ä¸€ä¸ªåŸºäºJavaè¯­è¨€çš„AOPæ¡†æ¶</p>
<p>Instrumentæ¨¡å—æä¾›äº†ç±»æ¤å…¥æ”¯æŒå’Œç±»åŠ è½½å™¨çš„å®ç°ï¼Œå¯åœ¨ç‰¹å®šçš„åº”ç”¨æœåŠ¡å™¨ä¸­ä½¿ç”¨</p>
<h3 id="æ•°æ®è®¿é—®æ¨¡å—"><a href="#æ•°æ®è®¿é—®æ¨¡å—" class="headerlink" title="æ•°æ®è®¿é—®æ¨¡å—"></a><strong>æ•°æ®è®¿é—®æ¨¡å—</strong></h3><p>JDBCã€DAOæ¨¡å—ï¼šJDBCæ¨¡å—æ˜¯å¯¹JDBCçš„æŠ½è±¡ï¼Œå‡å°‘JDBCç¼–ç¨‹çš„ä»£ç é‡</p>
<p>ORMæ¨¡å—ï¼šå°è£…äº†å¤§é‡çš„å¯¹è±¡å…³ç³»æ˜ å°„çš„API</p>
<h3 id="Webæ¨¡å—"><a href="#Webæ¨¡å—" class="headerlink" title="Webæ¨¡å—"></a><strong>Webæ¨¡å—</strong></h3><p>WebSocketæ¨¡å—ï¼šæä¾›WebScoketã€SockJSçš„å®ç°ï¼Œä»¥åŠå¯¹STOMPçš„æ”¯æŒ</p>
<p>Servletæ¨¡å—ï¼šä¹Ÿç§°ä¸ºSpring-webmvcæ¨¡å—ï¼ŒåŒ…å«äº†Springçš„MVCã€‚</p>
<p>Webæ¨¡å—ï¼šæä¾›åŸºæœ¬çš„Webå¼€å‘é›†æˆç‰¹æ€§ï¼Œæ¯”å¦‚å¤šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€ä½¿ç”¨Servletç›‘å¬å™¨æ¥åˆå§‹åŒ–Iocå®¹å™¨ä»¥åŠWebåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p>
<p>Portletæ¨¡å—ï¼šæä¾›äº†å¯¹åœ¨Portletç¯å¢ƒä¸­ä½¿ç”¨MVCçš„æ”¯æŒã€‚</p>
<!-- åº•å±‚æ˜¯Springçš„æ ¸å¿ƒå®¹å™¨ï¼ŒåŒ…æ‹¬Beanså®¹å™¨ã€ä¸Šä¸‹æ–‡ã€Springè¡¨è¾¾å¼å’Œæ ¸å¿ƒå·¥å…·ï¼Œæ˜¯Springæ¡†æ¶æœ€åŸºæœ¬çš„æ”¯æ’‘
ä¸­é—´å±‚æ˜¯Springçš„åŠŸèƒ½ç»„ä»¶
ä¸Šå±‚æ˜¯Springçš„å…·ä½“ä½¿ç”¨ -->]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>IOC</tag>
        <tag>AOP</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring AOPçš„ä¸¤ç§å®ç°æ–¹å¼ï¼ˆXMLã€AspectJï¼‰</title>
    <url>/2020/09/25/AOP/</url>
    <content><![CDATA[<h2 id="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"><a href="#åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š" class="headerlink" title="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"></a>åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š</h2><p>è¦ä½¿ç”¨é…ç½®å®ç°AOPç¼–ç¨‹ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­ä½¿ç”¨<a href="aop:config">aop:config</a>æ¥å£°æ˜ï¼Œè¿™ç§å£°æ˜æ–¹å¼ä½¿ç”¨äº†å¤§é‡çš„è‡ªåŠ¨ä»£ç†æ–¹å¼<br><strong>æ³¨ï¼šç¯å¢ƒå¯èƒ½ä¼šç¼ºå°‘å¿…è¦çš„åŒ…ï¼Œå¦‚aopalliance.jarã€aspectweaver.jar</strong></p>
<p>åœ¨<a href="aop:config">aop:config</a>ä¸­ä½¿ç”¨&lt;aop:aspect id=â€â€ ref=â€â€&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡é¢ï¼Œ&lt;aop:pointcut id expression/&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œ&lt;aop:before(or other) method=â€â€ pointcut=â€â€&gt;é…ç½®ä¸€ä¸ªå¢å¼ºï¼Œè¿™ä¸‰ä¸ªå°±ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„åˆ‡é¢</p>
<p>ä¸‹é¢ä»‹ç»å¦‚ä½•é…ç½®ä¸€ä¸ªåˆ‡é¢å’Œåˆ‡é¢ä¸­çš„å‡ ç§å¢å¼º</p>
<p>å®šä¹‰ä¸€ä¸ªä¸šåŠ¡ç±»ServiceClassï¼š</p>
<pre><code>@Component
public class ServiceClass &#123;
    public void service()&#123;
        System.out.println(&quot;this is service&quot;);
    &#125;
&#125;</code></pre>
<p>å®šä¹‰ä¸€ä¸ªMyAspectåˆ‡é¢ç±»ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶newcontext.xmlï¼Œå…¶ä¸­ï¼ŒMyAspectç±»ä½¿ç”¨Componentæ³¨è§£é…ç½®</p>
<h3 id="before"><a href="#before" class="headerlink" title="before"></a>before</h3><p><strong>beforeæ˜¯ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<pre><code>@Component
public class MyAspect &#123;
    public void before()&#123;
        System.out.println(&quot;MyAspect&#39;s before&quot;);
    &#125;
&#125;</code></pre>
<p>newcontext.xmlæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;demo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:before&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>å…¶ä¸­ï¼Œåˆ‡ç‚¹ä¸­çš„expressionçš„å«ä¹‰ä¸ºï¼šåˆ‡ç‚¹ä¸ºnewdemo.ServiceClassè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•</p>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        serviceClass.service();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service</p>
<h3 id="after"><a href="#after" class="headerlink" title="after"></a>after</h3><p><strong>ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•è¿›è¡Œçš„æ“ä½œï¼Œé€šå¸¸ç”¨äºé‡Šæ”¾èµ„æº</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ afteræ–¹æ³•ï¼š</p>
<pre><code>public void after()&#123;
        System.out.println(&quot;MyAspect&#39;s after&quot;);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after&gt;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after</p>
<h3 id="after-returing"><a href="#after-returing" class="headerlink" title="after-returing"></a>after-returing</h3><p><strong>after-returingæ˜¯ä¸šåŠ¡æ–¹æ³•è¿”å›å‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ after-returningæ–¹æ³•ï¼š</p>
<pre><code>public void afterReturning()&#123;
        System.out.println(&quot;MyAspect&#39;s afterReturning&quot;);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after-returning method=&quot;afterReturning&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after-returning&gt;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterReturning</p>
<h3 id="after-throwing"><a href="#after-throwing" class="headerlink" title="after-throwing"></a>after-throwing</h3><p><strong>after-throwingæ˜¯ä¸šåŠ¡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åˆ‡é¢ç±»æ·»åŠ afterthrowingæ–¹æ³•ï¼š</p>
<pre><code>public void afterThrowing()&#123;
    System.out.println(&quot;MyAspect&#39;s afterThrowing&quot;);
&#125;</code></pre>
<p>åœ¨ä¸šåŠ¡ç±»ServiceClassçš„serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<pre><code>public void service() throws Exception&#123;
    System.out.println(&quot;this is service&quot;);
    throw new Exception();
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after-throwing method=&quot;afterThrowing&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after-throwing&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        try &#123;
            serviceClass.service();
        &#125;
        catch (Exception e)&#123;
        &#125;
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterThrowing</p>
<h3 id="around"><a href="#around" class="headerlink" title="around"></a>around</h3><p><strong>aroundï¼šAdviceæœ€å¼ºæ“ä½œï¼Œå¯ä»¥ç»¼åˆå‰é¢å››ç§advice</strong></p>
<p>aroundæ–¹æ³•å¿…é¡»æœ‰Objectè¿”å›å€¼ï¼Œä¸”ç¬¬ä¸€ä¸ªå½¢å‚å¿…é¡»ä¸ºProceedingJoinPointç±»å‹ï¼Œaroundæ—¢å¯ä»¥åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹å‰å¢å¼ºåŠ¨ä½œï¼Œä¹Ÿèƒ½åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹åè¿›è¡Œå¢å¼ºçš„æ‰§è¡Œï¼Œaroundå¢å¼ºå¯ä»¥å†³å®šä¸šåŠ¡æ–¹æ³•åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œåœ¨aroundæ–¹æ³•ä½“å†…ï¼Œåªæœ‰è°ƒç”¨ProceedingJoinPointå‚æ•°çš„procedd()æ–¹æ³•æ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ aroundæ–¹æ³•ï¼š</p>
<pre><code>public Object around(ProceedingJoinPoint pjp)&#123;
    Object object = null;
    try&#123;
        object = pjp.proceed();
        System.out.println(&quot;MyAspect&#39;s around&quot;);
    &#125;
    catch (Throwable throwable) &#123;

    &#125;
    return object;
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;newdemo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:around&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
    serviceClass.service();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>this is service<br>MyAspectâ€™s around</p>
<p>æ”¹å˜aroundæ–¹æ³•ä¸­ä¸¤æ¡è¯­å¥çš„ä½ç½®ï¼š</p>
<pre><code>System.out.println(&quot;MyAspect&#39;s around&quot;);
object = pjp.proceed();</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s around<br>this is service</p>
<p>è¯´æ˜åªæœ‰åœ¨æ‰§è¡ŒProceedingJoinPointå¯¹è±¡çš„proceedæ–¹æ³•åï¼Œæ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<ul>
<li>advice-parametersï¼šå¯ä»¥å¾€å¢å¼ºæ–¹æ³•ä¸­ä¼ å…¥ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œåœ¨åˆ‡å…¥ç‚¹é…ç½®å¥½å‚æ•°ç±»å‹å’Œå±æ€§åå³å¯</li>
</ul>
<p><strong>ä¸‹é¢ç”¨aroundæ¥æ¨¡æ‹Ÿå‰é¢çš„advice</strong></p>
<p>åˆ‡é¢ç±»ï¼š</p>
<pre><code>@Component
public class MyAspect &#123;
    public Object around(ProceedingJoinPoint pjp)&#123;
        Object object = null;
        System.out.println(&quot;before&quot;);       //æ­¤æ—¶è¿˜æœªæ‰§è¡Œpjpçš„proceedæ–¹æ³•ï¼Œä¸šåŠ¡æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°adviceå¢å¼º
        try&#123;
            object = pjp.proceed();
        &#125;
        catch (Throwable throwable) &#123;       //pjp.proceed()æ–¹æ³•è‹¥æ•æ‰å¼‚å¸¸ï¼Œåˆ™è¯´æ˜ä¸šåŠ¡æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸
        &#125;
        finally &#123;
            System.out.println(&quot;after&quot;);    //æ­¤æ—¶æ•æ‰å¼‚å¸¸ï¼Œä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°afterå¢å¼º
        &#125;
        System.out.println(&quot;after throwing&quot;);   //è¿™å°±æ¨¡æ‹Ÿafter-throwingå¢å¼º
        return object;
    &#125;
&#125;</code></pre>
<p>é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;newdemo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:around&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        try &#123;
            serviceClass.service();
        &#125;
        catch (Exception e)&#123;
        &#125;
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>this is service<br>after<br>after throwing</p>
<h3 id="advice-parameters"><a href="#advice-parameters" class="headerlink" title="advice-parameters"></a>advice-parameters</h3><p>åœ¨pointcutçš„expressionä¸­æŒ‡å®šæ–¹æ³•å‚æ•°ï¼Œå¯ä»¥è·å–ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä»è€Œä½¿å¢å¼ºæ–¹æ³•ä¸­èƒ½ä½¿ç”¨è¿™äº›å‚æ•°</p>
<p>ServiceClassç±»ï¼š</p>
<pre><code>@Component
public class ServiceClass &#123;
    public void parametersService(String name,int age)&#123;
        System.out.println(&quot;parametersService&#39;s&quot;+name+&quot; &quot;+age);
    &#125;
&#125;</code></pre>
<p>åˆ‡é¢ç±»ä¸­æ·»åŠ ParametersMethodæ–¹æ³•ï¼š</p>
<pre><code>public void ParametersMethod(String name,int age)&#123;
    System.out.println(&quot;ParametersMethod&#39;s&quot;+name+&quot; &quot;+age);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:before method=&quot;ParametersMethod&quot; pointcut=&quot;execution(* newdemo.ServiceClass.parametersService(String,int)) and args(name,age)&quot;&gt;&lt;/aop:before&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        serviceClass.parametersService(&quot;zzzz&quot;,21);
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>ParametersMethodâ€™szzzz 21<br>parametersServiceâ€™szzzz 21</p>
<h3 id="Introduction-å¼•å…¥"><a href="#Introduction-å¼•å…¥" class="headerlink" title="Introduction å¼•å…¥"></a>Introduction å¼•å…¥</h3><p>Introductionå…è®¸å°†ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡</p>
<p>ç”± &lt;aop: declare-parents&gt;å…ƒç´ å£°æ˜ </p>
<p>å®šä¹‰ä¸€ä¸ªMyInterfaceæ¥å£</p>
<pre><code>public interface MyInterface &#123;
    public void show();
&#125;</code></pre>
<p>æ¥å£å®ç°ç±»MyInterfaceImpl</p>
<pre><code>public class MyInterfaceImpl implements MyInterface&#123;
    @Override
    public void show() &#123;
        System.out.println(&quot;this is my interface&quot;);
    &#125;
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>aop:declare-parents types-matching=&quot;newdemo.ServiceClass&quot; implement-interface=&quot;newdemo.MyInterface&quot;
                             default-impl=&quot;newdemo.MyInterfaceImpl&quot;&gt;&lt;/aop:declare-parents&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        MyInterface myInterface = (MyInterface)applicationContext.getBean(&quot;serviceClass&quot;);
        myInterface.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>this is my interface</p>
<p>introductionçš„ä½œç”¨æ˜¯å¼ºè¡Œä¸ºServiceClassæ·»åŠ ä¸€ä¸ªçˆ¶ç±»ï¼Œå³MyInterfaceæ¥å£ï¼Œç”±ServiceClassä½œä¸ºæ¥å£çš„å®ç°ç±»</p>
<h2 id="åŸºäº-AspectJæ³¨è§£çš„AOPå®ä¾‹"><a href="#åŸºäº-AspectJæ³¨è§£çš„AOPå®ä¾‹" class="headerlink" title="åŸºäº@AspectJæ³¨è§£çš„AOPå®ä¾‹"></a>åŸºäº@AspectJæ³¨è§£çš„AOPå®ä¾‹</h2><p>@AspectJæ˜¯é¢„ç¼–è¯‘çš„AOPå®ç°æ–¹å¼ï¼Œ@AspecJçš„é£æ ¼ç±»ä¼¼çº¯javaæ³¨è§£çš„æ™®é€šjavaç±»ï¼Œ@AspectJæ˜¯æŒ‡æ˜aspectsçš„å¦ä¸€ç§é£æ ¼ï¼ŒåƒåŸºäºæ³¨è§£çš„IOCä¸€æ ·ï¼ŒåŸºäºæ³¨è§£çš„é…ç½®èƒ½è®©å¼€å‘å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚</p>
<p>å¯¹@AspectJçš„æ”¯æŒå¯ä»¥ä½¿ç”¨XMLæˆ–javaæ³¨é‡Šé£æ ¼çš„é…ç½®ï¼Œä¸¤ç§æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸€æ ·çš„</p>
<ul>
<li><p>ä½¿ç”¨XMlï¼Œè¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š</p>
<p>  &lt;aop: aspectj-autoproxy&gt;&lt;/aop: aspectj-autoproxy&gt;</p>
</li>
<li><p>javaæ³¨é‡Šé£æ ¼çš„é…ç½®</p>
</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ³¨é‡Š</p>
<pre><code>@Configuration
@EnableAspectJAutoProxy</code></pre>
<p><strong>ä¸‹é¢ä½¿ç”¨XMLæ–‡ä»¶é…ç½®çš„æ–¹å¼ã€‚</strong></p>
<p>å®ç°ä¸€ä¸ªä¸šåŠ¡ç±»ServiceCLass</p>
<pre><code>public class ServiceCLass &#123;
        public void service()&#123;
        System.out.println(&quot;service&quot;);
    &#125;
&#125;</code></pre>
<p>ç”Ÿæˆé…ç½®æ–‡ä»¶AspectJContext.xmlï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;NewAspectJ&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
&lt;/beans&gt;</code></pre>
<h3 id="Aspect"><a href="#Aspect" class="headerlink" title="@Aspect"></a>@Aspect</h3><p>æ‹¥æœ‰@Aspectçš„ä»»ä½•beanéƒ½ä¼šè¢«Springè‡ªåŠ¨è¯†åˆ«å¹¶åº”ç”¨</p>
<p>ç”¨@Aspectæ³¨è§£çš„ç±»å¯ä»¥æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰åˆ‡å…¥ç‚¹ã€é€šçŸ¥ã€å¼•å…¥ç­‰</p>
<p>@Aspectè¦å’Œ@Componentä¸€èµ·ä½¿ç”¨ï¼Œ@Componentæ˜¯è‡ªåŠ¨é…ç½®ä¸€ä¸ªbeanï¼Œè€Œ@Aspectæ˜¯è‡ªåŠ¨å°†è¿™ä¸ªbeané…ç½®ä¸ºåˆ‡é¢ï¼ˆæˆ–è€…åœ¨XMLä¸­æ‰‹åŠ¨é…ç½®beanï¼‰</p>
<p>å®šä¹‰åˆ‡é¢ç±»ï¼š</p>
<pre><code>@Component
@Aspect
public class MyAspect &#123;
&#125;</code></pre>
<h3 id="Pointcut"><a href="#Pointcut" class="headerlink" title="@Pointcut"></a>@Pointcut</h3><p>@Pointcut = è¡¨è¾¾å¼+ç­¾å</p>
<p><strong>@Pointcutçš„è¡¨è¾¾å¼æ ‡ç­¾æœ‰10ä¸­ï¼š</strong></p>
<ul>
<li>executionï¼šç”¨äºåŒ¹é…æ–¹æ³•æ‰§è¡Œçš„è¿æ¥ç‚¹</li>
<li>withinï¼šç”¨äºåŒ¹é…æŒ‡å®šç±»å‹å†…çš„æ–¹æ³•æ‰§è¡Œ</li>
<li>thisï¼šç”¨äºåŒ¹é…å½“å‰AOPä»£ç†å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯AOPä»£ç†å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±å¯èƒ½åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯ç›®æ ‡å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±ä¸åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸ºæŒ‡å®šç±»å‹çš„æ‰§è¡Œæ–¹æ³•</li>
<li>@withinï¼šç”¨äºåŒ¹é…æ‰€ä»¥æŒæœ‰æŒ‡å®šæ³¨è§£ç±»å‹å†…çš„æ–¹æ³•</li>
<li>@targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼Œå…¶ä¸­ç›®æ ‡å¯¹è±¡æŒæœ‰æŒ‡å®šçš„æ³¨è§£</li>
<li>@argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ‰§è¡Œ</li>
<li>@annotationï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œæ–¹æ³•æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ–¹æ³•</li>
<li>beanï¼šSpringAOPæ‰©å±•çš„ï¼ŒAspectJæ²¡æœ‰å¯¹äºæŒ‡ç¤ºç¬¦ï¼Œç”¨äºåŒ¹é…ç‰¹å®šåç§°çš„Beanå¯¹è±¡çš„æ‰§è¡Œæ–¹æ³•</li>
</ul>
<p>åˆ‡å…¥ç‚¹ä½¿ç”¨@Pointcutå¯¹æ–¹æ³•è¿›è¡Œæ³¨è§£ï¼Œæ–¹æ³•è¿”å›ç±»å‹å¿…é¡»ä¸ºvoidï¼Œ@Pointcutå®é™…ä¸Šæ˜¯å°†æ–¹æ³•åä½œä¸ºåˆ‡å…¥ç‚¹çš„ä¸€ä¸ªç­¾åï¼Œå³æ–¹æ³•å=åˆ‡å…¥ç‚¹id</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ pointcutç­¾å</p>
<pre><code>@Component
@Aspect
public class MyAspect &#123;

    @Pointcut(&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;)
    public void pointcut()&#123;&#125;

&#125;</code></pre>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„</p>
<pre><code>&lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;/&gt;</code></pre>
<p>Pointcutå®šä¹‰æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨&amp;&amp;ã€||ã€ï¼è¿™ä¸‰ç§è¿ç®—</p>
<pre><code>@Pointcut(&quot;within(NewAspectJ.ServiceCLass)&quot;)
public void pointcut1()&#123;&#125;
@Pointcut(&quot;execution(public * *(..))&quot;)
public void pointcut2()&#123;&#125;
@Pointcut(&quot;pointcut1()&amp;&amp;pointcut2()&quot;)
public void pointcut3()&#123;&#125;</code></pre>
<p>pointcut3è¡¨ç¤ºåˆ‡ç‚¹ä¸ºNewAspect.ServiceClassç±»ä¸­çš„æ‰€æœ‰publicæ–¹æ³•</p>
<h3 id="Adivce"><a href="#Adivce" class="headerlink" title="@Adivce"></a>@Adivce</h3><ul>
<li>@Before</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<pre><code>@Before(&quot;pointcut()&quot;)
public void before()&#123;
    System.out.println(&quot;before&quot;);
&#125;</code></pre>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ï¼š</p>
<pre><code>&lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:before&gt;</code></pre>
<p>åœ¨æµ‹è¯•ç±»TestClassä¸­æµ‹è¯•ï¼Œè¾“å‡º</p>
<p>before<br>service</p>
<p>å…¶ä»–adviceåŒç†</p>
<ul>
<li>@AfterReturning</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°è¿”å›çš„å®é™…å€¼ï¼Œå¯ä½¿ç”¨@AfterReturningç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨ä¸šåŠ¡ç±»ä¸­æ·»åŠ serviceResultæ–¹æ³•ï¼Œç”¨äºè¿”å›resultå€¼</p>
<pre><code>public String serviceResult()&#123;
    return &quot;success&quot;;
&#125;</code></pre>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ–°çš„åˆ‡ç‚¹</p>
<pre><code>@Pointcut(&quot;execution(* NewAspectJ.ServiceClass.serviceResult(..))&quot;)
public void pointcut4()&#123;&#125;</code></pre>
<p>åˆ‡é¢ç±»ä¸­æ·»åŠ AfterReturningæ–¹æ³•</p>
<pre><code>@AfterReturning(&quot;pointcut4(),returning = &quot;Result&quot;&quot;)
public void AfterReturning(String Result)&#123;
    System.out.println(&quot;AfterReturning &#39;s &quot; + Result);
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>AfterReturning &#39;s success</code></pre>
<ul>
<li>@AfterThrowing</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä½¿ç”¨åƒ@AfterReturningé‚£æ ·çš„ç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸</p>
<pre><code>public void service() throws Exception&#123;
        System.out.println(&quot;service&quot;);
        throw new Exception(&quot;failed&quot;);
&#125;</code></pre>
<p>åˆ‡é¢ç±»æ·»åŠ AfterThrowingæ–¹æ³•</p>
<pre><code>@AfterThrowing(value = &quot;pointcut()&quot;,throwing = &quot;e&quot;)
public void AfterThrowing(Exception e)&#123;
    System.out.println(e.getMessage());
&#125;</code></pre>
<p>ç»“æœï¼š</p>
<pre><code>before
service
failed</code></pre>
<ul>
<li><p>@After<br>ä¸aop::afterç›¸åŒ</p>
</li>
<li><p>@Around<br>ä¸aop:aroundç›¸åŒ</p>
</li>
<li><p>@ç»™adviceä¼ é€’å‚æ•°</p>
</li>
</ul>
<p>åœ¨adviceä¸­ä½¿ç”¨advice(pointcut&amp;&amp;args)çš„æ–¹å¼å°†å‚æ•°ä¼ ç»™adviceï¼Œè‹¥æœ‰é‡è½½æ–¹æ³•ï¼Œåˆ™ä¼šè‡ªåŠ¨æ ¹æ®å‚æ•°åŒ¹é…</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨Aroundä¸­çš„ProceedingJoinPointå¯¹è±¡çš„getArgsæ–¹æ³•è¿”å›å‚æ•°æ•°ç»„</p>
<p>ä¸šåŠ¡ç±»ä¸­é‡è½½serviceæ–¹æ³•ï¼š</p>
<pre><code>public void service(String users,String passwords)&#123;
    System.out.println(&quot;service &#39;s &quot; + users + &quot; &quot;+passwords);
&#125;</code></pre>
<p>åˆ‡é¢ç±»å®ç°aroundçš„adviceï¼š</p>
<pre><code>@Around(&quot;pointcut()&amp;&amp;args(users,passwords)&quot;)
public Object Around(ProceedingJoinPoint pjp,String users,String passwords)&#123;
    Object object = null;
    System.out.println(&quot;Around&#39;s &quot; + users +&quot; &quot; + passwords);
    try&#123;
        object = pjp.proceed();
        Object[] objects = pjp.getArgs();
        System.out.println(&quot;ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°&quot;);
        System.out.println(Arrays.toString(objects));
    &#125;
    catch (Throwable e)&#123;

    &#125;
    return object;
&#125;</code></pre>
<p>æµ‹è¯•ç»“æœï¼š</p>
<p>Aroundâ€™s 123 123<br>before<br>service â€˜s 123 123<br>ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°<br>[123, 123]</p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Springä¹‹æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</title>
    <url>/2020/09/24/IOC/</url>
    <content><![CDATA[<h2 id="IOCæ§åˆ¶åè½¬ï¼š"><a href="#IOCæ§åˆ¶åè½¬ï¼š" class="headerlink" title="IOCæ§åˆ¶åè½¬ï¼š"></a><strong>IOCæ§åˆ¶åè½¬ï¼š</strong></h2><h3 id="IOCæ¡ˆä¾‹ï¼š"><a href="#IOCæ¡ˆä¾‹ï¼š" class="headerlink" title="IOCæ¡ˆä¾‹ï¼š"></a><strong>IOCæ¡ˆä¾‹ï¼š</strong></h3><p>æ¥å£UserInterfaceï¼š</p>
<pre><code>public interface UserInterface &#123;
    public void use();
&#125;</code></pre>
<p>æ¥å£UserInterfaceçš„å®ç°ç±» UserImplï¼š</p>
<pre><code>public class UserImpl implements UserInterface&#123;
@Override
    public void use() &#123;
        System.out.println(&quot;User using!&quot;);
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç±» TextClassï¼š</p>
<!--     import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext; -->

<pre><code>public class TextClass &#123;
    public static void main(String[] args) &#123;
        UserInterface userInterface = new UserImpl();
        userInterface.use();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>User usingï¼</p>
<p>åœ¨ä½¿ç”¨IOCä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨newæ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨IOCä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨newæ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®XMLæ–‡ä»¶ï¼ŒæŠŠæ‰€éœ€è¦çš„ç±»å†™å…¥XMLæ–‡ä»¶ä¸­ï¼Œç”±Springæ¥ç®¡ç†å’Œè·å–å¯¹è±¡</p>
<p>å°†TextCLassä¸­ç¨‹åºæ”¹ä¸€ä¸‹ï¼š</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);
        UserInterface userInterface = (UserInterface)applicationContext.getBean(&quot;UserId&quot;);
        userInterface.use();
    &#125;
&#125;</code></pre>
<p>åŒæ—¶åˆ›å»ºApplicationContext.XMLæ–‡ä»¶ï¼Œå¹¶é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­<strong>ç”±ä¸»åŠ¨åˆ›å»ºç±»</strong>è½¬å˜ä¸º<strong>é€šè¿‡Springç®¡ç†å’Œè·å–ç±»</strong>ï¼Œè¿™ä¸€è½¬å˜ç§°ä¸ºæ§åˆ¶åè½¬</p>
<hr>
<h2 id="DIä¾èµ–æ³¨å…¥"><a href="#DIä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¾èµ–æ³¨å…¥"></a><strong>DIä¾èµ–æ³¨å…¥</strong></h2><p>åœ¨IOCä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æ§åˆ¶åè½¬ï¼Œäº§ç”Ÿäº†ä¾èµ–ï¼Œä½†åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ¨æ€åœ°å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–ç±»ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°ä¾èµ–æ³¨å…¥DIï¼Œè¦æƒ³å®ç°ä¾èµ–æ³¨å…¥ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨éœ€è¦å…¶ä»–ç±»çš„æŸä¸ªå¯¹è±¡ä¸­æä¾›ä¸€ç§æ¸ é“ï¼ˆæ–¹æ³•ï¼‰æ¥å°†ä¾èµ–æ³¨å…¥ï¼Œæœ€ååœ¨XMLæ–‡ä»¶ä¸­è¿›è¡Œç›¸åº”çš„é…ç½®</p>
<p>ä¾èµ–æ³¨å…¥é€šå¸¸æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<ul>
<li><p>Setteræ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ„é€ æ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ¥å£æ³¨å…¥</p>
</li>
</ul>
<p>ä¸‹é¢ä¸»è¦ä»‹ç»å‰ä¸¤ç§æ–¹æ³•</p>
<h3 id="DIæ¡ˆä¾‹ï¼š"><a href="#DIæ¡ˆä¾‹ï¼š" class="headerlink" title="DIæ¡ˆä¾‹ï¼š"></a><strong>DIæ¡ˆä¾‹ï¼š</strong></h3><p>æ·»åŠ ä¸€ä¸ªMyClassç±»ï¼Œç±»ä¸­æœ‰ç§æœ‰æˆå‘˜ userInterface</p>
<pre><code>public class MyInterface &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
&#125;</code></pre>
<h4 id="Setteræ–¹æ³•æ³¨å…¥"><a href="#Setteræ–¹æ³•æ³¨å…¥" class="headerlink" title="Setteræ–¹æ³•æ³¨å…¥"></a><strong>Setteræ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨ç±»ä¸­æ·»åŠ Setteræ–¹æ³•</p>
<pre><code>public class MyClass &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
    public void setUserInterface(UserInterface userInterface)&#123;
        this.userInterface = userInterface;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
&lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
&lt;bean id=&quot;MyClassId&quot; class=&quot;MyClass&quot;&gt;
    &lt;property name=&quot;userInterface&quot; ref=&quot;UserId&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>TextClassç±»ä¸­è¿›è¡Œæµ‹è¯•</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);
        MyInterface myInterface = (MyInterface)applicationContext.getBean(&quot;MyInterfaceId&quot;);
        myInterface.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<h4 id="æ„é€ æ–¹æ³•æ³¨å…¥"><a href="#æ„é€ æ–¹æ³•æ³¨å…¥" class="headerlink" title="æ„é€ æ–¹æ³•æ³¨å…¥"></a><strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨MyClassç±»ä¸­æ·»åŠ æ„é€ å‡½æ•°</p>
<pre><code>public class MyClass &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
    public MyClass()&#123;&#125;
//    æ„é€ æ–¹æ³•æ³¨å…¥
    public MyClass(UserInterface userInterface)&#123;
        this.userInterface = userInterface;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;MyClassId&quot; class=&quot;MyClass&quot;&gt;
        &lt;constructor-arg index=&quot;0&quot; ref=&quot;UserId&quot;&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>å¦‚æœæœ‰å¤šä¸ªå±æ€§ï¼Œindexåˆ™æŒ‰ç…§ä»0â€¦nè¿›è¡Œé…ç½®</p>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœï¼š</p>
<p>User Usingï¼</p>
<h3 id="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"><a href="#DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"></a><strong>DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥</strong></h3><p>ä»¥setteræ–¹æ³•æ³¨å…¥ä¸ºä¾‹ï¼š</p>
<p>æ–°å»ºä¸€ä¸ªUserç±»ï¼š</p>
<pre><code>import java.util.*;

public class User &#123;
    private String id;
    private String name;
    private String[] strings = new String[10];
    private List&lt;String&gt; list = new ArrayList&lt;&gt;();
    private Set&lt;String&gt; set = new HashSet&lt;&gt;();
    private Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();

    public void setId(String id) &#123;
        this.id = id;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public void setStrings(String[] strings) &#123;
        this.strings = strings;
    &#125;

    public void setList(List&lt;String&gt; list) &#123;
        this.list = list;
    &#125;

    public void setSet(Set&lt;String&gt; set) &#123;
        this.set = set;
    &#125;

    public void setMap(Map&lt;String, Integer&gt; map) &#123;
        this.map = map;
    &#125;

    public Map&lt;String, Integer&gt; getMap() &#123;
        return map;
    &#125;

    public Set&lt;String&gt; getSet() &#123;
        return set;
    &#125;

    public List&lt;String&gt; getList() &#123;
        return list;
    &#125;

    public String[] getStrings() &#123;
        return strings;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public String getId() &#123;
        return id;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

&lt;bean id=&quot;UserId&quot; class=&quot;User&quot;&gt;
    &lt;property name=&quot;id&quot; value=&quot;20185625&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;name&quot; value=&quot;zl&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;strings&quot;&gt;
        &lt;array&gt;
            &lt;value&gt;&quot;11&quot;&lt;/value&gt;
            &lt;value&gt;&quot;22&quot;&lt;/value&gt;
            &lt;value&gt;&quot;33&quot;&lt;/value&gt;
        &lt;/array&gt;
    &lt;/property&gt;
    &lt;property name=&quot;list&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;&quot;44&quot;&lt;/value&gt;
            &lt;value&gt;&quot;55&quot;&lt;/value&gt;
            &lt;value&gt;&quot;66&quot;&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;

    &lt;property name=&quot;set&quot;&gt;
        &lt;set&gt;
            &lt;value&gt;&quot;77&quot;&lt;/value&gt;
            &lt;value&gt;&quot;88&quot;&lt;/value&gt;
            &lt;value&gt;&quot;99&quot;&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;

    &lt;property name=&quot;map&quot;&gt;
        &lt;map&gt;
            &lt;entry key=&quot;111&quot; value=&quot;111&quot;&gt;&lt;/entry&gt;
            &lt;entry key=&quot;222&quot; value=&quot;222&quot;&gt;&lt;/entry&gt;
        &lt;/map&gt;
    &lt;/property&gt;

&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import java.util.Arrays;

public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);

        User user = (User)applicationContext.getBean(&quot;UserId&quot;);
        System.out.println(Arrays.toString(user.getStrings()));
        System.out.println(user.getList());
        System.out.println(user.getMap());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>[&quot;11&quot;, &quot;22&quot;, &quot;33&quot;]
[&quot;44&quot;, &quot;55&quot;, &quot;66&quot;]
&#123;111=111, 222=222&#125;</code></pre>
<hr>
<h2 id="Beançš„ä½œç”¨åŸŸ"><a href="#Beançš„ä½œç”¨åŸŸ" class="headerlink" title="Beançš„ä½œç”¨åŸŸ"></a><strong>Beançš„ä½œç”¨åŸŸ</strong></h2><p>å®šä¹‰ä¸€ä¸ªScopeClassç±» å’Œ TestClassï¼š</p>
<pre><code>public class ScopeClass &#123;

    public void show()&#123;
        System.out.println(this.hashCode());
    &#125;

    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext&quot;);
        ScopeClass scopeClass = (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);
        scopeClass.show();
    &#125;
&#125;</code></pre>
<h3 id="singleton"><a href="#singleton" class="headerlink" title="singleton:"></a><strong>singleton:</strong></h3><p>åœ¨XMLæ–‡ä»¶ä¸­é…ç½®:    </p>
<pre><code>&lt;bean id=&quot;ScopeClassId&quot; class=&quot;com.newdemo.ScopeClass&quot; scope=&quot;singleton&quot;&gt;&lt;/bean&gt;</code></pre>
<p>åœ¨TestClassè¿›è¡Œæµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    ScopeClass scopeClass = (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);
    scopeClass.show();
&#125;</code></pre>
<p>}</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>346224929<br>346224929</p>
<p>è¯´æ˜beanä¸­é…ç½®singletonå•ä¾‹ï¼Œä¸€ä¸ªbeanå®¹å™¨ï¼ˆåŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼‰ä¸­åªå­˜åœ¨ä¸€ä»½</p>
<hr>
<h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype:"></a><strong>prototype:</strong></h3><p>åœ¨xmlæ–‡ä»¶ä¸­å°†singletonæ”¹ä¸ºprototype</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>550752602<br>680779399</p>
<p>è¯´æ˜æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
<hr>
<h3 id="requestå’Œsession"><a href="#requestå’Œsession" class="headerlink" title="requestå’Œsession"></a><strong>requestå’Œsession</strong></h3><ul>
<li>requestï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ä¸”ä»…åœ¨å½“å‰requestæœ‰æ•ˆ</li>
<li>sessionï¼šåŒä¸Šï¼Œæ¯æ¬¡httpè¯·æ±‚åˆ›å»ºï¼Œå½“å‰sessionæœ‰æ•ˆ</li>
</ul>
<hr>
<h2 id="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"></a><strong>Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯</strong></h2><p>å®Œæ•´çš„Beançš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šå®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ã€åˆå§‹åŒ–ã€é”€æ¯ï¼Œä¸‹é¢ä»‹ç»åˆå§‹åŒ–å’Œé”€æ¯ä¸¤éƒ¨åˆ†</p>
<p>Beançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
<li>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</li>
<li>åœ¨xmlå¤´ä¸­ä¸ºæ‰€æœ‰Beanå®šä¹‰é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªLifeCircleClassç±»ï¼š</p>
<pre><code>public class LifeCircleClass &#123;

&#125;</code></pre>
<h3 id="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>åœ¨ç±»ä¸­å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼š</p>
<pre><code>public class LifeCircleClass &#123;
    public void init()&#123;
        System.out.println(&quot;init&quot;);
    &#125;
    public void destroy()&#123;
        System.out.println(&quot;destroy&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨xmlæ–‡ä»¶ä¸­é…ç½®beanï¼š</p>
<pre><code>&lt;bean id=&quot;LifeCircleClassId&quot; class=&quot;com.newdemo.LifeCircleClass&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    LifeCircleClass lifeCircleClass = (LifeCircleClass)applicationContext.getBean(&quot;LifeCircleClassId&quot;);
    ((AbstractApplicationContext) applicationContext).close();  //å…³é—­å®¹å™¨</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>init<br>destroy</p>
<hr>
<h3 id="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"><a href="#å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£" class="headerlink" title="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"></a><strong>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</strong></h3><pre><code>public class LifeCircleClass implements InitializingBean, DisposableBean &#123;

    @Override
    public void afterPropertiesSet() throws Exception &#123;
        System.out.println(&quot;init&quot;);
    &#125;

    @Override
    public void destroy() throws Exception &#123;
        System.out.println(&quot;destroy&quot;);
    &#125;

&#125;</code></pre>
<p>æ­¤æ—¶å¯ä»¥ä¸åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h3 id="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>default-init-method é¡¶çº§ <beans> å…ƒç´ å±æ€§ä¸Šå­˜åœ¨å±æ€§ä¼šå¯¼è‡´Spring IoCå®¹å™¨ init å°†beanç±»ä¸Šè°ƒç”¨çš„æ–¹æ³•è¯†åˆ«ä¸ºåˆå§‹åŒ–æ–¹æ³•å›è°ƒã€‚å½“beanè¢«åˆ›å»ºå’Œç»„è£…æ—¶ï¼Œå¦‚æœbeanç±»å…·æœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œåˆ™åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨å®ƒã€‚</beans></p>
<p>å¦‚ï¼šåœ¨LifeCircleClassä¸­è‡ªå®šä¹‰init()å’Œdestroy()æ–¹æ³•ï¼Œåœ¨xmlå¤´ä¸­é…ç½®</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;
default-init-method=&quot;init&quot; default-destroy-method=&quot;destroy&quot;&gt;

    &lt;bean id=&quot;ScopeClassId&quot; class=&quot;com.newdemo.ScopeClass&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;

    &lt;bean id=&quot;LifeCircleClassId&quot; class=&quot;com.newdemo.LifeCircleClass&quot; &gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>æ–°å»ºä¸€ä¸ªInitClassç±»å¹¶åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        InitClass initClass = (InitClass) applicationContext.getBean(&quot;InitClassId&quot;);
        ((AbstractApplicationContext) applicationContext).close();  //å…³é—­å®¹å™¨
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h2 id="Awareæ¥å£"><a href="#Awareæ¥å£" class="headerlink" title="Awareæ¥å£"></a><strong>Awareæ¥å£</strong></h2><p>Springä¸­æœ‰å¾ˆå¤šç»§æ‰¿äºAwareæ¥å£çš„å­—æ¥å£ï¼Œå¦‚ï¼š</p>
<p><img src="/2020/09/24/IOC/3397380-6ef519bbc705ce28.png" alt="Aware"></p>
<p>awareç¿»è¯‘ä¸ºæ„ŸçŸ¥çš„ï¼Œæ ¹æ®å­—é¢æ„æ€Awareæ¥å£åº”è¯¥æ˜¯å…·æœ‰æŸäº›æ„ŸçŸ¥çš„åŠŸèƒ½</p>
<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹ApplicationContextAwareæ¥å£å’ŒBeanNameAwareæ¥å£</p>
<p>æ–°å»ºä¸€ä¸ªAwareClassç±»ï¼Œç»§æ‰¿BeanNameAwareæ¥å£</p>
<pre><code>public class AwareClass implements BeanNameAware &#123;
    private String BeanName;
    @Override
    public void setBeanName(String s) &#123;
        this.BeanName = s;
    &#125;

    public String getBeanName() &#123;
        return BeanName;
    &#125;
&#125;</code></pre>
<p>é…ç½®bean</p>
<pre><code>&lt;bean id=&quot;AwareClassId&quot; class=&quot;com.newdemo.AwareClass&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        AwareClass awareClass = (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);
        System.out.println(awareClass.getBeanName());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<pre><code>AwareClassId</code></pre>
<p>å®ç°BeanNameAwareæ¥å£çš„ç±»é€šè¿‡setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–é…ç½®æ–‡ä»¶ä¸­çš„beanid</p>
<p>ç°åœ¨è®©Awareç±»ç»§æ‰¿ApplicationContextAwareç±»</p>
<pre><code>public class AwareClass implements BeanNameAware, ApplicationContextAware &#123;
    private String BeanName;
    private ApplicationContext applicationContext;
    @Override
    public void setBeanName(String s) &#123;
        this.BeanName = s;
    &#125;

    public String getBeanName() &#123;
        return BeanName;
    &#125;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) &#123;
        this.applicationContext = applicationContext;
    &#125;

    public ApplicationContext getApplicationContext() &#123;
        return applicationContext;
    &#125;

&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        AwareClass awareClass = (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);
        ApplicationContext applicationContext1 = awareClass.getApplicationContext();
        System.out.println(applicationContext==applicationContext1);
    &#125;
&#125;</code></pre>
<p>æ­¤æ—¶è¾“å‡ºtrueï¼Œè¯´æ˜ApplicationContextæ¥å£ä¸­çš„setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–è¯¥å®ç°ç±»æ‰€åœ¨çš„å®¹å™¨ï¼ˆä¸Šä¸‹æ–‡ï¼‰</p>
<p>åŒç†ï¼Œå…¶ä»–Awareçš„å­æ¥å£ä¹ŸåŒæ ·å…·æœ‰æ„ŸçŸ¥åŠŸèƒ½</p>
<hr>
<h2 id="Beançš„è‡ªåŠ¨è£…é…"><a href="#Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="Beançš„è‡ªåŠ¨è£…é…"></a><strong>Beançš„è‡ªåŠ¨è£…é…</strong></h2><p>å¯¹äºBeançš„å±æ€§çš„è‡ªåŠ¨è£…é…ï¼Œæ­¤æ—¶ä¸å†éœ€è¦åœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨å¯¹å±æ€§æ³¨å…¥ï¼Œä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°å±æ€§çš„è‡ªåŠ¨è£…é…ï¼š</p>
<ul>
<li>byname id==name</li>
<li>bytype å±æ€§type == xmlæ–‡ä»¶ä¸­çš„type</li>
<li>byconstructor æ„é€ å™¨åˆ—è¡¨å‚æ•°type==å±æ€§ç±»å‹</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªPersonç±»ã€PersonalInfoç±»ã€AddressInfoç±»</p>
<pre><code>public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;

    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;

    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;

public class PersonalInfo &#123;
    private String name;
    private int age;
    public void setName(String name) &#123;
        this.name = name;
    &#125;
    public void setAge(int age) &#123;
        this.age = age;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public int getAge() &#123;
        return age;
    &#125;

    public int getAge() &#123;
        return age;
    &#125;
&#125;    

public class AddressInfo &#123;

    private String Province;
    private String city;

    public void setProvince(String province) &#123;
        Province = province;
    &#125;

    public void setCity(String city) &#123;
        this.city = city;
    &#125;

    public String getProvince() &#123;
        return Province;
    &#125;

    public String getCity() &#123;
        return city;
    &#125;
&#125;</code></pre>
<hr>
<h3 id="byname"><a href="#byname" class="headerlink" title="byname"></a><strong>byname</strong></h3><p>ä½¿ç”¨bynameè‡ªåŠ¨è£…é…ï¼Œè¦æ±‚è¢«è£…é…çš„å±æ€§åè¦ä¸xmlæ–‡ä»¶ä¸­æŸä¸ªBeançš„beanIdç›¸åŒï¼Œå¦åˆ™ä¸è¿›è¡Œè£…é…</p>
<p>åœ¨xmlä¸­é…ç½®bean </p>
<p><strong><em>æ³¨ï¼šåœ¨é…ç½®idçš„æ—¶å€™å°½é‡é…ç½®å°å†™ï¼Œä¸ç„¶æœ‰æ—¶å€™ä¼šå‡ºé”™ï¼ŒåŸå› ä¸æ¸…æ¥š</em></strong></p>
<pre><code>&lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;addressInfo&quot; class=&quot;com.newdemo.AddressInfo&quot;&gt;
    &lt;property name=&quot;province&quot; value=&quot;GuangDong&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;city&quot; value=&quot;GuangZhou&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;PersonId&quot; class=&quot;com.newdemo.Person&quot; autowire=&quot;byName&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;PersonId&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<hr>
<h3 id="bytype"><a href="#bytype" class="headerlink" title="bytype"></a><strong>bytype</strong></h3><p>bytypeè¦æ±‚å±æ€§çš„ç±»å‹ä¸xmlæ–‡ä»¶ä¸­çš„ç±»å‹ç›¸åŒæ—¶æ‰è‡ªåŠ¨è£…é…</p>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h3 id="byConstructor"><a href="#byConstructor" class="headerlink" title="byConstructor"></a><strong>byConstructor</strong></h3><p>åœ¨Personç±»ä¸­æ·»åŠ æ„é€ æ–¹æ³•</p>
<pre><code>    public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;
        this.personalInfo = personalInfo;
        this.addressInfo = addressInfo;
&#125;</code></pre>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h2 id="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"><a href="#æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®" class="headerlink" title="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"></a><strong>æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®</strong></h2><p>Spring2.5å¼•å…¥äº†é€šè¿‡æ³¨è§£æ¥é…ç½®beanåŠæ³¨å…¥ä¾èµ–çš„æ–¹æ³•ï¼Œä½¿ç”¨æ³¨è§£é…ç½®æ—¶ï¼Œä¸å†éœ€è¦é€šè¿‡xmlæ–‡ä»¶é…ç½®beanç±»ï¼Œç®€åŒ–äº†é…ç½®å·¥ä½œ</p>
<h3 id="Componentã€-Serviceã€-Controllerã€-Repository"><a href="#Componentã€-Serviceã€-Controllerã€-Repository" class="headerlink" title="@Componentã€@Serviceã€@Controllerã€@Repository"></a><strong>@Componentã€@Serviceã€@Controllerã€@Repository</strong></h3><p>@Componentæ˜¯ä¸€ä¸ªé€šç”¨çš„Beanæ³¨è§£ï¼Œé€šå¸¸ç”¨äºæ³¨è§£ä¸šåŠ¡ä¸­åŠŸèƒ½ä¸æ¸…æ¥šçš„Bean</p>
<p>@Serviceã€@Controllerã€@Repositoryåˆ™æ˜¯æ ¹æ®ä¸åŒåœºæ™¯æ‰€é‡‡å–çš„ç‰¹å®šæ³¨è§£ï¼Œåœ¨Springçš„ä¸‰å±‚æ¶æ„ä¸­ï¼Œ@Serviceå¯¹åº”ä¸šåŠ¡å±‚ã€@Controllerå¯¹åº”æ§åˆ¶å±‚ã€@Repositoryå¯¹åº”æŒä¹…å±‚</p>
<p>ä»¥ä¸Šå››ä¸ªæ³¨è§£èƒ½å¤Ÿè‡ªåŠ¨è£…é…æŸä¸ªç±»ï¼Œç›¸å½“äºåœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨é…ç½®beanï¼Œé»˜è®¤çš„idä¸ºç±»åé¦–å­—æ¯å°å†™</p>
<p>@Componentçš„ç±»ä¸­å±æ€§ä¹Ÿä¼šè¢«è‡ªåŠ¨è£…é…ï¼ˆæŒ‰æ„é€ å™¨typeè‡ªåŠ¨è£…é…ï¼‰</p>
<p><strong><em>æ³¨ï¼šå®ç°è‡ªåŠ¨é…ç½®å‰ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­åŠ ä¸Šï¼š</em></strong></p>
<pre><code>    &lt;context:component-scan base-package=&quot;packageName&quot;/&gt;</code></pre>
<p>å¦åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°beanidçš„å¼‚å¸¸</p>
<p>è¿˜æ˜¯ä¸Šé¢çš„Personç±»ï¼Œåˆ é™¤Personç±»åœ¨xmlä¸­çš„é…ç½®</p>
<pre><code>@Component
public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;

//    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
//        this.personalInfo = personalInfo;
//    &#125;
//
//    public void setAddressInfo(AddressInfo addressInfo) &#123;
//        this.addressInfo = addressInfo;
//    &#125;


    public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;
        this.personalInfo = personalInfo;
        this.addressInfo = addressInfo;
    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>å®ŒæˆPersonçš„è‡ªåŠ¨é…ç½®ï¼Œä¸”Personä¸­çš„å±æ€§ä¹Ÿè‡ªåŠ¨è£…é…</p>
<hr>
<h3 id="Required"><a href="#Required" class="headerlink" title="@Required"></a>@Required</h3><p>@Requiredä½œç”¨äºå±æ€§çš„setteræ–¹æ³•ï¼Œè¡¨æ˜è¯¥å±æ€§å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<p>åœ¨Personç±»ä¸­æ·»åŠ å±æ€§String nameã€setterå’Œgetteræ–¹æ³•ï¼Œå¹¶æ·»åŠ @Requiredæ³¨è§£</p>
<p>è‹¥ä¸è¿›è¡Œé…ç½®ï¼Œåˆ™ä¼šæç¤ºé”™è¯¯ï¼š</p>
<p><img src="/2020/09/24/IOC/1601282519408.jpg" alt="error"></p>
<p>æ·»åŠ é…ç½®å³å¯</p>
<pre><code>&lt;property name=&quot;name&quot; value=&quot;RequiredName&quot;&gt;&lt;/property&gt;</code></pre>
<hr>
<h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>@Autowiredæ³¨è§£çš„åŠŸèƒ½æ˜¯ä¸ºå±æ€§è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œ@Autowiredå¯ä½œç”¨äºå±æ€§ã€setterã€æ„é€ æ–¹æ³•ï¼Œ@Autowiredé€šè¿‡bytypeæ–¹æ³•æŸ¥æ‰¾ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§typeç›¸åŒçš„beanè¿›è¡Œé…ç½®ï¼Œ@Autowiredä¸­é»˜è®¤ä¸ºRequired=true å³å¼ºåˆ¶ä¸Šä¸‹æ–‡å¿…é¡»è¦å­˜åœ¨ä¸å±æ€§typeç›¸åŒçš„beanï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ç”¨required=falseæ¶ˆé™¤è¿™ç§å¼ºåˆ¶æ€§</p>
<p><strong>ä½œç”¨äºå±æ€§</strong></p>
<p>å½“@Autowiredä½œç”¨äºå±æ€§æ—¶ï¼Œå¯ä»¥ä¸ç”¨åœ¨ç±»ä¸­æ·»åŠ è¯¥å±æ€§çš„setteræ–¹æ³•æˆ–æ„é€ å™¨ï¼Œä¹Ÿä¸ç”¨åœ¨è¯¥ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<p>å°†Personç±»ä¸­çš„PersonalInfoå’ŒAddressInfoéƒ½åŠ ä¸Š@Autowiredæ³¨è§£ï¼Œåˆ é™¤æ„é€ æ–¹æ³•</p>
<pre><code>@Component
public class Person &#123;
    @Autowired
    private PersonalInfo personalInfo;
    @Autowired
    private AddressInfo addressInfo;
//    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
//        this.personalInfo = personalInfo;
//    &#125;
//    public void setAddressInfo(AddressInfo addressInfo) &#123;
//        this.addressInfo = addressInfo;
//    &#125;
//    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;
//        this.personalInfo = personalInfo;
//        this.addressInfo = addressInfo;
//    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæŠŠxmlæ–‡ä»¶ä¸­PersonalInfoçš„beané…ç½®åˆ é™¤ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ å› ä¸ºä½¿ç”¨@Autowiredæ³¨è§£çš„å±æ€§ï¼Œé»˜è®¤xmlæ–‡ä»¶ä¸­å¿…é¡»å­˜åœ¨ä¸å±æ€§ç›¸åŒç±»å‹çš„bean</p>
<p>å°†PersonalInfoçš„@Autowiredæ³¨è§£æ”¹ä¸º</p>
<pre><code>@Autowired(required = false)
private PersonalInfo personalInfo;</code></pre>
<p>æ­¤æ—¶é€šè¿‡ç¼–è¯‘ï¼Œä¸è¿‡ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºä¸Šä¸‹æ–‡æ— æ³•åŒ¹é…PersonalInfoè¿™ä¸€å±æ€§ï¼Œå°†Personç±»ä¸­çš„showå‡½æ•°æ³¨é‡ŠPersonalInfoçš„è¾“å‡º</p>
<pre><code>    public void show()&#123;
//        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>GuangDong GuangZhou</p>
<hr>
<p><strong>ä½œç”¨äºsetteræ–¹æ³•</strong></p>
<p>@Autowiredä½œç”¨äºsetteræ–¹æ³•æ—¶ï¼Œä¸éœ€è¦åœ¨ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<pre><code>public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;
    @Autowired
    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;
    @Autowired
    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;
//    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;
//        this.personalInfo = personalInfo;
//        this.addressInfo = addressInfo;
//    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœç›¸åŒï¼Œç›¸å½“äºbeanä¸­é…ç½®autowire=bytype</p>
<hr>
<p><strong>ä½œç”¨äºæ„é€ æ–¹æ³•</strong></p>
<p>ä¸ä½œç”¨äºsetteræ–¹æ³•åŒç†</p>
<hr>
<p><strong>é›†åˆçš„æ³¨å…¥</strong></p>
<p>Personç±»ï¼š</p>
<pre><code>@Component
public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;
    private List&lt;PersonalInfo&gt; list;

    @Autowired
    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;
    @Autowired
    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;

    @Autowired
    public void setList(List&lt;PersonalInfo&gt; list) &#123;
        this.list = list;
    &#125;

    public void show()&#123;
        list.forEach(v-&gt; System.out.println(v.getName()+&quot; &quot;+v.getAge()));
    &#125;
&#125;    </code></pre>
<p>å¹¶åœ¨xmlæ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ªPersonalInfoçš„Bean</p>
<pre><code>&lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;personalInfo1&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zlll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;211&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•è¾“å‡º</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>è¯´æ˜é›†åˆçš„è‡ªåŠ¨è£…é…ä¸­ï¼Œä¼šè‡ªåŠ¨æœç´¢ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§ç±»å‹ç›¸åŒçš„beanï¼Œå¹¶æŠŠè¿™äº›æ‰€æœ‰çš„beanåŒæ—¶æ³¨å…¥é›†åˆä¸­</p>
<p>å°†å±æ€§æ”¹ä¸ºmapæ˜ å°„      private Map&lt;String,PersonalInfo&gt; map;</p>
<pre><code>    public void show()&#123;
//        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
//        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
//        System.out.println(list);
        map.forEach((k,v)-&gt; System.out.println(map.get(k).getName()+&quot; &quot;+map.get(k).getAge()));
        System.out.println();
        map.forEach((k,v)-&gt; System.out.println(k+&quot; &quot; +v));
    &#125;</code></pre>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>personalInfo com.newdemo.PersonalInfo@1eb5174b<br>personalInfo1 com.newdemo.PersonalInfo@67080771</p>
<p>è¯´æ˜æ˜¯å°†beançš„idä½œä¸ºé”®ï¼Œå¯¹è±¡ä½œä¸ºå€¼</p>
<hr>
<h3 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a><strong>@Qualifier</strong></h3><p>å½“xmlæ–‡ä»¶ä¸­å­˜åœ¨å¤šä¸ªtypeç›¸åŒç±»å‹çš„beanæ—¶ï¼Œè‹¥ä½¿ç”¨è‡ªåŠ¨é…ç½®ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥åŒ¹é…å“ªä¸ªåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç”¨@Qualifieræ¥åˆ¶å®šåŒ¹é…å“ªä¸ªbean</p>
<pre><code>    &lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;personalInfo_Id&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zllll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;2111&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

   @Autowired
@Qualifier(&quot;personalInfo_Id&quot;)
public void setPersonalInfo(PersonalInfo personalInfo) &#123;
    this.personalInfo = personalInfo;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zllll 2111</p>
<hr>
<h3 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a><strong>@Bean</strong></h3><p>ç”¨@Beanæ³¨è§£çš„æ–¹æ³•ä¼šé…ç½®ã€å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”±IOCå®¹å™¨ç®¡ç†ï¼Œbean_idä¸ºæ–¹æ³•åï¼Œç›¸å½“äº <bean id="method-name" class="..."></bean></p>
<p>æ–°å»ºä¸€ä¸ªCharacterInfoç±»</p>
<pre><code>public class CharacterInfo &#123;
    public void show()&#123;
        System.out.println(&quot;Character&#39;show&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨Personç±»ä¸­æ·»åŠ CharacterInfoç±»å±æ€§ï¼Œå¹¶æ·»åŠ getCharacterInfo()æ–¹æ³•</p>
<pre><code>public CharacterInfo getCharacterInfo()&#123;
    return new CharacterInfo();
&#125;</code></pre>
<p>åœ¨testClassä¸­æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        CharacterInfo characterInfo = (CharacterInfo)applicationContext.getBean(&quot;getCharacterInfo&quot;);
        characterInfo.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>Characterâ€™show</p>
<hr>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a><strong>@Configuration</strong></h3><p>@Configurationç”¨äºå®šä¹‰é…ç½®ç±»ï¼Œç›¸å½“äº<beans>â€¦</beans>ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¢«@Beanæ³¨è§£çš„æ–¹æ³•</p>
<p>å°†Personç±»çš„æ³¨è§£æ”¹ä¸º@Configurationï¼Œå¯å¾—åˆ°ç›¸åŒçš„ç»“æœ</p>
<ul>
<li>@Scope</li>
</ul>
<p>@Scopeç”¨æ¥å®šä¹‰beançš„ä½œç”¨åŸŸï¼Œé»˜è®¤å•ä¾‹ï¼Œç›¸å½“äº<bean id class scope="singleton"></bean></p>
<p>å°†@Scopeä½œç”¨åœ¨Personç±»ä¸Š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        Person person1 = (Person)applicationContext.getBean(&quot;person&quot;);
        System.out.println(person);
        System.out.println(person1);
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6<br>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6</p>
<hr>
<h2 id="è‡ªå®šä¹‰å‘½åç­–ç•¥"><a href="#è‡ªå®šä¹‰å‘½åç­–ç•¥" class="headerlink" title="è‡ªå®šä¹‰å‘½åç­–ç•¥"></a><strong>è‡ªå®šä¹‰å‘½åç­–ç•¥</strong></h2><p>åœ¨Springä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é€šè¿‡å®ç°BeanNameGeneratoræ¥å£ï¼Œç„¶ååœ¨xmlæ–‡ä»¶ä¸­é…ç½®è‡ªå®šä¹‰å‘½åç±»ï¼Œæ¥å®Œæˆå¯¹beançš„è‡ªå®šä¹‰å‘½åç­–ç•¥    </p>
<p>å®šä¹‰MyBeanNameGeneratorç±»ï¼Œå®ç°BeanNameGeneratoræ¥å£</p>
<pre><code>public class MyBeanNameGenerator implements BeanNameGenerator &#123;
    @Override
    public String generateBeanName(BeanDefinition beanDefinition, BeanDefinitionRegistry beanDefinitionRegistry) &#123;
        return beanDefinition.getBeanClassName()+&quot;Id&quot;;
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;com.newdemo.PersonId&quot;);
        person.show();

    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zllll 2111</p>
]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>AOPçš„APIå®ç°åŠSpringAOPå®ç°åŸç†</title>
    <url>/2020/10/02/AOP2/</url>
    <content><![CDATA[<h1 id="AOPçš„APIå®ç°"><a href="#AOPçš„APIå®ç°" class="headerlink" title="AOPçš„APIå®ç°"></a>AOPçš„APIå®ç°</h1><p>åŸºäºæ¥å£çš„aopå®ç°ä¸€èˆ¬ä¸ºä¸€ä¸‹æ­¥éª¤ï¼š</p>
<!-- ## åŸºäºåŠ¨æ€ä»£ç†çš„AOPå®ä¾‹ -->
<p>1.å®šä¹‰è¢«ä»£ç†è€…ï¼ˆè¢«ä»£ç†çš„ç±»ï¼‰</p>
<p>2.å®šä¹‰å¢å¼ºï¼ˆåˆ‡ç‚¹å‡ ç§æ‰§è¡ŒçŠ¶æ€ä¸­è¦åšçš„åŠ¨ä½œï¼‰</p>
<p>3.å®šä¹‰åˆ‡å…¥ç‚¹ï¼ˆç»™å®šè§„åˆ™ ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€AspectJè¡¨è¾¾å¼ï¼‰ï¼Œæ‰¾å‡ºåˆ‡å…¥ç‚¹ä½ç½®ï¼‰</p>
<p>4.å®šä¹‰åˆ‡é¢ï¼ˆå“ªäº›åˆ‡å…¥ç‚¹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦åšå“ªäº›åŠ¨ä½œ </p>
<p>ä¸ä¸šåŠ¡æ¨¡å—æ— å…³ï¼Œä½†æ˜¯å´ä¸ºè¢«æœ‰æ¨¡å—æ‰€å…±åŒä½¿ç”¨çš„é€»è¾‘å—</p>
<p>5.è®¾ç½®ä»£ç† ï¼šåŠ¨æ€ä»£ç†ï¼ˆä»£ç†æ¥å£ï¼‰ã€CGLIBä»£ç†ï¼ˆä»£ç†å…·ä½“ç±»ï¼‰<br>    é…ç½®è¢«ä»£ç†çš„å¯¹è±¡<br>    é…ç½®åˆ‡é¢<br>    é…ç½®è¢«ä»£ç†çš„æ¥å£</p>
<h2 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h2><p><img src="/2020/10/02/AOP2/pointcut.png" alt="Poingcutéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯JdkRegexpMethodPointcutï¼Œæ ¹æ®ä¸€ç»„è¡¨è¾¾å¼æ¥åŒ¹é…åˆ‡å…¥ç‚¹</p>
<h2 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h2><p><img src="/2020/10/02/AOP2/advice.png" alt="Adviceéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>éœ€è¦ä¸ºè‡ªå·±å®šä¹‰çš„å¢å¼ºå®ç°è¿™å‡ ç§æ¥å£</p>
<h2 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h2><p>åœ¨åŸºäºAPIå®ç°çš„AOPä¸­ï¼Œç”¨Advisorè¡¨ç¤ºAspect</p>
<p><img src="/2020/10/02/AOP2/Advisor.png" alt="Advisoréƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯PointcutAdvisoræ¥å£çš„DefaultPointcutAdvisorå®ç°ç±»ï¼Œå®ƒå¯ä»¥é€šè¿‡ä»»æ„Pointcutå’ŒAdviceå®šä¹‰ä¸€ä¸ªåˆ‡é¢</p>
<h2 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h2><p>åœ¨Spring AOPä¸­ï¼Œæ ¹æ®ä¸€æ¬¡åˆ›å»ºä»£ç†çš„ä¸ªæ•°ï¼Œå¯ä»¥åˆ†ä¸ºåˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨å’Œåˆ›å»ºå¤šä¸ªä»£ç†çš„ç»‡å…¥å™¨ï¼ˆå³è‡ªåŠ¨ä»£ç†ï¼‰ã€‚</p>
<p>Spring AOPä¸­åˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨çš„ç±»æœ‰ï¼š</p>
<ul>
<li>ProxyFactory</li>
<li>ProxyFactoryBean</li>
<li>AspectJProxyFactory</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="singleProxy"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringAOPä¼šä½¿ç”¨åŠ¨æ€ä»£ç†åŸºäºæ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå½“å‡ºç°ä¸‹åˆ—æƒ…å†µä¼šä½¿ç”¨CGLIBåŸºäºç±»ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>
<ul>
<li>ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£</li>
<li>ProxyFactoryçš„proxyTargetClasså±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
<li>ProxyFactoryçš„optimizeå±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
</ul>
<p>å¸¸ç”¨çš„è‡ªåŠ¨ä»£ç†ç±»ï¼š</p>
<ul>
<li>BeanNameAutoProxyCreator</li>
<li>DefaultAdvisorAutoProxyCreator</li>
<li>AnnotationAwareAspectJAutoProxyCreator</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="autoProxy"></p>
<pre><code>public interface Service &#123;
    public void service();
&#125;


public class ServiceClass implements Service&#123;
    public void service()&#123;
        System.out.println(&quot;service&quot;);
    &#125;
&#125;


public class MyAspect implements MethodBeforeAdvice, AfterReturningAdvice &#123;
    @Override
//    methodæ˜¯è¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œobjectsæ˜¯æ–¹æ³•å‚æ•°ï¼Œoæ˜¯è¢«è°ƒç”¨æ–¹æ³•æ‰€å±çš„å¯¹è±¡
    public void before(Method method, Object[] objects, Object o) throws Throwable &#123;
        System.out.println(method.getName()+&quot; &quot;+&quot;service&quot;);
        System.out.println(Arrays.toString(objects));
        System.out.println(o.getClass().getName());
        System.out.println(&quot;--------&quot;);
        System.out.println(&quot;before&quot;);
        System.out.println(&quot;--------&quot;);
    &#125;

    //oæ˜¯è¿”å›å€¼
    @Override
    public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable &#123;
        System.out.println(&quot;------&quot;);
        System.out.println(&quot;after&quot; + o);
        System.out.println(&quot;------&quot;);
    &#125;

&#125;

public class TestClass &#123;
    public static void main(String[] args) &#123;
        Service service = (Service)new ClassPathXmlApplicationContext(&quot;ApiContext.xml&quot;).getBean(&quot;proxy&quot;);
        service.service();

    &#125;
&#125;</code></pre>
<p>xmlæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
    &lt;bean id=&quot;myAspect&quot; class=&quot;APIAOP.MyAspect&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;serviceClass&quot; class=&quot;APIAOP.ServiceClass&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;pointcut&quot; class=&quot;org.springframework.aop.support.JdkRegexpMethodPointcut&quot;&gt;
        &lt;property name=&quot;pattern&quot; value=&quot;.*service&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;aspect&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;pointcut&quot; ref=&quot;pointcut&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;myAspect&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;proxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;serviceClass&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;myAspect&quot;/&gt;
        &lt;property name=&quot;proxyInterfaces&quot; value=&quot;APIAOP.Service&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<h1 id="Springä¸­çš„AOPçš„å®ç°åŸç†"><a href="#Springä¸­çš„AOPçš„å®ç°åŸç†" class="headerlink" title="Springä¸­çš„AOPçš„å®ç°åŸç†"></a>Springä¸­çš„AOPçš„å®ç°åŸç†</h1><ul>
<li>JDKåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†é€šè¿‡â€œåå°„â€æ¥æ¥æ”¶è¢«ä»£ç†çš„ç±»ï¼Œå¹¶ä¸”è¦æ±‚è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ã€‚JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»ã€‚å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šé€‰æ‹©ä½¿ç”¨CGLIBæ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚</p>
<ul>
<li>CglibåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†å¿…é¡»è¦æœ‰æ¥å£, ä½†å¦‚æœè¦ä»£ç†ä¸€ä¸ªæ²¡æœ‰æ¥å£çš„ç±»è¯¥æ€ä¹ˆåŠå‘¢? CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ã€‚æ³¨æ„ï¼ŒCGLIBæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸ºfinalï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨CGLIBåšåŠ¨æ€ä»£ç†çš„ã€‚CGLIBåŠ¨æ€ä»£ç†çš„åŸç†æ˜¯ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»,è¿™ä¸ªå­ç±»å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡æ˜¯è¢«å¢å¼ºè¿‡çš„ã€‚</p>
<h2 id="JDKçš„åŠ¨æ€ä»£ç†"><a href="#JDKçš„åŠ¨æ€ä»£ç†" class="headerlink" title="JDKçš„åŠ¨æ€ä»£ç†"></a>JDKçš„åŠ¨æ€ä»£ç†</h2><p>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªç±»ï¼ŒJDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»</p>
<h3 id="Proxyç±»"><a href="#Proxyç±»" class="headerlink" title="Proxyç±»"></a>Proxyç±»</h3><p>Proxyæ˜¯ä¸€ä¸ªä»£ç†ç±»ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªnewProxyInstanceæ–¹æ³•</p>
<pre><code>public static Object newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h)</code></pre>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä»£ç†å®ä¾‹ï¼Œå…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>ClassLoader loaderä¸ºç±»åŠ è½½å™¨ï¼ŒåŠ è½½ç±»çš„å­—èŠ‚ç </p>
</li>
<li><p>Class&lt;?&gt;[] interfacesæŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡å¿…é¡»å®ç°çš„æ¥å£ï¼ˆå› ä¸ºè¢«ä»£ç†å¯¹è±¡ä¸ä»£ç†å¯¹è±¡åº”å®ç°ç›¸åŒçš„æ¥å£ï¼‰</p>
</li>
<li><p>InvocationHandler h </p>
</li>
</ul>
<h3 id="InvocationHandleræ¥å£"><a href="#InvocationHandleræ¥å£" class="headerlink" title="InvocationHandleræ¥å£"></a>InvocationHandleræ¥å£</h3><p>InvocationHandleræ¥å£ï¼šä»£ç†ç±»çš„æ–¹æ³•è¢«å¤–ç•Œè°ƒç”¨ä¹‹åï¼Œå°†æ–¹æ³•äº¤ç»™InvocationHandlerï¼Œç”±å®ƒæ¥å®ç°å¯¹æ–¹æ³•çš„å¢å¼º</p>
<p>InvocationHandleræ¥å£åªæœ‰ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œç”±invokeæ–¹æ³•å®ç°å¯¹è¢«ä»£ç†æ–¹æ³•çš„å¢å¼º</p>
<pre><code>public Object invoke(Object proxy,Method method,Object[] args)</code></pre>
<p>å…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>Object proxyï¼šä»£ç†å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>Method methodï¼šå¤–ç•Œè°ƒç”¨çš„æ–¹æ³•</p>
</li>
<li><p>Object[] argsï¼šæ–¹æ³•çš„å‚æ•°</p>
</li>
</ul>
<p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨invokeæ–¹æ³•ä¸­æ²¡æœ‰æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„è¢«ä»£ç†å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬åœ¨å®ç°InvocationHandleræ¥å£çš„ä»£ç†ç±»ä¸­ï¼Œä¸€å®šè¦å£°æ˜ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å±æ€§</p>
<p>å®šä¹‰ä¸€ä¸ªUseræ¥å£ï¼š</p>
<pre><code>public interface User &#123;
    void use();
&#125;</code></pre>
<p>å®šä¹‰æ¥å£çš„å®ç°ç±»UserImpl</p>
<pre><code>public class UserImpl implements User&#123;
    @Override
    public void use() &#123;
        System.out.println(&quot;user using&quot;);
    &#125;
&#125;</code></pre>
<p>å®šä¹‰åŠ¨æ€ä»£ç†ç±»MyJdkAspectï¼š</p>
<pre><code>public class MyJdkAspect implements InvocationHandler &#123;
//è¢«ä»£ç†å¯¹è±¡
private Object target;

public MyJdkAspect()&#123;&#125;

public MyJdkAspect(Object target)&#123;
    this.target = target;
&#125;

@Override
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
        Object object = null;
        System.out.println(&quot;before&quot;);
    //        é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
        object = method.invoke(target,args);
        System.out.println(&quot;after&quot;);
        return object;
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    User user = new UserImpl();
    MyJdkAspect myJdkAspect = new MyJdkAspect(user);
//        åˆ›å»ºä»£ç†å®ä¾‹
        User proxy = (User) Proxy.newProxyInstance(user.getClass().getClassLoader(),user.getClass().getInterfaces(),myJdkAspect);
//        ä»£ç†å¯¹è±¡proxyè°ƒç”¨useæ–¹æ³•æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨invokeæ–¹æ³•ï¼Œå®ç°å¢å¼º
        proxy.use();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>user using<br>after</p>
<p><a href="https://blog.csdn.net/jiankunking/article/details/52143504?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160166897019195240408337%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=160166897019195240408337&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28-9-52143504.pc_first_rank_v2_rank_v28&utm_term=aop+jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86&spm=1018.2118.3001.4187#%E4%BA%8C%E3%80%81Java%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%B1%BB%C2%A0">å‚è€ƒé“¾æ¥</a></p>
<h2 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="headerlink" title="cglibåŠ¨æ€ä»£ç†"></a>cglibåŠ¨æ€ä»£ç†</h2><p>ä½¿ç”¨cglibåŠ¨æ€ä»£ç†éœ€è¦å®ç°MethodInterceptoræ¥å£</p>
<p>MethodInterceptoræ¥å£ä¸­æœ‰ä¸€ä¸ªinterceptæ–¹æ³•</p>
<pre><code>public Object intercept(Object object, java.lang.reflect.Method method, Object[] args, MethodProxy proxy) throws Throwable;</code></pre>
<p>Object object æ˜¯ä»£ç†å¯¹è±¡</p>
<p>Method method æ˜¯æ‹¦æˆªæ–¹æ³•</p>
<p>Object[] args æ˜¯æ–¹æ³•å‚æ•°</p>
<pre><code>public class NewUserImpl &#123;
    public void use()&#123;
        System.out.println(&quot;user using&quot;);
    &#125;
&#125;

public class MyCglibProxy implements MethodInterceptor &#123;
    //è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡
    private Object target;
//  ç”Ÿæˆä»£ç†ç±»
    public Object creatProxyInstance(Object target)&#123;
        this.target = target;
        Enhancer enhancer = new Enhancer();
        enhancer.setSuperclass(this.target.getClass());
        enhancer.setCallback(this);
        return enhancer.create();
    &#125;

    //é‡å†™æ‹¦æˆªæ–¹æ³•
    @Override
    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123;
        Object object = null;
        System.out.println(&quot;before&quot;);
        object = methodProxy.invoke(target,objects);
        System.out.println(&quot;after&quot;);
        return object;
    &#125;
&#125;


public class TestClass &#123;
    public static void main(String[] args) &#123;
        NewUserImpl newUser = new NewUserImpl();
        NewUserImpl user = (NewUserImpl) new MyCglibProxy().creatProxyInstance(newUser);
        user.use();
    &#125;
&#125;</code></pre>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaWebä¹‹Servlet</title>
    <url>/2020/10/04/Servlet/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨SpringMVCçš„æ—¶å€™æœ‰æ˜¯è¦ç”¨åˆ°Servletä¸­çš„æ–¹æ³•ï¼Œä¹Ÿå€Ÿæ­¤æœºä¼šå¤ä¹ ä¸€æ³¢Servlet</p>
<h1 id="ä»€ä¹ˆæ˜¯Servlet"><a href="#ä»€ä¹ˆæ˜¯Servlet" class="headerlink" title="ä»€ä¹ˆæ˜¯Servlet"></a><strong>ä»€ä¹ˆæ˜¯Servlet</strong></h1><p>Servletçš„å…¨ç§°æ˜¯JavaServletï¼Œæ˜¯è¿è¡Œåœ¨WebæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œç”±Servletå®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’ŒHTTPæœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚å…¶ä¸»è¦åŠŸèƒ½åœ¨äºäº¤äº’å¼åœ°æµè§ˆå’Œä¿®æ”¹æ•°æ®ï¼Œç”ŸæˆåŠ¨æ€Webå†…å®¹ã€‚</p>
<p>Servletçš„æœ¬è´¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Javaç±»ï¼Œç¼–å†™ä¸€ä¸ªServletï¼Œå…¶å®å°±æ˜¯æŒ‰ç…§ç›¸åº”çš„è§„èŒƒç¼–å†™ä¸€ä¸ªJavaç±»</p>
<h1 id="servletå®¹å™¨"><a href="#servletå®¹å™¨" class="headerlink" title="servletå®¹å™¨"></a><strong>servletå®¹å™¨</strong></h1><p>ä¸Šé¢è¯´åˆ°servletæ˜¯è¿è¡Œåœ¨webæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œç”±servletå®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œservletå®¹å™¨æ˜¯webæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†ï¼ŒServletä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå®ƒå¿…é¡»è¢«éƒ¨ç½²åˆ°Servletå®¹å™¨ä¸­ï¼Œç”±å®¹å™¨æ¥å®ä¾‹åŒ–å’Œè°ƒç”¨Servletçš„æ–¹æ³•ï¼Œservletæ˜¯ç”±servletå®¹å™¨ç»Ÿä¸€ç®¡ç†çš„ï¼Œå®ƒè´Ÿè´£ç®¡ç†servletçš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h1 id="servletçš„å·¥ä½œæµç¨‹"><a href="#servletçš„å·¥ä½œæµç¨‹" class="headerlink" title="servletçš„å·¥ä½œæµç¨‹"></a><strong>servletçš„å·¥ä½œæµç¨‹</strong></h1><p><img src="/2020/10/04/Servlet/servlet.jpg" alt="servlet"></p>
<h1 id="servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†"><a href="#servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†" class="headerlink" title="servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†"></a><strong>servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†</strong></h1><h2 id="servletçš„ä½¿ç”¨"><a href="#servletçš„ä½¿ç”¨" class="headerlink" title="servletçš„ä½¿ç”¨"></a><strong>servletçš„ä½¿ç”¨</strong></h2><p>ServletæŠ€æœ¯çš„æ ¸å¿ƒæ˜¯Servletæ¥å£ï¼Œå®ƒæ˜¯æ‰€æœ‰Servletç±»å¿…é¡»ç›´æ¥æˆ–è€…é—´æ¥å®ç°çš„ä¸€ä¸ªæ¥å£ã€‚è¦æƒ³ä½¿ç”¨servletï¼Œå°±å¿…é¡»å®ç°servletæ¥å£æˆ–è€…ç»§æ‰¿å®ç°äº†servletæ¥å£çš„ç±»ã€‚</p>
<h2 id="servletçš„å·¥ä½œåŸç†"><a href="#servletçš„å·¥ä½œåŸç†" class="headerlink" title="servletçš„å·¥ä½œåŸç†"></a><strong>servletçš„å·¥ä½œåŸç†</strong></h2><p>å½“å®¢æˆ·ç«¯æœ‰è¯·æ±‚æ—¶ï¼ŒServletå®¹å™¨å®ä¾‹åŒ–ç›¸å¯¹åº”çš„servletï¼Œå¹¶è°ƒç”¨å®ƒçš„service()æ–¹æ³•ï¼Œä¼ å…¥ServletRequestå¯¹è±¡å’ŒServletResponseå¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç”±servletå®¹å™¨å°è£…å¥½çš„ï¼ŒServletRequestå¯¹è±¡å°è£…äº†httpçš„è¯·æ±‚ï¼ŒServletResponseåˆ™å°è£…äº†å¯¹httpè¯·æ±‚çš„å“åº”ã€‚</p>
<p>å¯¹äºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ŒServletå®¹å™¨è¿˜ä¼šåˆ›å»ºä¸€ä¸ªServletContextå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†ä¸Šä¸‹æ–‡ï¼ˆåº”ç”¨ç¨‹åºï¼‰çš„ç¯å¢ƒè¯¦æƒ…ã€‚</p>
<h1 id="servletçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#servletçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="servletçš„ç”Ÿå‘½å‘¨æœŸ"></a><strong>servletçš„ç”Ÿå‘½å‘¨æœŸ</strong></h1><p>servletçš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºinit()ã€service()å’Œdestroy()ä¸‰ä¸ªè¿‡ç¨‹</p>
<ul>
<li>init()</li>
</ul>
<p>å½“Servletç¬¬ä¸€æ¬¡è¢«è¯·æ±‚æ—¶ï¼ŒServletå®¹å™¨å°±ä¼šå¼€å§‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆå§‹åŒ–ä¸€ä¸ªServletå¯¹è±¡å‡ºæ¥ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨åç»­è¯·æ±‚ä¸­ä¸ä¼šå†è¢«Servletå®¹å™¨è°ƒç”¨ï¼Œå¯ä»¥åˆ©ç”¨init()æ–¹æ³•å¯¹servletè¿›è¡Œåˆå§‹åŒ–å·¥ä½œ</p>
<ul>
<li>service()</li>
</ul>
<p>æ¯å½“è¯·æ±‚Servletæ—¶ï¼ŒServletå®¹å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</p>
<ul>
<li>destroy()</li>
</ul>
<p>å½“è¦é”€æ¯Servletæ—¶ï¼ŒServletå®¹å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨å¸è½½åº”ç”¨ç¨‹åºæˆ–è€…å…³é—­Servletå®¹å™¨æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šå†™ä¸€äº›æ¸…é™¤ä»£ç ã€‚</p>
<h1 id="Servletã€ServletRequestã€ServletResponseæ¥å£"><a href="#Servletã€ServletRequestã€ServletResponseæ¥å£" class="headerlink" title="Servletã€ServletRequestã€ServletResponseæ¥å£"></a><strong>Servletã€ServletRequestã€ServletResponseæ¥å£</strong></h1><h2 id="Servletæ¥å£ï¼š"><a href="#Servletæ¥å£ï¼š" class="headerlink" title="Servletæ¥å£ï¼š"></a><strong>Servletæ¥å£ï¼š</strong></h2><pre><code>public interface Servlet &#123;
    void init(ServletConfig var1) throws ServletException;

 // è·å–é…ç½®ä¿¡æ¯
    ServletConfig getServletConfig();

    void service(ServletRequest var1, ServletResponse var2) throws ServletException, IOException;

 // è·å–servletä¿¡æ¯ ä¼ ç»™initï¼ˆï¼‰æ–¹æ³•çš„ServletConfigå¯¹è±¡
    String getServletInfo();

    void destroy();
&#125;</code></pre>
<h2 id="ServletRequestæ¥å£"><a href="#ServletRequestæ¥å£" class="headerlink" title="ServletRequestæ¥å£"></a><strong>ServletRequestæ¥å£</strong></h2><p>ServletRequestæ¥å£ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ³•æ˜¯getParameteræ–¹æ³•ï¼Œç”¨äºè¿”å›è¯·æ±‚å‚æ•°çš„å€¼</p>
<pre><code>String getParameter(String var1);//è¿”å›è¯·æ±‚å‚æ•°çš„å€¼</code></pre>
<h2 id="ServletResponseæ¥å£"><a href="#ServletResponseæ¥å£" class="headerlink" title="ServletResponseæ¥å£"></a><strong>ServletResponseæ¥å£</strong></h2><p> javax.servlet.ServletResponseæ¥å£è¡¨ç¤ºä¸€ä¸ªServletå“åº”ï¼Œåœ¨è°ƒç”¨Servletçš„Service()æ–¹æ³•å‰ï¼ŒServletå®¹å™¨ä¼šå…ˆåˆ›å»ºä¸€ä¸ªServletResponseå¯¹è±¡ï¼Œå¹¶æŠŠå®ƒä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ ç»™Service()æ–¹æ³•ã€‚</p>
<pre><code>public interface ServletResponse &#123;

    String getCharacterEncoding();

    String getContentType();

    PrintWriter getWriter() throws IOException;

    void setCharacterEncoding(String var1);

    void setContentLength(int var1);

     // ....çœç•¥ä¸€äº›æ–¹æ³•
    void setContentType(String var1);
&#125;</code></pre>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼š </p>
<pre><code>PrintWriter getWriter() throws IOException;

void setContentType(String var1);</code></pre>
<p>åœ¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œéƒ½å…ˆåº”è°ƒç”¨setContentTypeæ–¹æ³•ï¼Œè®¾ç½®å“åº”çš„å†…å®¹ç±»å‹ï¼Œå¹¶å°†â€œtext/htmlâ€ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œè¿™æ˜¯åœ¨å‘Šè¯‰æµè§ˆå™¨å“åº”çš„å†…å®¹ç±»å‹ä¸ºHTMLï¼Œéœ€è¦ä»¥HTMLçš„æ–¹æ³•è§£é‡Šå“åº”å†…å®¹è€Œä¸æ˜¯æ™®é€šçš„æ–‡æœ¬ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åŠ ä¸Šâ€œcharset=UTF-8â€æ”¹å˜å“åº”çš„ç¼–ç æ–¹å¼ä»¥é˜²æ­¢å‘ç”Ÿä¸­æ–‡ä¹±ç ç°è±¡ã€‚</p>
<p>getWriteræ–¹æ³•è¿”å›ä¸€ä¸ªå¯ä»¥å‘å®¢æˆ·ç«¯å‘é€æ–‡æœ¬çš„javaå¯¹è±¡ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯é¡µé¢ä¸­è¾“å‡ºä¿¡æ¯</p>
<h1 id="ServletContextå¯¹è±¡"><a href="#ServletContextå¯¹è±¡" class="headerlink" title="ServletContextå¯¹è±¡"></a><strong>ServletContextå¯¹è±¡</strong></h1><p>ServletContextå¯¹è±¡è¡¨ç¤ºServletåº”ç”¨ç¨‹åºã€‚æ¯ä¸ªWebåº”ç”¨ç¨‹åºéƒ½åªæœ‰ä¸€ä¸ªServletContextå¯¹è±¡ã€‚æœ‰äº†ServletContextå¯¹è±¡ï¼Œå°±å¯ä»¥å…±äº«ä»åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰èµ„æ–™å¤„è®¿é—®åˆ°çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ³¨å†ŒWebå¯¹è±¡ã€‚å‰è€…å°†å¯¹è±¡ä¿å­˜åœ¨ServletContextä¸­çš„ä¸€ä¸ªå†…éƒ¨Mapä¸­ã€‚ä¿å­˜åœ¨ServletContextä¸­çš„å¯¹è±¡è¢«ç§°ä½œå±æ€§ã€‚</p>
<p>servletcontextå¯¹è±¡ä¸­çš„æ–¹æ³•ï¼š</p>
<pre><code>Object getAttribute(String var1);

Enumeration&lt;String&gt; getAttributeNames();

void setAttribute(String var1, Object var2);

void removeAttribute(String var1);</code></pre>
<h1 id="ServletConfigæ¥å£"><a href="#ServletConfigæ¥å£" class="headerlink" title="ServletConfigæ¥å£"></a><strong>ServletConfigæ¥å£</strong></h1><p>å½“Servletå®¹å™¨åˆå§‹åŒ–Servletæ—¶ï¼ŒServletå®¹å™¨ä¼šç»™Servletçš„init()æ–¹å¼ä¼ å…¥ä¸€ä¸ªServletConfigå¯¹è±¡ã€‚ä¸€äº›æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>String getInitParameter(String name) //æ ¹æ®åˆå§‹åŒ–å‚æ•°åï¼Œè¿”å›å¯¹åº”çš„åˆå§‹åŒ–å‚æ•°å€¼

Enumeration getInitParameterNames()    //è¿”å›ä¸€ä¸ªEnumerationå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰çš„åˆå§‹åŒ–å‚æ•°å

ServletContext getServletContext()    //è¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰Webåº”ç”¨çš„ï¼ŒServletContextå¯¹è±¡

String getServletName()    //è¿”å›Servletçš„åå­—ï¼Œå³web.xmlä¸­å…ƒç´ çš„å€¼</code></pre>
<h1 id="HttpServletã€HttpServletRequestã€HttpServlelResponse"><a href="#HttpServletã€HttpServletRequestã€HttpServlelResponse" class="headerlink" title="HttpServletã€HttpServletRequestã€HttpServlelResponse"></a><strong>HttpServletã€HttpServletRequestã€HttpServlelResponse</strong></h1><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ€å¸¸ç”¨çš„Servletç±»HttpServletæŠ½è±¡ç±»<br>å¸¸ç”¨çš„æ¥å£æ˜¯ServletRequestçš„å­æ¥å£HttpServletRequest å’Œ ServletResponseçš„å­æ¥å£HttpServletResponse </p>
<p>ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2020/10/04/Servlet/relationship.jpg" alt="relationship"></p>
<h2 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a><strong>HttpServlet</strong></h2><p>å¸¸ç”¨Servletå¯¹è±¡æ˜¯javax.servlet.httpåŒ…ä¸‹çš„HttpServletæŠ½è±¡ç±»</p>
<p>HttpServletæŠ½è±¡ç±»æ˜¯ç»§æ‰¿äºGenericServletæŠ½è±¡ç±»è€Œæ¥çš„ã€‚ä½¿ç”¨HttpServletæŠ½è±¡ç±»æ—¶ï¼Œè¿˜éœ€è¦å€ŸåŠ©åˆ†åˆ«ä»£è¡¨Servletè¯·æ±‚å’ŒServletå“åº”çš„HttpServletRequestå’ŒHttpServletResponseå¯¹è±¡</p>
<p>ç»§æ‰¿HttpServletçš„Servletç±»ä¸­è¦å®ç°doXXæ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºå®¢æˆ·ç«¯çš„ä¸åŒè¯·æ±‚</p>
<pre><code>protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
&#125;

...

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;
&#125;</code></pre>
<p>HttpServletç±»ä¸­é‡å†™äº†service()æ–¹æ³•ï¼Œæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹çš„ä¸åŒè€Œè°ƒç”¨ç›¸åº”çš„doXXæ–¹æ³•</p>
<h2 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a><strong>HttpServletRequest</strong></h2><p>HttpServletRequestæ¥å£ä¸­æ·»åŠ äº†å‡ ä¸ªé‡è¦æ–¹æ³•ï¼š</p>
<pre><code>Cookie[] getCookies();//è¿”å›ä¸€ä¸ªcookieå¯¹è±¡æ•°ç»„

String getHeader(String var1);//è¿”å›æŒ‡å®šHTTPæ ‡é¢˜çš„å€¼

HttpSession getSession();//è¿”å›ä¸è¿™ä¸ªè¯·æ±‚ç›¸å…³çš„ä¼šè¯å¯¹è±¡</code></pre>
<h2 id="HttpServlelResponse"><a href="#HttpServlelResponse" class="headerlink" title="HttpServlelResponse"></a><strong>HttpServlelResponse</strong></h2><p>HttpServlelResponseä¸­æ·»åŠ çš„é‡è¦æ–¹æ³•ï¼š</p>
<pre><code>void addCookie(Cookie var1);//ç»™è¿™ä¸ªå“åº”æ·»åŠ ä¸€ä¸ªcookie

void addHeader(String var1, String var2);//ç»™è¿™ä¸ªè¯·æ±‚æ·»åŠ ä¸€ä¸ªå“åº”å¤´

void sendRedirect(String var1) throws IOException;//å‘é€ä¸€æ¡å“åº”ç ï¼Œè®²æµè§ˆå™¨è·³è½¬åˆ°æŒ‡å®šçš„ä½ç½®

void setStatus(int var1);//è®¾ç½®å“åº”è¡Œçš„çŠ¶æ€ç </code></pre>
<h1 id="cookieå’Œsession"><a href="#cookieå’Œsession" class="headerlink" title="cookieå’Œsession"></a><strong>cookieå’Œsession</strong></h1><p>ä¼šè¯ï¼ˆSessionï¼‰è·Ÿè¸ªæ˜¯Webç¨‹åºä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„æ•´ä¸ªä¼šè¯ã€‚å¸¸ç”¨çš„ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ˜¯Cookieä¸Session</p>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a><strong>cookie</strong></h2><p>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ã€‚ä¸€æ—¦æ•°æ®äº¤æ¢å®Œæ¯•ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„è¿æ¥å°±ä¼šå…³é—­ï¼Œå†æ¬¡äº¤æ¢æ•°æ®éœ€è¦å»ºç«‹æ–°çš„è¿æ¥ã€‚è¿™å°±æ„å‘³ç€æœåŠ¡å™¨æ— æ³•ä»è¿æ¥ä¸Šè·Ÿè¸ªä¼šè¯ã€‚è¦è·Ÿè¸ªè¯¥ä¼šè¯ï¼Œå¿…é¡»å¼•å…¥ä¸€ç§æœºåˆ¶ã€‚è€Œcookieå°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚</p>
<p>ç”±äºHTTPæ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼ŒæœåŠ¡å™¨å•ä»ç½‘ç»œè¿æ¥ä¸Šæ— ä»çŸ¥é“å®¢æˆ·èº«ä»½ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿå°±ç»™å®¢æˆ·ç«¯ä»¬é¢å‘ä¸€ä¸ªé€šè¡Œè¯å§ï¼Œæ¯äººä¸€ä¸ªï¼Œæ— è®ºè°è®¿é—®éƒ½å¿…é¡»æºå¸¦è‡ªå·±é€šè¡Œè¯ã€‚è¿™æ ·æœåŠ¡å™¨å°±èƒ½ä»é€šè¡Œè¯ä¸Šç¡®è®¤å®¢æˆ·èº«ä»½äº†ã€‚è¿™å°±æ˜¯Cookieçš„å·¥ä½œåŸç†ã€‚</p>
<p>Cookieå®é™…ä¸Šæ˜¯ä¸€å°æ®µçš„æ–‡æœ¬ä¿¡æ¯ã€‚å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çŠ¶æ€ï¼Œå°±ä½¿ç”¨responseå¯¹è±¡çš„addCookieæ–¹æ³•å‘å®¢æˆ·ç«¯æµè§ˆå™¨é¢å‘ä¸€ä¸ªCookieã€‚å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæŠŠCookieä¿å­˜èµ·æ¥ã€‚å½“æµè§ˆå™¨å†è¯·æ±‚è¯¥ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨æŠŠè¯·æ±‚çš„ç½‘å€è¿åŒè¯¥Cookieä¸€åŒæäº¤ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ£€æŸ¥è¯¥Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·çŠ¶æ€ã€‚æœåŠ¡å™¨è¿˜å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹Cookieçš„å†…å®¹ã€‚</p>
<p>Cookieç±»åœ¨javax.servlet.http.CookieåŒ…ä¸‹</p>
<p>Cookieå¯¹è±¡ä¸­å¸¸ç”¨çš„æ–¹æ³•</p>
<pre><code>public void setDomain(String pattern)    //è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ xxx.com

public String getDomain()    //è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ xxx.comã€‚

//è¯¥æ–¹æ³•è®¾ç½®cookieæœ‰æ•ˆæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookieåªä¼šåœ¨å½“å‰sessionä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚
public void setMaxAge(int expiry)

//è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚
public int getMaxAge()    

public String getName()    //è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚

public void setValue(String newValue)    //è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚

public String getValue() //è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚

//è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚
public void setPath(String uri)

public String getPath()    //è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚

//è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œè¡¨ç¤º cookie æ˜¯å¦åº”è¯¥åªåœ¨åŠ å¯†çš„ï¼ˆå³ SSLï¼‰è¿æ¥ä¸Šå‘é€ã€‚
public void setSecure(boolean flag)

public void setComment(String purpose)    //è®¾ç½®cookieçš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚

public String getComment()    //è·å– cookie çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚</code></pre>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a><strong>session</strong></h2><p>Sessionæ˜¯å¦ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒçš„æ˜¯Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€ŒSessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šã€‚è¿™å°±æ˜¯Sessionã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»è¯¥Sessionä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†ã€‚</p>
<p>Sessionå¯¹åº”çš„ç±»ä¸ºjavax.servlet.http.HttpSessionç±»</p>
<p>Servleté‡Œé€šè¿‡request.getSession()æ–¹æ³•è·å–è¯¥å®¢æˆ·çš„Session</p>
<p>HttpSessionå¯¹è±¡ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<pre><code>//è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚
public Object getAttribute(String name)

//è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚
public void setAttribute(String name, Object value)

//è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚
public Enumeration getAttributeNames()

//è®¾ç½®sessionçš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚
public void setMaxInactiveInterval(int interval)

//è·å–sessionçš„è¶…æ—¶æ—¶é—´ä»¥ç§’ä¸ºå•ä½ã€‚
public int getMaxInactiveInterval()

//è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚
public String getId()

//è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚
public long getLastAccessedTime()

//è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚
    public void invalidate()

//å¦‚æœå®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚
    public boolean isNew()

//è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚
    public void removeAttribute(String name)</code></pre>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCå…¥é—¨</title>
    <url>/2020/10/04/SpringMVC/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯MVCæ¡†æ¶"><a href="#ä»€ä¹ˆæ˜¯MVCæ¡†æ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯MVCæ¡†æ¶"></a><strong>ä»€ä¹ˆæ˜¯MVCæ¡†æ¶</strong></h1><p>MVCçš„å…¨åæ˜¯Model View Controllerï¼Œæ˜¯æ¨¡å‹(model)ï¼è§†å›¾(view)ï¼æ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œæ˜¯åœ¨WEBæ¨¡å‹ä¸­ä¸€ç§å¾ˆæµè¡Œçš„æ¡†æ¶ï¼Œé€šè¿‡æŠŠModelï¼ŒViewï¼ŒControlleråˆ†ç¦»ï¼ŒæŠŠè¾ƒä¸ºå¤æ‚çš„webåº”ç”¨åˆ†æˆé€»è¾‘æ¸…æ™°çš„å‡ éƒ¨åˆ†ï¼Œæ˜¯ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œå¢å¼ºå¼€å‘äººå‘˜é—´çš„é…åˆï¼Œå‡å°‘å‡ºé”™ï¼ŒMVCæ˜¯ä¸€ç§åˆ†å±‚å·¥ä½œçš„æ–¹æ³•ã€‚</p>
<p>model æ¨¡å‹ï¼šä¸€ä¸ªæˆ–å¤šä¸ªbeanï¼Œè´Ÿè´£å­˜å‚¨æ•°æ®å’Œå¤„ç†ä¸šåŠ¡é€»è¾‘<br>view è§†å›¾ï¼šä¸€ä¸ªæˆ–å¤šä¸ªjspæ–‡ä»¶ï¼Œè´Ÿè´£æ˜¾ç¤ºä¿¡æ¯<br>controller æ§åˆ¶å™¨ï¼šä¸€ä¸ªæˆ–å¤šä¸ªservletï¼Œè´Ÿè´£å¤„ç†ä¸ç”¨æˆ·é—´çš„äº¤äº’</p>
<hr>
<h1 id="ä»€ä¹ˆæ˜¯SpringMVC"><a href="#ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="ä»€ä¹ˆæ˜¯SpringMVC"></a><strong>ä»€ä¹ˆæ˜¯SpringMVC</strong></h1><p>SpringMVCæ˜¯Springçš„ä¸€ä¸ªå­æ¡†æ¶ï¼Œæ‹¥æœ‰Springçš„ç‰¹æ€§</p>
<h2 id="SpringMVCçš„ç»„æˆ"><a href="#SpringMVCçš„ç»„æˆ" class="headerlink" title="SpringMVCçš„ç»„æˆ"></a><strong>SpringMVCçš„ç»„æˆ</strong></h2><p>Spring MVCä¸»è¦ç”± DispatcherServlet(å‰ç«¯æ§åˆ¶å™¨)ã€HandlerMapping(å¤„ç†å™¨æ˜ å°„)ã€Controller(å¤„ç†å™¨)ã€ViewResolver(è§†å›¾è§£æå™¨)ã€View(è§†å›¾) ç»„æˆ</p>
<ul>
<li><h3 id="DispatcherServletæ¥å£ï¼š"><a href="#DispatcherServletæ¥å£ï¼š" class="headerlink" title="DispatcherServletæ¥å£ï¼š"></a>DispatcherServletæ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet)</p>
<p>DispatcherServletæ˜¯SpringMVCçš„æ ¸å¿ƒï¼ŒDispatcherServletæ¥å£æ˜¯å‰ç«¯æ§åˆ¶å™¨ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æœ‰ç»è¿‡å®ƒæ¥ç»Ÿä¸€åˆ†å‘ã€‚åœ¨DispatcherServletå°†è¯·æ±‚åˆ†å‘ç»™Spring Controllerä¹‹å‰ï¼Œéœ€è¦å€ŸåŠ©äºSpringæä¾›çš„HandlerMappingç±»å®šä½åˆ°å…·ä½“çš„Controller</p>
<ul>
<li><h3 id="HandlerMappingæ¥å£ï¼š"><a href="#HandlerMappingæ¥å£ï¼š" class="headerlink" title="HandlerMappingæ¥å£ï¼š"></a>HandlerMappingæ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet-Mapping)</p>
<p>DispatcherServleté€šè¿‡HandlerMappingå®šä½å…·ä½“çš„Controllerï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚äº¤ç»™Controller</p>
<ul>
<li><h3 id="Controlleræ¥å£ï¼š"><a href="#Controlleræ¥å£ï¼š" class="headerlink" title="Controlleræ¥å£ï¼š"></a>Controlleræ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet)</p>
<p>Controllerå°†å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ï¼Œä¸€æ—¦Controllerå¤„ç†å®Œç”¨æˆ·è¯·æ±‚ï¼Œå°†è¿”å›ModelAndViewå¯¹è±¡ç»™ DispatcherServletå‰ç«¯æ§åˆ¶å™¨ï¼ŒModelAndViewä¸­åŒ…å«äº†æ¨¡å‹ï¼ˆModelï¼‰å’Œè§†å›¾ï¼ˆViewï¼‰ã€‚</p>
<ul>
<li><h3 id="ViewResolveræ¥å£ï¼š"><a href="#ViewResolveræ¥å£ï¼š" class="headerlink" title="ViewResolveræ¥å£ï¼š"></a>ViewResolveræ¥å£ï¼š</h3></li>
</ul>
<p>Springæä¾›çš„è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰åœ¨Webåº”ç”¨ä¸­æŸ¥æ‰¾Viewå¯¹è±¡ï¼Œä»è€Œå°†ç›¸åº”ç»“æœæ¸²æŸ“ç»™å®¢æˆ·ã€‚</p>
<h2 id="SpringMVCçš„è¿è¡Œè¿‡ç¨‹"><a href="#SpringMVCçš„è¿è¡Œè¿‡ç¨‹" class="headerlink" title="SpringMVCçš„è¿è¡Œè¿‡ç¨‹"></a>SpringMVCçš„è¿è¡Œè¿‡ç¨‹</h2><p><img src="/2020/10/04/SpringMVC/SpringMVC.png"></p>
<p>SpringMVCçš„è¿è¡Œè¿‡ç¨‹ä¸ºï¼š</p>
<p>å®¢æˆ·ç«¯æäº¤è¯·æ±‚ç»™DispatcherServletï¼ŒDispatcherServletå¯»æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªçš„å¤„ç†å™¨æ˜ å°„HandlerMappingï¼Œæ‰¾åˆ°ä¸è¯·æ±‚ç›¸åº”çš„Controllerï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™Controllerï¼ŒControllerå¤„ç†å®Œæ¯•è¯·æ±‚ä¹‹åè¿”å›ModelAndViewå¯¹è±¡ç»™Dispatcherï¼ŒDispatcheré€šè¿‡ViewResolveræ‰¾åˆ°ModelAndViewä¸­æŒ‡å®šçš„è§†å›¾åï¼Œå°†è§†å›¾è¿”å›ç»™å®¢æˆ·ç«¯</p>
<hr>
<h1 id="SpringMVCå…¥é—¨ä¹‹HelloWorld"><a href="#SpringMVCå…¥é—¨ä¹‹HelloWorld" class="headerlink" title="SpringMVCå…¥é—¨ä¹‹HelloWorld"></a><strong>SpringMVCå…¥é—¨ä¹‹HelloWorld</strong></h1><p>åœ¨springmvc.controlleråŒ…ä¸‹åˆ›å»ºHelloWorldControllerç±»ï¼Œç»§æ‰¿Controlleræ¥å£ï¼š</p>
<p><strong>æ³¨ï¼šè¦é€‰æ‹©org.springframework.web.servletæ¥å£ä¸‹çš„Controllerå­æ¥å£</strong></p>
<pre><code>package springmvc.controller;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

public class HelloWorldController implements Controller &#123;
    @Override
    public ModelAndView handleRequest(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse) throws Exception &#123;
        ModelAndView mav = new ModelAndView();
        mav.addObject(&quot;message&quot;,&quot;helloworld!&quot;);
        mav.setViewName(&quot;/WEB-INF/helloWorld.jsp&quot;);
        return mav;
    &#125;
&#125;</code></pre>
<p>å…¶ä¸­çš„helloWorld.jspæ–‡ä»¶åé¢ä¼šåˆ›å»º</p>
<p>é…ç½®dispatcher-servlet.xmlæ–‡ä»¶ï¼Œä¸ºå‰ç«¯å¤„ç†å™¨æ·»åŠ å¤„ç†å™¨æ˜ å°„ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;
&lt;beans&gt;
    &lt;bean id=&quot;simpleUrlHandlerMapping&quot;
          class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
        &lt;property name=&quot;mappings&quot;&gt;
            &lt;props&gt;
&lt;!--                è¿™é‡ŒHelloWorldControllerä½¿ç”¨çš„æ˜¯åè¾¹beançš„id--&gt;
                &lt;prop key=&quot;/index&quot;&gt;HelloWorldController&lt;/prop&gt;
            &lt;/props&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;HelloWorldController&quot; class=&quot;springmvc.controller.HelloWorldController&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>é…ç½®web.xmlæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;
    &lt;servlet&gt;

&lt;!--        ä¼šè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªnameåˆ°WEB-INFä¸­æ‰¾***-servlet.xml çš„æ–‡ä»¶ï¼Œæ‰€ä»¥xmlæ–‡ä»¶åä¸ºdispatcher-servlet.xmlï¼Œè€Œè¿™é‡Œçš„servlet-nameä¸ºdispatcher--&gt;

        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
        &lt;servlet-class&gt;
            org.springframework.web.servlet.DispatcherServlet
        &lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
        &lt;!--è¿™é‡Œå°†urlè®¾ç½®ä¸º/ï¼Œå¤„ç†æ‰€æœ‰çš„url        --&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;    
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
<p>ä¿®æ”¹index.jspæ–‡ä»¶ï¼š</p>
<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;h1&gt;welcome to login&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>åœ¨WEB-INFä¸‹æ·»åŠ helloWorld.jspæ–‡ä»¶ï¼š</p>
<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%--ç»‘å®šå¤„ç†å™¨ä¸­æ·»åŠ çš„å€¼--%&gt;

    &lt;h1&gt;$&#123;message&#125;&lt;/h1&gt;    
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>é¡¹ç›®çš„æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/04/SpringMVC/content.jpg" alt="content"></p>
<p>postmanè®¿é—®<a href="http://localhost:8080/">http://localhost:8080</a><br><img src="/2020/10/04/SpringMVC/8080.jpg" alt="8080"></p>
<p>è®¿é—®<a href="http://localhost:8080/index">http://localhost:8080/index</a><br><img src="/2020/10/04/SpringMVC/index.jpg" alt="index"></p>
<p>SpringMVCä¸­çš„æ•°æ®ç»‘å®šï¼Œåªè¦åœ¨æ§åˆ¶å™¨ä¸­å¯¹æ•°æ®æ¨¡å‹è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œå¦‚ä¸Šé¢ä¾‹å­çš„</p>
<pre><code>mav.addObject(&quot;message&quot;,&quot;helloworld!&quot;); </code></pre>
<p>æˆ–è€…Modelç±»å‹å¯¹è±¡çš„ addAttribute()æ–¹æ³•å¤„ç†æ•°æ®ï¼Œç„¶ååœ¨ç›¸åº”çš„viewå±‚ä½¿ç”¨${}æ˜¾ç¤ºæ•°æ®å³å¯ã€‚</p>
<p>å¦‚æœåœ¨Dispatcherä¸­é…ç½®è§†å›¾è§£æå™¨</p>
<pre><code>&lt;bean id=&quot;internalResourceViewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;</code></pre>
<p>åˆ™Controllerä¸­çš„è¿”å›å¯¹è±¡ModelAndViewä¸­æŒ‡å®šçš„è§†å›¾ä¸ç”¨æ·»åŠ å‰ç¼€å’Œåç¼€</p>
<pre><code>mav.setViewName(&quot;result&quot;);</code></pre>
<p>å°†è¿”å›åŒæ ·çš„ç»“æœ</p>
<hr>
<h1 id="Controlleræ³¨è§£å’Œ-RequestMappingæ³¨è§£"><a href="#Controlleræ³¨è§£å’Œ-RequestMappingæ³¨è§£" class="headerlink" title="@Controlleræ³¨è§£å’Œ@RequestMappingæ³¨è§£"></a><strong>@Controlleræ³¨è§£å’Œ@RequestMappingæ³¨è§£</strong></h1><p><strong>æ³¨ï¼šè¦ä½¿ç”¨æ³¨è§£ï¼Œè¦åœ¨æ§åˆ¶å™¨çš„é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹è¯­å¥</strong>    </p>
<pre><code>&lt;context: component-scan base-package=&quot;package-name&quot;&gt;&lt;/context: component-scan&gt;</code></pre>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h2><p>ä½¿ç”¨@Controlleræ³¨è§£å°†æŸç±»å£°æ˜ä¸ºæ§åˆ¶å™¨ï¼Œä½¿ç”¨@Controllerå°±ä¸ç”¨åœ¨Dispatcheré…ç½®æ–‡ä»¶ä¸­é…ç½®æ§åˆ¶å™¨äº†</p>
<h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h2><p>ä½¿ç”¨@RequestMappingå¯ä»¥ä¸ºæ¯ä¸ªè¯·æ±‚ç¼–å†™å¯¹åº”çš„å¤„ç†æ–¹æ³•</p>
<h3 id="æ–¹æ³•çº§åˆ«æ³¨è§£"><a href="#æ–¹æ³•çº§åˆ«æ³¨è§£" class="headerlink" title="æ–¹æ³•çº§åˆ«æ³¨è§£"></a>æ–¹æ³•çº§åˆ«æ³¨è§£</h3><p>@RequestMappingä½œç”¨äºæ–¹æ³•æ—¶ï¼Œè‹¥å®¢æˆ·ç«¯æœ‰ç›¸åº”çš„è¯·æ±‚ï¼Œåˆ™dispatcherå°†é€šè¿‡è¯¥è¯·æ±‚æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œä»è€Œæ‰¾åˆ°æ–¹æ³•æ‰€åœ¨çš„æ§åˆ¶å™¨ï¼Œç”±æ§åˆ¶å™¨å¤„ç†</p>
<pre><code>@Controller
public class LoginController &#123;
    @RequestMapping(&quot;/login&quot;)
    public String login()&#123;
        return &quot;login&quot;;
    &#125;
    @RequestMapping(value = &quot;/result&quot;)
    public String result()&#123;
        return &quot;result&quot;;
    &#125;
&#125;

&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;welcome to login&lt;/h1&gt;
&lt;form action=&quot;/result&quot;&gt;
    å­¦å·ï¼š&lt;input name=&quot;id&quot;&gt;&lt;br&gt;
    å§“åï¼š&lt;input name=&quot;name&quot;&gt;&lt;br&gt;
    å¹´é¾„ï¼š&lt;input name=&quot;age&quot;&gt;&lt;br&gt;
    &lt;button type=&quot;sumbit&quot;&gt;æäº¤&lt;/button&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong>æ³¨ï¼šæ­¤é…ç½®æ˜¯åŸºäºè§†å›¾å¤„ç†å™¨çš„é…ç½®</strong></p>
<p>æ­¤æ—¶ï¼Œæµè§ˆå™¨æ‰“å¼€<a href="http://localhost:8080/login">http://localhost:8080/login</a> å°†ä¼šæˆåŠŸæ˜¾ç¤ºç™»é™†ç•Œé¢</p>
<h3 id="ç±»çº§åˆ«æ³¨è§£"><a href="#ç±»çº§åˆ«æ³¨è§£" class="headerlink" title="ç±»çº§åˆ«æ³¨è§£"></a>ç±»çº§åˆ«æ³¨è§£</h3><p>åœ¨ç±»çº§åˆ«æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œæ§åˆ¶å™¨ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†æ˜ å°„ä¸ºç±»çº§åˆ«çš„è¯·æ±‚ã€‚</p>
<pre><code>@Controller
@RequestMapping(&quot;/init&quot;)
public class LoginController &#123;
    @RequestMapping(&quot;/login&quot;)
    public String login()&#123;
        return &quot;login&quot;;
    &#125;
    @RequestMapping(value = &quot;/result&quot;)
    public String result()&#123;
        return &quot;result&quot;;
    &#125;
&#125;</code></pre>
<p>æ­¤æ—¶ï¼Œæµè§ˆå™¨æ‰“å¼€<a href="http://localhost:8080/init/login">http://localhost:8080/init/login</a> å°†ä¼šæˆåŠŸæ˜¾ç¤ºç™»é™†ç•Œé¢</p>
<h2 id="æ¥æ”¶è¯·æ±‚å‚æ•°"><a href="#æ¥æ”¶è¯·æ±‚å‚æ•°" class="headerlink" title="æ¥æ”¶è¯·æ±‚å‚æ•°"></a><strong>æ¥æ”¶è¯·æ±‚å‚æ•°</strong></h2><h3 id="ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­"><a href="#ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­" class="headerlink" title="ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­"></a><strong>ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­</strong></h3><pre><code>@Controller
public class LoginController &#123;
    @RequestMapping(&quot;/login&quot;)
    public String login()&#123;
        return &quot;login&quot;;
    &#125;
    @RequestMapping(value = &quot;/result&quot;)
    public String result(String name,String id,int age,Model model)&#123;
        model.addAttribute(&quot;id&quot;,id);
        model.addAttribute(&quot;name&quot;,name);
        model.addAttribute(&quot;age&quot;,age);
        return &quot;result&quot;;
    &#125;
&#125;</code></pre>
<h3 id="HttpServletRequestè·å¾—å‚æ•°"><a href="#HttpServletRequestè·å¾—å‚æ•°" class="headerlink" title="HttpServletRequestè·å¾—å‚æ•°"></a><strong>HttpServletRequestè·å¾—å‚æ•°</strong></h3><p>å¦‚Modelæ¥å£å’Œjavax.servlet.http.HttpServletRequestç»„åˆå¯ä»¥åƒModelAndViewé‚£æ ·è¿”å›å®¢æˆ·ç«¯çš„å€¼</p>
<pre><code>@RequestMapping(value = &quot;/result&quot;)
public String result(Model model,javax.servlet.http.HttpServletRequest httpServletRequest)&#123;
    model.addAttribute(&quot;id&quot;,httpServletRequest.getParameter(&quot;id&quot;));
    model.addAttribute(&quot;name&quot;,httpServletRequest.getParameter(&quot;name&quot;));
    model.addAttribute(&quot;age&quot;,httpServletRequest.getParameter(&quot;age&quot;));
    return &quot;result&quot;;
&#125;</code></pre>
<h3 id="é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°"><a href="#é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°" class="headerlink" title="é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°"></a><strong>é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°</strong></h3><p>studentç±»ï¼š</p>
<pre><code>@Component
public class student &#123;
    private String id;
    private String name;
    private int age;
    //çœç•¥getterå’Œsetter
    public String toString()&#123;
        return &quot;[id=&quot;+id+&quot;,name=&quot;+name+&quot;,age=&quot;+age+&quot;]&quot;;
    &#125;
&#125;

@RequestMapping(value = &quot;/result&quot;)
public String result(student stu,Model model)&#123;
    model.addAttribute(&quot;id&quot;,stu.getId());
    model.addAttribute(&quot;name&quot;,stu.getName());
    model.addAttribute(&quot;age&quot;,stu.getAge());
    return &quot;result&quot;;
&#125;</code></pre>
<h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a><strong>@RequestParam</strong></h3><pre><code>@RequestMapping(value = &quot;/result&quot;)
public String result(student stu, Model model, @RequestParam String name, @RequestParam String id)&#123;
        System.out.println(id + &quot; &quot; + name);
        model.addAttribute(&quot;id&quot;, stu.getId());
        model.addAttribute(&quot;name&quot;, stu.getName());
        model.addAttribute(&quot;age&quot;, stu.getAge());
    return &quot;result&quot;;
&#125;</code></pre>
<h3 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a><strong>@ModelAttribute</strong></h3><p>å½“ @ModelAttribute æ³¨è§£æ”¾åœ¨å¤„ç†æ–¹æ³•çš„å½¢å‚ä¸Šæ—¶ï¼Œç”¨äºå°†å¤šä¸ªè¯·æ±‚å‚æ•°å°è£…åˆ°ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œä»è€Œç®€åŒ–æ•°æ®ç»‘å®šæµç¨‹ï¼Œè€Œä¸”è‡ªåŠ¨æš´éœ²ä¸ºæ¨¡å‹æ•°æ®ï¼Œåœ¨è§†å›¾é¡µé¢å±•ç¤ºæ—¶ä½¿ç”¨ã€‚è€Œâ€œé€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°â€ä¸­åªæ˜¯å°†å¤šä¸ªè¯·æ±‚å‚æ•°å°è£…åˆ°ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œå¹¶ä¸èƒ½æš´éœ²ä¸ºæ¨¡å‹æ•°æ®ï¼ˆéœ€è¦ä½¿ç”¨ model.addAttribute è¯­å¥æ‰èƒ½æš´éœ²ä¸ºæ¨¡å‹æ•°æ®)</p>
<pre><code>@RequestMapping(value = &quot;/result&quot;)
public String result(@ModelAttribute(&quot;stu&quot;) student stu)&#123;
    System.out.println(stu.getId()+&quot; &quot;+stu.getName()+&quot; &quot;+stu.getAge());
    return &quot;result&quot;;
&#125;</code></pre>
<p>åœ¨resultå¤„ç†æ–¹æ³•ä¸­ï¼ŒModelAttribute(â€œstuâ€) student stuå…ˆå°†è¯·æ±‚å‚æ•°çš„è¾“å…¥å°è£…åˆ°studentå¯¹è±¡ä¸­ï¼Œç„¶åå†åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ï¼Œä»¥é”®å€¼ä¸ºstuå­˜å‚¨åœ¨Modelå¯¹è±¡ä¸­</p>
<p>æ­¤æ—¶ï¼Œåªè¦åœ¨ç›¸åº”çš„result.jspä¸­ä½¿ç”¨ELè¡¨è¾¾å¼Â¥{property}å°±å¯ä»¥å°†æ•°æ®è¡¨ç¤ºå‡ºæ¥</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt;
    &lt;p&gt;$&#123;id&#125;&lt;/p&gt;
    &lt;p&gt;$&#123;name&#125;&lt;/p&gt;
    &lt;p&gt;$&#123;age&#125;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>ModelAttributeä½œç”¨äºæ— è¿”å›å€¼çš„æ–¹æ³•ï¼Œè¢«@ModelAttributeæ³¨é‡Šçš„æ–¹æ³•ä¼šåœ¨æ­¤controlleræ¯ä¸ªæ–¹æ³•æ‰§è¡Œå‰è¢«æ‰§è¡Œ</p>
<p>åœ¨æ§åˆ¶å™¨ä¸­æ·»åŠ showæ–¹æ³•ï¼Œæƒ³è¦æŠŠè¯·æ±‚å‚æ•°æ˜¾ç¤ºåœ¨result.jspä¸­</p>
<pre><code>@ModelAttribute
public void show(Model model,@RequestParam String name)&#123;
    model.addAttribute(&quot;name&quot;,name);
&#125;</code></pre>
<p>è¿è¡Œå‘ç°ï¼Œnameè¯·æ±‚å‚æ•°æˆåŠŸæ˜¾ç¤ºåœ¨é¡µé¢ä¸­</p>
<h1 id="Serviceå’Œ-AutoWired"><a href="#Serviceå’Œ-AutoWired" class="headerlink" title="@Serviceå’Œ@AutoWired"></a>@Serviceå’Œ@AutoWired</h1><p>åœ¨springmvc.controlleråŒ…ä¸‹åˆ›å»ºServiceInterfaceæ¥å£</p>
<pre><code>public interface ServiceInterface &#123;
    public void service(student stu);
&#125;</code></pre>
<p>æä¾›å®ç°ç±»ServiceImplï¼Œè¯¥ç±»æ ‡æ³¨ä¸ºServiceç±»</p>
<pre><code>@Service
public class ServiceImpl implements ServiceInterface&#123;
    public void service(student stu)&#123;
        System.out.println(&quot;service&quot;);
        System.out.println(stu.toString());
    &#125;
&#125;</code></pre>
<p>åœ¨LoginControlleræ§åˆ¶å™¨ä¸­æ·»åŠ å±æ€§ï¼Œæ ‡å¿—ä¸ºè‡ªåŠ¨æ³¨å…¥</p>
<pre><code>@Autowired(required = false)
ServiceInterface serviceInterface;</code></pre>
<p>ä¿®æ”¹resultå¤„ç†æ–¹æ³•</p>
<pre><code>@RequestMapping(value = &quot;/result&quot;)
public String result(@ModelAttribute(&quot;stu&quot;) student stu)&#123;
    serviceInterface.service(stu);
    return &quot;result&quot;;
&#125;</code></pre>
<p>åœ¨postmanä¸­æäº¤è¯·æ±‚ï¼Œå¯ä»¥å‘ç°IDEAè¾“å‡ºç«¯æˆåŠŸæ˜¾ç¤ºè¡¨å•ä¿¡æ¯</p>
<h1 id="è½¬å‘å’Œé‡å®šå‘"><a href="#è½¬å‘å’Œé‡å®šå‘" class="headerlink" title="è½¬å‘å’Œé‡å®šå‘"></a><strong>è½¬å‘å’Œé‡å®šå‘</strong></h1><p>é‡å®šå‘æ˜¯å°†ç”¨æˆ·ä»å½“å‰å¤„ç†è¯·æ±‚å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾æˆ–å¤„ç†è¯·æ±‚ï¼Œä»¥å‰çš„è¯·æ±‚ï¼ˆrequestï¼‰ä¸­å­˜æ”¾çš„ä¿¡æ¯å…¨éƒ¨å¤±æ•ˆï¼Œå¹¶è¿›å…¥ä¸€ä¸ªæ–°çš„ request ä½œç”¨åŸŸï¼Œå¦‚return â€œredirect:aviewâ€;</p>
<p>è½¬å‘æ˜¯å°†ç”¨æˆ·å¯¹å½“å‰å¤„ç†çš„è¯·æ±‚è½¬å‘ç»™å¦ä¸€ä¸ªè§†å›¾æˆ–å¤„ç†è¯·æ±‚ï¼Œä»¥å‰çš„ request ä¸­å­˜æ”¾çš„ä¿¡æ¯ä¸ä¼šå¤±æ•ˆã€‚</p>
<p>è½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</p>
<p>åœ¨ Spring MVC æ¡†æ¶ä¸­ï¼Œæ§åˆ¶å™¨ç±»ä¸­å¤„ç†æ–¹æ³•çš„ return è¯­å¥é»˜è®¤å°±æ˜¯è½¬å‘å®ç°ï¼Œåªä¸è¿‡å®ç°çš„æ˜¯è½¬å‘åˆ°è§†å›¾ã€‚</p>
<h1 id="SpringMVCä¸JSONçš„æ•°æ®äº¤äº’"><a href="#SpringMVCä¸JSONçš„æ•°æ®äº¤äº’" class="headerlink" title="SpringMVCä¸JSONçš„æ•°æ®äº¤äº’"></a>SpringMVCä¸JSONçš„æ•°æ®äº¤äº’</h1><h2 id="jackson"><a href="#jackson" class="headerlink" title="jackson"></a><strong>jackson</strong></h2><p>æ·»åŠ ä¾èµ–</p>
<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
  &lt;version&gt;2.8.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
  &lt;version&gt;2.8.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;
  &lt;version&gt;2.8.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>åœ¨UserControllerä¸­æ·»åŠ jsonæ–¹æ³•</p>
<pre><code>@RequestMapping(&quot;/json&quot;)
@ResponseBody
public String json()&#123;
    return new student(&quot;123&quot;,&quot;å¼ ä¸‰&quot;,12).toString();
&#125;</code></pre>
<p>æˆ–è€…ä½¿ç”¨ObjectMapperå¯¹è±¡çš„writeValueAsStringæ–¹æ³•ï¼Œå°†å¯¹è±¡è§£æä¸ºå­—ç¬¦ä¸²</p>
<pre><code>@RequestMapping(value = &quot;/json&quot;)
@ResponseBody
public String json() throws IOException &#123;
    student stu =  new student(&quot;123&quot;,&quot;å¼ ä¸‰&quot;,12);
    ObjectMapper objectMapper = new ObjectMapper();
    String str = objectMapper.writeValueAsString(stu);
    return str;
&#125;</code></pre>
<p>å¦å¤–ï¼Œç”¨@ResponseBodyä½œç”¨äºæ–¹æ³•è¿”å›å­—ç¬¦ä¸²ç»™è¯·æ±‚ï¼Œ@RequestBodyä½œç”¨äºå‚æ•°ç”¨äºæ¥å—Jsonå¯¹è±¡å­—ç¬¦ä¸²åè‡ªåŠ¨è½¬æ¢ä¸ºå¯¹è±¡</p>
<p>postmanæµ‹è¯•ï¼Œç½‘é¡µä¸­å‡ºç°[id=123,name=??,age=12]ï¼Œå‡ºç°ä¹±ç </p>
<p><strong>JSONä¹±ç è§£å†³</strong></p>
<ul>
<li>@RequestMappingæ·»åŠ å±æ€§ produces=â€application/json;charset=utf-8â€</li>
</ul>
<p>æ­¤æ—¶è¿”å›[id=123,name=å¼ ä¸‰,age=12]</p>
<ul>
<li><p>åœ¨dispatcher-servletä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ç»Ÿä¸€è§£å†³é—®é¢˜</p>
<p>  &lt;mvc: annotation-driven&gt;</p>
<pre><code>  &lt;mvc: message-converters register-defaults=&quot;true&quot;&gt;
      &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;
          &lt;constructor-arg value=&quot;UTF-8&quot;/&gt;
      &lt;/bean&gt;
      &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;
          &lt;property name=&quot;objectMapper&quot;&gt;
              &lt;bean class=&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt;
                  &lt;property name=&quot;failOnEmptyBeans&quot; value=&quot;false&quot;/&gt;
              &lt;/bean&gt;
          &lt;/property&gt;
      &lt;/bean&gt;
  &lt;/mvc: message-converters&gt;</code></pre>
<p>  &lt;/mvc: annotation-driven&gt;</p>
</li>
<li><p>å°†æ§åˆ¶å™¨æ³¨è§£ä½@RestController</p>
</li>
</ul>
<p>æ­¤æ—¶æ§åˆ¶å™¨ç±»çš„æ‰€æœ‰å¤„ç†æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œä¸å†è¿›è¡Œè§†å›¾è§£æ</p>
<h2 id="fastjson"><a href="#fastjson" class="headerlink" title="fastjson"></a><strong>fastjson</strong></h2><p>æ·»åŠ ä¾èµ–</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
    &lt;version&gt;1.2.74&lt;/version&gt;
 &lt;/dependency&gt;</code></pre>
<p>fastjsonä¸­JSONç±»ä¸­æœ‰å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œåªè¦è¿”å›å­—ç¬¦ä¸²å°±å¥½ï¼Œå¦‚</p>
<pre><code>String str = JSON.toJSONString(stu);</code></pre>
<p>å½“ç„¶ä¹Ÿæœ‰jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡çš„æ–¹æ³•</p>
<h2 id="ajax-jsonä¸MVCäº¤äº’å®ä¾‹"><a href="#ajax-jsonä¸MVCäº¤äº’å®ä¾‹" class="headerlink" title="ajax jsonä¸MVCäº¤äº’å®ä¾‹"></a><strong>ajax jsonä¸MVCäº¤äº’å®ä¾‹</strong></h2><p>æ¨¡ä»¿æ³¨å†Œé¡µé¢ä¸­è´¦å·å’Œå¯†ç çš„æœ‰æ•ˆæ€§æ£€éªŒ</p>
<p>Userç±»ï¼š</p>
<p>@Component<br>public class User {</p>
<pre><code>@NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)
private String name;
@NotBlank(message = &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)
@Length(min = 3,max = 8,message = &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)
private String passwords;

public String getPasswords() &#123;
    return passwords;
&#125;

public String getName() &#123;
    return name;
&#125;

public void setPasswords(String passwords) &#123;

    this.passwords = passwords;
&#125;

public void setName(String name) &#123;
    this.name = name;
&#125;

public String toString()&#123;
    return &quot;[name=&quot;+name+&quot;,passwords=&quot;+passwords+&quot;]&quot;;
&#125;</code></pre>
<p>}</p>
<p>UserControllerï¼š</p>
<pre><code>@Controller
public class UserController &#123;

    @RequestMapping(&quot;/test&quot;)
    @ResponseBody
    public String test(User user)&#123;
//        System.out.println(user+&quot; &quot;+passwords);
        System.out.println(user);
        String msg = &quot;&quot;;
        if(user.getName()!=null)&#123;
            if(user.getName().equals(&quot;123&quot;))&#123;
                msg =  &quot;ok&quot;;
            &#125;else&#123;
                msg =  &quot;failed&quot;;
            &#125;
        &#125;
        if(user.getPasswords()!=null)&#123;
            if(user.getPasswords().equals(&quot;1233&quot;))&#123;
                msg =  &quot;ok&quot;;
            &#125;else&#123;
                msg = &quot;failed&quot;;
            &#125;
        &#125;
        return msg;
    &#125;

&#125;</code></pre>
<p>jspæ–‡ä»¶ï¼š</p>
<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script src=&quot;https://s3.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        function uservalidator() &#123;
            $.ajax(&#123;
                url:&quot;$&#123;pageContext.request.contextPath&#125;/test&quot;,
                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,
                success:function (data) &#123;
                    $(&quot;#usermsg&quot;).html(data)
                &#125;
            &#125;)
        &#125;
    &lt;/script&gt;
    &lt;script&gt;
        function passwordsvalidator() &#123;
            $.ajax(&#123;
                url:&quot;$&#123;pageContext.request.contextPath&#125;/test&quot;,
                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,
                success:function (data) &#123;
                    $(&quot;#pswmsg&quot;).html(data)
                &#125;
            &#125;)
        &#125;
    &lt;/script&gt;
    &lt;form&gt;
        ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;user&quot; id=&quot;user&quot; onblur=&quot;uservalidator()&quot;&gt;&lt;br&gt;
        &lt;p id=&quot;usermsg&quot;&gt;&lt;/p&gt;
        å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;passwords&quot; id=&quot;passwords&quot; onblur=&quot;passwordsvalidator()&quot;&gt;
        &lt;p id=&quot;pswmsg&quot;&gt;&lt;/p&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h1 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a><strong>æ‹¦æˆªå™¨</strong></h1><p>SpringMVCçš„æ‹¦æˆªå™¨å’ŒServletä¸­çš„Filterç›¸ä¼¼ï¼Œä¸»è¦ç”¨äºæ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚å¹¶åšç›¸åº”çš„å¤„ç†ï¼Œé€šå¸¸åº”ç”¨åœ¨æƒé™éªŒè¯ã€è®°å½•è¯·æ±‚ä¿¡æ¯çš„æ—¥å¿—ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ç­‰åŠŸèƒ½ä¸Š</p>
<p>å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptoræ¥å£ï¼ŒHandlerInterceptoræ¥å£ä¸­æœ‰ä¸‰ä¸ªæ–¹æ³•</p>
<ul>
<li><p>preHandleï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•å‰æ‰§è¡Œï¼Œå…¶è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦ä¸­æ–­åç»­æ“ä½œï¼Œè¿”å› true è¡¨ç¤ºç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œè¿”å› false è¡¨ç¤ºä¸­æ–­åç»­æ“ä½œã€‚</p>
</li>
<li><p>postHandleï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•è°ƒç”¨ä¹‹åã€è§£æè§†å›¾ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å¯¹è¯·æ±‚åŸŸä¸­çš„æ¨¡å‹<br>å’Œè§†å›¾åšè¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚</p>
</li>
<li><p>afterCompletionï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼Œå³è§†å›¾æ¸²æŸ“ç»“æŸåæ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å®ç°ä¸€äº›èµ„æºæ¸…ç†ã€è®°å½•æ—¥å¿—ä¿¡æ¯ç­‰å·¥ä½œã€‚</p>
</li>
</ul>
<h2 id="æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨"><a href="#æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨" class="headerlink" title="æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨"></a><strong>æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨</strong></h2><p>åœ¨springmvc.controlleråŒ…ä¸‹å®šä¹‰ä¸€ä¸ªMyInterceptorç±»ï¼Œå®ç°HandlerInterceptoræ¥å£</p>
<pre><code>public class MyInterceptor implements HandlerInterceptor &#123;
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
        System.out.println(&quot;preHandle&quot;);
        return true;
    &#125;

    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;
        System.out.println(&quot;postHandle&quot;);
    &#125;

    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;
        System.out.println(&quot;afterCompletion&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨springmvc-dispatcher.xmlä¸­é…ç½®æ‹¦æˆªå™¨</p>
<pre><code>&lt;mvc:interceptors&gt;
    &lt;bean class=&quot;springmvc.controller.MyInterceptor&quot;&gt;&lt;/bean&gt;
&lt;/mvc:interceptors&gt;</code></pre>
<p>&lt;mvcï¼š interceptors&gt; å…ƒç´ ç”¨äºé…ç½®ä¸€ç»„æ‹¦æˆªå™¨ï¼Œå…¶å­å…ƒç´  <bean> å®šä¹‰çš„æ˜¯å…¨å±€æ‹¦æˆªå™¨ï¼Œå³æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ã€‚</bean></p>
<p>è‹¥è¿˜è¦å®šä¹‰å…¶ä»–æ‹¦æˆªå™¨ï¼Œå¯åœ¨é‡Œé¢åŠ ä¸Š</p>
<pre><code>&lt;mvc:interceptor&gt;
    &lt;!-- é…ç½®æ‹¦æˆªå™¨ä½œç”¨çš„è·¯å¾„ --&gt;
    &lt;mvc:mapping path=&quot;&quot; /&gt;
    &lt;!-- é…ç½®ä¸éœ€è¦æ‹¦æˆªä½œç”¨çš„è·¯å¾„ --&gt;
    &lt;mvc:exclude-mapping path=&quot;&quot; /&gt;
    &lt;!-- å®šä¹‰&lt;mvc:interceptor&gt;å…ƒç´ ä¸­ï¼Œè¡¨ç¤ºåŒ¹é…æŒ‡å®šè·¯å¾„çš„è¯·æ±‚æ‰è¿›è¡Œæ‹¦æˆª --&gt;
    &lt;bean class=&quot;&quot;/&gt;
&lt;/mvc:interceptor&gt;</code></pre>
<p>&lt;mvcï¼š interceptor&gt; å…ƒç´ çš„å­å…ƒç´ å¿…é¡»æŒ‰ç…§ &lt;mvcï¼š mappingâ€¦/&gt;ã€&lt;mvcï¼š exclude-mappingâ€¦/&gt;ã€&lt;beanâ€¦/&gt; çš„é¡ºåºé…ç½®ã€‚</p>
<p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºç«¯è¾“å‡ºï¼š</p>
<p>preHandle<br>springmvc.controller.LoginController<br>postHandle<br>afterCompletion</p>
<h2 id="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"><a href="#æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"></a><strong>æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</strong></h2><p>è‹¥é…ç½®æ–‡ä»¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œåˆ™æ ¹æ® preHandle -&gt; ControllerMethod -&gt; postHandle -&gt; afterCompletionæ‰§è¡Œ</p>
<p>è‹¥é…ç½®äº†å¤šä¸ªæ‹¦æˆªå™¨ï¼Œåˆ™å®ƒä»¬çš„ preHandle æ–¹æ³•å°†æŒ‰ç…§é…ç½®æ–‡ä»¶ä¸­æ‹¦æˆªå™¨çš„é…ç½®é¡ºåºæ‰§è¡Œï¼Œè€Œå®ƒä»¬çš„ postHandle æ–¹æ³•å’Œ afterCompletion æ–¹æ³•åˆ™æŒ‰ç…§é…ç½®é¡ºåºçš„ååºæ‰§è¡Œ</p>
<p>å®šä¹‰ä¸€ä¸ªç±»MyInterceptor1ï¼Œå’Œç±»MyInterceptorä¸€æ ·ï¼ŒMyInterceptorç±»ä¸­çš„ä¸‰ä¸ªæ–¹æ³•è¾“å‡º1ï¼ŒMyInterceptor1çš„ä¸‰ä¸ªæ–¹æ³•è¾“å‡º2ï¼Œåœ¨springmvcé…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸¤ä¸ªæ‹¦æˆªå™¨interceptorã€interceptor1</p>
<pre><code>&lt;mvc:interceptors&gt;</code></pre>
<!--        <bean class="springmvc.controller.MyInterceptor"></bean>-->
<pre><code>    &lt;mvc:interceptor&gt;
        &lt;mvc:mapping path=&quot;/**&quot;/&gt;
        &lt;bean class=&quot;springmvc.controller.MyInterceptor&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:interceptor&gt;
    &lt;mvc:interceptor&gt;
        &lt;mvc:mapping path=&quot;/login&quot;/&gt;
        &lt;bean class=&quot;springmvc.controller.MyInterceptor1&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:interceptor&gt;
&lt;/mvc:interceptors&gt;</code></pre>
<p>è¾“å‡ºç«¯è¾“å‡ºï¼š</p>
<p>preHandle 1<br>preHandle 2<br>postHandle 2<br>postHandle 1<br>afterCompletion 2<br>afterCompletion 1</p>
<h2 id="æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯"><a href="#æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯" class="headerlink" title="æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯"></a><strong>æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯</strong></h2><p>è¿™ä¸ªWEBåº”ç”¨ä¸­ï¼Œä¸»è¦æœ‰tologinè·³è½¬ç™»å½•é¡µé¢ã€loginç™»å½•é¡µé¢ã€resultç»“æœé¡µé¢ï¼Œå¦‚æœç”¨æˆ·æœªç™»å½•ç›´æ¥è¿›å…¥åˆ°resulté¡µé¢ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·æœªç™»å½•ï¼Œå¦‚æœç”¨æˆ·è´¦å·æˆ–å¯†ç é”™è¯¯ï¼Œåˆ™æç¤ºè´¦å·æˆ–å¯†ç é”™è¯¯</p>
<p>åœ¨springmvc.interceptoråŒ…ä¸‹æ·»åŠ Userç±»</p>
<pre><code>public class User &#123;

    private String users;

    private String passwords;

    //çœç•¥getterå’Œsetteræ–¹æ³•
&#125;

@Controller
public class UserController &#123;</code></pre>
<p>UserControlleræ§åˆ¶å™¨</p>
<pre><code>    @RequestMapping(&quot;/tologin&quot;)
    public String tologin()&#123;
        return &quot;login&quot;;
    &#125;
    @RequestMapping(&quot;/login&quot;)
    public String login(User user, HttpSession session, Model model)&#123;
        System.out.println(user.getUsers()+&quot; &quot;+user.getPasswords());
        if(&quot;123&quot;.equals(user.getUsers())&amp;&amp;&quot;123&quot;.equals(user.getPasswords()))&#123;
            session.setAttribute(&quot;user&quot;,user);
            return &quot;redirect:result&quot;;
        &#125;
        model.addAttribute(&quot;msg&quot;,&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°ç™»å½•ï¼&quot;);
        return &quot;login&quot;;
    &#125;
    @RequestMapping(&quot;/result&quot;)
    public String result()&#123;
        return &quot;result&quot;;
    &#125;

    @RequestMapping(&quot;/exit&quot;)
    public String exit(HttpServletRequest request,HttpSession session)&#123;
    session.invalidate();
    return &quot;login&quot;;
&#125;

&#125;</code></pre>
<p>åˆ›å»ºæ‹¦æˆªå™¨loginInterceptor</p>
<pre><code>public class loginInterceptor implements HandlerInterceptor &#123;

    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
        System.out.println(&quot;123&quot;);
        StringBuffer url = request.getRequestURL();
        if(url.indexOf(&quot;/tologin&quot;)&gt;=0||url.indexOf(&quot;/login&quot;)&gt;=0) return true;
        HttpSession session = request.getSession();
        Object obj = session.getAttribute(&quot;user&quot;);
        if(obj != null) return true;
        request.setAttribute(&quot;msg&quot;,&quot;è¯·ç™»å½•ï¼&quot;);
        request.getRequestDispatcher(&quot;/WEB-INF/login.jsp&quot;).forward(request,response);
        return false;
    &#125;

    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;

    &#125;

    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;

    &#125;
&#125;</code></pre>
<p>é…ç½®Dispatcher-servlet.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;
        &lt;context:component-scan base-package=&quot;springmvc.interceptor&quot;&gt;&lt;/context:component-scan&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;mvc:interceptors&gt;
        &lt;mvc:interceptor&gt;
            &lt;mvc:mapping path=&quot;/**&quot;/&gt;
            &lt;bean class=&quot;springmvc.interceptor.loginInterceptor&quot;&gt;&lt;/bean&gt;
        &lt;/mvc:interceptor&gt;
    &lt;/mvc:interceptors&gt;
&lt;/beans&gt;</code></pre>
<p>é…ç½®web.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;interceptor&lt;/servlet-name&gt;
        &lt;servlet-class&gt;
            org.springframework.web.servlet.DispatcherServlet
        &lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;interceptor&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
<p>login.jspï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;$&#123;msg&#125;&lt;/h1&gt;
&lt;form method=&quot;get&quot; action=&quot;/login&quot;&gt;
    è´¦å·ï¼š&lt;input type=&quot;text&quot; name=&quot;users&quot; id=&quot;users&quot;&gt;&lt;br&gt;
    å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;passwords&quot; id=&quot;passwords&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; &gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>result.jspï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p&gt;å½“å‰ç”¨æˆ·ï¼š$&#123;user.users&#125;&lt;/p&gt;
    &lt;form action=&quot;/exit&quot;&gt;
        &lt;button type=&quot;submit&quot;&gt;é€€å‡º&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>ç›´æ¥è¿›å…¥result<br><img src="/2020/10/04/SpringMVC/1.png" alt="1"></p>
<p>è¾“å…¥è´¦å·å¯†ç <br><img src="/2020/10/04/SpringMVC/2.png" alt="2"></p>
<p>é€€å‡º<br><img src="/2020/10/04/SpringMVC/3.png" alt="3"></p>
<p>å†æ¬¡ç›´æ¥è¿›å…¥result<br><img src="/2020/10/04/SpringMVC/4.png" alt="4"></p>
<h1 id="éªŒè¯å™¨"><a href="#éªŒè¯å™¨" class="headerlink" title="éªŒè¯å™¨"></a><strong>éªŒè¯å™¨</strong></h1><h2 id="Validatoræ¥å£"><a href="#Validatoræ¥å£" class="headerlink" title="Validatoræ¥å£"></a><strong>Validatoræ¥å£</strong></h2><p>åˆ›å»ºè‡ªå®šä¹‰çš„éªŒè¯å™¨éœ€è¦å®ç°org.springframework.validation.Validator æ¥å£ï¼Œè¯¥æ¥å£æœ‰ä¸¤ä¸ªæ¥å£æ–¹æ³•ï¼š</p>
<p>boolean supports(Class&lt;?&gt; klass)<br>void validate(Object object,Errors errors)</p>
<p>å½“supportsè¿”å›trueæ—¶ï¼ŒéªŒè¯å™¨å¯ä»¥å¤„ç†æŒ‡å®šçš„Class</p>
<p>validate æ–¹æ³•çš„åŠŸèƒ½æ˜¯éªŒè¯ç›®æ ‡å¯¹è±¡ objectï¼Œå¹¶å°†éªŒè¯é”™è¯¯æ¶ˆæ¯å­˜å…¥ Errors å¯¹è±¡</p>
<p>å¾€ Errors å¯¹è±¡å­˜å…¥é”™è¯¯æ¶ˆæ¯çš„æ–¹æ³•æ˜¯ reject æˆ– rejectValueï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„éƒ¨åˆ†é‡è½½æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>void reject(String errorCode)<br>void reject(String errorCode,String defaultMessage)<br>void rejectValue(String filed,String errorCode)<br>void rejectValue(String filed,String errorCode,String defaultMessage)</p>
<h2 id="ValidationUtilsç±»"><a href="#ValidationUtilsç±»" class="headerlink" title="ValidationUtilsç±»"></a><strong>ValidationUtilsç±»</strong></h2><p>org.springframework.validation.ValidationUtils æ˜¯ä¸€ä¸ªå·¥å…·ç±»</p>
<h2 id="éªŒè¯å™¨å®ä¾‹"><a href="#éªŒè¯å™¨å®ä¾‹" class="headerlink" title="éªŒè¯å™¨å®ä¾‹"></a>éªŒè¯å™¨å®ä¾‹</h2><p>å¼•ç”¨ä¸Šé¢ç”¨æˆ·ç™»å½•çš„ä¾‹å­ï¼Œå½“ç”¨æˆ·ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©ºçš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯</p>
<p>åœ¨springmvc.validatoråŒ…ä¸‹åˆ›å»ºMyValidatorç±»ï¼Œå®ç°Validatoræ¥å£</p>
<pre><code>@Component
public class MyValidator implements Validator &#123;
    public boolean supports(Class&lt;?&gt; aClass) &#123;
        return User.class.isAssignableFrom(aClass);
    &#125;

    public void validate(Object o, Errors errors) &#123;
        User user = (User)o;
        ValidationUtils.rejectIfEmpty(errors,&quot;users&quot;,&quot;user.users.required&quot;);
        ValidationUtils.rejectIfEmpty(errors,&quot;passwords&quot;,&quot;passwords.invalid&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨interceptor-servlet.xmlä¸­æ·»åŠ å¯¹validatoråŒ…çš„è‡ªåŠ¨æ‰«ææœºåˆ¶</p>
<pre><code>    &lt;context:component-scan base-package=&quot;springmvc.validator&quot;&gt;&lt;/context:component-scan&gt;</code></pre>
<p>ä¿®æ”¹UserControllerä¸­çš„loginå¤„ç†æ–¹æ³•</p>
<pre><code>public String login(@ModelAttribute User user, HttpSession session, Model model, BindingResult result)&#123;
    MyValidator myValidator = new MyValidator();
    if(myValidator.supports(User.class))&#123;
        myValidator.validate(user,result);
        List&lt;ObjectError&gt; list = result.getAllErrors();
        for(ObjectError error:list)&#123;
            System.out.println(error.getCode());
        &#125;
    &#125;
    if(result.hasErrors())  return &quot;redirect:tologin&quot;;
    if(&quot;123&quot;.equals(user.getUsers())&amp;&amp;&quot;123&quot;.equals(user.getPasswords()))&#123;
        session.setAttribute(&quot;user&quot;,user);
        return &quot;redirect:result&quot;;
    &#125;
    model.addAttribute(&quot;msg&quot;,&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°ç™»å½•ï¼&quot;);
    return &quot;login&quot;;
&#125;</code></pre>
<p>æ­¤æ—¶ï¼Œè‹¥ä¸è¾“å…¥è´¦å·å¯†ç ç›´æ¥ç™»å½•ï¼Œåˆ™ç»ˆç«¯è¾“å‡º</p>
<p>user.users.required<br>passwords.invalid</p>
<p>##<strong>Spring MVC JSR-303éªŒè¯æ¡†æ¶ä¹‹Hibernate-Validator</strong></p>
<p>JSR-303æ˜¯ä¸€ä¸ªæ•°æ®éªŒè¯çš„è§„èŒƒï¼ŒJSR-303çš„æ ¡éªŒæ˜¯åŸºäºæ³¨è§£çš„ï¼ŒSpringä¸­æ²¡æœ‰å¯¹è¿™ä¸€è§„èŒƒè¿›è¡Œå®ç°ï¼Œæ‰€ä»¥åœ¨SpringMVCä¸­ä½¿ç”¨JSR-303çš„æ—¶å€™å°±éœ€è¦æä¾›ä¸€ä¸ªå¯¹JSR-303è§„èŒƒçš„å®ç°ï¼Œè€ŒHibernate-Validatoræ˜¯å®ç°äº†è¿™ä¸€è§„èŒƒçš„ï¼Œä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œä¸å†éœ€è¦å®ç°Validatoræ¥å£</p>
<p>Hibernate-Validatorå†…éƒ¨å·²ç»å®šä¹‰å¥½äº†ä¸€ç³»åˆ—çš„é™åˆ¶æ³¨è§£ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¿™äº›æ³¨è§£æ ‡è®°åœ¨éœ€è¦éªŒè¯çš„å®ä½“ç±»çš„å±æ€§ä¸Šæˆ–æ˜¯å…¶å¯¹åº”çš„getæ–¹æ³•ä¸Š</p>
<p><strong>æ³¨ï¼šè¦ä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š</strong></p>
<pre><code>    &lt;mvc:annotation-driven/&gt;  </code></pre>
<p><strong>å¹¶æ·»åŠ ä¾èµ–ï¼š</strong></p>
<pre><code>dependency&gt;
        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
        &lt;version&gt;6.1.6.Final&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>ä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œå¯ä»¥åœ¨è¦éªŒè¯çš„ ç±»çš„å±æ€§ æˆ– getteræ–¹æ³•åŠ ä¸Šç›¸åº”çš„æ³¨è§£</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>@Nul</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</td>
</tr>
<tr>
<td>@NotNull</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</td>
</tr>
<tr>
<td>@AssertTrue</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</td>
</tr>
<tr>
<td>@AssertFalse</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</td>
</tr>
<tr>
<td>@Min(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td>
</tr>
<tr>
<td>@Max(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td>@DecimalMin(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td>
</tr>
<tr>
<td>@DecimalMax(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td>@Size(max, min)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…ï¼Œå…ƒç´ å¿…é¡»ä¸ºé›†åˆï¼Œä»£è¡¨é›†åˆä¸ªæ•°</td>
</tr>
<tr>
<td>@Digits (integer, fraction)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</td>
</tr>
<tr>
<td>@Past</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</td>
</tr>
<tr>
<td>@Future</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</td>
</tr>
<tr>
<td>@Email</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</td>
</tr>
<tr>
<td>@Length(min=, max=)</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…ï¼Œå¿…é¡»ä¸ºæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ï¼Œè‹¥å¾®æ•°ç»„åˆ™è¡¨ç¤ºä¸ºæ•°ç»„é•¿åº¦ï¼Œå­—ç¬¦ä¸²åˆ™è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td>@NotEmpty</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</td>
</tr>
<tr>
<td>@Range(min=, max=)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</td>
</tr>
<tr>
<td>@NotBlank</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</td>
</tr>
<tr>
<td>@Pattern(regexp = )</td>
<td>æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒ</td>
</tr>
<tr>
<td>@Valid</td>
<td>å¯¹è±¡çº§è”æ ¡éªŒ,å³æ ¡éªŒå¯¹è±¡ä¸­å¯¹è±¡çš„å±æ€§</td>
</tr>
</tbody></table>
<p>å¦‚ï¼š</p>
<p>åœ¨Userçš„å­—æ®µä¸­æ·»åŠ æ ‡ç­¾</p>
<pre><code>public class User &#123;

    @NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)
    private String users;

    @NotBlank(message = &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)
    @Length(min = 3,max = 8,message = &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)
    private String passwords;

    //çœç•¥getterå’Œsetteræ–¹æ³•
&#125;</code></pre>
<p>åœ¨UserControlleræ·»åŠ testå¤„ç†æ–¹æ³•</p>
<pre><code>@RequestMapping(&quot;/test&quot;)
public String test(@Valid User user,BindingResult result)&#123;
    if(result.hasErrors())&#123;
        for (ObjectError error:result.getAllErrors())&#123;
            System.out.println(error.getDefaultMessage());
        &#125;
    &#125;
    return &quot;test&quot;;
&#125;</code></pre>
<p>testé¡µé¢å’Œloginé¡µé¢ä¸€æ ·ï¼ˆçœå»æ‹¦æˆªå™¨ï¼‰</p>
<p>éƒ¨ç½²é¡¹ç›®ï¼Œæ­¤æ—¶ï¼Œå¦‚æœè´¦å·å¯†ç éƒ½ä¸ºç©ºï¼Œç›´æ¥ç™»å½•ï¼Œåˆ™è¾“å‡º</p>
<p>ç”¨æˆ·åä¸èƒ½ä¸ºç©º<br>å¯†ç ä½æ•°ä¸º3-8ä½<br>å¯†ç ä¸èƒ½ä¸ºç©º</p>
<h1 id="RESTfulé£æ ¼"><a href="#RESTfulé£æ ¼" class="headerlink" title="RESTfulé£æ ¼"></a><strong>RESTfulé£æ ¼</strong></h1><p>RESTfulé£æ ¼æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠæ“ä½œçš„é£æ ¼ï¼Œå®ƒæ—¢ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œä»…ä»…åªæ˜¯ä¸€ç§é£æ ¼ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p>
<p>ä½¿ç”¨RESTfulé£æ ¼å¯ä»¥é€šè¿‡ç›¸åŒçš„è¯·æ±‚æ–¹å¼å®ç°ä¸åŒçš„æ•ˆæœï¼Œå¯¹äºç›¸åŒçš„è¯·æ±‚æ–¹å¼ï¼Œåªè¦åœ¨è¡¨å•å…ƒç´ ä¸­ä½¿ç”¨ä¸åŒçš„methodï¼Œç„¶ååœ¨mvcçš„æ§åˆ¶å™¨ç›¸åº”çš„å¤„ç†æ–¹æ³•ä¸­ä½¿ç”¨ä¸åŒçš„methodä½œå‡ºå›åº”ï¼Œå³å¯å®ç°</p>
<p>åŸæ¥çš„è¯·æ±‚æ–¹å¼ï¼š</p>
<p><a href="http://localhost:8080/login?name=123&amp;passwords=123">http://localhost:8080/login?name=123&amp;passwords=123</a></p>
<p>ä½¿ç”¨RESTfulé£æ ¼ï¼š</p>
<p><a href="http://localhost:8080/login/123/123">http://localhost:8080/login/123/123</a></p>
<pre><code>@RequestMapping(&quot;/test/&#123;name&#125;/&#123;passwords&#125;&quot;)
public String login(@PathVariable int name,@PathVariable String passwords)&#123;
    System.out.println(name);
    System.out.println(passwords);
    return &quot;newresult&quot;;
&#125;</code></pre>
<p>newresulté¡µé¢ä¸ºæ–°jsp</p>
<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt;
    $&#123;name&#125;
    &lt;br&gt;
    $&#123;passwords&#125;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>è¿˜å¯ä»¥ä½¿ç”¨å¯¹åº”äºè¡¨å•ä¸­çš„è¯·æ±‚æ–¹å¼</p>
<pre><code>@RequestMapping(&quot;/test&quot;,method = RequestMethod.POST)
public String login(@PathVariable int name,@PathVariable String passwords)&#123;
    System.out.println(name);
    System.out.println(passwords);
    return &quot;newresult&quot;;
&#125;</code></pre>
<p>æ­¤æ—¶ï¼Œè‹¥è¡¨å•ä¸­çš„è¯·æ±‚æ–¹å¼ä¸ºpostï¼Œåˆ™ä¼šå‡ºç°405æ–¹æ³•ä¸å…è®¸é”™è¯¯</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºäºæ³¨è§£çš„è¯·æ±‚æ–¹å¼</p>
<pre><code>@GetMapping(&quot;/login/&#123;name&#125;/&#123;passwords&#125;&quot;)
public String login(@PathVariable int name, @PathVariable String passwords, Model model)&#123;
    model.addAttribute(&quot;name&quot;,name);
    model.addAttribute(&quot;passwords&quot;,passwords);
    return &quot;result&quot;;
&#125;</code></pre>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>MVC Cannot resolve reference to bean &#39;cacheManager&#39;å¼‚å¸¸è§£å†³</title>
    <url>/2020/10/12/mvcwrong/</url>
    <content><![CDATA[<p>åœ¨æ–°å»ºçš„MVCé¡¹ç›®ä¸­ï¼Œè¦æƒ³ä½¿ç”¨æ³¨è§£é©±åŠ¨ï¼Œå‡ºç°å¼‚å¸¸ä¿¡æ¯ï¼š</p>
<pre><code>12-Oct-2020 17:43:10.828 è­¦å‘Š [RMI TCP Connection(21)-127.0.0.1] org.springframework.web.context.support.XmlWebApplicationContext.refresh Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cache.interceptor.CacheInterceptor#0&#39;: Cannot resolve reference to bean &#39;cacheManager&#39; while setting bean property &#39;cacheManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available
12-Oct-2020 17:43:10.830 ä¸¥é‡ [RMI TCP Connection(21)-127.0.0.1] org.springframework.web.servlet.DispatcherServlet.initServletBean Context initialization failed
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cache.interceptor.CacheInterceptor#0&#39;: Cannot resolve reference to bean &#39;cacheManager&#39; while setting bean property &#39;cacheManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1699)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1444)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
        at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:702)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:668)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:716)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:591)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:530)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:170)
        at javax.servlet.GenericServlet.init(GenericServlet.java:158)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1134)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1089)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:983)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4864)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:706)
        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1727)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:288)
        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:809)
        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:456)
        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:405)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:288)
        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:809)
        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:468)
        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)
        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)
        at java.base/java.security.AccessController.doPrivileged(AccessController.java:691)
        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1406)
        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:827)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
        at java.base/java.security.AccessController.doPrivileged(AccessController.java:691)
        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)
        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
        at java.base/java.lang.Thread.run(Thread.java:832)
    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:805)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1278)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:297)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)
        ... 68 more</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>åœ¨é…ç½®Dispatcherçš„xmlæ–‡ä»¶ä¸­ï¼Œ   </p>
<pre><code>&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;</code></pre>
<p>ä½¿ç”¨é”™è¯¯</p>
<p>å› ä¸ºannotation-drivenæœ‰å‡ ä¸ªåŒåçš„</p>
<p><img src="/2020/10/12/mvcwrong/driven.jpg" alt="driven"></p>
<p>å¦‚æœè¦é€‰æ‹©æ³¨è§£é©±åŠ¨ï¼Œè¦é€‰æ‹©ç¬¬ä¸‰ä¸ª</p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>ajaxç®€ä»‹</title>
    <url>/2020/10/13/ajax/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯ajax"><a href="#ä»€ä¹ˆæ˜¯ajax" class="headerlink" title="ä»€ä¹ˆæ˜¯ajax"></a><strong>ä»€ä¹ˆæ˜¯ajax</strong></h1><p>Ajaxå³â€œAsynchronous Javascript And XMLâ€(å¼‚æ­¥JavaScript å’ŒXML)ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAjaxå¯ä»¥ä½¿ç”¨ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ï¼ˆæ— åˆ·æ–°æŠ€æœ¯ï¼‰ã€‚ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨Ajaxï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…é¡»é‡è½½æ•´ä¸ªç½‘é¡µé¡µé¢ã€‚</p>
<p>ä½¿ç”¨ajaxï¼Œè¦åœ¨htmlæˆ–jspæ–‡ä»¶ä¸­åŠ ä¸Šå¯¹ajaxçš„å¼•ç”¨</p>
<pre><code>&lt;script src=&quot;https://s3.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>ä¸€ä¸ªå®Œæ•´çš„ajaxå¸¸ç”¨è¯·æ±‚å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;script&gt;
    function uservalidator() &#123;
        $.ajax(&#123;
            //è¯·æ±‚çš„urlåœ°å€
            url:&quot;$&#123;pageContext.request.contextPath&#125;/test&quot;,
            //å‚æ•°å€¼ å¯ä»¥ä¼ é€’Jsonå­—ç¬¦ä¸²ç±»å‹ ä¹Ÿå¯ä»¥ä¼ é€’å¯¹è±¡ç±»å‹
            data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,
            //å‚æ•°ç±»å‹
            //dataType:&quot;json&quot;,
            //è¯·æ±‚æ–¹å¼
            type:&quot;GET&quot;,
            //å›è°ƒå‡½æ•°
            success:function (data) &#123;
                $(&quot;#usermsg&quot;).html(data)
            &#125;
        &#125;)
    &#125;
&lt;/script&gt;</code></pre>
<p>ä¹Ÿå¯ä»¥å°†ajaxæ¢æˆç›¸åº”çš„è¯·æ±‚æ–¹æ³•    $.get({â€¦})ã€$.post({â€¦}) ç­‰ç­‰</p>
<p>ajaxä¸mvcçš„äº¤äº’è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/13/ajax/process.jpg" alt="process"></p>
<h1 id="ajaxå’Œjsp"><a href="#ajaxå’Œjsp" class="headerlink" title="ajaxå’Œjsp"></a><strong>ajaxå’Œjsp</strong></h1><p>ä¸ºä»€ä¹ˆç°åœ¨å‰åç«¯çš„æ•°æ®äº¤äº’åŸºæœ¬ä¸Šä¸ç”¨jspè€Œä½¿ç”¨html+ajaxï¼Ÿ</p>
<p>é¦–å…ˆè¦ç†è§£jspçš„åŸç†å’Œajaxçš„åŸç†</p>
<ul>
<li>jspåŸç†ï¼š</li>
</ul>
<p>jspçš„æœ¬è´¨æ˜¯servletï¼ŒæœåŠ¡å™¨é€šè¿‡ç›¸åº”çš„è¯·æ±‚æ‰¾åˆ°jspé¡µé¢å¹¶å°†jspé¡µé¢è½¬æ¢æˆjavaç¨‹åºï¼ˆservletï¼‰ï¼Œåå°æŠŠè¿”å›çš„æ•°æ®é€šè¿‡è¿™æ®µjavaä»£ç å°†ç»“æœæŒ‰ç…§htmlçš„æ ¼å¼è¾“å‡ºç»™å‰ç«¯æµè§ˆå™¨æ˜¾ç¤ºã€‚åœ¨jspä¸­ï¼Œhtmlå’Œjavaä»£ç ç›¸ç»“åˆ</p>
<ul>
<li>ajaxåŸç†ï¼š</li>
</ul>
<p>æœåŠ¡å™¨é€šè¿‡jsonç›´æ¥æŠŠæ•°æ®è¿”å›ç»™å‰ç«¯æµè§ˆå™¨ï¼Œè€Œæµè§ˆå™¨ä¸­ä½¿ç”¨jsè§£ææ•°æ®ï¼Œå¹¶æ”¹å˜æµè§ˆå™¨ä¸­çš„å†…å®¹</p>
<ul>
<li>jspçš„ç¼ºç‚¹ï¼š</li>
</ul>
<p>1.åŠ¨æ€å’Œé™æ€èµ„æºæ”¾åœ¨ä¸€èµ·ï¼Œä¸€æ—¦æœåŠ¡å™¨å‡ºç°çŠ¶å†µï¼Œå‰åå°ä¸€èµ·ç©å®Œï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚</p>
<p>2.ä¸€æ—¦jspå‡ºç°äº†é—®é¢˜ï¼Œå°±éœ€è¦å‰ç«¯åç«¯å‘å¼€äººå‘˜ä¸€å—æ¥åˆ†æè§£å†³ï¼Œæ•ˆç‡ä½ã€‚</p>
<p>3.jspæ— æ³•ä½¿ç”¨nginxç­‰ã€‚</p>
<p>4.jspé¡µé¢å¤æ‚ï¼Œéš¾ä»¥ä¿®æ”¹ã€‚</p>
<p>5.ç¬¬ä¸€æ¬¡åŠ è½½jspéœ€è¦ç¼–è¯‘æˆservletï¼Œæ—¶é—´ä¹…ï¼Œè€Œä¸”ä¸šåŠ¡é‡å¤§çš„æ—¶å€™ï¼Œjspè´Ÿæ‹…å¤ªå¤§ã€‚</p>
<p>6.jspæŠ€æœ¯æ— æ³•åŠ¨æ€çš„å±•ç¤ºæ•°æ®ï¼Œè¿”å›æ•°æ®çš„æ—¶å€™éƒ½æ˜¯æ•´ä¸ªé¡µé¢ä¸€èµ·è¿”å›ï¼Œæ²¡æœ‰åŠæ³•åšåˆ°å‰åç«¯åˆ†ç¦»</p>
<p>ç”±äºjspçš„è¿™äº›ç¼ºç‚¹ï¼Œå‰åç«¯åˆ†ç¦»çš„æ€æƒ³å¾ˆå¿«å°±å¼€å§‹æµè¡Œäº†</p>
<p>** é¡¹ç›®å¼€å‘çš„è¶‹åŠ¿ï¼šå®ç°å‰åç«¯çš„çœŸæ­£è§£è€¦**</p>
<p>ä»¥å‰çš„è€é¡¹ç›®ä¸­ï¼š</p>
<p>å®¢æˆ·ç«¯è¯·æ±‚ -&gt; æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ -&gt; ä¸šåŠ¡é€»è¾‘ -&gt; è§£æjspæ–‡ä»¶ -&gt; è¿”å›jsp</p>
<p>æ–°çš„æ–¹å¼ï¼š</p>
<p>å®¢æˆ·ç«¯è¯·æ±‚ -&gt; htmlé¡µé¢è°ƒç”¨æ¥å£äº§ç”Ÿæ•°æ®ï¼ˆajaxã€jsonï¼‰ -&gt; htmlåŠ¨æ€æ”¹å˜å†…å®¹</p>
<p>å‰åç«¯å„ç®¡å„ï¼Œè¦è¿›è¡Œæ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œåªè¦ä½¿ç”¨å‰åç«¯çº¦å®šå¥½çš„æ¥å£è¿›è¡Œäº¤äº’å³å¯</p>
<p><strong>ä½†æ˜¯jspå’Œajaxå¹¶ä¸å†²çªï¼Œå¾ˆå¤šç½‘ç«™å¾€å¾€å°†ä¸¤è€…ç»“åˆï¼Œæ¯”å¦‚ï¼Œé¦–å±çš„æ¸²æŸ“ä½¿ç”¨jspï¼Œæ•°æ®çš„äº¤äº’ä½¿ç”¨ajax</strong></p>
<h1 id="ajaxä¸mvcäº¤äº’å®ä¾‹"><a href="#ajaxä¸mvcäº¤äº’å®ä¾‹" class="headerlink" title="ajaxä¸mvcäº¤äº’å®ä¾‹"></a><strong>ajaxä¸mvcäº¤äº’å®ä¾‹</strong></h1><p>æ¨¡ä»¿æ³¨å†Œé¡µé¢ä¸­è´¦å·å’Œå¯†ç çš„æœ‰æ•ˆæ€§æ£€éªŒ</p>
<p>Userç±»ï¼š</p>
<p>@Component<br>public class User {</p>
<pre><code>@NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)
private String name;
@NotBlank(message = &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)
@Length(min = 3,max = 8,message = &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)
private String passwords;

public String getPasswords() &#123;
    return passwords;
&#125;

public String getName() &#123;
    return name;
&#125;

public void setPasswords(String passwords) &#123;

    this.passwords = passwords;
&#125;

public void setName(String name) &#123;
    this.name = name;
&#125;

public String toString()&#123;
    return &quot;[name=&quot;+name+&quot;,passwords=&quot;+passwords+&quot;]&quot;;
&#125;</code></pre>
<p>}</p>
<p>UserControllerï¼š</p>
<pre><code>@Controller
public class UserController &#123;

    @RequestMapping(&quot;/test&quot;)
    @ResponseBody
    public String test(User user)&#123;
//        System.out.println(user+&quot; &quot;+passwords);
        System.out.println(user);
        String msg = &quot;&quot;;
        if(user.getName()!=null)&#123;
            if(user.getName().equals(&quot;123&quot;))&#123;
                msg =  &quot;ok&quot;;
            &#125;else&#123;
                msg =  &quot;failed&quot;;
            &#125;
        &#125;
        if(user.getPasswords()!=null)&#123;
            if(user.getPasswords().equals(&quot;1233&quot;))&#123;
                msg =  &quot;ok&quot;;
            &#125;else&#123;
                msg = &quot;failed&quot;;
            &#125;
        &#125;
        return msg;
    &#125;

&#125;</code></pre>
<p>jspæ–‡ä»¶ï¼š</p>
<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script src=&quot;https://s3.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        function uservalidator() &#123;
            $.ajax(&#123;
                url:&quot;$&#123;pageContext.request.contextPath&#125;/test&quot;,
                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,
                success:function (data) &#123;
                    $(&quot;#usermsg&quot;).html(data)
                &#125;
            &#125;)
        &#125;
    &lt;/script&gt;
    &lt;script&gt;
        function passwordsvalidator() &#123;
            $.ajax(&#123;
                url:&quot;$&#123;pageContext.request.contextPath&#125;/test&quot;,
                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,
                success:function (data) &#123;
                    $(&quot;#pswmsg&quot;).html(data)
                &#125;
            &#125;)
        &#125;
    &lt;/script&gt;
    &lt;form&gt;
        ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;user&quot; id=&quot;user&quot; onblur=&quot;uservalidator()&quot;&gt;&lt;br&gt;
        &lt;p id=&quot;usermsg&quot;&gt;&lt;/p&gt;
        å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;passwords&quot; id=&quot;passwords&quot; onblur=&quot;passwordsvalidator()&quot;&gt;
        &lt;p id=&quot;pswmsg&quot;&gt;&lt;/p&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
]]></content>
      <tags>
        <tag>ajax</tag>
      </tags>
  </entry>
</search>

<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Javaä¹‹Streamæµ</title>
    <url>/2020/09/22/JavaStream/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨å†™javaå®éªŒçš„è¿‡ç¨‹ä¸­ï¼Œæƒ³ç”¨Streamæµçœäº‹æ—¶ï¼Œå´å‘ç°è‡ªå·±å¯¹Streamæµæœ‰ç‚¹ç”Ÿç–äº†ï¼Œæ‰€ä»¥ç‰¹åœ°ç¿»å¼€ä»¥å‰å†™çš„Streamæµçš„demoè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åŠ æ·±å°è±¡ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ"></a><strong><em>ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ</em></strong></h2><p>Streamæµæ˜¯java8 APIä¸­æ·»åŠ çš„ä¸€ä¸ªæ–°çš„æŠ½è±¡ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç±»ä¼¼SQLè¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹Javaé›†åˆè¿ç®—å’Œè¡¨è¾¾çš„æŠ½è±¡ã€‚</p>
<p>å®ƒå°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç®¡é“ä¸Šè¿›è¡Œå¯¹é›†åˆçš„å¤„ç†ï¼Œæ¯”å¦‚å¯¹é›†åˆå°±è¡Œç­›é€‰è¿‡æ»¤ã€æ’åºï¼ˆè‡ªå®šä¹‰æˆ–æ˜¯é»˜è®¤ï¼‰ã€èšåˆç­‰æ“ä½œã€‚</p>
<p>Streamæµçš„å¤„ç†ä¸­ï¼Œå…ƒç´ åœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œçš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œå¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚</p>
<blockquote>
</blockquote>
<h2 id="äºŒ-Streamæµçš„ç‰¹ç‚¹"><a href="#äºŒ-Streamæµçš„ç‰¹ç‚¹" class="headerlink" title="äºŒ.Streamæµçš„ç‰¹ç‚¹"></a><strong><em>äºŒ.Streamæµçš„ç‰¹ç‚¹</em></strong></h2><p>1.Streamæµä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå®ƒä¸ä¼šä¿å­˜æ•°æ®ï¼Œæµå¯ä»¥æ˜¯ä¸€ä¸ªæ³›å‹ã€‚</p>
<p>2.å¯ä»¥å¯¹é›†åˆã€æ•°ç»„è¿›è¡Œè¿ç»­çš„æ“ä½œã€‚</p>
<p>3.Streamæµçš„æ•°æ®æºå¯ä»¥æœ‰é›†åˆã€æ•°ç»„ç­‰ã€‚</p>
<p>4.å®ƒä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°æ®æºï¼Œå®ƒä¼šå°†æ“ä½œåçš„æ•°æ®ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p>
<p>5.Streamæ˜¯æƒ°æ€§æ±‚å€¼ï¼Œæµåœ¨ä¸­é—´å¤„ç†è¿‡ç¨‹ä¸­ï¼Œåªæ˜¯å¯¹æ“ä½œè¿›è¡Œäº†è®°å½•ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦ç­‰åˆ°æ‰§è¡Œç»ˆæ­¢æ“ä½œçš„æ—¶å€™æ‰ä¼šè¿›è¡Œå®é™…çš„è®¡ç®—ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"><a href="#ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ" class="headerlink" title="ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"></a><strong><em>ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ</em></strong></h2><p>Stream API å¯ä»¥æå¤§æé«˜ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œä¸€è¡Œä»£ç å¯¹é›†åˆè¿›è¡Œå¤šç§æ“ä½œï¼Œè®©æˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆã€ç®€æ´ã€æœ‰æ•ˆç‡çš„ä»£ç ã€‚</p>
<blockquote>
</blockquote>
<h2 id="å››-Streamæµçš„ç”¨æ³•"><a href="#å››-Streamæµçš„ç”¨æ³•" class="headerlink" title="å››.Streamæµçš„ç”¨æ³•"></a><strong><em>å››.Streamæµçš„ç”¨æ³•</em></strong></h2><p><strong>å¦å¤–ï¼Œåœ¨ä½¿ç”¨æµçš„æ—¶å€™ï¼Œå…ˆä¸è¦é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæµï¼Œåé¢ä¼šè®²åˆ°åŸå› </strong></p>
<h3 id="1-æµçš„åˆ›å»º"><a href="#1-æµçš„åˆ›å»º" class="headerlink" title="1.æµçš„åˆ›å»º"></a><strong>1.æµçš„åˆ›å»º</strong></h3><p>å¯¹äºé›†åˆï¼Œæµçš„åˆ›å»ºé€šå¸¸ä½¿ç”¨ é›†åˆ.stream() æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();
Stream&lt;String&gt; stream = list.stream();</code></pre>
<p>å¯¹äºæ•°ç»„ï¼Œé€šå¸¸ä½¿ç”¨é›†åˆçš„å·¥å…·ç±» Arrays.stream() ã€å°†æ•°ç»„è½¬æ¢ä¸ºé›†åˆList åˆæˆ–æ˜¯Stream.of(array) æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<pre><code>String[] strs = new String[10];
Stream&lt;String&gt; stream = Arrays.stream(strs);

Stream&lt;String&gt; stream = Arrays.asList(strs).stream();

Stream&lt;String&gt; stream = Stream.of(1,2,3,4,6);</code></pre>
<p>å°†å­—ç¬¦ä¸²åˆ†éš”æˆæµï¼š</p>
<pre><code>String newstr = &quot;123,456,789&quot;;
Pattern pattern = Pattern.compile(&quot;,&quot;);
Stream&lt;String&gt; spiltStream = pattern.splitAsStream(newstr);
splitStream.sorted.forEach(v-&gt;System.out.println(v));            // è¾“å‡ºï¼š123 456 789 </code></pre>
<hr>
<h3 id="2-æµçš„ä¸­é—´æ“ä½œ"><a href="#2-æµçš„ä¸­é—´æ“ä½œ" class="headerlink" title="2.æµçš„ä¸­é—´æ“ä½œ"></a><strong>2.æµçš„ä¸­é—´æ“ä½œ</strong></h3><p>å®šä¹‰ä¸€ä¸ªæ•´å½¢æ•°ç»„</p>
<pre><code>Integer[] integers = &#123;1,23,4,5,6,7,3,3,23,6,8,93,2,4,5&#125;;</code></pre>
<p>ä»¥ä¸‹æµçš„æ“ä½œå‡ä»¥æ­¤æ•°ç»„ä¸ºä¾‹</p>
<p><strong>forEachå¾ªç¯ï¼š</strong></p>
<p>ä½¿ç”¨forEach()æ–¹æ³•å¯ä»¥å¾ªç¯è¾“å‡ºæµ</p>
<pre><code>Stream.of(integers).forEach(v-&gt;System.out.println(v)); // å¾ªç¯è¾“å‡ºæ•´å½¢æ•°ç»„</code></pre>
<p><strong>ç­›é€‰ï¼š</strong></p>
<p>ä½¿ç”¨Streamæµä¸­çš„filter()æ–¹æ³•å¯ä»¥è¿‡æ»¤æŸäº›å…ƒç´ ï¼Œå¦‚ï¼š</p>
<pre><code>Stream&lt;Integer&gt; stream1 = Stream.of(integers);
stream1.filter(v-&gt;v&gt;20).forEach(v-&gt;System.out.println(v));    //23,23,93</code></pre>
<p><strong>è·å–nä¸ªå…ƒç´ ï¼š</strong></p>
<p>ä½¿ç”¨limit(n)æ–¹æ³•å¯ä»¥è·å–æµä¸­nä¸ªå…ƒç´ ï¼Œé¡ºåºä¸ºä» 0 â€“ n-1ï¼Œå¦‚ï¼š</p>
<pre><code>Stream.of(integers).limit(5).forEach(v-&gt;System.out.println(v));    //1,23,4,5,6</code></pre>
<p><strong>è·³è¿‡å‰nä¸ªå…ƒç´ </strong></p>
<p>ä½¿ç”¨skip(n)æ–¹æ³•å¯ä»¥è·³è¿‡æµä¸­å‰nä¸ªå…ƒç´ ï¼Œå¦‚ï¼š</p>
<pre><code>Stream.of(integers).skip(7).forEach(v-&gt;System.out.println(v));    //8,93,2,4,5</code></pre>
<p><strong>å»é™¤é‡å¤å…ƒç´ </strong></p>
<p>ä½¿ç”¨distinct()æ–¹æ³•å¯ä»¥å»é™¤æµä¸­é‡å¤å…ƒç´ ï¼ˆä½¿ç”¨hashcodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰å®ç°ï¼‰</p>
<pre><code>Stream.of(integers).distinct().forEach(v-&gt;System.out.println(v));    //1,23,4,5,6,7,3,8,93,2</code></pre>
<p><strong>ç”Ÿæˆæ˜ å°„</strong></p>
<p>map()æ–¹æ³•æ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ </p>
<pre><code>Stream.of(integers).filter(i-&gt;i&gt;20).distinct().map(v-&gt;v*=2).forEach(v-&gt;System.out.println(v));        //46,186</code></pre>
<p><strong>æ’åº</strong></p>
<p>sorted()æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤æ’åºï¼Œæµä¸­å…ƒç´ éœ€è¦å®sç°Comparableæ¥å£</p>
<p>sorted(Comparator cmp) æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå®ç°Comparatoræ¥å£çš„å®ç°ç±»ï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰æ’åº</p>
<pre><code>Stream.of(integers).sorted().filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v))         // 23,23,93

Stream.of(integers).sorted(
        new Comparator&lt;Integer&gt;() &#123;
        public int compare(Integer o1, Integer o2) &#123;
            return o2-o1;
        &#125;
    &#125;
    ).filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v))    // 93,23,23</code></pre>
<p><strong>æ¶ˆè´¹æ–¹æ³•</strong></p>
<p><del>å¾…ç»­</del></p>
<hr>
<h3 id="3-æµçš„ç»ˆæ­¢æ“ä½œ"><a href="#3-æµçš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="3.æµçš„ç»ˆæ­¢æ“ä½œ"></a><strong>3.æµçš„ç»ˆæ­¢æ“ä½œ</strong></h3><p><strong>å‰é¢è¯´è¿‡ä¸è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªæµï¼Œå› ä¸ºæµçš„ç»ˆæ­¢æ“ä½œä¼šå°†æµå…³é—­ï¼Œå…³é—­æµåå°±ä¸èƒ½ç»§ç»­ä½¿ç”¨è¿™ä¸ªæµï¼Œå¦‚æœç»§ç»­ä½¿ç”¨æµåˆ™ä¼šå‡ºç°å¼‚å¸¸</strong></p>
<p>æµçš„ç»ˆæ­¢æ“ä½œæœ‰ï¼šåŒ¹é…ã€èšåˆã€æ”¶é›†</p>
<hr>
<p><strong>åŒ¹é…</strong></p>
<p>åŒ¹é…æ“ä½œæ˜¯åˆ¤æ–­å…ƒç´ åœ¨æµä¸­çš„å­˜åœ¨å…³ç³»</p>
<pre><code>Stream&lt;Integer&gt; stream = Stream.of(integers);
boolean bool1 = stream.allMatch(v-&gt;v&gt;5);    //false
boolean bool2 = stream.allMatch(v-&gt;v&gt;10);    //æ­¤æ—¶ä¼šå‡ºç°å¼‚å¸¸ï¼Œå› ä¸ºæ‰§è¡Œäº†æµçš„ç»ˆæ­¢æ“ä½œã€‚

boolean allMatch = Stream.of(integers).allMatch(v-&gt;v&gt;5);
System.out.println(allMatch);    //åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ç¬¦åˆæŸç§å…³ç³»

boolean nonMatch = Stream.of(integers).noneMatch(v-&gt;v&gt;100);
System.out.println(nonMatch);    //åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸ç¬¦åˆæŸç§å…³ç³»

boolean anyMatch = Stream.of(integers).anyMatch(v-&gt;v&gt;90);
System.out.println(anyMatch);    //åˆ¤æ–­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆ

int res = Stream.of(integers).findFirst().get();
System.out.println(res);        //è¿”å›æµä¸­ç¬¬ä¸€ä¸ªå…ƒç´ 

int any = Stream.of(integers).findAny().get();
System.out.println(any);        //éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ </code></pre>
<hr>
<p><strong>èšåˆ</strong></p>
<p>èšåˆæ“ä½œæœ‰ï¼šè¿”å›æµä¸­å…ƒç´ ä¸ªæ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€‚</p>
<pre><code>long count = Stream.of(integers).count();    //è¿”å›longå‹

int maxElement = Stream.of(integers).max(Integer::compareTo).get();

int minElement = Stream.of(integers).min(Integer::compareTo).get();</code></pre>
<hr>
<p><strong>æ”¶é›†</strong></p>
<p>æ”¶é›†æ“ä½œå¯ä»¥å°†æµä¸­çš„å…ƒç´ åŒ…è£…æˆä¸€ä¸ªæœ€ç»ˆç»“æœé›†ï¼šListã€mapã€setç­‰ï¼Œå¦‚ï¼š</p>
<pre><code>å…¶ä¸­ collect æ¥å—ä¸€ä¸ªCollectorå®ä¾‹ï¼Œå¯å°†å…ƒç´ æ”¶é›†æˆå¦å¤–ä¸€ä¸ªæ•°æ®ç»“æ„

Set&lt;Integer&gt; set = Stream.of(integers).collect(Collectors.toSet());    //[1, 2, 3, 4, 5, 6, 23, 7, 8, 93]

List&lt;Integer&gt; list = Stream.of(integers).collect(Collectors.toList());        //[1, 23, 4, 5, 6, 7, 3, 3, 23, 6, 8, 93, 2, 4, 5]

Map&lt;Integer,Integer&gt; map = Stream.of(integers).distinct().filter(v-&gt;v&gt;20).collect(Collectors.toMap(Integer::intValue,Integer::intValue));    //&#123;23=23, 93=93&#125;</code></pre>
<p>æ”¶é›†æ“ä½œä¸­æ±‚æœ€å¤§ã€æœ€å°ã€æ±‚å’Œã€å¹³å‡å€¼ï¼š</p>
<pre><code>int max = Stream.of(integers).collect(Collectors.maxBy(Integer::compare)).get();

int min = Stream.of(integers).collect(Collectors.minBy(Integer::compare)).get();

double average = Stream.of(integers).collect(Collectors.averagingDouble(Integer::intValue));

int sum = Stream.of(integers).collect(Collectors.summarizingInt(Integer::intValue));</code></pre>
<p>ä»¥ä¸‹æ–¹æ³•å¯ä»¥é›†ä»¥ä¸Šå››ç§æ“ä½œäºä¸€èº«ï¼š</p>
<pre><code>IntSummaryStatistics sta = Stream.of(integers).collect(Collectors.summarizingInt(Integer::intValue));
int max = sta.getMax();
int min = sta.getMin();
double average = sta.getAverage();
long count = sta.getCount();
long sum = sta.getSum();</code></pre>
<hr>
<p><strong>åˆ†ç»„</strong></p>
<p>åˆ†ç»„æ“ä½œå°†æµä¸­ç›¸åŒå…ƒç´ å½’ä¸ºä¸€ç»„</p>
<pre><code>Map&lt;Integer,List&lt;Integer&gt;&gt; map = Stream.of(integers).distinct().collect(Collectors.groupingBy(Integer::intValue));        //&#123;1=[1], 2=[2], 3=[3], 4=[4], 5=[5], 6=[6], 7=[7], 23=[23], 8=[8], 93=[93]&#125;</code></pre>
<hr>
<p><strong>åˆ†åŒº</strong></p>
<p>åˆ†åŒºæ“ä½œä¸­ï¼Œè®¾ç½®æ¡ä»¶å°†æµä¸­å…ƒç´ åˆ†æˆä¸¤ç»„ï¼Œæ»¡è¶³æ¡ä»¶çš„ä¸ºtrueï¼Œä¸æ»¡è¶³çš„ä¸ºfalse</p>
<pre><code>Map&lt;Boolean,List&lt;Integer&gt;&gt; newmap = Stream.of(integers).distinct().collect(Collectors.partitioningBy(v-&gt;v&gt;20));

    System.out.println(newmap);

    System.out.println(newmap.get(true));</code></pre>
<p>ä½¿ç”¨newmap.get(true)è®¿é—®æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚</p>
]]></content>
      <tags>
        <tag>JavaStreamæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkDownå…¥é—¨</title>
    <url>/2020/09/21/MarkDown/</url>
    <content><![CDATA[<p>MarkDown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç›®å‰è®¸å¤šç½‘ç«™éƒ½åœ¨å¹¿æ³›ä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« æˆ–æ˜¯åœ¨è®ºå›å‘è¡¨æ–‡ç« ï¼Œå½“ç„¶ç”¨Hexo+githubæ­å»ºçš„ä¸ªäººåšå®¢ä¸­ä¹Ÿæ”¯æŒä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« ï¼Œä¸ºäº†æ›´å¥½åœ°æ­å»ºä¸ªäººåšå®¢ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ä½¿ç”¨MarkDownæ¥å¸®åŠ©æˆ‘ä»¬æ¥ç¼–å†™æ ¼å¼æ›´å¥½çš„æ–‡ç« ã€‚</p>
<hr>
<h3 id="ä¸€-æ ‡é¢˜"><a href="#ä¸€-æ ‡é¢˜" class="headerlink" title="ä¸€.æ ‡é¢˜"></a><strong><em>ä¸€.æ ‡é¢˜</em></strong></h3><p>æ ‡é¢˜ä½¿ç”¨#å·æ ‡è®°</p>
<p>ä¸€ä¸ª#æ˜¯ä¸€çº§æ ‡é¢˜ï¼ŒäºŒä¸ª#æ˜¯äºŒçº§æ ‡é¢˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ”¯æŒå…­çº§æ ‡é¢˜ã€‚</p>
<h1 id="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><p><strong>æ³¨ï¼š#åé¢è¦æœ‰ç©ºæ ¼ï¼Œä¸ç„¶æ— æ³•æ­£ç¡®æ˜¾ç¤º</strong></p>
<hr>
<h3 id="äºŒ-æ®µè½æ ¼å¼"><a href="#äºŒ-æ®µè½æ ¼å¼" class="headerlink" title="äºŒ.æ®µè½æ ¼å¼"></a><strong><em>äºŒ.æ®µè½æ ¼å¼</em></strong></h3><p>MarkDownå¯ä»¥ä½¿ç”¨ä¸‰ç§å­—ä½“ï¼šæ–œä½“ã€åŠ ç²—ã€æ–œä½“åŠ ç²—ã€‚</p>
<p>æ–œä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸€ä¸ª*</p>
<p><em>è¿™æ˜¯æ–œä½“</em></p>
<p>ç²—ä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸¤ä¸ª*</p>
<p><strong>è¿™æ˜¯ç²—ä½“</strong></p>
<p>æ–œä½“åŠ ç²—ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸‰ä¸ª***</p>
<p><strong><em>è¿™æ˜¯æ–œä½“åŠ ç²—</em></strong></p>
<hr>
<p>åˆ†å‰²çº¿ä½¿ç”¨ â€” æ¥å»ºç«‹åˆ†å‰²çº¿</p>
<hr>
<p>æ–‡å­—ä¸¤ç«¯ä½¿ç”¨ ï½ï½ æ¥ä½¿æ–‡å­—å˜æˆåˆ é™¤æ ¼å¼</p>
<p><del>è¿™æ˜¯æ–‡å­—çš„åˆ é™¤æ ¼å¼</del></p>
<p><strong>æ³¨ï¼šï½ï½å¿…é¡»æ˜¯è‹±æ–‡çš„ï½</strong></p>
<hr>
<p>ä¸‹åˆ’çº¿æ˜¯é€šè¿‡htmlçš„ u æ ‡ç­¾æ¥å®ç°çš„ï¼Œåœ¨æ–‡å­—ä¸¤ç«¯åŠ ä¸Šå³å¯</p>
<p><u>è¿™æ˜¯ä¸‹åˆ’çº¿</u></p>
<hr>
<h3 id="ä¸‰-åˆ—è¡¨"><a href="#ä¸‰-åˆ—è¡¨" class="headerlink" title="ä¸‰.åˆ—è¡¨"></a><strong><em>ä¸‰.åˆ—è¡¨</em></strong></h3><p>åˆ—è¡¨åˆ†ä¸º <u>æœ‰åºåˆ—è¡¨</u> å’Œ <u>æ— åºåˆ—è¡¨</u></p>
<p><strong>æ— åºåˆ—è¡¨</strong>ä½¿ç”¨ *ã€+ã€- ä½œä¸ºåˆ—è¡¨æ ‡è®°</p>
<ul>
<li>ç¬¬ä¸€é¡¹</li>
<li>ç¬¬äºŒé¡¹</li>
<li>ç¬¬ä¸‰é¡¹</li>
</ul>
<p><strong>æœ‰åºåˆ—è¡¨</strong>ä½¿ç”¨ 1. 2. 3.æ ‡è®°</p>
<p>1.ç¬¬ä¸€é¡¹<br>2.ç¬¬äºŒé¡¹<br>3.ç¬¬ä¸‰é¡¹</p>
<p><strong><em>åˆ—è¡¨åµŒå¥—</em></strong></p>
<p>ç¬¬äºŒå±‚ä¸ºç¬¬ä¸€å±‚æ¢è¡ŒååŠ ä¸€ä¸ªtab</p>
<ul>
<li>ç¬¬ä¸€å±‚<ul>
<li>ç¬¬äºŒå±‚<ul>
<li>ç¬¬ä¸‰å±‚ <ul>
<li>ç¬¬å››å±‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong><em>åŒºå—å¼•ç”¨å’ŒåµŒå¥—</em></strong></p>
<p>åŒºå—å¼•ç”¨ï¼šåœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å·ï¼Œåé¢è·Ÿä¸€ä¸ªç©ºæ ¼</p>
<blockquote>
<p>è¿™æ˜¯åŒºå—ä¸€</p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯åŒºå—äºŒ</p>
</blockquote>
<p>åŒºå—åµŒå¥—ï¼šä¸€ä¸ª&gt;æ˜¯æœ€å¤–å±‚ï¼Œä¸¤ä¸ªæ˜¯ç¬¬ä¸€å±‚åµŒå¥—ï¼Œä»¥æ­¤ç±»æ¨</p>
<blockquote>
<p>çˆ¶äº²</p>
<blockquote>
<p>å„¿å­</p>
<blockquote>
<p>å­™å­</p>
</blockquote>
</blockquote>
</blockquote>
<p><strong><em>æ³¨ï¼šåŒºå—åµŒå¥—ä¸­&gt;ä¹Ÿè¦éš”ä¸€ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å››-é“¾æ¥å’Œå›¾ç‰‡"><a href="#å››-é“¾æ¥å’Œå›¾ç‰‡" class="headerlink" title="å››.é“¾æ¥å’Œå›¾ç‰‡"></a><strong><em>å››.é“¾æ¥å’Œå›¾ç‰‡</em></strong></h3><p>é“¾æ¥ä½¿ç”¨ï¼š<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">é“¾æ¥åç§°</a></p>
<p>å¦‚ï¼š<a href="https://zleo-bug.github.io/">zleoçš„åšå®¢</a>    </p>
<p>å›¾ç‰‡ä½¿ç”¨ï¼šå›¾ç‰‡çš„ä½¿ç”¨å’Œé“¾æ¥ä½¿ç”¨ä¸€æ ·</p>
<p>å¦‚ï¼š<a href="http://static.runoob.com/images/runoob-logo.png">èœé¸Ÿæ•™ç¨‹</a></p>
<p>è‹¥ä½¿ç”¨æœ¬åœ°å›¾ç‰‡ï¼Œåˆ™é“¾æ¥ä¸º åœ¨ä¸æœ¬mdæ–‡ä»¶åŒåçš„æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡åç§°ï¼Œæœ¬æ–‡çš„æ–‡ä»¶åä¸ºMarkDownï¼Œåˆ™é“¾æ¥ä¸ºMarkDownå›¾ç‰‡çš„åç§°</p>
<p><img src="/2020/09/21/MarkDown/f4131bc77889e084f2b3648261cc43df.jpg" alt="å›¾ç‰‡"></p>
<p>MarkDownè¿˜ä¸æ”¯æŒæŒ‡å®šå›¾ç‰‡çš„é«˜åº¦å’Œå¤§å°ï¼Œè‹¥æœ‰éœ€è¦å¯ä»¥ä½¿ç”¨htmlçš„imgæ ‡ç­¾</p>
<hr>
<h3 id="äº”-è¡¨æ ¼"><a href="#äº”-è¡¨æ ¼" class="headerlink" title="äº”.è¡¨æ ¼"></a><strong><em>äº”.è¡¨æ ¼</em></strong></h3><p>MarkDownä¸­ç”¨|åˆ†éš”ä¸åŒå•å…ƒæ ¼ï¼Œç”¨-æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œ</p>
<p>å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
</tr>
</tbody></table>
<br>
è¡¨æ ¼ä¸­é»˜è®¤ä¸ºå‘å·¦çœ‹é½

<p>å‘å³çœ‹é½ï¼šå³è¾¹åŠ  :</p>
<p>æ–‡å­—å±…ä¸­ï¼šä¸¤è¾¹åŠ  :</p>
<p><strong><em>æ³¨ï¼š&amp;emsp; è¡¨ç¤ºä¸¤ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å…­-ä»£ç å—"><a href="#å…­-ä»£ç å—" class="headerlink" title="å…­.ä»£ç å—"></a><strong><em>å…­.ä»£ç å—</em></strong></h3><p>å¦‚æœæ˜¯æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ç‰‡æ®µä»£ç å¯ä»¥ç”¨åå¼•å·åŒ…èµ·æ¥</p>
<p>å¦‚ï¼š<code>printf()</code> å‡½æ•°</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œåˆ™å…¨é€‰ä»£ç å—åŠ ä¸€ä¸ªtabå³å¯</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
using namespace std;</code></pre>
<hr>
<h3 id="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"><a href="#ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚" class="headerlink" title="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"></a>ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚</h3>]]></content>
      <tags>
        <tag>MarkDown</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡</title>
    <url>/2020/09/21/NewPassage/</url>
    <content><![CDATA[<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»¥åè¦æŠŠå­¦ä¹ è¿‡ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹å†™åœ¨è‡ªå·±çš„åšå®¢ä¸ŠğŸ˜</p>
]]></content>
  </entry>
  <entry>
    <title>Pythonå…¥é—¨å­¦ä¹ </title>
    <url>/2020/09/21/Python/</url>
    <content><![CDATA[<p>è¿™å­¦æœŸé€‰ä¿®äº†ä¿¡æ¯æ£€ç´¢ï¼ˆpythonåŸºç¡€å…¥é—¨ï¼‰ï¼Œæ‰€ä»¥æœ‰å¿…è¦å°†pythonçš„åŸºç¡€markdownï¼Œä¾¿äºä»¥åå­¦ä¹ ã€‚è¯­è¨€éƒ½å…·æœ‰ç›¸ä¼¼æ€§ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºpythonä¸å…¶ä»–è¯­è¨€ä¸åŒçš„åœ°æ–¹</p>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š"><a href="#ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š"></a>ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š</h2><p>pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>pythonè¯­è¨€æ˜¯ä¸€ç§è§£é‡Šæ€§è¯­è¨€ï¼šè¿™æ„å‘³ç€åœ¨ä»£ç ç¼–å†™ã€æ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰äº†ç¼–è¯‘è¿™ä¸ªç¯èŠ‚</p>
<h2 id="äºŒ-pythonåŸºç¡€ï¼š"><a href="#äºŒ-pythonåŸºç¡€ï¼š" class="headerlink" title="äºŒ.pythonåŸºç¡€ï¼š"></a>äºŒ.pythonåŸºç¡€ï¼š</h2><h3 id="è¯­å¥ç»“æŸç¬¦ï¼š"><a href="#è¯­å¥ç»“æŸç¬¦ï¼š" class="headerlink" title="è¯­å¥ç»“æŸç¬¦ï¼š"></a>è¯­å¥ç»“æŸç¬¦ï¼š</h3><p>pythonä¸­å¯ä»¥ä¸å†™ç»“æŸç¬¦ï¼› å¦‚ï¼šprint(val)    </p>
<h3 id="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"><a href="#å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š" class="headerlink" title="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"></a>å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š</h3><p>pythonä¸­å˜é‡ç±»å‹æ˜¯å¼±ç±»å‹ï¼Œå®šä¹‰å˜é‡æ—¶ä¸ç”¨å£°æ˜æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨delåˆ é™¤å˜é‡</p>
<h3 id="æ³¨é‡Šï¼š"><a href="#æ³¨é‡Šï¼š" class="headerlink" title="æ³¨é‡Šï¼š"></a>æ³¨é‡Šï¼š</h3><h3 id="è¡Œä¸ç¼©è¿›ï¼š"><a href="#è¡Œä¸ç¼©è¿›ï¼š" class="headerlink" title="è¡Œä¸ç¼©è¿›ï¼š"></a>è¡Œä¸ç¼©è¿›ï¼š</h3><p>è¡Œä¸ç¼©è¿›æ˜¯pythonè¯­è¨€æœ€å…·ç‰¹è‰²çš„ä¸€ä¸ªåœ°æ–¹ï¼Œpythonä¸åƒå…¶ä»–è¯­è¨€ä¸€æ ·ä½¿ç”¨å¤§æ‹¬å·æ¥åŒ…å«ä¸€ä¸ªä»£ç å—ï¼Œè€Œæ˜¯ä½¿ç”¨ï¼šæ¥åŒ…å«ä»£ç å—ï¼Œç¼©è¿›ç›¸åŒçš„ä»£ç å—ä¸ºåŒä¸€å±‚æ¬¡ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code>if True:
        print(&quot;True&quot;);
    else:
        print(&quot;False&quot;);</code></pre>
<h3 id="å¤šè¡Œè¯­å¥ï¼š"><a href="#å¤šè¡Œè¯­å¥ï¼š" class="headerlink" title="å¤šè¡Œè¯­å¥ï¼š"></a>å¤šè¡Œè¯­å¥ï¼š</h3><p>å¦‚æœä¸€è¡Œä»£ç å¾ˆé•¿ï¼Œå¯ä»¥ç”¨ \ æ¥å°†ä»£ç åˆ†è¡Œ<br>å¦‚ï¼š</p>
<pre><code>total = item_one + \
   item_two + \
   item_three</code></pre>
<h3 id="å¯¼å…¥æ¨¡å—ï¼š"><a href="#å¯¼å…¥æ¨¡å—ï¼š" class="headerlink" title="å¯¼å…¥æ¨¡å—ï¼š"></a>å¯¼å…¥æ¨¡å—ï¼š</h3><p>pythonä¸­å¯¼å…¥æ¨¡å—ä½¿ç”¨ import [somemoudle] å’Œ from [somemoudle] import [moudle1],[moudle2]â€¦å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨importå¯ä»¥å¯¼å…¥å…¶ä»–pythonæ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼äºjavaä¸­çš„åŒ…ï¼Œå¯¼å…¥å…¶ä»–æ–‡ä»¶åä¼šè‡ªåŠ¨è¿è¡Œæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ä¸»æ–‡ä»¶ä¸­å°†ä»£ç å—æ”¾å…¥ <strong>name</strong> == <strong>main</strong> </p>
<h3 id="è¾“å…¥ä¸è¾“å‡ºï¼š"><a href="#è¾“å…¥ä¸è¾“å‡ºï¼š" class="headerlink" title="è¾“å…¥ä¸è¾“å‡ºï¼š"></a>è¾“å…¥ä¸è¾“å‡ºï¼š</h3><p>pythonä¸­ç”¨ input(â€œâ€)è¯­å¥è¾“å…¥ï¼Œè¾“å…¥é»˜è®¤ä¸ºå­—ç¬¦ä¸²ï¼Œè‹¥æƒ³å°†è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„å€¼å¯ç”¨å¼ºåˆ¶è½¬æ¢ã€‚å¦‚ val = int(input(â€œenter a val:â€))</p>
<p>pythonä¸­ç”¨ print()è¯­å¥è¾“å‡ºï¼Œè¾“å‡ºé»˜è®¤æ¢è¡Œï¼Œè‹¥æƒ³å–æ¶ˆæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼ï¼šprint(â€œâ€,end=â€ â€œ) ä½†endè¿™ä¸ªè¯­æ³•åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„python3æ‰æ”¯æŒã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨str.format()æ¥æ ¼å¼åŒ–è¾“å‡º</p>
<p>æ¡ä»¶æ§åˆ¶ï¼š</p>
<p>pythonä¸­æ²¡æœ‰switch caseè¡¨è¾¾å¼ï¼Œelifä»£æ›¿äº†elseï¼Œè¿˜æ·»åŠ äº†for elseã€while elseçš„è¡¨è¾¾å¼</p>
<h3 id="é”™è¯¯å’Œå¼‚å¸¸ï¼š"><a href="#é”™è¯¯å’Œå¼‚å¸¸ï¼š" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸ï¼š"></a>é”™è¯¯å’Œå¼‚å¸¸ï¼š</h3><p>pythonä¸­ä½¿ç”¨ try-expect-finally ä»£æ›¿ try-catch-else-finallyï¼Œå…¶ä¸­elseæ˜¯æ²¡æœ‰å¼‚å¸¸æ‰§è¡Œçš„ä»£ç </p>
<p>ç”¨raiseä»£æ›¿throwæŠ›å‡ºå¼‚å¸¸</p>
<h3 id="ç»§æ‰¿ï¼š"><a href="#ç»§æ‰¿ï¼š" class="headerlink" title="ç»§æ‰¿ï¼š"></a>ç»§æ‰¿ï¼š</h3><p>pythonæ”¯æŒå¤šç»§æ‰¿</p>
<h3 id="è¿ç®—ç¬¦ï¼š"><a href="#è¿ç®—ç¬¦ï¼š" class="headerlink" title="è¿ç®—ç¬¦ï¼š"></a>è¿ç®—ç¬¦ï¼š</h3><p>pythonä¸­è¿ç®—ç¬¦é™¤äº† æ¯”è¾ƒè¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ å¤– å…¶ä»–è¿ç®—ç¬¦å’Œå…¶ä»–è¯­è¨€æœ‰æ‰€ä¸åŒã€‚</p>
<h4 id="ç®—æ•°è¿ç®—ç¬¦ï¼š"><a href="#ç®—æ•°è¿ç®—ç¬¦ï¼š" class="headerlink" title="ç®—æ•°è¿ç®—ç¬¦ï¼š"></a>ç®—æ•°è¿ç®—ç¬¦ï¼š</h4><p>x/y çš„è¿ç®—ç»“æœä¸ºæµ®ç‚¹æ•° </p>
<p>x//y çš„ç»“æœä¸ºå‘ä¸‹å–æ•´çš„æ•´æ•°</p>
<p>x/<em>/</em>(val) è¡¨ç¤ºxçš„valæ¬¡å¹‚</p>
<h4 id="é€»è¾‘è¿ç®—ç¬¦ï¼š"><a href="#é€»è¾‘è¿ç®—ç¬¦ï¼š" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦ï¼š"></a>é€»è¾‘è¿ç®—ç¬¦ï¼š</h4><p>ä¸è¿ç®—ç¬¦ä¸ºï¼šand</p>
<p>æˆ–è¿ç®—ç¬¦ä¸ºï¼šor</p>
<p>éè¿ç®—ç¬¦ä¸ºï¼šnot</p>
<h4 id="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"><a href="#æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­" class="headerlink" title="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"></a>æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­</h4><p>inï¼šè¡¨ç¤ºæŸå…ƒç´ åœ¨æŒ‡å®šçš„åºåˆ—ä¸­ </p>
<p>not inï¼šè¡¨ç¤ºæŸå…ƒç´ ä¸åœ¨æŒ‡å®šåºåˆ—ä¸­</p>
<h4 id="èº«ä»½è¿ç®—ç¬¦ï¼š"><a href="#èº«ä»½è¿ç®—ç¬¦ï¼š" class="headerlink" title="èº«ä»½è¿ç®—ç¬¦ï¼š"></a>èº«ä»½è¿ç®—ç¬¦ï¼š</h4><p>is æˆ– id() ï¼šç”¨æ¥è¡¨ç¤ºæŸå˜é‡çš„åœ°å€ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­åºåˆ—</p>
<p>== ï¼šç”¨æ¥åˆ¤æ–­å˜é‡å€¼æ˜¯å¦ç›¸ç­‰ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­å˜é‡</p>
<p>ç±»ä¼¼äºåœ¨javaä¸­ï¼ŒString str1 = â€œ123â€;String str2 = â€œ123â€; String str3 = new String(â€œ123â€);<br>str1 == str2 /true<br>str1 == str3 /false<br>ä¹‹é—´çš„åŒºåˆ«</p>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"><a href="#åŸºæœ¬æ•°æ®ç±»å‹ï¼š" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"></a>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</h3><p>pythonä¸­ä½¿ç”¨type()è¿”å›å˜é‡çš„ç±»å‹ï¼Œä½¿ç”¨isinstanceæ–¹æ³•æ¥åˆ¤æ–­å˜é‡æ˜¯å¦ä¸æŒ‡å®šç±»å‹ç›¸åŒ</p>
<pre><code>a = 10;
print(type(a))    //    &lt;class &#39;int&#39;&gt;
print(isinstance(a,int))    //True</code></pre>
<ul>
<li><h4 id="Number-æ•°å­—ç±»å‹-ï¼š"><a href="#Number-æ•°å­—ç±»å‹-ï¼š" class="headerlink" title="Number (æ•°å­—ç±»å‹)ï¼š"></a>Number (æ•°å­—ç±»å‹)ï¼š</h4></li>
</ul>
<p>pythonä¸­æ•°å­—ç±»å‹åªæœ‰intã€boolã€floatã€complexå››ç§</p>
<p>å¼ºåˆ¶è½¬æ¢ï¼šintï¼ˆï¼‰ã€boolï¼ˆï¼‰ã€floatï¼ˆï¼‰ã€complexï¼ˆx,yï¼‰</p>
<ul>
<li><h4 id="String-å­—ç¬¦ä¸²-ï¼š"><a href="#String-å­—ç¬¦ä¸²-ï¼š" class="headerlink" title="String (å­—ç¬¦ä¸²)ï¼š"></a>String (å­—ç¬¦ä¸²)ï¼š</h4></li>
</ul>
<p>pythonä¸­å­—ç¬¦ä¸²ç”¨â€˜â€™æˆ–â€œâ€æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨ä¸‹æ ‡è®¿é—®å­—ç¬¦ä¸²</p>
<p>å­—ç¬¦ä¸²è¿ç®—ç¬¦ï¼š</p>
<p>*è¿ç®—ç¬¦ï¼šé‡å¤è¾“å‡º</p>
<pre><code>str = &quot;123&quot;
print(str3) //123123123</code></pre>
<p>[]è¿ç®—ç¬¦ï¼šé€šè¿‡ç´¢å¼•æˆªå–å­—ç¬¦ä¸²çš„å­ä¸²(å·¦é—­å³å¼€)</p>
<pre><code>str = &quot;12312312412412&quot;
print(str[0:4]);</code></pre>
<p>Pythonä¸­å­—ç¬¦ä¸²ä¸‹æ ‡æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯å¸¸è§„çš„ï¼š0â€¦n-1ï¼Œå¦ä¸€ç§æ˜¯ä»åé¢ç´¢å¼•ï¼š-nâ€¦-1</p>
<p>å¦‚ï¼š</p>
<pre><code>str = &quot;123456789&quot;
print(str[0:9])        /123456789
print(str[-9:0])     /123456789</code></pre>
<p>in å’Œ not in æˆå‘˜è¿ç®—ç¬¦ï¼šåˆ¤æ–­å­—ç¬¦æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²ä¸­</p>
<pre><code>str = &quot;12312312412412&quot;
print(&#39;0&#39; in str);        //False</code></pre>
<p>r/Rè¿ç®—ç¬¦ï¼šå°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦è½¬ä¹‰ï¼Œå˜æˆæ™®é€šå­—ç¬¦</p>
<pre><code>str = r&quot;12\n312312412412&quot;
print(str)            //12\n312312412412</code></pre>
<p>%å­—ç¬¦ä¸²æ ¼å¼åŒ–è¿ç®—ç¬¦ï¼š</p>
<pre><code>str = &quot;12312312412412&quot;
print(&quot;string is %s&quot; %str)        //string is 12312312412412</code></pre>
<p>f-string å­—é¢é‡æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</p>
<p>f-string æ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥ f å¼€å¤´ï¼Œåé¢è·Ÿç€å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­çš„è¡¨è¾¾å¼ç”¨å¤§æ‹¬å·{} åŒ…èµ·æ¥ï¼Œå®ƒä¼šå°†å˜é‡æˆ–è¡¨è¾¾å¼è®¡ç®—åçš„å€¼æ›¿æ¢è¿›å»</p>
<pre><code>name=&quot;åäºŒç‚¹å‰è¦ç¡è§‰&quot;
print(f&quot;æˆ‘æ˜¯&#123;name&#125;&quot;)        //æˆ‘æ˜¯åäºŒç‚¹å‰è¦ç¡è§‰

print(f&quot;&#123;1+2&#125;&quot;)     // 3</code></pre>
<p>str.format()æ ¼å¼åŒ–ï¼š</p>
<pre><code>print(&#39;&#123;0&#125; å’Œ &#123;1&#125;&#39;.format(&#39;Google&#39;, &#39;Runoob&#39;))    //Google å’Œ Runoob

print(&#39;&#123;name&#125;ç½‘å€ï¼š &#123;site&#125;&#39;.format(name=&#39;èœé¸Ÿæ•™ç¨‹&#39;, site=&#39;www.runoob.com&#39;))    //èœé¸Ÿæ•™ç¨‹ç½‘å€ï¼š www.runoob.com

import math
print(&#39;å¸¸é‡ PI çš„å€¼è¿‘ä¼¼ä¸º &#123;0:.3f&#125;ã€‚&#39;.format(math.pi))

table = &#123;&#39;Google&#39;: 1, &#39;Runoob&#39;: 2, &#39;Taobao&#39;: 3&#125;
print(&#39;Runoob: &#123;0[Runoob]&#125;; Google: &#123;0[Google]&#125;; Taobao: &#123;0[Taobao]&#125;&#39;.format(table))</code></pre>
<ul>
<li><h4 id="List-åˆ—è¡¨-ï¼š"><a href="#List-åˆ—è¡¨-ï¼š" class="headerlink" title="List (åˆ—è¡¨)ï¼š"></a>List (åˆ—è¡¨)ï¼š</h4></li>
</ul>
<p>åˆ—è¡¨æ˜¯pythonä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬å’Œæ•°ç»„ç›¸ä¼¼ï¼Œä¸è¿‡åˆ—è¡¨å…è®¸å­˜åœ¨ä¸åŒç±»å‹çš„å€¼ï¼Œåˆ—è¡¨ç”¨[]å°†å…ƒç´ åŒ…è£…ï¼Œåˆ—è¡¨æ˜¯å¯å˜çš„</p>
<pre><code>list = [1,2,3,4,]
list = [&quot;abc&quot;,&quot;def&quot;]
list = [1,2,3,&quot;abc&quot;,&quot;def&quot;]</code></pre>
<p>åˆ—è¡¨ä¹Ÿå¯ä»¥åƒå­—ç¬¦ä¸²ç±»å‹ä¸€æ ·ä»å°¾éƒ¨å¼€å§‹éå†ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ä¸º-1<br>åˆ—è¡¨çš„æˆªå–ä¹Ÿæ˜¯[]è¿ç®—ç¬¦ï¼Œå·¦é—­å³å¼€åŸåˆ™</p>
<pre><code>print(list[-1])    // def</code></pre>
<p><strong>åˆ—è¡¨å¢åŠ å…ƒç´ ï¼š</strong></p>
<p>åˆ—è¡¨ä¸­ç”¨appendå¢åŠ å…ƒç´ ï¼š</p>
<pre><code>list.append(1)
print(list)    //    [1, 2, 3, &#39;abc&#39;, &#39;def&#39;, 1]</code></pre>
<p>æˆ–è€…ä½¿ç”¨+è¿ç®—ç¬¦å¾€åˆ—è¡¨ä¸­å¢åŠ åˆ—è¡¨</p>
<pre><code>print(list+[1,2,3])        //[2, 3, &#39;abc&#39;, &#39;def&#39;, 1, 2, 3]</code></pre>
<p><strong>åˆ—è¡¨åˆ é™¤å…ƒç´ </strong></p>
<p>ç”¨delæˆ–åˆ é™¤å…ƒç´ ï¼š</p>
<pre><code>del list[0]
print(list)    //    [2, 3, &#39;abc&#39;, &#39;def&#39;, 1]</code></pre>
<p>ç”¨popåˆ é™¤å…ƒç´ ï¼Œé»˜è®¤åˆ é™¤å¹¶æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥åœ¨popæ–¹æ³•ä¸­é™å®šä¸‹æ ‡</p>
<pre><code>x = list.pop()    //def
print(x)    //[2, 3, &#39;abc&#39;]

list.pop(0)
print(list)    //[3, &#39;abc&#39;]</code></pre>
<ul>
<li><h4 id="Tuple-å…ƒç»„-ï¼š"><a href="#Tuple-å…ƒç»„-ï¼š" class="headerlink" title="Tuple (å…ƒç»„)ï¼š"></a>Tuple (å…ƒç»„)ï¼š</h4></li>
</ul>
<p>å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œå…ƒç»„ä¸å¯ä¿®æ”¹ï¼Œå…ƒç»„ç”¨()æ¥å£°æ˜</p>
<pre><code>tuple = (1,2,3,4,5)
print(tuple)    //(1, 2, 3, 4, 5)</code></pre>
<p>å…ƒç»„ä¸åˆ—è¡¨å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å…ƒç»„ä¸­æ²¡æœ‰appendæ·»åŠ å…ƒç´ æ–¹æ³•ï¼Œä¸è¿‡å¯ä»¥ç”¨+è¿ç®—è¿›è¡Œç»„åˆ<br>å¯ä»¥ç”¨list(tuple)å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨</p>
<pre><code>print(tuple+(9,8,7))    /(1, 2, 3, 4, 5, 9, 8, 7)</code></pre>
<ul>
<li><h4 id="set-é›†åˆ-ï¼š"><a href="#set-é›†åˆ-ï¼š" class="headerlink" title="set (é›†åˆ)ï¼š"></a>set (é›†åˆ)ï¼š</h4></li>
</ul>
<p>é›†åˆæ˜¯æ— åºçš„ï¼Œé›†åˆä½¿ç”¨{}æˆ–set()å‡½æ•°åˆ›å»ºé›†åˆ</p>
<pre><code>set = &#123;1,2,3,4,5,6&#125;
print(set)        //&#123;1, 2, 3, 4, 5, 6&#125;
print(set(&quot;123321&quot;))    //&#123;&#39;1&#39;, &#39;3&#39;, &#39;2&#39;&#125;</code></pre>
<p>æ·»åŠ å…ƒç´ ï¼š</p>
<p>ç”¨addæ–¹æ³•å¾€é›†åˆæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥ç”¨updateæ·»åŠ é›†åˆã€å…ƒç»„ã€åˆ—è¡¨ç­‰    </p>
<pre><code>set.add(4)
print(set)    //&#123;&#39;3&#39;, &#39;2&#39;, 4, &#39;1&#39;&#125;

set.update(&#123;5&#125;)    //&#123;&#39;2&#39;, 4, 5, &#39;3&#39;, &#39;1&#39;&#125;
print(set)</code></pre>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<p>ç”¨removeæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯å¦‚æœé›†åˆä¸­ä¸å­˜åœ¨å…ƒç´ ä¼šæŠ¥é”™</p>
<p>ç”¨discardæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¦‚æœé›†åˆä¸å­˜åœ¨å…ƒç´ ä¹Ÿä¸ä¼šæŠ¥é”™</p>
<pre><code>set.discard(5)
print(set)        //&#123;4, &#39;3&#39;, &#39;2&#39;, &#39;1&#39;&#125;</code></pre>
<p>é›†åˆå¹¶äº¤å·®è¡¥è¿ç®—</p>
<p>set1|set2: å¹¶é›†<br>set1&amp;set2: äº¤é›†<br>set1-set2: å·®é›†<br>set1^set2: ä¸åŒæ—¶å±äºset1å’Œset2çš„</p>
<ul>
<li><h4 id="Dictionary-å­—å…¸-ï¼š"><a href="#Dictionary-å­—å…¸-ï¼š" class="headerlink" title="Dictionary (å­—å…¸)ï¼š"></a>Dictionary (å­—å…¸)ï¼š</h4></li>
</ul>
<p>pythonä¸­å­—å…¸ç”¨{}å£°æ˜ï¼Œé”®å€¼å¯¹ç”¨:åˆ†éš”ï¼Œç”¨{}å£°æ˜ç©ºå­—å…¸ï¼Œå­—å…¸å€¼å¯ä¿®æ”¹</p>
<pre><code>dict = &#123;&quot;1&quot;:1,&quot;2&quot;:2&#125;
print(dict)    &#123;&#39;1&#39;: 1, &#39;2&#39;: 2&#125;
print(dict[&quot;1&quot;])    // 1

dict[&quot;1&quot;] = 100
print(dict)    //&#123;&#39;1&#39;: 100, &#39;2&#39;: 2&#125;</code></pre>
<p>å­—å…¸ä¸­ç”¨updateå¢åŠ ä¸€ä¸ªé”®å€¼å¯¹</p>
<pre><code>dict.update(&#123;&quot;3&quot;:3&#125;)
print(dict)</code></pre>
<p>pop(key)åˆ é™¤é”®ä¸ºkeyçš„å€¼</p>
<pre><code>val = dict.pop(&quot;1&quot;)
print(val)    //100</code></pre>
<p>ç”¨popitemåˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªé”®å€¼å¯¹</p>
<pre><code>d = dict.popitem();
print(d)    //(&#39;3&#39;, 3)</code></pre>
<h3 id="pythonå‡½æ•°"><a href="#pythonå‡½æ•°" class="headerlink" title="pythonå‡½æ•°"></a>pythonå‡½æ•°</h3><p>pythonä¸­ç”¨defå®šä¹‰ä¸€ä¸ªå‡½æ•°</p>
<pre><code>def Method():
print(&quot;éš¾é¡¶&quot;)
Method()    //éš¾é¡¶</code></pre>
<p><strong>å‡½æ•°å‚æ•°ï¼š</strong></p>
<p>å‡½æ•°å‚æ•°ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ <strong>å…³é”®å­—å‚æ•°</strong> ã€<strong>é»˜è®¤å‚æ•°</strong> ã€<strong>ä¸å®šé•¿å‚æ•°</strong>ã€<strong>åŒ¿åå‡½æ•°</strong></p>
<p><strong>å…³é”®å­—å‚æ•°</strong><br>å‡½æ•°è°ƒç”¨å¯ä»¥ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥ç¡®å®šä¼ å…¥çš„å‚æ•°å€¼ï¼Œä½¿ç”¨å…³é”®å­—å‚æ•°æ—¶å…è®¸å‚æ•°é¡ºåºçš„ä¸ä¸€è‡´</p>
<pre><code>def Method(name, age):
print(name, age)

Method(age=21, name=&quot;zl&quot;)        //zl 21</code></pre>
<p><strong>é»˜è®¤å‚æ•°</strong><br>å‡½æ•°ä¸­å¯ä»¥å¯¹å‚æ•°è®¾ç½®é»˜è®¤å€¼</p>
<pre><code>def Method(name,age,address=&quot;guangdong&quot;):
print(name, age,address)    //zl 21 guangdong
Method(age=21, name=&quot;zl&quot;)</code></pre>
<p><strong>ä¸å®šé•¿å‚æ•°</strong><br>ä¸å®šé•¿å‚æ•°ä¸­ï¼Œç”¨*å¯¼å…¥ä¸€ä¸ªå…ƒç»„ï¼Œ**å¯¼å…¥ä¸€ä¸ªå­—å…¸</p>
<pre><code>def Method(*tuple):
print(tuple)
Method(1,2,3,4,5,6,7)    //(1, 2, 3, 4, 5, 6, 7)

def Method(**dict):
print(dict)
Method(a=1,b=2,c=3,d=4);    //&#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4&#125;</code></pre>
<p>ä¸å®šé•¿å‚æ•°åçš„å‚æ•°è¦ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¼ å…¥</p>
<p><strong>åŒ¿åå‡½æ•°</strong><br>åŒ¿åå‡½æ•°ä¸­ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¡¨è¾¾å¼ä¸­ä¼šæä¾›è¿”å›å€¼</p>
<pre><code>Method = lambda val1=1,val2=2:val1+val2
print(Method())</code></pre>
<h3 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h3><p>pythonç±»ä¸­ä¸ç”¨åƒc++ã€javaä¸­å£°æ˜å±æ€§ï¼Œå¯ä»¥ç›´æ¥åœ¨æ„é€ æ–¹æ³•def <strong>init</strong>(self)ä½¿ç”¨ï¼Œå±æ€§æˆ–æ–¹æ³•å‰åŠ __ä»£è¡¨ç§æœ‰ï¼Œå¦å¤–ï¼Œåœ¨ç±»ä¸­çš„ä»»ä½•æ–¹æ³•éƒ½è¦åœ¨å‚æ•°åˆ—è¡¨ç¬¬ä¸€ä¸ªåŠ ä¸Šselfï¼Œç±»ä¼¼c++ã€javaçš„thiså…³é”®å­—ï¼Œè€Œä¸”æ–°å»ºå¯¹è±¡ä¸ç”¨ä½¿ç”¨newå…³é”®å­— Aclass=Myclass()å³å¯ï¼Œç»§æ‰¿åˆ™ä½¿ç”¨Aclass(Bclass)</p>
<pre><code>class person:
    name = &quot; &quot;
    age = 0
    sex = &quot; &quot;

def __init__(self, name, age, sex):
    self.name = name
    self.age = age
    self.sex = sex

def show(self):
    return (&quot;&#123;0&#125; is a &#123;1&#125; years old &#123;2&#125;&quot;.format(self.name, self.age, self.sex))

class student(person):
grade = &quot; &quot;

def __init__(self, name, age, sex, grade):
    person.__init__(self, name, age, sex)
    self.grade = grade

def show(self):
    return person.show(self) + &quot; å¤§å­¦ &#123;&#125; å¹´çº§&quot;.format(self.grade)

def print(self):
    print(person.show(self))
    print(super().show())


class graduate(student, person):
    salary = 0

def __init__(self, name, age, sex, grade, salary):
    student.__init__(self, name, age, sex, grade)
    self.salary = salary</code></pre>
<h3 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h3><ul>
<li>å†…ç½®å‘½å</li>
<li>å…¨å±€å‘½å</li>
<li>å±€éƒ¨å‘½å</li>
</ul>
<p>è‹¥è¦åœ¨æ–¹æ³•æˆ–ç±»ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä½¿ç”¨globalå…³é”®å­—</p>
<pre><code>count = 1
def change():
    global count
    print(count)
    count = 100

change()
print(count)    //100</code></pre>
<p>è‹¥è¦åœ¨åµŒå¥—æ–¹æ³•ä¸­ä½¿ç”¨å¤–å±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œä½¿ç”¨nonlocalå…³é”®å­—</p>
<pre><code>def outer():
    num = 10
    def inner():
        nonlocal num
        print(num)    //10
        num = &quot;str&quot;
    inner()
    print(num)    //str
outer()</code></pre>
]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç®€ä»‹</title>
    <url>/2020/09/22/Spring/</url>
    <content><![CDATA[<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Spring"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Spring"></a><strong>ä¸€.ä»€ä¹ˆæ˜¯Spring</strong></h2><p>Springè½»é‡çº§çš„javaå¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼ŒSpringçš„æ ¸å¿ƒæ˜¯æ§åˆ¶åè½¬(IOC)å’Œé¢å‘åˆ‡é¢(AOP)ã€‚</p>
<p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€å…·æœ‰æ§åˆ¶åè½¬å’Œé¢å‘åˆ‡é¢çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯IOC"><a href="#ä»€ä¹ˆæ˜¯IOC" class="headerlink" title="ä»€ä¹ˆæ˜¯IOC"></a><strong>ä»€ä¹ˆæ˜¯IOC</strong></h3><p>IOCçš„å®šä¹‰ï¼šæ‰€è°“IOCï¼Œå°±æ˜¯ç”±Spring IOCå®¹å™¨æ¥è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚<br>åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éƒ½æ˜¯ä½¿ç”¨newç›´æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ‰€éœ€è¦çš„å¯¹è±¡æ˜¯ç”±è‡ªå·±å¹¶æ§åˆ¶çš„ï¼Œä½†æ˜¯æœ‰äº†IOCå®¹å™¨åæˆ‘ä»¬æ‰€éœ€è¦çš„å¯¹è±¡ç”±IOCå®¹å™¨è´Ÿè´£ç®¡ç†ï¼Œç”±åŸæ¥çš„ä¸»åŠ¨ç”Ÿæˆå¯¹è±¡ -&gt; ç”±IOCå®¹å™¨ç”Ÿæˆå¯¹è±¡ ï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼æ”¹å˜äº†ï¼Œè¿™å°±æ˜¯æ§åˆ¶åè½¬ã€‚<br>åœ¨IOCä¸­ï¼Œé€šè¿‡ä»¥é…ç½®xmlæ–‡ä»¶æˆ–æ˜¯æ³¨è§£çš„æ–¹å¼å°†æˆ‘ä»¬æ‰€éœ€è¦çš„ç±»å’Œç±»çš„è·¯å¾„è¿›è¡Œè¯´æ˜ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­é€šè¿‡<strong>ä¸Šä¸‹æ–‡æ¨¡å—</strong>è·å–xmlæ–‡ä»¶çš„è·¯å¾„ï¼Œç”±IOCå®¹å™¨æä¾›æ‰€éœ€è¦çš„ç±»<br><a href="https://zhuanlan.zhihu.com/p/64001753">IOCå‚è€ƒé“¾æ¥</a></p>
<h3 id="ä»€ä¹ˆæ˜¯AOP"><a href="#ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯AOP"></a><strong>ä»€ä¹ˆæ˜¯AOP</strong></h3><p>AOPï¼šAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤å’Œå¤„ç†çš„ä¸€ç§æŠ€æœ¯ã€‚ä½†å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¤šä¸ªæ¨¡å—é—´æœ‰æŸäº›åŠŸèƒ½ç›¸åŒçš„ä»£ç ï¼Œä½†æ˜¯æ¨¡å—é—´åˆä¸å­˜åœ¨ä¸€ç§å±‚æ¬¡é—´çš„å…³ç³»ï¼Œè¿™æ—¶å€™åŠŸèƒ½å¦‚æœéœ€è¦æ”¹å˜ï¼Œé‚£ä¹ˆéœ€è¦å¯¹æ¯ä¸ªç±»è¿›è¡Œæ”¹åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å·¥ç¨‹ï¼Œè¿™æ—¶å€™æ€ä¹ˆè§£å†³ä»£ç é‡å¤è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä½¿ç”¨AOPï¼ŒAOPæŠ€æœ¯åˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œè§£å‰–å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†ç±»é—´å…±åŒçš„è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªæ–°çš„å¯é‡ç”¨æ¨¡å—ä¸­ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ã€‚</p>
<h3 id="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"><a href="#AOPçš„å®ç°æ–¹å¼æœ‰ï¼š" class="headerlink" title="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"></a>AOPçš„å®ç°æ–¹å¼æœ‰ï¼š</h3><ul>
<li>é¢„ç¼–è¯‘ï¼šAspectJ</li>
<li>è¿è¡ŒæœŸåŠ¨æ€ä»£ç†ï¼ˆJDKåŠ¨æ€ä»£ç†ã€CGLibåŠ¨æ€ä»£ç†ï¼‰ï¼šSpringAOPã€JbossAOP</li>
</ul>
<h3 id="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#AOPçš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"></a>AOPçš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul>
<li>æ—¥å¿—è®°å½•</li>
<li>æ€§èƒ½ç»Ÿè®¡</li>
<li>å®‰å…¨æ§åˆ¶</li>
<li>äº‹åŠ¡å¤„ç†</li>
<li>å¼‚å¸¸å¤„ç†</li>
</ul>
<h3 id="AOPçš„ä¸»è¦æ„å›¾ï¼š"><a href="#AOPçš„ä¸»è¦æ„å›¾ï¼š" class="headerlink" title="AOPçš„ä¸»è¦æ„å›¾ï¼š"></a>AOPçš„ä¸»è¦æ„å›¾ï¼š</h3><p>å°†æ—¥å¿—è®°å½•ï¼Œæ€§èƒ½ç»Ÿè®¡ï¼Œå®‰å…¨æ§åˆ¶ï¼Œäº‹åŠ¡å¤„ç†ï¼Œå¼‚å¸¸å¤„ç†ç­‰ä»£ç ä»ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­åˆ’åˆ†å‡ºæ¥ï¼Œé€šè¿‡å¯¹è¿™äº›è¡Œä¸ºçš„åˆ†ç¦»ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°†å®ƒä»¬ç‹¬ç«‹åˆ°éæŒ‡å¯¼ä¸šåŠ¡é€»è¾‘çš„æ–¹æ³•ä¸­ï¼Œè¿›è€Œæ”¹å˜è¿™äº›è¡Œä¸ºçš„æ—¶å€™ä¸å½±å“ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä½¿ä¸šåŠ¡é€»è¾‘æ›´åŠ çº¯ç²¹</p>
<h3 id="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"><a href="#AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š" class="headerlink" title="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"></a><strong>AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š</strong></h3><ul>
<li><p>Aspect å£°æ˜ç±»ä¼¼äº Java ä¸­çš„ç±»å£°æ˜ï¼Œåœ¨ Aspect ä¸­ä¼šåŒ…å«ç€ä¸€äº› Pointcut ä»¥åŠç›¸åº”çš„ Adviceã€‚ åŸºäºé…ç½®çš„åˆ‡é¢åªæ”¯æŒsingletonæ¨¡å¼</p>
</li>
<li><p>Joint pointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šè¡¨ç¤ºåœ¨ç¨‹åºä¸­æ˜ç¡®å®šä¹‰çš„ç‚¹ï¼Œå…¸å‹çš„åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ï¼Œå¯¹ç±»æˆå‘˜çš„è®¿é—®ä»¥åŠå¼‚å¸¸å¤„ç†ç¨‹åºå—çš„æ‰§è¡Œç­‰ç­‰ï¼Œå®ƒè‡ªèº«è¿˜å¯ä»¥åµŒå¥—å…¶å®ƒ joint pointã€‚</p>
</li>
<li><p>Pointcutï¼ˆåˆ‡ç‚¹ï¼‰ï¼šè¡¨ç¤ºä¸€ç»„ joint pointï¼Œè¿™äº› joint point æˆ–æ˜¯é€šè¿‡é€»è¾‘å…³ç³»ç»„åˆèµ·æ¥ï¼Œæˆ–æ˜¯é€šè¿‡é€šé…ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹å¼é›†ä¸­èµ·æ¥ï¼Œå®ƒå®šä¹‰äº†ç›¸åº”çš„ Advice å°†è¦å‘ç”Ÿçš„åœ°æ–¹ã€‚</p>
</li>
<li><p>Adviceï¼ˆå¢å¼ºï¼‰ï¼šAdvice å®šä¹‰äº†åœ¨ Pointcut é‡Œé¢å®šä¹‰çš„ç¨‹åºç‚¹å…·ä½“è¦åšçš„æ“ä½œï¼Œæœ‰beforeã€afterã€after-returingã€after-throwingã€aroundäº”ç§å¢å¼ºã€‚</p>
</li>
<li><p>Introductionï¼ˆå¼•å…¥ï¼‰ï¼šåœ¨ä¸ä¿®æ”¹ç±»ä»£ç çš„å‰æä¸‹ï¼Œä¸ºç±»æ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚<br>å…è®¸ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡</p>
</li>
<li><p>Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šç»‡å…¥ Advice çš„ç›®æ ‡å¯¹è±¡ã€‚</p>
</li>
<li><p>AOP Proxyï¼ˆAOPä»£ç†ï¼‰ AOPæ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨æ¥å®ç°åˆ‡é¢å¥‘çº¦</p>
</li>
<li><p>Weavingï¼ˆç»‡å…¥ï¼‰ï¼šå°† Aspect å’Œå…¶ä»–å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åˆ›å»º Adviced object çš„è¿‡ç¨‹</p>
</li>
</ul>
<h3 id="ä¸ªäººç†è§£ï¼š"><a href="#ä¸ªäººç†è§£ï¼š" class="headerlink" title="ä¸ªäººç†è§£ï¼š"></a><strong>ä¸ªäººç†è§£ï¼š</strong></h3><ul>
<li><p>Joint pointï¼šæ˜¯æ‰€æœ‰å¯èƒ½è¢«ç»‡å…¥åˆ°Adviceä¸­çš„ç‚¹,ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯è¿æ¥ç‚¹</p>
</li>
<li><p>Pointcutï¼šæä¾›ä¸€ç»„è§„åˆ™ï¼Œå°†ç¬¦åˆè§„åˆ™çš„ä¸€ç»„Joint pointç»‡å…¥åˆ°Adviceä¸­</p>
</li>
<li><p>Adviceï¼šAdviceè¯´æ˜äº†Pointcutä¸­Joint Pointä¸Šå°†è¦æ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œï¼Œå³ä¸€ä¸²ä»£ç </p>
</li>
<li><p>Aspectï¼šåˆ‡é¢æ˜¯Adviceå’ŒPointcutçš„ç»„åˆï¼Œæè¿°äº†åˆ‡ç‚¹çš„è¡Œä¸º</p>
</li>
</ul>
<h2 id="äºŒ-Springçš„ç»„æˆ"><a href="#äºŒ-Springçš„ç»„æˆ" class="headerlink" title="äºŒ.Springçš„ç»„æˆ"></a><strong><em>äºŒ.Springçš„ç»„æˆ</em></strong></h2><p><img src="/2020/09/22/Spring/SpringFramworkRuntime.png" alt="framework"></p>
<p><a href="https://www.cnblogs.com/jpwz/p/10556012.html">å‚è€ƒé“¾æ¥</a></p>
<p>springç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œä¸‹é¢ä»‹ç»springæ¯ä¸ªæ¨¡å—åŠå…¶åŠŸèƒ½</p>
<h3 id="Core-Container-æ ¸å¿ƒå®¹å™¨"><a href="#Core-Container-æ ¸å¿ƒå®¹å™¨" class="headerlink" title="Core Container æ ¸å¿ƒå®¹å™¨"></a><strong>Core Container æ ¸å¿ƒå®¹å™¨</strong></h3><p>Springæ ¸å¿ƒå®¹å™¨å»ºç«‹åœ¨Beansã€Coreã€Contextã€SpElæ¨¡å—ä¹‹ä¸Š</p>
<p>Beansæ¨¡å—æä¾›äº†BeanFactoryï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç»å…¸ä½“ç°ï¼Œæ‰€æœ‰è¢«Springç®¡ç†çš„å¯¹è±¡éƒ½ç§°ä¸ºBeans</p>
<p>Coreæ¨¡å—æä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬IOCå’Œã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰åŠŸèƒ½</p>
<p>Contextä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨Beanså’ŒCoreæ¨¡å—åŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªæ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹å¼ï¼Œæ˜¯è®¿é—®å®šä¹‰å’Œé…ç½®ä¸­Beanså¯¹è±¡çš„åª’ä»‹ï¼ŒApplicationContextæ¥å£é€šè¿‡xmlæ–‡æœ¬çš„è·¯å¾„è®¿é—®é…ç½®ä¸­çš„beanså¯¹è±¡ã€‚</p>
<p>SpElæ˜¯Springè¡¨è¾¾å¼è¯­è¨€ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€å»æ”¯æŒè¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡</p>
<h3 id="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"><a href="#é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—" class="headerlink" title="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"></a><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—</strong></h3><p>AOPæ¨¡å—æä¾›äº†ç¬¦åˆAOPè¦æ±‚çš„é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå…è®¸å®šä¹‰æ–¹æ³•æ‹¦æˆªå™¨å’Œåˆ‡å…¥ç‚¹ï¼Œå°†ä»£ç æŒ‰ç…§åŠŸèƒ½è¿›è¡Œåˆ†ç¦»ï¼Œæ˜¯çº¯Javaå®ç°</p>
<p>Aspectsæ¨¡å—æä¾›äº†AspectJçš„é›†æˆåŠŸèƒ½ï¼ŒAspectJæ˜¯ä¸€ä¸ªåŸºäºJavaè¯­è¨€çš„AOPæ¡†æ¶</p>
<p>Instrumentæ¨¡å—æä¾›äº†ç±»æ¤å…¥æ”¯æŒå’Œç±»åŠ è½½å™¨çš„å®ç°ï¼Œå¯åœ¨ç‰¹å®šçš„åº”ç”¨æœåŠ¡å™¨ä¸­ä½¿ç”¨</p>
<h3 id="æ•°æ®è®¿é—®æ¨¡å—"><a href="#æ•°æ®è®¿é—®æ¨¡å—" class="headerlink" title="æ•°æ®è®¿é—®æ¨¡å—"></a><strong>æ•°æ®è®¿é—®æ¨¡å—</strong></h3><p>JDBCã€DAOæ¨¡å—ï¼šJDBCæ¨¡å—æ˜¯å¯¹JDBCçš„æŠ½è±¡ï¼Œå‡å°‘JDBCç¼–ç¨‹çš„ä»£ç é‡</p>
<p>ORMæ¨¡å—ï¼šå°è£…äº†å¤§é‡çš„å¯¹è±¡å…³ç³»æ˜ å°„çš„API</p>
<h3 id="Webæ¨¡å—"><a href="#Webæ¨¡å—" class="headerlink" title="Webæ¨¡å—"></a><strong>Webæ¨¡å—</strong></h3><p>WebSocketæ¨¡å—ï¼šæä¾›WebScoketã€SockJSçš„å®ç°ï¼Œä»¥åŠå¯¹STOMPçš„æ”¯æŒ</p>
<p>Servletæ¨¡å—ï¼šä¹Ÿç§°ä¸ºSpring-webmvcæ¨¡å—ï¼ŒåŒ…å«äº†Springçš„MVCã€‚</p>
<p>Webæ¨¡å—ï¼šæä¾›åŸºæœ¬çš„Webå¼€å‘é›†æˆç‰¹æ€§ï¼Œæ¯”å¦‚å¤šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€ä½¿ç”¨Servletç›‘å¬å™¨æ¥åˆå§‹åŒ–Iocå®¹å™¨ä»¥åŠWebåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p>
<p>Portletæ¨¡å—ï¼šæä¾›äº†å¯¹åœ¨Portletç¯å¢ƒä¸­ä½¿ç”¨MVCçš„æ”¯æŒã€‚</p>
<!-- åº•å±‚æ˜¯Springçš„æ ¸å¿ƒå®¹å™¨ï¼ŒåŒ…æ‹¬Beanså®¹å™¨ã€ä¸Šä¸‹æ–‡ã€Springè¡¨è¾¾å¼å’Œæ ¸å¿ƒå·¥å…·ï¼Œæ˜¯Springæ¡†æ¶æœ€åŸºæœ¬çš„æ”¯æ’‘
ä¸­é—´å±‚æ˜¯Springçš„åŠŸèƒ½ç»„ä»¶
ä¸Šå±‚æ˜¯Springçš„å…·ä½“ä½¿ç”¨ -->]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>IOC</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring AOPçš„ä¸¤ç§å®ç°æ–¹å¼ï¼ˆXMLã€AspectJï¼‰</title>
    <url>/2020/09/25/AOP/</url>
    <content><![CDATA[<h2 id="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"><a href="#åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š" class="headerlink" title="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"></a>åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š</h2><p>è¦ä½¿ç”¨é…ç½®å®ç°AOPç¼–ç¨‹ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­ä½¿ç”¨<a href="aop:config">aop:config</a>æ¥å£°æ˜ï¼Œè¿™ç§å£°æ˜æ–¹å¼ä½¿ç”¨äº†å¤§é‡çš„è‡ªåŠ¨ä»£ç†æ–¹å¼<br><strong>æ³¨ï¼šç¯å¢ƒå¯èƒ½ä¼šç¼ºå°‘å¿…è¦çš„åŒ…ï¼Œå¦‚aopalliance.jarã€aspectweaver.jar</strong></p>
<p>åœ¨<a href="aop:config">aop:config</a>ä¸­ä½¿ç”¨&lt;aop:aspect id=â€â€ ref=â€â€&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡é¢ï¼Œ&lt;aop:pointcut id expression/&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œ&lt;aop:before(or other) method=â€â€ pointcut=â€â€&gt;é…ç½®ä¸€ä¸ªå¢å¼ºï¼Œè¿™ä¸‰ä¸ªå°±ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„åˆ‡é¢</p>
<p>ä¸‹é¢ä»‹ç»å¦‚ä½•é…ç½®ä¸€ä¸ªåˆ‡é¢å’Œåˆ‡é¢ä¸­çš„å‡ ç§å¢å¼º</p>
<p>å®šä¹‰ä¸€ä¸ªä¸šåŠ¡ç±»ServiceClassï¼š</p>
<pre><code>@Component
public class ServiceClass &#123;
    public void service()&#123;
        System.out.println(&quot;this is service&quot;);
    &#125;
&#125;</code></pre>
<p>å®šä¹‰ä¸€ä¸ªMyAspectåˆ‡é¢ç±»ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶newcontext.xmlï¼Œå…¶ä¸­ï¼ŒMyAspectç±»ä½¿ç”¨Componentæ³¨è§£é…ç½®</p>
<h3 id="before"><a href="#before" class="headerlink" title="before"></a>before</h3><p><strong>beforeæ˜¯ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<pre><code>@Component
public class MyAspect &#123;
    public void before()&#123;
        System.out.println(&quot;MyAspect&#39;s before&quot;);
    &#125;
&#125;</code></pre>
<p>newcontext.xmlæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;demo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:before&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>å…¶ä¸­ï¼Œåˆ‡ç‚¹ä¸­çš„expressionçš„å«ä¹‰ä¸ºï¼šåˆ‡ç‚¹ä¸ºnewdemo.ServiceClassè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•</p>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        serviceClass.service();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service</p>
<h3 id="after"><a href="#after" class="headerlink" title="after"></a>after</h3><p><strong>ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•è¿›è¡Œçš„æ“ä½œï¼Œé€šå¸¸ç”¨äºé‡Šæ”¾èµ„æº</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ afteræ–¹æ³•ï¼š</p>
<pre><code>public void after()&#123;
        System.out.println(&quot;MyAspect&#39;s after&quot;);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after method=&quot;after&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after&gt;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after</p>
<h3 id="after-returing"><a href="#after-returing" class="headerlink" title="after-returing"></a>after-returing</h3><p><strong>after-returingæ˜¯ä¸šåŠ¡æ–¹æ³•è¿”å›å‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ after-returningæ–¹æ³•ï¼š</p>
<pre><code>public void afterReturning()&#123;
        System.out.println(&quot;MyAspect&#39;s afterReturning&quot;);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after-returning method=&quot;afterReturning&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after-returning&gt;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterReturning</p>
<h3 id="after-throwing"><a href="#after-throwing" class="headerlink" title="after-throwing"></a>after-throwing</h3><p><strong>after-throwingæ˜¯ä¸šåŠ¡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åˆ‡é¢ç±»æ·»åŠ afterthrowingæ–¹æ³•ï¼š</p>
<pre><code>public void afterThrowing()&#123;
    System.out.println(&quot;MyAspect&#39;s afterThrowing&quot;);
&#125;</code></pre>
<p>åœ¨ä¸šåŠ¡ç±»ServiceClassçš„serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<pre><code>public void service() throws Exception&#123;
    System.out.println(&quot;this is service&quot;);
    throw new Exception();
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:after-throwing method=&quot;afterThrowing&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after-throwing&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        try &#123;
            serviceClass.service();
        &#125;
        catch (Exception e)&#123;
        &#125;
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterThrowing</p>
<h3 id="around"><a href="#around" class="headerlink" title="around"></a>around</h3><p><strong>aroundï¼šAdviceæœ€å¼ºæ“ä½œï¼Œå¯ä»¥ç»¼åˆå‰é¢å››ç§advice</strong></p>
<p>aroundæ–¹æ³•å¿…é¡»æœ‰Objectè¿”å›å€¼ï¼Œä¸”ç¬¬ä¸€ä¸ªå½¢å‚å¿…é¡»ä¸ºProceedingJoinPointç±»å‹ï¼Œaroundæ—¢å¯ä»¥åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹å‰å¢å¼ºåŠ¨ä½œï¼Œä¹Ÿèƒ½åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹åè¿›è¡Œå¢å¼ºçš„æ‰§è¡Œï¼Œaroundå¢å¼ºå¯ä»¥å†³å®šä¸šåŠ¡æ–¹æ³•åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œåœ¨aroundæ–¹æ³•ä½“å†…ï¼Œåªæœ‰è°ƒç”¨ProceedingJoinPointå‚æ•°çš„procedd()æ–¹æ³•æ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ aroundæ–¹æ³•ï¼š</p>
<pre><code>public Object around(ProceedingJoinPoint pjp)&#123;
    Object object = null;
    try&#123;
        object = pjp.proceed();
        System.out.println(&quot;MyAspect&#39;s around&quot;);
    &#125;
    catch (Throwable throwable) &#123;

    &#125;
    return object;
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;newdemo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:around&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
    serviceClass.service();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>this is service<br>MyAspectâ€™s around</p>
<p>æ”¹å˜aroundæ–¹æ³•ä¸­ä¸¤æ¡è¯­å¥çš„ä½ç½®ï¼š</p>
<pre><code>System.out.println(&quot;MyAspect&#39;s around&quot;);
object = pjp.proceed();</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s around<br>this is service</p>
<p>è¯´æ˜åªæœ‰åœ¨æ‰§è¡ŒProceedingJoinPointå¯¹è±¡çš„proceedæ–¹æ³•åï¼Œæ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<ul>
<li>advice-parametersï¼šå¯ä»¥å¾€å¢å¼ºæ–¹æ³•ä¸­ä¼ å…¥ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œåœ¨åˆ‡å…¥ç‚¹é…ç½®å¥½å‚æ•°ç±»å‹å’Œå±æ€§åå³å¯</li>
</ul>
<p><strong>ä¸‹é¢ç”¨aroundæ¥æ¨¡æ‹Ÿå‰é¢çš„advice</strong></p>
<p>åˆ‡é¢ç±»ï¼š</p>
<pre><code>@Component
public class MyAspect &#123;
    public Object around(ProceedingJoinPoint pjp)&#123;
        Object object = null;
        System.out.println(&quot;before&quot;);       //æ­¤æ—¶è¿˜æœªæ‰§è¡Œpjpçš„proceedæ–¹æ³•ï¼Œä¸šåŠ¡æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°adviceå¢å¼º
        try&#123;
            object = pjp.proceed();
        &#125;
        catch (Throwable throwable) &#123;       //pjp.proceed()æ–¹æ³•è‹¥æ•æ‰å¼‚å¸¸ï¼Œåˆ™è¯´æ˜ä¸šåŠ¡æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸
        &#125;
        finally &#123;
            System.out.println(&quot;after&quot;);    //æ­¤æ—¶æ•æ‰å¼‚å¸¸ï¼Œä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°afterå¢å¼º
        &#125;
        System.out.println(&quot;after throwing&quot;);   //è¿™å°±æ¨¡æ‹Ÿafter-throwingå¢å¼º
        return object;
    &#125;
&#125;</code></pre>
<p>é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;context:component-scan base-package=&quot;newdemo&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:config&gt;
        &lt;aop:aspect id=&quot;aspect&quot; ref=&quot;myAspect&quot;&gt;
            &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* newdemo.ServiceClass.*(..))&quot;/&gt;
            &lt;aop:around method=&quot;around&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:around&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        try &#123;
            serviceClass.service();
        &#125;
        catch (Exception e)&#123;
        &#125;
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>this is service<br>after<br>after throwing</p>
<h3 id="advice-parameters"><a href="#advice-parameters" class="headerlink" title="advice-parameters"></a>advice-parameters</h3><p>åœ¨pointcutçš„expressionä¸­æŒ‡å®šæ–¹æ³•å‚æ•°ï¼Œå¯ä»¥è·å–ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä»è€Œä½¿å¢å¼ºæ–¹æ³•ä¸­èƒ½ä½¿ç”¨è¿™äº›å‚æ•°</p>
<p>ServiceClassç±»ï¼š</p>
<pre><code>@Component
public class ServiceClass &#123;
    public void parametersService(String name,int age)&#123;
        System.out.println(&quot;parametersService&#39;s&quot;+name+&quot; &quot;+age);
    &#125;
&#125;</code></pre>
<p>åˆ‡é¢ç±»ä¸­æ·»åŠ ParametersMethodæ–¹æ³•ï¼š</p>
<pre><code>public void ParametersMethod(String name,int age)&#123;
    System.out.println(&quot;ParametersMethod&#39;s&quot;+name+&quot; &quot;+age);
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>&lt;aop:before method=&quot;ParametersMethod&quot; pointcut=&quot;execution(* newdemo.ServiceClass.parametersService(String,int)) and args(name,age)&quot;&gt;&lt;/aop:before&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        serviceClass.parametersService(&quot;zzzz&quot;,21);
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>ParametersMethodâ€™szzzz 21<br>parametersServiceâ€™szzzz 21</p>
<h3 id="Introduction-å¼•å…¥"><a href="#Introduction-å¼•å…¥" class="headerlink" title="Introduction å¼•å…¥"></a>Introduction å¼•å…¥</h3><p>Introductionå…è®¸å°†ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡</p>
<p>ç”± &lt;aop: declare-parents&gt;å…ƒç´ å£°æ˜ </p>
<p>å®šä¹‰ä¸€ä¸ªMyInterfaceæ¥å£</p>
<pre><code>public interface MyInterface &#123;
    public void show();
&#125;</code></pre>
<p>æ¥å£å®ç°ç±»MyInterfaceImpl</p>
<pre><code>public class MyInterfaceImpl implements MyInterface&#123;
    @Override
    public void show() &#123;
        System.out.println(&quot;this is my interface&quot;);
    &#125;
&#125;</code></pre>
<p>æ·»åŠ é…ç½®ï¼š</p>
<pre><code>aop:declare-parents types-matching=&quot;newdemo.ServiceClass&quot; implement-interface=&quot;newdemo.MyInterface&quot;
                             default-impl=&quot;newdemo.MyInterfaceImpl&quot;&gt;&lt;/aop:declare-parents&gt;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        MyInterface myInterface = (MyInterface)applicationContext.getBean(&quot;serviceClass&quot;);
        myInterface.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>this is my interface</p>
<p>introductionçš„ä½œç”¨æ˜¯å¼ºè¡Œä¸ºServiceClassæ·»åŠ ä¸€ä¸ªçˆ¶ç±»ï¼Œå³MyInterfaceæ¥å£ï¼Œç”±ServiceClassä½œä¸ºæ¥å£çš„å®ç°ç±»</p>
<h2 id="åŸºäº-AspectJæ³¨è§£çš„AOPå®ä¾‹"><a href="#åŸºäº-AspectJæ³¨è§£çš„AOPå®ä¾‹" class="headerlink" title="åŸºäº@AspectJæ³¨è§£çš„AOPå®ä¾‹"></a>åŸºäº@AspectJæ³¨è§£çš„AOPå®ä¾‹</h2><p>@AspectJæ˜¯é¢„ç¼–è¯‘çš„AOPå®ç°æ–¹å¼ï¼Œ@AspecJçš„é£æ ¼ç±»ä¼¼çº¯javaæ³¨è§£çš„æ™®é€šjavaç±»ï¼Œ@AspectJæ˜¯æŒ‡æ˜aspectsçš„å¦ä¸€ç§é£æ ¼ï¼ŒåƒåŸºäºæ³¨è§£çš„IOCä¸€æ ·ï¼ŒåŸºäºæ³¨è§£çš„é…ç½®èƒ½è®©å¼€å‘å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚</p>
<p>å¯¹@AspectJçš„æ”¯æŒå¯ä»¥ä½¿ç”¨XMLæˆ–javaæ³¨é‡Šé£æ ¼çš„é…ç½®ï¼Œä¸¤ç§æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸€æ ·çš„</p>
<ul>
<li><p>ä½¿ç”¨XMlï¼Œè¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š</p>
<p>  &lt;aop: aspectj-autoproxy&gt;&lt;/aop: aspectj-autoproxy&gt;</p>
</li>
<li><p>javaæ³¨é‡Šé£æ ¼çš„é…ç½®</p>
</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ³¨é‡Š</p>
<pre><code>@Configuration
@EnableAspectJAutoProxy</code></pre>
<p><strong>ä¸‹é¢ä½¿ç”¨XMLæ–‡ä»¶é…ç½®çš„æ–¹å¼ã€‚</strong></p>
<p>å®ç°ä¸€ä¸ªä¸šåŠ¡ç±»ServiceCLass</p>
<pre><code>public class ServiceCLass &#123;
        public void service()&#123;
        System.out.println(&quot;service&quot;);
    &#125;
&#125;</code></pre>
<p>ç”Ÿæˆé…ç½®æ–‡ä»¶AspectJContext.xmlï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;NewAspectJ&quot;&gt;&lt;/context:component-scan&gt;
    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
&lt;/beans&gt;</code></pre>
<h3 id="Aspect"><a href="#Aspect" class="headerlink" title="@Aspect"></a>@Aspect</h3><p>æ‹¥æœ‰@Aspectçš„ä»»ä½•beanéƒ½ä¼šè¢«Springè‡ªåŠ¨è¯†åˆ«å¹¶åº”ç”¨</p>
<p>ç”¨@Aspectæ³¨è§£çš„ç±»å¯ä»¥æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰åˆ‡å…¥ç‚¹ã€é€šçŸ¥ã€å¼•å…¥ç­‰</p>
<p>@Aspectè¦å’Œ@Componentä¸€èµ·ä½¿ç”¨ï¼Œ@Componentæ˜¯è‡ªåŠ¨é…ç½®ä¸€ä¸ªbeanï¼Œè€Œ@Aspectæ˜¯è‡ªåŠ¨å°†è¿™ä¸ªbeané…ç½®ä¸ºåˆ‡é¢ï¼ˆæˆ–è€…åœ¨XMLä¸­æ‰‹åŠ¨é…ç½®beanï¼‰</p>
<p>å®šä¹‰åˆ‡é¢ç±»ï¼š</p>
<pre><code>@Component
@Aspect
public class MyAspect &#123;
&#125;</code></pre>
<h3 id="Pointcut"><a href="#Pointcut" class="headerlink" title="@Pointcut"></a>@Pointcut</h3><p>@Pointcut = è¡¨è¾¾å¼+ç­¾å</p>
<p><strong>@Pointcutçš„è¡¨è¾¾å¼æ ‡ç­¾æœ‰10ä¸­ï¼š</strong></p>
<ul>
<li>executionï¼šç”¨äºåŒ¹é…æ–¹æ³•æ‰§è¡Œçš„è¿æ¥ç‚¹</li>
<li>withinï¼šç”¨äºåŒ¹é…æŒ‡å®šç±»å‹å†…çš„æ–¹æ³•æ‰§è¡Œ</li>
<li>thisï¼šç”¨äºåŒ¹é…å½“å‰AOPä»£ç†å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯AOPä»£ç†å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±å¯èƒ½åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯ç›®æ ‡å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±ä¸åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸ºæŒ‡å®šç±»å‹çš„æ‰§è¡Œæ–¹æ³•</li>
<li>@withinï¼šç”¨äºåŒ¹é…æ‰€ä»¥æŒæœ‰æŒ‡å®šæ³¨è§£ç±»å‹å†…çš„æ–¹æ³•</li>
<li>@targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼Œå…¶ä¸­ç›®æ ‡å¯¹è±¡æŒæœ‰æŒ‡å®šçš„æ³¨è§£</li>
<li>@argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ‰§è¡Œ</li>
<li>@annotationï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œæ–¹æ³•æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ–¹æ³•</li>
<li>beanï¼šSpringAOPæ‰©å±•çš„ï¼ŒAspectJæ²¡æœ‰å¯¹äºæŒ‡ç¤ºç¬¦ï¼Œç”¨äºåŒ¹é…ç‰¹å®šåç§°çš„Beanå¯¹è±¡çš„æ‰§è¡Œæ–¹æ³•</li>
</ul>
<p>åˆ‡å…¥ç‚¹ä½¿ç”¨@Pointcutå¯¹æ–¹æ³•è¿›è¡Œæ³¨è§£ï¼Œæ–¹æ³•è¿”å›ç±»å‹å¿…é¡»ä¸ºvoidï¼Œ@Pointcutå®é™…ä¸Šæ˜¯å°†æ–¹æ³•åä½œä¸ºåˆ‡å…¥ç‚¹çš„ä¸€ä¸ªç­¾åï¼Œå³æ–¹æ³•å=åˆ‡å…¥ç‚¹id</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ pointcutç­¾å</p>
<pre><code>@Component
@Aspect
public class MyAspect &#123;

    @Pointcut(&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;)
    public void pointcut()&#123;&#125;

&#125;</code></pre>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„</p>
<pre><code>&lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;/&gt;</code></pre>
<p>Pointcutå®šä¹‰æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨&amp;&amp;ã€||ã€ï¼è¿™ä¸‰ç§è¿ç®—</p>
<pre><code>@Pointcut(&quot;within(NewAspectJ.ServiceCLass)&quot;)
public void pointcut1()&#123;&#125;
@Pointcut(&quot;execution(public * *(..))&quot;)
public void pointcut2()&#123;&#125;
@Pointcut(&quot;pointcut1()&amp;&amp;pointcut2()&quot;)
public void pointcut3()&#123;&#125;</code></pre>
<p>pointcut3è¡¨ç¤ºåˆ‡ç‚¹ä¸ºNewAspect.ServiceClassç±»ä¸­çš„æ‰€æœ‰publicæ–¹æ³•</p>
<h3 id="Adivce"><a href="#Adivce" class="headerlink" title="@Adivce"></a>@Adivce</h3><ul>
<li>@Before</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<pre><code>@Before(&quot;pointcut()&quot;)
public void before()&#123;
    System.out.println(&quot;before&quot;);
&#125;</code></pre>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ï¼š</p>
<pre><code>&lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:before&gt;</code></pre>
<p>åœ¨æµ‹è¯•ç±»TestClassä¸­æµ‹è¯•ï¼Œè¾“å‡º</p>
<p>before<br>service</p>
<p>å…¶ä»–adviceåŒç†</p>
<ul>
<li>@AfterReturning</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°è¿”å›çš„å®é™…å€¼ï¼Œå¯ä½¿ç”¨@AfterReturningç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨ä¸šåŠ¡ç±»ä¸­æ·»åŠ serviceResultæ–¹æ³•ï¼Œç”¨äºè¿”å›resultå€¼</p>
<pre><code>public String serviceResult()&#123;
    return &quot;success&quot;;
&#125;</code></pre>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ–°çš„åˆ‡ç‚¹</p>
<pre><code>@Pointcut(&quot;execution(* NewAspectJ.ServiceClass.serviceResult(..))&quot;)
public void pointcut4()&#123;&#125;</code></pre>
<p>åˆ‡é¢ç±»ä¸­æ·»åŠ AfterReturningæ–¹æ³•</p>
<pre><code>@AfterReturning(&quot;pointcut4(),returning = &quot;Result&quot;&quot;)
public void AfterReturning(String Result)&#123;
    System.out.println(&quot;AfterReturning &#39;s &quot; + Result);
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>AfterReturning &#39;s success</code></pre>
<ul>
<li>@AfterThrowing</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä½¿ç”¨åƒ@AfterReturningé‚£æ ·çš„ç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸</p>
<pre><code>public void service() throws Exception&#123;
        System.out.println(&quot;service&quot;);
        throw new Exception(&quot;failed&quot;);
&#125;</code></pre>
<p>åˆ‡é¢ç±»æ·»åŠ AfterThrowingæ–¹æ³•</p>
<pre><code>@AfterThrowing(value = &quot;pointcut()&quot;,throwing = &quot;e&quot;)
public void AfterThrowing(Exception e)&#123;
    System.out.println(e.getMessage());
&#125;</code></pre>
<p>ç»“æœï¼š</p>
<pre><code>before
service
failed</code></pre>
<ul>
<li><p>@After<br>ä¸aop::afterç›¸åŒ</p>
</li>
<li><p>@Around<br>ä¸aop:aroundç›¸åŒ</p>
</li>
<li><p>@ç»™adviceä¼ é€’å‚æ•°</p>
</li>
</ul>
<p>åœ¨adviceä¸­ä½¿ç”¨advice(pointcut&amp;&amp;args)çš„æ–¹å¼å°†å‚æ•°ä¼ ç»™adviceï¼Œè‹¥æœ‰é‡è½½æ–¹æ³•ï¼Œåˆ™ä¼šè‡ªåŠ¨æ ¹æ®å‚æ•°åŒ¹é…</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨Aroundä¸­çš„ProceedingJoinPointå¯¹è±¡çš„getArgsæ–¹æ³•è¿”å›å‚æ•°æ•°ç»„</p>
<p>ä¸šåŠ¡ç±»ä¸­é‡è½½serviceæ–¹æ³•ï¼š</p>
<pre><code>public void service(String users,String passwords)&#123;
    System.out.println(&quot;service &#39;s &quot; + users + &quot; &quot;+passwords);
&#125;</code></pre>
<p>åˆ‡é¢ç±»å®ç°aroundçš„adviceï¼š</p>
<pre><code>@Around(&quot;pointcut()&amp;&amp;args(users,passwords)&quot;)
public Object Around(ProceedingJoinPoint pjp,String users,String passwords)&#123;
    Object object = null;
    System.out.println(&quot;Around&#39;s &quot; + users +&quot; &quot; + passwords);
    try&#123;
        object = pjp.proceed();
        Object[] objects = pjp.getArgs();
        System.out.println(&quot;ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°&quot;);
        System.out.println(Arrays.toString(objects));
    &#125;
    catch (Throwable e)&#123;

    &#125;
    return object;
&#125;</code></pre>
<p>æµ‹è¯•ç»“æœï¼š</p>
<p>Aroundâ€™s 123 123<br>before<br>service â€˜s 123 123<br>ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°<br>[123, 123]</p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title>Springä¹‹æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</title>
    <url>/2020/09/24/IOC/</url>
    <content><![CDATA[<h2 id="IOCæ§åˆ¶åè½¬ï¼š"><a href="#IOCæ§åˆ¶åè½¬ï¼š" class="headerlink" title="IOCæ§åˆ¶åè½¬ï¼š"></a><strong>IOCæ§åˆ¶åè½¬ï¼š</strong></h2><h3 id="IOCæ¡ˆä¾‹ï¼š"><a href="#IOCæ¡ˆä¾‹ï¼š" class="headerlink" title="IOCæ¡ˆä¾‹ï¼š"></a><strong>IOCæ¡ˆä¾‹ï¼š</strong></h3><p>æ¥å£UserInterfaceï¼š</p>
<pre><code>public interface UserInterface &#123;
    public void use();
&#125;</code></pre>
<p>æ¥å£UserInterfaceçš„å®ç°ç±» UserImplï¼š</p>
<pre><code>public class UserImpl implements UserInterface&#123;
@Override
    public void use() &#123;
        System.out.println(&quot;User using!&quot;);
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç±» TextClassï¼š</p>
<!--     import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext; -->

<pre><code>public class TextClass &#123;
    public static void main(String[] args) &#123;
        UserInterface userInterface = new UserImpl();
        userInterface.use();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>User usingï¼</p>
<p>åœ¨ä½¿ç”¨IOCä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨newæ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨IOCä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨newæ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®XMLæ–‡ä»¶ï¼ŒæŠŠæ‰€éœ€è¦çš„ç±»å†™å…¥XMLæ–‡ä»¶ä¸­ï¼Œç”±Springæ¥ç®¡ç†å’Œè·å–å¯¹è±¡</p>
<p>å°†TextCLassä¸­ç¨‹åºæ”¹ä¸€ä¸‹ï¼š</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);
        UserInterface userInterface = (UserInterface)applicationContext.getBean(&quot;UserId&quot;);
        userInterface.use();
    &#125;
&#125;</code></pre>
<p>åŒæ—¶åˆ›å»ºApplicationContext.XMLæ–‡ä»¶ï¼Œå¹¶é…ç½®ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­<strong>ç”±ä¸»åŠ¨åˆ›å»ºç±»</strong>è½¬å˜ä¸º<strong>é€šè¿‡Springç®¡ç†å’Œè·å–ç±»</strong>ï¼Œè¿™ä¸€è½¬å˜ç§°ä¸ºæ§åˆ¶åè½¬</p>
<hr>
<h2 id="DIä¾èµ–æ³¨å…¥"><a href="#DIä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¾èµ–æ³¨å…¥"></a><strong>DIä¾èµ–æ³¨å…¥</strong></h2><p>åœ¨IOCä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æ§åˆ¶åè½¬ï¼Œäº§ç”Ÿäº†ä¾èµ–ï¼Œä½†åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ¨æ€åœ°å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–ç±»ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°ä¾èµ–æ³¨å…¥DIï¼Œè¦æƒ³å®ç°ä¾èµ–æ³¨å…¥ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨éœ€è¦å…¶ä»–ç±»çš„æŸä¸ªå¯¹è±¡ä¸­æä¾›ä¸€ç§æ¸ é“ï¼ˆæ–¹æ³•ï¼‰æ¥å°†ä¾èµ–æ³¨å…¥ï¼Œæœ€ååœ¨XMLæ–‡ä»¶ä¸­è¿›è¡Œç›¸åº”çš„é…ç½®</p>
<p>ä¾èµ–æ³¨å…¥é€šå¸¸æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<ul>
<li><p>Setteræ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ„é€ æ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ¥å£æ³¨å…¥</p>
</li>
</ul>
<p>ä¸‹é¢ä¸»è¦ä»‹ç»å‰ä¸¤ç§æ–¹æ³•</p>
<h3 id="DIæ¡ˆä¾‹ï¼š"><a href="#DIæ¡ˆä¾‹ï¼š" class="headerlink" title="DIæ¡ˆä¾‹ï¼š"></a><strong>DIæ¡ˆä¾‹ï¼š</strong></h3><p>æ·»åŠ ä¸€ä¸ªMyClassç±»ï¼Œç±»ä¸­æœ‰ç§æœ‰æˆå‘˜ userInterface</p>
<pre><code>public class MyInterface &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
&#125;</code></pre>
<h4 id="Setteræ–¹æ³•æ³¨å…¥"><a href="#Setteræ–¹æ³•æ³¨å…¥" class="headerlink" title="Setteræ–¹æ³•æ³¨å…¥"></a><strong>Setteræ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨ç±»ä¸­æ·»åŠ Setteræ–¹æ³•</p>
<pre><code>public class MyClass &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
    public void setUserInterface(UserInterface userInterface)&#123;
        this.userInterface = userInterface;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
&lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
&lt;bean id=&quot;MyClassId&quot; class=&quot;MyClass&quot;&gt;
    &lt;property name=&quot;userInterface&quot; ref=&quot;UserId&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>TextClassç±»ä¸­è¿›è¡Œæµ‹è¯•</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);
        MyInterface myInterface = (MyInterface)applicationContext.getBean(&quot;MyInterfaceId&quot;);
        myInterface.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<h4 id="æ„é€ æ–¹æ³•æ³¨å…¥"><a href="#æ„é€ æ–¹æ³•æ³¨å…¥" class="headerlink" title="æ„é€ æ–¹æ³•æ³¨å…¥"></a><strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨MyClassç±»ä¸­æ·»åŠ æ„é€ å‡½æ•°</p>
<pre><code>public class MyClass &#123;
    private UserInterface userInterface;
    public void show()&#123;
        userInterface.use();
    &#125;
    public MyClass()&#123;&#125;
//    æ„é€ æ–¹æ³•æ³¨å…¥
    public MyClass(UserInterface userInterface)&#123;
        this.userInterface = userInterface;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;bean id=&quot;UserId&quot; class=&quot;UserImpl&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;MyClassId&quot; class=&quot;MyClass&quot;&gt;
        &lt;constructor-arg index=&quot;0&quot; ref=&quot;UserId&quot;&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>å¦‚æœæœ‰å¤šä¸ªå±æ€§ï¼Œindexåˆ™æŒ‰ç…§ä»0â€¦nè¿›è¡Œé…ç½®</p>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœï¼š</p>
<p>User Usingï¼</p>
<h3 id="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"><a href="#DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"></a><strong>DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥</strong></h3><p>ä»¥setteræ–¹æ³•æ³¨å…¥ä¸ºä¾‹ï¼š</p>
<p>æ–°å»ºä¸€ä¸ªUserç±»ï¼š</p>
<pre><code>import java.util.*;

public class User &#123;
    private String id;
    private String name;
    private String[] strings = new String[10];
    private List&lt;String&gt; list = new ArrayList&lt;&gt;();
    private Set&lt;String&gt; set = new HashSet&lt;&gt;();
    private Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();

    public void setId(String id) &#123;
        this.id = id;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public void setStrings(String[] strings) &#123;
        this.strings = strings;
    &#125;

    public void setList(List&lt;String&gt; list) &#123;
        this.list = list;
    &#125;

    public void setSet(Set&lt;String&gt; set) &#123;
        this.set = set;
    &#125;

    public void setMap(Map&lt;String, Integer&gt; map) &#123;
        this.map = map;
    &#125;

    public Map&lt;String, Integer&gt; getMap() &#123;
        return map;
    &#125;

    public Set&lt;String&gt; getSet() &#123;
        return set;
    &#125;

    public List&lt;String&gt; getList() &#123;
        return list;
    &#125;

    public String[] getStrings() &#123;
        return strings;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public String getId() &#123;
        return id;
    &#125;
&#125;</code></pre>
<p>é…ç½®XMLæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

&lt;bean id=&quot;UserId&quot; class=&quot;User&quot;&gt;
    &lt;property name=&quot;id&quot; value=&quot;20185625&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;name&quot; value=&quot;zl&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;strings&quot;&gt;
        &lt;array&gt;
            &lt;value&gt;&quot;11&quot;&lt;/value&gt;
            &lt;value&gt;&quot;22&quot;&lt;/value&gt;
            &lt;value&gt;&quot;33&quot;&lt;/value&gt;
        &lt;/array&gt;
    &lt;/property&gt;
    &lt;property name=&quot;list&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;&quot;44&quot;&lt;/value&gt;
            &lt;value&gt;&quot;55&quot;&lt;/value&gt;
            &lt;value&gt;&quot;66&quot;&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;

    &lt;property name=&quot;set&quot;&gt;
        &lt;set&gt;
            &lt;value&gt;&quot;77&quot;&lt;/value&gt;
            &lt;value&gt;&quot;88&quot;&lt;/value&gt;
            &lt;value&gt;&quot;99&quot;&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;

    &lt;property name=&quot;map&quot;&gt;
        &lt;map&gt;
            &lt;entry key=&quot;111&quot; value=&quot;111&quot;&gt;&lt;/entry&gt;
            &lt;entry key=&quot;222&quot; value=&quot;222&quot;&gt;&lt;/entry&gt;
        &lt;/map&gt;
    &lt;/property&gt;

&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import java.util.Arrays;

public class TextClass &#123;
    public static void main(String[] args) &#123;
        String xmlPath = &quot;ApplicationContext.xml&quot;;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(xmlPath);

        User user = (User)applicationContext.getBean(&quot;UserId&quot;);
        System.out.println(Arrays.toString(user.getStrings()));
        System.out.println(user.getList());
        System.out.println(user.getMap());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>[&quot;11&quot;, &quot;22&quot;, &quot;33&quot;]
[&quot;44&quot;, &quot;55&quot;, &quot;66&quot;]
&#123;111=111, 222=222&#125;</code></pre>
<hr>
<h2 id="Beançš„ä½œç”¨åŸŸ"><a href="#Beançš„ä½œç”¨åŸŸ" class="headerlink" title="Beançš„ä½œç”¨åŸŸ"></a><strong>Beançš„ä½œç”¨åŸŸ</strong></h2><p>å®šä¹‰ä¸€ä¸ªScopeClassç±» å’Œ TestClassï¼š</p>
<pre><code>public class ScopeClass &#123;

    public void show()&#123;
        System.out.println(this.hashCode());
    &#125;

    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext&quot;);
        ScopeClass scopeClass = (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);
        scopeClass.show();
    &#125;
&#125;</code></pre>
<h3 id="singleton"><a href="#singleton" class="headerlink" title="singleton:"></a><strong>singleton:</strong></h3><p>åœ¨XMLæ–‡ä»¶ä¸­é…ç½®:    </p>
<pre><code>&lt;bean id=&quot;ScopeClassId&quot; class=&quot;com.newdemo.ScopeClass&quot; scope=&quot;singleton&quot;&gt;&lt;/bean&gt;</code></pre>
<p>åœ¨TestClassè¿›è¡Œæµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    ScopeClass scopeClass = (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);
    scopeClass.show();
&#125;</code></pre>
<p>}</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>346224929<br>346224929</p>
<p>è¯´æ˜beanä¸­é…ç½®singletonå•ä¾‹ï¼Œä¸€ä¸ªbeanå®¹å™¨ï¼ˆåŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼‰ä¸­åªå­˜åœ¨ä¸€ä»½</p>
<hr>
<h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype:"></a><strong>prototype:</strong></h3><p>åœ¨xmlæ–‡ä»¶ä¸­å°†singletonæ”¹ä¸ºprototype</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>550752602<br>680779399</p>
<p>è¯´æ˜æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
<hr>
<h3 id="requestå’Œsession"><a href="#requestå’Œsession" class="headerlink" title="requestå’Œsession"></a><strong>requestå’Œsession</strong></h3><ul>
<li>requestï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ä¸”ä»…åœ¨å½“å‰requestæœ‰æ•ˆ</li>
<li>sessionï¼šåŒä¸Šï¼Œæ¯æ¬¡httpè¯·æ±‚åˆ›å»ºï¼Œå½“å‰sessionæœ‰æ•ˆ</li>
</ul>
<hr>
<h2 id="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"></a><strong>Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯</strong></h2><p>å®Œæ•´çš„Beançš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šå®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ã€åˆå§‹åŒ–ã€é”€æ¯ï¼Œä¸‹é¢ä»‹ç»åˆå§‹åŒ–å’Œé”€æ¯ä¸¤éƒ¨åˆ†</p>
<p>Beançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
<li>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</li>
<li>åœ¨xmlå¤´ä¸­ä¸ºæ‰€æœ‰Beanå®šä¹‰é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªLifeCircleClassç±»ï¼š</p>
<pre><code>public class LifeCircleClass &#123;

&#125;</code></pre>
<h3 id="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>åœ¨ç±»ä¸­å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼š</p>
<pre><code>public class LifeCircleClass &#123;
    public void init()&#123;
        System.out.println(&quot;init&quot;);
    &#125;
    public void destroy()&#123;
        System.out.println(&quot;destroy&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨xmlæ–‡ä»¶ä¸­é…ç½®beanï¼š</p>
<pre><code>&lt;bean id=&quot;LifeCircleClassId&quot; class=&quot;com.newdemo.LifeCircleClass&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code>ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
    LifeCircleClass lifeCircleClass = (LifeCircleClass)applicationContext.getBean(&quot;LifeCircleClassId&quot;);
    ((AbstractApplicationContext) applicationContext).close();  //å…³é—­å®¹å™¨</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>init<br>destroy</p>
<hr>
<h3 id="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"><a href="#å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£" class="headerlink" title="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"></a><strong>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</strong></h3><pre><code>public class LifeCircleClass implements InitializingBean, DisposableBean &#123;

    @Override
    public void afterPropertiesSet() throws Exception &#123;
        System.out.println(&quot;init&quot;);
    &#125;

    @Override
    public void destroy() throws Exception &#123;
        System.out.println(&quot;destroy&quot;);
    &#125;

&#125;</code></pre>
<p>æ­¤æ—¶å¯ä»¥ä¸åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h3 id="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>default-init-method é¡¶çº§ <beans> å…ƒç´ å±æ€§ä¸Šå­˜åœ¨å±æ€§ä¼šå¯¼è‡´Spring IoCå®¹å™¨ init å°†beanç±»ä¸Šè°ƒç”¨çš„æ–¹æ³•è¯†åˆ«ä¸ºåˆå§‹åŒ–æ–¹æ³•å›è°ƒã€‚å½“beanè¢«åˆ›å»ºå’Œç»„è£…æ—¶ï¼Œå¦‚æœbeanç±»å…·æœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œåˆ™åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨å®ƒã€‚</beans></p>
<p>å¦‚ï¼šåœ¨LifeCircleClassä¸­è‡ªå®šä¹‰init()å’Œdestroy()æ–¹æ³•ï¼Œåœ¨xmlå¤´ä¸­é…ç½®</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;
default-init-method=&quot;init&quot; default-destroy-method=&quot;destroy&quot;&gt;

    &lt;bean id=&quot;ScopeClassId&quot; class=&quot;com.newdemo.ScopeClass&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;

    &lt;bean id=&quot;LifeCircleClassId&quot; class=&quot;com.newdemo.LifeCircleClass&quot; &gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<p>æ–°å»ºä¸€ä¸ªInitClassç±»å¹¶åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ï¼š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        InitClass initClass = (InitClass) applicationContext.getBean(&quot;InitClassId&quot;);
        ((AbstractApplicationContext) applicationContext).close();  //å…³é—­å®¹å™¨
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h2 id="Awareæ¥å£"><a href="#Awareæ¥å£" class="headerlink" title="Awareæ¥å£"></a><strong>Awareæ¥å£</strong></h2><p>Springä¸­æœ‰å¾ˆå¤šç»§æ‰¿äºAwareæ¥å£çš„å­—æ¥å£ï¼Œå¦‚ï¼š</p>
<p><img src="/2020/09/24/IOC/3397380-6ef519bbc705ce28.png" alt="Aware"></p>
<p>awareç¿»è¯‘ä¸ºæ„ŸçŸ¥çš„ï¼Œæ ¹æ®å­—é¢æ„æ€Awareæ¥å£åº”è¯¥æ˜¯å…·æœ‰æŸäº›æ„ŸçŸ¥çš„åŠŸèƒ½</p>
<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹ApplicationContextAwareæ¥å£å’ŒBeanNameAwareæ¥å£</p>
<p>æ–°å»ºä¸€ä¸ªAwareClassç±»ï¼Œç»§æ‰¿BeanNameAwareæ¥å£</p>
<pre><code>public class AwareClass implements BeanNameAware &#123;
    private String BeanName;
    @Override
    public void setBeanName(String s) &#123;
        this.BeanName = s;
    &#125;

    public String getBeanName() &#123;
        return BeanName;
    &#125;
&#125;</code></pre>
<p>é…ç½®bean</p>
<pre><code>&lt;bean id=&quot;AwareClassId&quot; class=&quot;com.newdemo.AwareClass&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        AwareClass awareClass = (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);
        System.out.println(awareClass.getBeanName());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<pre><code>AwareClassId</code></pre>
<p>å®ç°BeanNameAwareæ¥å£çš„ç±»é€šè¿‡setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–é…ç½®æ–‡ä»¶ä¸­çš„beanid</p>
<p>ç°åœ¨è®©Awareç±»ç»§æ‰¿ApplicationContextAwareç±»</p>
<pre><code>public class AwareClass implements BeanNameAware, ApplicationContextAware &#123;
    private String BeanName;
    private ApplicationContext applicationContext;
    @Override
    public void setBeanName(String s) &#123;
        this.BeanName = s;
    &#125;

    public String getBeanName() &#123;
        return BeanName;
    &#125;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) &#123;
        this.applicationContext = applicationContext;
    &#125;

    public ApplicationContext getApplicationContext() &#123;
        return applicationContext;
    &#125;

&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        AwareClass awareClass = (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);
        ApplicationContext applicationContext1 = awareClass.getApplicationContext();
        System.out.println(applicationContext==applicationContext1);
    &#125;
&#125;</code></pre>
<p>æ­¤æ—¶è¾“å‡ºtrueï¼Œè¯´æ˜ApplicationContextæ¥å£ä¸­çš„setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–è¯¥å®ç°ç±»æ‰€åœ¨çš„å®¹å™¨ï¼ˆä¸Šä¸‹æ–‡ï¼‰</p>
<p>åŒç†ï¼Œå…¶ä»–Awareçš„å­æ¥å£ä¹ŸåŒæ ·å…·æœ‰æ„ŸçŸ¥åŠŸèƒ½</p>
<hr>
<h2 id="Beançš„è‡ªåŠ¨è£…é…"><a href="#Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="Beançš„è‡ªåŠ¨è£…é…"></a><strong>Beançš„è‡ªåŠ¨è£…é…</strong></h2><p>å¯¹äºBeançš„å±æ€§çš„è‡ªåŠ¨è£…é…ï¼Œæ­¤æ—¶ä¸å†éœ€è¦åœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨å¯¹å±æ€§æ³¨å…¥ï¼Œä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°å±æ€§çš„è‡ªåŠ¨è£…é…ï¼š</p>
<ul>
<li>byname id==name</li>
<li>bytype å±æ€§type == xmlæ–‡ä»¶ä¸­çš„type</li>
<li>byconstructor æ„é€ å™¨åˆ—è¡¨å‚æ•°type==å±æ€§ç±»å‹</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªPersonç±»ã€PersonalInfoç±»ã€AddressInfoç±»</p>
<pre><code>public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;

    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;

    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;

public class PersonalInfo &#123;
    private String name;
    private int age;
    public void setName(String name) &#123;
        this.name = name;
    &#125;
    public void setAge(int age) &#123;
        this.age = age;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public int getAge() &#123;
        return age;
    &#125;

    public int getAge() &#123;
        return age;
    &#125;
&#125;    

public class AddressInfo &#123;

    private String Province;
    private String city;

    public void setProvince(String province) &#123;
        Province = province;
    &#125;

    public void setCity(String city) &#123;
        this.city = city;
    &#125;

    public String getProvince() &#123;
        return Province;
    &#125;

    public String getCity() &#123;
        return city;
    &#125;
&#125;</code></pre>
<hr>
<h3 id="byname"><a href="#byname" class="headerlink" title="byname"></a><strong>byname</strong></h3><p>ä½¿ç”¨bynameè‡ªåŠ¨è£…é…ï¼Œè¦æ±‚è¢«è£…é…çš„å±æ€§åè¦ä¸xmlæ–‡ä»¶ä¸­æŸä¸ªBeançš„beanIdç›¸åŒï¼Œå¦åˆ™ä¸è¿›è¡Œè£…é…</p>
<p>åœ¨xmlä¸­é…ç½®bean </p>
<p><strong><em>æ³¨ï¼šåœ¨é…ç½®idçš„æ—¶å€™å°½é‡é…ç½®å°å†™ï¼Œä¸ç„¶æœ‰æ—¶å€™ä¼šå‡ºé”™ï¼ŒåŸå› ä¸æ¸…æ¥š</em></strong></p>
<pre><code>&lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;addressInfo&quot; class=&quot;com.newdemo.AddressInfo&quot;&gt;
    &lt;property name=&quot;province&quot; value=&quot;GuangDong&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;city&quot; value=&quot;GuangZhou&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;PersonId&quot; class=&quot;com.newdemo.Person&quot; autowire=&quot;byName&quot;&gt;&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;PersonId&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<hr>
<h3 id="bytype"><a href="#bytype" class="headerlink" title="bytype"></a><strong>bytype</strong></h3><p>bytypeè¦æ±‚å±æ€§çš„ç±»å‹ä¸xmlæ–‡ä»¶ä¸­çš„ç±»å‹ç›¸åŒæ—¶æ‰è‡ªåŠ¨è£…é…</p>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h3 id="byConstructor"><a href="#byConstructor" class="headerlink" title="byConstructor"></a><strong>byConstructor</strong></h3><p>åœ¨Personç±»ä¸­æ·»åŠ æ„é€ æ–¹æ³•</p>
<pre><code>    public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;
        this.personalInfo = personalInfo;
        this.addressInfo = addressInfo;
&#125;</code></pre>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h2 id="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"><a href="#æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®" class="headerlink" title="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"></a><strong>æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®</strong></h2><p>Spring2.5å¼•å…¥äº†é€šè¿‡æ³¨è§£æ¥é…ç½®beanåŠæ³¨å…¥ä¾èµ–çš„æ–¹æ³•ï¼Œä½¿ç”¨æ³¨è§£é…ç½®æ—¶ï¼Œä¸å†éœ€è¦é€šè¿‡xmlæ–‡ä»¶é…ç½®beanç±»ï¼Œç®€åŒ–äº†é…ç½®å·¥ä½œ</p>
<h3 id="Componentã€-Serviceã€-Controllerã€-Repository"><a href="#Componentã€-Serviceã€-Controllerã€-Repository" class="headerlink" title="@Componentã€@Serviceã€@Controllerã€@Repository"></a><strong>@Componentã€@Serviceã€@Controllerã€@Repository</strong></h3><p>@Componentæ˜¯ä¸€ä¸ªé€šç”¨çš„Beanæ³¨è§£ï¼Œé€šå¸¸ç”¨äºæ³¨è§£ä¸šåŠ¡ä¸­åŠŸèƒ½ä¸æ¸…æ¥šçš„Bean</p>
<p>@Serviceã€@Controllerã€@Repositoryåˆ™æ˜¯æ ¹æ®ä¸åŒåœºæ™¯æ‰€é‡‡å–çš„ç‰¹å®šæ³¨è§£ï¼Œåœ¨Springçš„ä¸‰å±‚æ¶æ„ä¸­ï¼Œ@Serviceå¯¹åº”ä¸šåŠ¡å±‚ã€@Controllerå¯¹åº”æ§åˆ¶å±‚ã€@Repositoryå¯¹åº”æŒä¹…å±‚</p>
<p>ä»¥ä¸Šå››ä¸ªæ³¨è§£èƒ½å¤Ÿè‡ªåŠ¨è£…é…æŸä¸ªç±»ï¼Œç›¸å½“äºåœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨é…ç½®beanï¼Œé»˜è®¤çš„idä¸ºç±»åé¦–å­—æ¯å°å†™</p>
<p>@Componentçš„ç±»ä¸­å±æ€§ä¹Ÿä¼šè¢«è‡ªåŠ¨è£…é…ï¼ˆæŒ‰æ„é€ å™¨typeè‡ªåŠ¨è£…é…ï¼‰</p>
<p><strong><em>æ³¨ï¼šå®ç°è‡ªåŠ¨é…ç½®å‰ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­åŠ ä¸Šï¼š</em></strong></p>
<pre><code>    &lt;context:component-scan base-package=&quot;packageName&quot;/&gt;</code></pre>
<p>å¦åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°beanidçš„å¼‚å¸¸</p>
<p>è¿˜æ˜¯ä¸Šé¢çš„Personç±»ï¼Œåˆ é™¤Personç±»åœ¨xmlä¸­çš„é…ç½®</p>
<pre><code>@Component
public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;

//    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
//        this.personalInfo = personalInfo;
//    &#125;
//
//    public void setAddressInfo(AddressInfo addressInfo) &#123;
//        this.addressInfo = addressInfo;
//    &#125;


    public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;
        this.personalInfo = personalInfo;
        this.addressInfo = addressInfo;
    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>å®ŒæˆPersonçš„è‡ªåŠ¨é…ç½®ï¼Œä¸”Personä¸­çš„å±æ€§ä¹Ÿè‡ªåŠ¨è£…é…</p>
<hr>
<h3 id="Required"><a href="#Required" class="headerlink" title="@Required"></a>@Required</h3><p>@Requiredä½œç”¨äºå±æ€§çš„setteræ–¹æ³•ï¼Œè¡¨æ˜è¯¥å±æ€§å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<p>åœ¨Personç±»ä¸­æ·»åŠ å±æ€§String nameã€setterå’Œgetteræ–¹æ³•ï¼Œå¹¶æ·»åŠ @Requiredæ³¨è§£</p>
<p>è‹¥ä¸è¿›è¡Œé…ç½®ï¼Œåˆ™ä¼šæç¤ºé”™è¯¯ï¼š</p>
<p><img src="/2020/09/24/IOC/1601282519408.jpg" alt="error"></p>
<p>æ·»åŠ é…ç½®å³å¯</p>
<pre><code>&lt;property name=&quot;name&quot; value=&quot;RequiredName&quot;&gt;&lt;/property&gt;</code></pre>
<hr>
<h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>@Autowiredæ³¨è§£çš„åŠŸèƒ½æ˜¯ä¸ºå±æ€§è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œ@Autowiredå¯ä½œç”¨äºå±æ€§ã€setterã€æ„é€ æ–¹æ³•ï¼Œ@Autowiredé€šè¿‡bytypeæ–¹æ³•æŸ¥æ‰¾ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§typeç›¸åŒçš„beanè¿›è¡Œé…ç½®ï¼Œ@Autowiredä¸­é»˜è®¤ä¸ºRequired=true å³å¼ºåˆ¶ä¸Šä¸‹æ–‡å¿…é¡»è¦å­˜åœ¨ä¸å±æ€§typeç›¸åŒçš„beanï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ç”¨required=falseæ¶ˆé™¤è¿™ç§å¼ºåˆ¶æ€§</p>
<p><strong>ä½œç”¨äºå±æ€§</strong></p>
<p>å½“@Autowiredä½œç”¨äºå±æ€§æ—¶ï¼Œå¯ä»¥ä¸ç”¨åœ¨ç±»ä¸­æ·»åŠ è¯¥å±æ€§çš„setteræ–¹æ³•æˆ–æ„é€ å™¨ï¼Œä¹Ÿä¸ç”¨åœ¨è¯¥ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<p>å°†Personç±»ä¸­çš„PersonalInfoå’ŒAddressInfoéƒ½åŠ ä¸Š@Autowiredæ³¨è§£ï¼Œåˆ é™¤æ„é€ æ–¹æ³•</p>
<pre><code>@Component
public class Person &#123;
    @Autowired
    private PersonalInfo personalInfo;
    @Autowired
    private AddressInfo addressInfo;
//    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
//        this.personalInfo = personalInfo;
//    &#125;
//    public void setAddressInfo(AddressInfo addressInfo) &#123;
//        this.addressInfo = addressInfo;
//    &#125;
//    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;
//        this.personalInfo = personalInfo;
//        this.addressInfo = addressInfo;
//    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæŠŠxmlæ–‡ä»¶ä¸­PersonalInfoçš„beané…ç½®åˆ é™¤ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ å› ä¸ºä½¿ç”¨@Autowiredæ³¨è§£çš„å±æ€§ï¼Œé»˜è®¤xmlæ–‡ä»¶ä¸­å¿…é¡»å­˜åœ¨ä¸å±æ€§ç›¸åŒç±»å‹çš„bean</p>
<p>å°†PersonalInfoçš„@Autowiredæ³¨è§£æ”¹ä¸º</p>
<pre><code>@Autowired(required = false)
private PersonalInfo personalInfo;</code></pre>
<p>æ­¤æ—¶é€šè¿‡ç¼–è¯‘ï¼Œä¸è¿‡ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºä¸Šä¸‹æ–‡æ— æ³•åŒ¹é…PersonalInfoè¿™ä¸€å±æ€§ï¼Œå°†Personç±»ä¸­çš„showå‡½æ•°æ³¨é‡ŠPersonalInfoçš„è¾“å‡º</p>
<pre><code>    public void show()&#123;
//        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>GuangDong GuangZhou</p>
<hr>
<p><strong>ä½œç”¨äºsetteræ–¹æ³•</strong></p>
<p>@Autowiredä½œç”¨äºsetteræ–¹æ³•æ—¶ï¼Œä¸éœ€è¦åœ¨ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<pre><code>public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;
    @Autowired
    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;
    @Autowired
    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;
//    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;
//        this.personalInfo = personalInfo;
//        this.addressInfo = addressInfo;
//    &#125;

    public void show()&#123;
        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœç›¸åŒï¼Œç›¸å½“äºbeanä¸­é…ç½®autowire=bytype</p>
<hr>
<p><strong>ä½œç”¨äºæ„é€ æ–¹æ³•</strong></p>
<p>ä¸ä½œç”¨äºsetteræ–¹æ³•åŒç†</p>
<hr>
<p><strong>é›†åˆçš„æ³¨å…¥</strong></p>
<p>Personç±»ï¼š</p>
<pre><code>@Component
public class Person &#123;
    private PersonalInfo personalInfo;
    private AddressInfo addressInfo;
    private List&lt;PersonalInfo&gt; list;

    @Autowired
    public void setPersonalInfo(PersonalInfo personalInfo) &#123;
        this.personalInfo = personalInfo;
    &#125;
    @Autowired
    public void setAddressInfo(AddressInfo addressInfo) &#123;
        this.addressInfo = addressInfo;
    &#125;

    @Autowired
    public void setList(List&lt;PersonalInfo&gt; list) &#123;
        this.list = list;
    &#125;

    public void show()&#123;
        list.forEach(v-&gt; System.out.println(v.getName()+&quot; &quot;+v.getAge()));
    &#125;
&#125;    </code></pre>
<p>å¹¶åœ¨xmlæ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ªPersonalInfoçš„Bean</p>
<pre><code>&lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;personalInfo1&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zlll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;211&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;</code></pre>
<p>æµ‹è¯•è¾“å‡º</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        person.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>è¯´æ˜é›†åˆçš„è‡ªåŠ¨è£…é…ä¸­ï¼Œä¼šè‡ªåŠ¨æœç´¢ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§ç±»å‹ç›¸åŒçš„beanï¼Œå¹¶æŠŠè¿™äº›æ‰€æœ‰çš„beanåŒæ—¶æ³¨å…¥é›†åˆä¸­</p>
<p>å°†å±æ€§æ”¹ä¸ºmapæ˜ å°„      private Map&lt;String,PersonalInfo&gt; map;</p>
<pre><code>    public void show()&#123;
//        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());
//        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());
//        System.out.println(list);
        map.forEach((k,v)-&gt; System.out.println(map.get(k).getName()+&quot; &quot;+map.get(k).getAge()));
        System.out.println();
        map.forEach((k,v)-&gt; System.out.println(k+&quot; &quot; +v));
    &#125;</code></pre>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>personalInfo com.newdemo.PersonalInfo@1eb5174b<br>personalInfo1 com.newdemo.PersonalInfo@67080771</p>
<p>è¯´æ˜æ˜¯å°†beançš„idä½œä¸ºé”®ï¼Œå¯¹è±¡ä½œä¸ºå€¼</p>
<hr>
<h3 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a><strong>@Qualifier</strong></h3><p>å½“xmlæ–‡ä»¶ä¸­å­˜åœ¨å¤šä¸ªtypeç›¸åŒç±»å‹çš„beanæ—¶ï¼Œè‹¥ä½¿ç”¨è‡ªåŠ¨é…ç½®ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥åŒ¹é…å“ªä¸ªåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç”¨@Qualifieræ¥åˆ¶å®šåŒ¹é…å“ªä¸ªbean</p>
<pre><code>    &lt;bean id=&quot;personalInfo&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;personalInfo_Id&quot; class=&quot;com.newdemo.PersonalInfo&quot;&gt;
    &lt;property name=&quot;name&quot; value=&quot;zllll&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;2111&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

   @Autowired
@Qualifier(&quot;personalInfo_Id&quot;)
public void setPersonalInfo(PersonalInfo personalInfo) &#123;
    this.personalInfo = personalInfo;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zllll 2111</p>
<hr>
<h3 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a><strong>@Bean</strong></h3><p>ç”¨@Beanæ³¨è§£çš„æ–¹æ³•ä¼šé…ç½®ã€å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”±IOCå®¹å™¨ç®¡ç†ï¼Œbean_idä¸ºæ–¹æ³•åï¼Œç›¸å½“äº <bean id="method-name" class="..."></bean></p>
<p>æ–°å»ºä¸€ä¸ªCharacterInfoç±»</p>
<pre><code>public class CharacterInfo &#123;
    public void show()&#123;
        System.out.println(&quot;Character&#39;show&quot;);
    &#125;
&#125;</code></pre>
<p>åœ¨Personç±»ä¸­æ·»åŠ CharacterInfoç±»å±æ€§ï¼Œå¹¶æ·»åŠ getCharacterInfo()æ–¹æ³•</p>
<pre><code>public CharacterInfo getCharacterInfo()&#123;
    return new CharacterInfo();
&#125;</code></pre>
<p>åœ¨testClassä¸­æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        CharacterInfo characterInfo = (CharacterInfo)applicationContext.getBean(&quot;getCharacterInfo&quot;);
        characterInfo.show();
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>Characterâ€™show</p>
<hr>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a><strong>@Configuration</strong></h3><p>@Configurationç”¨äºå®šä¹‰é…ç½®ç±»ï¼Œç›¸å½“äº<beans>â€¦</beans>ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¢«@Beanæ³¨è§£çš„æ–¹æ³•</p>
<p>å°†Personç±»çš„æ³¨è§£æ”¹ä¸º@Configurationï¼Œå¯å¾—åˆ°ç›¸åŒçš„ç»“æœ</p>
<ul>
<li>@Scope</li>
</ul>
<p>@Scopeç”¨æ¥å®šä¹‰beançš„ä½œç”¨åŸŸï¼Œé»˜è®¤å•ä¾‹ï¼Œç›¸å½“äº<bean id class scope="singleton"></bean></p>
<p>å°†@Scopeä½œç”¨åœ¨Personç±»ä¸Š</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;person&quot;);
        Person person1 = (Person)applicationContext.getBean(&quot;person&quot;);
        System.out.println(person);
        System.out.println(person1);
    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6<br>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6</p>
<hr>
<h2 id="è‡ªå®šä¹‰å‘½åç­–ç•¥"><a href="#è‡ªå®šä¹‰å‘½åç­–ç•¥" class="headerlink" title="è‡ªå®šä¹‰å‘½åç­–ç•¥"></a><strong>è‡ªå®šä¹‰å‘½åç­–ç•¥</strong></h2><p>åœ¨Springä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é€šè¿‡å®ç°BeanNameGeneratoræ¥å£ï¼Œç„¶ååœ¨xmlæ–‡ä»¶ä¸­é…ç½®è‡ªå®šä¹‰å‘½åç±»ï¼Œæ¥å®Œæˆå¯¹beançš„è‡ªå®šä¹‰å‘½åç­–ç•¥    </p>
<p>å®šä¹‰MyBeanNameGeneratorç±»ï¼Œå®ç°BeanNameGeneratoræ¥å£</p>
<pre><code>public class MyBeanNameGenerator implements BeanNameGenerator &#123;
    @Override
    public String generateBeanName(BeanDefinition beanDefinition, BeanDefinitionRegistry beanDefinitionRegistry) &#123;
        return beanDefinition.getBeanClassName()+&quot;Id&quot;;
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•</p>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        Person person = (Person)applicationContext.getBean(&quot;com.newdemo.PersonId&quot;);
        person.show();

    &#125;
&#125;</code></pre>
<p>è¾“å‡º</p>
<p>zllll 2111</p>
]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>AOPçš„APIå®ç°åŠSpringAOPå®ç°åŸç†</title>
    <url>/2020/10/02/AOP2/</url>
    <content><![CDATA[<h1 id="AOPçš„APIå®ç°"><a href="#AOPçš„APIå®ç°" class="headerlink" title="AOPçš„APIå®ç°"></a>AOPçš„APIå®ç°</h1><p>åŸºäºæ¥å£çš„aopå®ç°ä¸€èˆ¬ä¸ºä¸€ä¸‹æ­¥éª¤ï¼š</p>
<!-- ## åŸºäºåŠ¨æ€ä»£ç†çš„AOPå®ä¾‹ -->
<p>1.å®šä¹‰è¢«ä»£ç†è€…ï¼ˆè¢«ä»£ç†çš„ç±»ï¼‰</p>
<p>2.å®šä¹‰å¢å¼ºï¼ˆåˆ‡ç‚¹å‡ ç§æ‰§è¡ŒçŠ¶æ€ä¸­è¦åšçš„åŠ¨ä½œï¼‰</p>
<p>3.å®šä¹‰åˆ‡å…¥ç‚¹ï¼ˆç»™å®šè§„åˆ™ ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€AspectJè¡¨è¾¾å¼ï¼‰ï¼Œæ‰¾å‡ºåˆ‡å…¥ç‚¹ä½ç½®ï¼‰</p>
<p>4.å®šä¹‰åˆ‡é¢ï¼ˆå“ªäº›åˆ‡å…¥ç‚¹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦åšå“ªäº›åŠ¨ä½œ </p>
<p>ä¸ä¸šåŠ¡æ¨¡å—æ— å…³ï¼Œä½†æ˜¯å´ä¸ºè¢«æœ‰æ¨¡å—æ‰€å…±åŒä½¿ç”¨çš„é€»è¾‘å—</p>
<p>5.è®¾ç½®ä»£ç† ï¼šåŠ¨æ€ä»£ç†ï¼ˆä»£ç†æ¥å£ï¼‰ã€CGLIBä»£ç†ï¼ˆä»£ç†å…·ä½“ç±»ï¼‰<br>    é…ç½®è¢«ä»£ç†çš„å¯¹è±¡<br>    é…ç½®åˆ‡é¢<br>    é…ç½®è¢«ä»£ç†çš„æ¥å£</p>
<h2 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h2><p><img src="/2020/10/02/AOP2/pointcut.png" alt="Poingcutéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯JdkRegexpMethodPointcutï¼Œæ ¹æ®ä¸€ç»„è¡¨è¾¾å¼æ¥åŒ¹é…åˆ‡å…¥ç‚¹</p>
<h2 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h2><p><img src="/2020/10/02/AOP2/advice.png" alt="Adviceéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>éœ€è¦ä¸ºè‡ªå·±å®šä¹‰çš„å¢å¼ºå®ç°è¿™å‡ ç§æ¥å£</p>
<h2 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h2><p>åœ¨åŸºäºAPIå®ç°çš„AOPä¸­ï¼Œç”¨Advisorè¡¨ç¤ºAspect</p>
<p><img src="/2020/10/02/AOP2/Advisor.png" alt="Advisoréƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯PointcutAdvisoræ¥å£çš„DefaultPointcutAdvisorå®ç°ç±»ï¼Œå®ƒå¯ä»¥é€šè¿‡ä»»æ„Pointcutå’ŒAdviceå®šä¹‰ä¸€ä¸ªåˆ‡é¢</p>
<h2 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h2><p>åœ¨Spring AOPä¸­ï¼Œæ ¹æ®ä¸€æ¬¡åˆ›å»ºä»£ç†çš„ä¸ªæ•°ï¼Œå¯ä»¥åˆ†ä¸ºåˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨å’Œåˆ›å»ºå¤šä¸ªä»£ç†çš„ç»‡å…¥å™¨ï¼ˆå³è‡ªåŠ¨ä»£ç†ï¼‰ã€‚</p>
<p>Spring AOPä¸­åˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨çš„ç±»æœ‰ï¼š</p>
<ul>
<li>ProxyFactory</li>
<li>ProxyFactoryBean</li>
<li>AspectJProxyFactory</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="singleProxy"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringAOPä¼šä½¿ç”¨åŠ¨æ€ä»£ç†åŸºäºæ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå½“å‡ºç°ä¸‹åˆ—æƒ…å†µä¼šä½¿ç”¨CGLIBåŸºäºç±»ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>
<ul>
<li>ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£</li>
<li>ProxyFactoryçš„proxyTargetClasså±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
<li>ProxyFactoryçš„optimizeå±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
</ul>
<p>å¸¸ç”¨çš„è‡ªåŠ¨ä»£ç†ç±»ï¼š</p>
<ul>
<li>BeanNameAutoProxyCreator</li>
<li>DefaultAdvisorAutoProxyCreator</li>
<li>AnnotationAwareAspectJAutoProxyCreator</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="autoProxy"></p>
<pre><code>public interface Service &#123;
    public void service();
&#125;


public class ServiceClass implements Service&#123;
    public void service()&#123;
        System.out.println(&quot;service&quot;);
    &#125;
&#125;


public class MyAspect implements MethodBeforeAdvice, AfterReturningAdvice &#123;
    @Override
//    methodæ˜¯è¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œobjectsæ˜¯æ–¹æ³•å‚æ•°ï¼Œoæ˜¯è¢«è°ƒç”¨æ–¹æ³•æ‰€å±çš„å¯¹è±¡
    public void before(Method method, Object[] objects, Object o) throws Throwable &#123;
        System.out.println(method.getName()+&quot; &quot;+&quot;service&quot;);
        System.out.println(Arrays.toString(objects));
        System.out.println(o.getClass().getName());
        System.out.println(&quot;--------&quot;);
        System.out.println(&quot;before&quot;);
        System.out.println(&quot;--------&quot;);
    &#125;

    //oæ˜¯è¿”å›å€¼
    @Override
    public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable &#123;
        System.out.println(&quot;------&quot;);
        System.out.println(&quot;after&quot; + o);
        System.out.println(&quot;------&quot;);
    &#125;

&#125;

public class TestClass &#123;
    public static void main(String[] args) &#123;
        Service service = (Service)new ClassPathXmlApplicationContext(&quot;ApiContext.xml&quot;).getBean(&quot;proxy&quot;);
        service.service();

    &#125;
&#125;</code></pre>
<p>xmlæ–‡ä»¶ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;
    &lt;bean id=&quot;myAspect&quot; class=&quot;APIAOP.MyAspect&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;serviceClass&quot; class=&quot;APIAOP.ServiceClass&quot;&gt;&lt;/bean&gt;
    &lt;bean id=&quot;pointcut&quot; class=&quot;org.springframework.aop.support.JdkRegexpMethodPointcut&quot;&gt;
        &lt;property name=&quot;pattern&quot; value=&quot;.*service&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;aspect&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;
        &lt;property name=&quot;pointcut&quot; ref=&quot;pointcut&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;advice&quot; ref=&quot;myAspect&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;proxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
        &lt;property name=&quot;target&quot; ref=&quot;serviceClass&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;interceptorNames&quot; value=&quot;myAspect&quot;/&gt;
        &lt;property name=&quot;proxyInterfaces&quot; value=&quot;APIAOP.Service&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
<h1 id="Springä¸­çš„AOPçš„å®ç°åŸç†"><a href="#Springä¸­çš„AOPçš„å®ç°åŸç†" class="headerlink" title="Springä¸­çš„AOPçš„å®ç°åŸç†"></a>Springä¸­çš„AOPçš„å®ç°åŸç†</h1><ul>
<li>JDKåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†é€šè¿‡â€œåå°„â€æ¥æ¥æ”¶è¢«ä»£ç†çš„ç±»ï¼Œå¹¶ä¸”è¦æ±‚è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ã€‚JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»ã€‚å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šé€‰æ‹©ä½¿ç”¨CGLIBæ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚</p>
<ul>
<li>CglibåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†å¿…é¡»è¦æœ‰æ¥å£, ä½†å¦‚æœè¦ä»£ç†ä¸€ä¸ªæ²¡æœ‰æ¥å£çš„ç±»è¯¥æ€ä¹ˆåŠå‘¢? CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ã€‚æ³¨æ„ï¼ŒCGLIBæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸ºfinalï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨CGLIBåšåŠ¨æ€ä»£ç†çš„ã€‚CGLIBåŠ¨æ€ä»£ç†çš„åŸç†æ˜¯ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»,è¿™ä¸ªå­ç±»å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡æ˜¯è¢«å¢å¼ºè¿‡çš„ã€‚</p>
<h2 id="JDKçš„åŠ¨æ€ä»£ç†"><a href="#JDKçš„åŠ¨æ€ä»£ç†" class="headerlink" title="JDKçš„åŠ¨æ€ä»£ç†"></a>JDKçš„åŠ¨æ€ä»£ç†</h2><p>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªç±»ï¼ŒJDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»</p>
<h3 id="Proxyç±»"><a href="#Proxyç±»" class="headerlink" title="Proxyç±»"></a>Proxyç±»</h3><p>Proxyæ˜¯ä¸€ä¸ªä»£ç†ç±»ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªnewProxyInstanceæ–¹æ³•</p>
<pre><code>public static Object newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h)</code></pre>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä»£ç†å®ä¾‹ï¼Œå…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>ClassLoader loaderä¸ºç±»åŠ è½½å™¨ï¼ŒåŠ è½½ç±»çš„å­—èŠ‚ç </p>
</li>
<li><p>Class&lt;?&gt;[] interfacesæŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡å¿…é¡»å®ç°çš„æ¥å£ï¼ˆå› ä¸ºè¢«ä»£ç†å¯¹è±¡ä¸ä»£ç†å¯¹è±¡åº”å®ç°ç›¸åŒçš„æ¥å£ï¼‰</p>
</li>
<li><p>InvocationHandler h </p>
</li>
</ul>
<h3 id="InvocationHandleræ¥å£"><a href="#InvocationHandleræ¥å£" class="headerlink" title="InvocationHandleræ¥å£"></a>InvocationHandleræ¥å£</h3><p>InvocationHandleræ¥å£ï¼šä»£ç†ç±»çš„æ–¹æ³•è¢«å¤–ç•Œè°ƒç”¨ä¹‹åï¼Œå°†æ–¹æ³•äº¤ç»™InvocationHandlerï¼Œç”±å®ƒæ¥å®ç°å¯¹æ–¹æ³•çš„å¢å¼º</p>
<p>InvocationHandleræ¥å£åªæœ‰ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œç”±invokeæ–¹æ³•å®ç°å¯¹è¢«ä»£ç†æ–¹æ³•çš„å¢å¼º</p>
<pre><code>public Object invoke(Object proxy,Method method,Object[] args)</code></pre>
<p>å…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>Object proxyï¼šä»£ç†å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>Method methodï¼šå¤–ç•Œè°ƒç”¨çš„æ–¹æ³•</p>
</li>
<li><p>Object[] argsï¼šæ–¹æ³•çš„å‚æ•°</p>
</li>
</ul>
<p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨invokeæ–¹æ³•ä¸­æ²¡æœ‰æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„è¢«ä»£ç†å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬åœ¨å®ç°InvocationHandleræ¥å£çš„ä»£ç†ç±»ä¸­ï¼Œä¸€å®šè¦å£°æ˜ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å±æ€§</p>
<p>å®šä¹‰ä¸€ä¸ªUseræ¥å£ï¼š</p>
<pre><code>public interface User &#123;
    void use();
&#125;</code></pre>
<p>å®šä¹‰æ¥å£çš„å®ç°ç±»UserImpl</p>
<pre><code>public class UserImpl implements User&#123;
    @Override
    public void use() &#123;
        System.out.println(&quot;user using&quot;);
    &#125;
&#125;</code></pre>
<p>å®šä¹‰åŠ¨æ€ä»£ç†ç±»MyJdkAspectï¼š</p>
<pre><code>public class MyJdkAspect implements InvocationHandler &#123;
//è¢«ä»£ç†å¯¹è±¡
private Object target;

public MyJdkAspect()&#123;&#125;

public MyJdkAspect(Object target)&#123;
    this.target = target;
&#125;

@Override
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
        Object object = null;
        System.out.println(&quot;before&quot;);
    //        é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
        object = method.invoke(target,args);
        System.out.println(&quot;after&quot;);
        return object;
    &#125;
&#125;</code></pre>
<p>æµ‹è¯•ç±»ï¼š</p>
<pre><code>public class TestClass &#123;
public static void main(String[] args) &#123;
    User user = new UserImpl();
    MyJdkAspect myJdkAspect = new MyJdkAspect(user);
//        åˆ›å»ºä»£ç†å®ä¾‹
        User proxy = (User) Proxy.newProxyInstance(user.getClass().getClassLoader(),user.getClass().getInterfaces(),myJdkAspect);
//        ä»£ç†å¯¹è±¡proxyè°ƒç”¨useæ–¹æ³•æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨invokeæ–¹æ³•ï¼Œå®ç°å¢å¼º
        proxy.use();
    &#125;
&#125;</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>user using<br>after</p>
<p><a href="https://blog.csdn.net/jiankunking/article/details/52143504?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160166897019195240408337%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=160166897019195240408337&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28-9-52143504.pc_first_rank_v2_rank_v28&utm_term=aop+jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86&spm=1018.2118.3001.4187#%E4%BA%8C%E3%80%81Java%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%B1%BB%C2%A0">å‚è€ƒé“¾æ¥</a></p>
<h2 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="headerlink" title="cglibåŠ¨æ€ä»£ç†"></a>cglibåŠ¨æ€ä»£ç†</h2><p>ä½¿ç”¨cglibåŠ¨æ€ä»£ç†éœ€è¦å®ç°MethodInterceptoræ¥å£</p>
<p>MethodInterceptoræ¥å£ä¸­æœ‰ä¸€ä¸ªinterceptæ–¹æ³•</p>
<pre><code>public Object intercept(Object object, java.lang.reflect.Method method, Object[] args, MethodProxy proxy) throws Throwable;</code></pre>
<p>Object object æ˜¯ä»£ç†å¯¹è±¡</p>
<p>Method method æ˜¯æ‹¦æˆªæ–¹æ³•</p>
<p>Object[] args æ˜¯æ–¹æ³•å‚æ•°</p>
<pre><code>public class NewUserImpl &#123;
    public void use()&#123;
        System.out.println(&quot;user using&quot;);
    &#125;
&#125;

public class MyCglibProxy implements MethodInterceptor &#123;
    //è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡
    private Object target;
//  ç”Ÿæˆä»£ç†ç±»
    public Object creatProxyInstance(Object target)&#123;
        this.target = target;
        Enhancer enhancer = new Enhancer();
        enhancer.setSuperclass(this.target.getClass());
        enhancer.setCallback(this);
        return enhancer.create();
    &#125;

    //é‡å†™æ‹¦æˆªæ–¹æ³•
    @Override
    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123;
        Object object = null;
        System.out.println(&quot;before&quot;);
        object = methodProxy.invoke(target,objects);
        System.out.println(&quot;after&quot;);
        return object;
    &#125;
&#125;


public class TestClass &#123;
    public static void main(String[] args) &#123;
        NewUserImpl newUser = new NewUserImpl();
        NewUserImpl user = (NewUserImpl) new MyCglibProxy().creatProxyInstance(newUser);
        user.use();
    &#125;
&#125;</code></pre>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
</search>

<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AOPçš„APIå®ç°åŠSpringAOPå®ç°åŸç†</title>
    <url>/2020/10/02/AOP2/</url>
    <content><![CDATA[<h1 id="AOPçš„APIå®ç°"><a href="#AOPçš„APIå®ç°" class="headerlink" title="AOPçš„APIå®ç°"></a>AOPçš„APIå®ç°</h1><p>åŸºäºæ¥å£çš„aopå®ç°ä¸€èˆ¬ä¸ºä¸€ä¸‹æ­¥éª¤ï¼š</p>
<!-- ## åŸºäºåŠ¨æ€ä»£ç†çš„AOPå®ä¾‹ -->
<p>1.å®šä¹‰è¢«ä»£ç†è€…ï¼ˆè¢«ä»£ç†çš„ç±»ï¼‰</p>
<p>2.å®šä¹‰å¢å¼ºï¼ˆåˆ‡ç‚¹å‡ ç§æ‰§è¡ŒçŠ¶æ€ä¸­è¦åšçš„åŠ¨ä½œï¼‰</p>
<p>3.å®šä¹‰åˆ‡å…¥ç‚¹ï¼ˆç»™å®šè§„åˆ™ ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€AspectJè¡¨è¾¾å¼ï¼‰ï¼Œæ‰¾å‡ºåˆ‡å…¥ç‚¹ä½ç½®ï¼‰</p>
<p>4.å®šä¹‰åˆ‡é¢ï¼ˆå“ªäº›åˆ‡å…¥ç‚¹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦åšå“ªäº›åŠ¨ä½œ </p>
<p>ä¸ä¸šåŠ¡æ¨¡å—æ— å…³ï¼Œä½†æ˜¯å´ä¸ºè¢«æœ‰æ¨¡å—æ‰€å…±åŒä½¿ç”¨çš„é€»è¾‘å—</p>
<p>5.è®¾ç½®ä»£ç† ï¼šåŠ¨æ€ä»£ç†ï¼ˆä»£ç†æ¥å£ï¼‰ã€CGLIBä»£ç†ï¼ˆä»£ç†å…·ä½“ç±»ï¼‰<br>    é…ç½®è¢«ä»£ç†çš„å¯¹è±¡<br>    é…ç½®åˆ‡é¢<br>    é…ç½®è¢«ä»£ç†çš„æ¥å£</p>
<h2 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h2><p><img src="/2020/10/02/AOP2/pointcut.png" alt="Poingcutéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯JdkRegexpMethodPointcutï¼Œæ ¹æ®ä¸€ç»„è¡¨è¾¾å¼æ¥åŒ¹é…åˆ‡å…¥ç‚¹</p>
<h2 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h2><p><img src="/2020/10/02/AOP2/advice.png" alt="Adviceéƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>éœ€è¦ä¸ºè‡ªå·±å®šä¹‰çš„å¢å¼ºå®ç°è¿™å‡ ç§æ¥å£</p>
<h2 id="Aspect"><a href="#Aspect" class="headerlink" title="Aspect"></a>Aspect</h2><p>åœ¨åŸºäºAPIå®ç°çš„AOPä¸­ï¼Œç”¨Advisorè¡¨ç¤ºAspect</p>
<p><img src="/2020/10/02/AOP2/Advisor.png" alt="Advisoréƒ¨åˆ†ç»§æ‰¿å›¾"></p>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯PointcutAdvisoræ¥å£çš„DefaultPointcutAdvisorå®ç°ç±»ï¼Œå®ƒå¯ä»¥é€šè¿‡ä»»æ„Pointcutå’ŒAdviceå®šä¹‰ä¸€ä¸ªåˆ‡é¢</p>
<h2 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h2><p>åœ¨Spring AOPä¸­ï¼Œæ ¹æ®ä¸€æ¬¡åˆ›å»ºä»£ç†çš„ä¸ªæ•°ï¼Œå¯ä»¥åˆ†ä¸ºåˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨å’Œåˆ›å»ºå¤šä¸ªä»£ç†çš„ç»‡å…¥å™¨ï¼ˆå³è‡ªåŠ¨ä»£ç†ï¼‰ã€‚</p>
<p>Spring AOPä¸­åˆ›å»ºå•ä¸ªä»£ç†çš„ç»‡å…¥å™¨çš„ç±»æœ‰ï¼š</p>
<ul>
<li>ProxyFactory</li>
<li>ProxyFactoryBean</li>
<li>AspectJProxyFactory</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="singleProxy"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringAOPä¼šä½¿ç”¨åŠ¨æ€ä»£ç†åŸºäºæ¥å£ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå½“å‡ºç°ä¸‹åˆ—æƒ…å†µä¼šä½¿ç”¨CGLIBåŸºäºç±»ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>
<ul>
<li>ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£</li>
<li>ProxyFactoryçš„proxyTargetClasså±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
<li>ProxyFactoryçš„optimizeå±æ€§å€¼è¢«è®¾ç½®ä¸ºtrue</li>
</ul>
<p>å¸¸ç”¨çš„è‡ªåŠ¨ä»£ç†ç±»ï¼š</p>
<ul>
<li>BeanNameAutoProxyCreator</li>
<li>DefaultAdvisorAutoProxyCreator</li>
<li>AnnotationAwareAspectJAutoProxyCreator</li>
</ul>
<p><img src="/2020/10/02/AOP2/singleproxy.png" alt="autoProxy"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface Service &#123;<br>   	public void service();<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class ServiceClass implements Service&#123;<br>    public void service()&#123;<br>        System.out.println(&quot;service&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyAspect implements MethodBeforeAdvice, AfterReturningAdvice &#123;<br>    @Override<br>&#x2F;&#x2F;    methodæ˜¯è¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œobjectsæ˜¯æ–¹æ³•å‚æ•°ï¼Œoæ˜¯è¢«è°ƒç”¨æ–¹æ³•æ‰€å±çš„å¯¹è±¡<br>    public void before(Method method, Object[] objects, Object o) throws Throwable &#123;<br>        System.out.println(method.getName()+&quot; &quot;+&quot;service&quot;);<br>        System.out.println(Arrays.toString(objects));<br>        System.out.println(o.getClass().getName());<br>        System.out.println(&quot;--------&quot;);<br>        System.out.println(&quot;before&quot;);<br>        System.out.println(&quot;--------&quot;);<br>    &#125;<br><br>    &#x2F;&#x2F;oæ˜¯è¿”å›å€¼<br>    @Override<br>    public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable &#123;<br>        System.out.println(&quot;------&quot;);<br>        System.out.println(&quot;after&quot; + o);<br>        System.out.println(&quot;------&quot;);<br>    &#125;<br><br>&#125;<br><br>public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        Service service &#x3D; (Service)new ClassPathXmlApplicationContext(&quot;ApiContext.xml&quot;).getBean(&quot;proxy&quot;);<br>        service.service();<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>xmlæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br>    &lt;bean id&#x3D;&quot;myAspect&quot; class&#x3D;&quot;APIAOP.MyAspect&quot;&gt;&lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;serviceClass&quot; class&#x3D;&quot;APIAOP.ServiceClass&quot;&gt;&lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;pointcut&quot; class&#x3D;&quot;org.springframework.aop.support.JdkRegexpMethodPointcut&quot;&gt;<br>        &lt;property name&#x3D;&quot;pattern&quot; value&#x3D;&quot;.*service&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;aspect&quot; class&#x3D;&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;<br>        &lt;property name&#x3D;&quot;pointcut&quot; ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;advice&quot; ref&#x3D;&quot;myAspect&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;proxy&quot; class&#x3D;&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;<br>        &lt;property name&#x3D;&quot;target&quot; ref&#x3D;&quot;serviceClass&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;interceptorNames&quot; value&#x3D;&quot;myAspect&quot;&#x2F;&gt;<br>        &lt;property name&#x3D;&quot;proxyInterfaces&quot; value&#x3D;&quot;APIAOP.Service&quot;&#x2F;&gt;<br>    &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>

<h1 id="Springä¸­çš„AOPçš„å®ç°åŸç†"><a href="#Springä¸­çš„AOPçš„å®ç°åŸç†" class="headerlink" title="Springä¸­çš„AOPçš„å®ç°åŸç†"></a>Springä¸­çš„AOPçš„å®ç°åŸç†</h1><ul>
<li>JDKåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†é€šè¿‡â€œåå°„â€æ¥æ¥æ”¶è¢«ä»£ç†çš„ç±»ï¼Œå¹¶ä¸”è¦æ±‚è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ã€‚JDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»ã€‚å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šé€‰æ‹©ä½¿ç”¨CGLIBæ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚</p>
<ul>
<li>CglibåŠ¨æ€ä»£ç†</li>
</ul>
<p>JDKåŠ¨æ€ä»£ç†å¿…é¡»è¦æœ‰æ¥å£, ä½†å¦‚æœè¦ä»£ç†ä¸€ä¸ªæ²¡æœ‰æ¥å£çš„ç±»è¯¥æ€ä¹ˆåŠå‘¢? CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ã€‚æ³¨æ„ï¼ŒCGLIBæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸ºfinalï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨CGLIBåšåŠ¨æ€ä»£ç†çš„ã€‚CGLIBåŠ¨æ€ä»£ç†çš„åŸç†æ˜¯ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»,è¿™ä¸ªå­ç±»å¯¹è±¡å°±æ˜¯ä»£ç†å¯¹è±¡, ä»£ç†å¯¹è±¡æ˜¯è¢«å¢å¼ºè¿‡çš„ã€‚</p>
<h2 id="JDKçš„åŠ¨æ€ä»£ç†"><a href="#JDKçš„åŠ¨æ€ä»£ç†" class="headerlink" title="JDKçš„åŠ¨æ€ä»£ç†"></a>JDKçš„åŠ¨æ€ä»£ç†</h2><p>JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸€ä¸ªæ¥å£å’Œä¸€ä¸ªç±»ï¼ŒJDKåŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯InvocationHandleræ¥å£å’ŒProxyç±»</p>
<h3 id="Proxyç±»"><a href="#Proxyç±»" class="headerlink" title="Proxyç±»"></a>Proxyç±»</h3><p>Proxyæ˜¯ä¸€ä¸ªä»£ç†ç±»ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªnewProxyInstanceæ–¹æ³•</p>
<pre><code>public static Object newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h)</code></pre>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä»£ç†å®ä¾‹ï¼Œå…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>ClassLoader loaderä¸ºç±»åŠ è½½å™¨ï¼ŒåŠ è½½ç±»çš„å­—èŠ‚ç </p>
</li>
<li><p>Class&lt;?&gt;[] interfacesæŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡å¿…é¡»å®ç°çš„æ¥å£ï¼ˆå› ä¸ºè¢«ä»£ç†å¯¹è±¡ä¸ä»£ç†å¯¹è±¡åº”å®ç°ç›¸åŒçš„æ¥å£ï¼‰</p>
</li>
<li><p>InvocationHandler h </p>
</li>
</ul>
<h3 id="InvocationHandleræ¥å£"><a href="#InvocationHandleræ¥å£" class="headerlink" title="InvocationHandleræ¥å£"></a>InvocationHandleræ¥å£</h3><p>InvocationHandleræ¥å£ï¼šä»£ç†ç±»çš„æ–¹æ³•è¢«å¤–ç•Œè°ƒç”¨ä¹‹åï¼Œå°†æ–¹æ³•äº¤ç»™InvocationHandlerï¼Œç”±å®ƒæ¥å®ç°å¯¹æ–¹æ³•çš„å¢å¼º</p>
<p>InvocationHandleræ¥å£åªæœ‰ä¸€ä¸ªinvokeæ–¹æ³•ï¼Œç”±invokeæ–¹æ³•å®ç°å¯¹è¢«ä»£ç†æ–¹æ³•çš„å¢å¼º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public Object invoke(Object proxy,Method method,Object[] args)<br></code></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„å‚æ•°ï¼š</p>
<ul>
<li><p>Object proxyï¼šä»£ç†å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>Method methodï¼šå¤–ç•Œè°ƒç”¨çš„æ–¹æ³•</p>
</li>
<li><p>Object[] argsï¼šæ–¹æ³•çš„å‚æ•°</p>
</li>
</ul>
<p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨invokeæ–¹æ³•ä¸­æ²¡æœ‰æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„è¢«ä»£ç†å¯¹è±¡ï¼Œé‚£æˆ‘ä»¬åœ¨å®ç°InvocationHandleræ¥å£çš„ä»£ç†ç±»ä¸­ï¼Œä¸€å®šè¦å£°æ˜ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å±æ€§</p>
<p>å®šä¹‰ä¸€ä¸ªUseræ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface User &#123;<br>    void use();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å®šä¹‰æ¥å£çš„å®ç°ç±»UserImpl</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class UserImpl implements User&#123;<br>    @Override<br>    public void use() &#123;<br>        System.out.println(&quot;user using&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å®šä¹‰åŠ¨æ€ä»£ç†ç±»MyJdkAspectï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyJdkAspect implements InvocationHandler &#123;<br>&#x2F;&#x2F;è¢«ä»£ç†å¯¹è±¡<br>   private Object target;<br><br>   public MyJdkAspect()&#123;&#125;<br><br>   public MyJdkAspect(Object target)&#123;<br>       this.target &#x3D; target;<br>   &#125;<br><br>   @Override<br>   public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;<br>        Object object &#x3D; null;<br>        System.out.println(&quot;before&quot;);<br>	&#x2F;&#x2F;        é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•<br>        object &#x3D; method.invoke(target,args);<br>        System.out.println(&quot;after&quot;);<br>        return object;<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>   public static void main(String[] args) &#123;<br>       User user &#x3D; new UserImpl();<br>       MyJdkAspect myJdkAspect &#x3D; new MyJdkAspect(user);<br>&#x2F;&#x2F;        åˆ›å»ºä»£ç†å®ä¾‹<br>        User proxy &#x3D; (User) Proxy.newProxyInstance(user.getClass().getClassLoader(),user.getClass().getInterfaces(),myJdkAspect);<br>&#x2F;&#x2F;        ä»£ç†å¯¹è±¡proxyè°ƒç”¨useæ–¹æ³•æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨invokeæ–¹æ³•ï¼Œå®ç°å¢å¼º<br>        proxy.use();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>user using<br>after</p>
<p><a href="https://blog.csdn.net/jiankunking/article/details/52143504?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160166897019195240408337%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=160166897019195240408337&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28-9-52143504.pc_first_rank_v2_rank_v28&utm_term=aop+jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86&spm=1018.2118.3001.4187#%E4%BA%8C%E3%80%81Java%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%B1%BB%C2%A0">å‚è€ƒé“¾æ¥</a></p>
<h2 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="headerlink" title="cglibåŠ¨æ€ä»£ç†"></a>cglibåŠ¨æ€ä»£ç†</h2><p>ä½¿ç”¨cglibåŠ¨æ€ä»£ç†éœ€è¦å®ç°MethodInterceptoræ¥å£</p>
<p>MethodInterceptoræ¥å£ä¸­æœ‰ä¸€ä¸ªinterceptæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public Object intercept(Object object, java.lang.reflect.Method method, Object[] args, MethodProxy proxy) throws Throwable;<br></code></pre></td></tr></table></figure>
<p>Object object æ˜¯ä»£ç†å¯¹è±¡</p>
<p>Method method æ˜¯æ‹¦æˆªæ–¹æ³•</p>
<p>Object[] args æ˜¯æ–¹æ³•å‚æ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class NewUserImpl &#123;<br>   	public void use()&#123;<br>       	System.out.println(&quot;user using&quot;);<br>   	&#125;<br>&#125;<br><br>public class MyCglibProxy implements MethodInterceptor &#123;<br>	&#x2F;&#x2F;è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡<br>    private Object target;<br>&#x2F;&#x2F;  ç”Ÿæˆä»£ç†ç±»<br>    public Object creatProxyInstance(Object target)&#123;<br>        this.target &#x3D; target;<br>        Enhancer enhancer &#x3D; new Enhancer();<br>        enhancer.setSuperclass(this.target.getClass());<br>        enhancer.setCallback(this);<br>        return enhancer.create();<br>    &#125;<br><br>    &#x2F;&#x2F;é‡å†™æ‹¦æˆªæ–¹æ³•<br>    @Override<br>    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123;<br>        Object object &#x3D; null;<br>        System.out.println(&quot;before&quot;);<br>        object &#x3D; methodProxy.invoke(target,objects);<br>        System.out.println(&quot;after&quot;);<br>        return object;<br>    &#125;<br>&#125;<br><br><br>public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        NewUserImpl newUser &#x3D; new NewUserImpl();<br>        NewUserImpl user &#x3D; (NewUserImpl) new MyCglibProxy().creatProxyInstance(newUser);<br>        user.use();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaä¹‹Streamæµ</title>
    <url>/2020/09/22/JavaStream/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨å†™javaå®éªŒçš„è¿‡ç¨‹ä¸­ï¼Œæƒ³ç”¨Streamæµçœäº‹æ—¶ï¼Œå´å‘ç°è‡ªå·±å¯¹Streamæµæœ‰ç‚¹ç”Ÿç–äº†ï¼Œæ‰€ä»¥ç‰¹åœ°ç¿»å¼€ä»¥å‰å†™çš„Streamæµçš„demoè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åŠ æ·±å°è±¡ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Java-Streamæµ" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ"></a><strong><em>ä¸€.ä»€ä¹ˆæ˜¯Java Streamæµ</em></strong></h2><p>Streamæµæ˜¯java8 APIä¸­æ·»åŠ çš„ä¸€ä¸ªæ–°çš„æŠ½è±¡ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç±»ä¼¼SQLè¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹Javaé›†åˆè¿ç®—å’Œè¡¨è¾¾çš„æŠ½è±¡ã€‚</p>
<p>å®ƒå°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œæµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç®¡é“ä¸Šè¿›è¡Œå¯¹é›†åˆçš„å¤„ç†ï¼Œæ¯”å¦‚å¯¹é›†åˆå°±è¡Œç­›é€‰è¿‡æ»¤ã€æ’åºï¼ˆè‡ªå®šä¹‰æˆ–æ˜¯é»˜è®¤ï¼‰ã€èšåˆç­‰æ“ä½œã€‚</p>
<p>Streamæµçš„å¤„ç†ä¸­ï¼Œå…ƒç´ åœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œçš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œå¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚</p>
<blockquote>
</blockquote>
<h2 id="äºŒ-Streamæµçš„ç‰¹ç‚¹"><a href="#äºŒ-Streamæµçš„ç‰¹ç‚¹" class="headerlink" title="äºŒ.Streamæµçš„ç‰¹ç‚¹"></a><strong><em>äºŒ.Streamæµçš„ç‰¹ç‚¹</em></strong></h2><p>1.Streamæµä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå®ƒä¸ä¼šä¿å­˜æ•°æ®ï¼Œæµå¯ä»¥æ˜¯ä¸€ä¸ªæ³›å‹ã€‚</p>
<p>2.å¯ä»¥å¯¹é›†åˆã€æ•°ç»„è¿›è¡Œè¿ç»­çš„æ“ä½œã€‚</p>
<p>3.Streamæµçš„æ•°æ®æºå¯ä»¥æœ‰é›†åˆã€æ•°ç»„ç­‰ã€‚</p>
<p>4.å®ƒä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°æ®æºï¼Œå®ƒä¼šå°†æ“ä½œåçš„æ•°æ®ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p>
<p>5.Streamæ˜¯æƒ°æ€§æ±‚å€¼ï¼Œæµåœ¨ä¸­é—´å¤„ç†è¿‡ç¨‹ä¸­ï¼Œåªæ˜¯å¯¹æ“ä½œè¿›è¡Œäº†è®°å½•ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦ç­‰åˆ°æ‰§è¡Œç»ˆæ­¢æ“ä½œçš„æ—¶å€™æ‰ä¼šè¿›è¡Œå®é™…çš„è®¡ç®—ã€‚</p>
<blockquote>
</blockquote>
<h2 id="ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"><a href="#ä¸‰-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ" class="headerlink" title="ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ"></a><strong><em>ä¸‰.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Streamæµ</em></strong></h2><p>Stream API å¯ä»¥æå¤§æé«˜ç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œä¸€è¡Œä»£ç å¯¹é›†åˆè¿›è¡Œå¤šç§æ“ä½œï¼Œè®©æˆ‘ä»¬å†™å‡ºæ›´é«˜æ•ˆã€ç®€æ´ã€æœ‰æ•ˆç‡çš„ä»£ç ã€‚</p>
<blockquote>
</blockquote>
<h2 id="å››-Streamæµçš„ç”¨æ³•"><a href="#å››-Streamæµçš„ç”¨æ³•" class="headerlink" title="å››.Streamæµçš„ç”¨æ³•"></a><strong><em>å››.Streamæµçš„ç”¨æ³•</em></strong></h2><p><strong>å¦å¤–ï¼Œåœ¨ä½¿ç”¨æµçš„æ—¶å€™ï¼Œå…ˆä¸è¦é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæµï¼Œåé¢ä¼šè®²åˆ°åŸå› </strong></p>
<h3 id="1-æµçš„åˆ›å»º"><a href="#1-æµçš„åˆ›å»º" class="headerlink" title="1.æµçš„åˆ›å»º"></a><strong>1.æµçš„åˆ›å»º</strong></h3><p>å¯¹äºé›†åˆï¼Œæµçš„åˆ›å»ºé€šå¸¸ä½¿ç”¨ é›†åˆ.stream() æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();
Stream&lt;String&gt; stream = list.stream();</code></pre>
<p>å¯¹äºæ•°ç»„ï¼Œé€šå¸¸ä½¿ç”¨é›†åˆçš„å·¥å…·ç±» Arrays.stream() ã€å°†æ•°ç»„è½¬æ¢ä¸ºé›†åˆList åˆæˆ–æ˜¯Stream.of(array) æ¥åˆ›å»ºä¸€ä¸ªæµï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String[] strs &#x3D; new String[10];<br>Stream&lt;String&gt; stream &#x3D; Arrays.stream(strs);<br><br>Stream&lt;String&gt; stream &#x3D; Arrays.asList(strs).stream();<br><br>Stream&lt;String&gt; stream &#x3D; Stream.of(1,2,3,4,6);<br></code></pre></td></tr></table></figure>
<p>å°†å­—ç¬¦ä¸²åˆ†éš”æˆæµï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String newstr &#x3D; &quot;123,456,789&quot;;<br>   Pattern pattern &#x3D; Pattern.compile(&quot;,&quot;);<br>   Stream&lt;String&gt; spiltStream &#x3D; pattern.splitAsStream(newstr);<br>   splitStream.sorted.forEach(v-&gt;System.out.println(v));			&#x2F;&#x2F; è¾“å‡ºï¼š123 456 789 <br></code></pre></td></tr></table></figure>

<hr>
<h3 id="2-æµçš„ä¸­é—´æ“ä½œ"><a href="#2-æµçš„ä¸­é—´æ“ä½œ" class="headerlink" title="2.æµçš„ä¸­é—´æ“ä½œ"></a><strong>2.æµçš„ä¸­é—´æ“ä½œ</strong></h3><p>å®šä¹‰ä¸€ä¸ªæ•´å½¢æ•°ç»„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Integer[] integers &#x3D; &#123;1,23,4,5,6,7,3,3,23,6,8,93,2,4,5&#125;;<br></code></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æµçš„æ“ä½œå‡ä»¥æ­¤æ•°ç»„ä¸ºä¾‹</p>
<p><strong>forEachå¾ªç¯ï¼š</strong></p>
<p>ä½¿ç”¨forEach()æ–¹æ³•å¯ä»¥å¾ªç¯è¾“å‡ºæµ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).forEach(v-&gt;System.out.println(v)); &#x2F;&#x2F; å¾ªç¯è¾“å‡ºæ•´å½¢æ•°ç»„<br></code></pre></td></tr></table></figure>
<p><strong>ç­›é€‰ï¼š</strong></p>
<p>ä½¿ç”¨Streamæµä¸­çš„filter()æ–¹æ³•å¯ä»¥è¿‡æ»¤æŸäº›å…ƒç´ ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream&lt;Integer&gt; stream1 &#x3D; Stream.of(integers);<br>stream1.filter(v-&gt;v&gt;20).forEach(v-&gt;System.out.println(v));	&#x2F;&#x2F;23,23,93<br></code></pre></td></tr></table></figure>
<p><strong>è·å–nä¸ªå…ƒç´ ï¼š</strong></p>
<p>ä½¿ç”¨limit(n)æ–¹æ³•å¯ä»¥è·å–æµä¸­nä¸ªå…ƒç´ ï¼Œé¡ºåºä¸ºä» 0 â€“ n-1ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).limit(5).forEach(v-&gt;System.out.println(v));	&#x2F;&#x2F;1,23,4,5,6<br></code></pre></td></tr></table></figure>
<p><strong>è·³è¿‡å‰nä¸ªå…ƒç´ </strong></p>
<p>ä½¿ç”¨skip(n)æ–¹æ³•å¯ä»¥è·³è¿‡æµä¸­å‰nä¸ªå…ƒç´ ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).skip(7).forEach(v-&gt;System.out.println(v));	&#x2F;&#x2F;8,93,2,4,5<br></code></pre></td></tr></table></figure>
<p><strong>å»é™¤é‡å¤å…ƒç´ </strong></p>
<p>ä½¿ç”¨distinct()æ–¹æ³•å¯ä»¥å»é™¤æµä¸­é‡å¤å…ƒç´ ï¼ˆä½¿ç”¨hashcodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰å®ç°ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).distinct().forEach(v-&gt;System.out.println(v));	&#x2F;&#x2F;1,23,4,5,6,7,3,8,93,2<br></code></pre></td></tr></table></figure>
<p><strong>ç”Ÿæˆæ˜ å°„</strong></p>
<p>map()æ–¹æ³•æ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).filter(i-&gt;i&gt;20).distinct().map(v-&gt;v*&#x3D;2).forEach(v-&gt;System.out.println(v));		&#x2F;&#x2F;46,186<br></code></pre></td></tr></table></figure>
<p><strong>æ’åº</strong></p>
<p>sorted()æ–¹æ³•å¯ä»¥è¿›è¡Œé»˜è®¤æ’åºï¼Œæµä¸­å…ƒç´ éœ€è¦å®sç°Comparableæ¥å£</p>
<p>sorted(Comparator cmp) æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå®ç°Comparatoræ¥å£çš„å®ç°ç±»ï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰æ’åº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream.of(integers).sorted().filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v)) 		&#x2F;&#x2F; 23,23,93<br><br>Stream.of(integers).sorted(<br>		new Comparator&lt;Integer&gt;() &#123;<br>           public int compare(Integer o1, Integer o2) &#123;<br>               return o2-o1;<br>           &#125;<br>       &#125;<br>	).filter(i-&gt;i&gt;20).forEach(v-&gt;System.out.println(v))	&#x2F;&#x2F; 93,23,23<br></code></pre></td></tr></table></figure>

<p><strong>æ¶ˆè´¹æ–¹æ³•</strong></p>
<p><del>å¾…ç»­</del></p>
<hr>
<h3 id="3-æµçš„ç»ˆæ­¢æ“ä½œ"><a href="#3-æµçš„ç»ˆæ­¢æ“ä½œ" class="headerlink" title="3.æµçš„ç»ˆæ­¢æ“ä½œ"></a><strong>3.æµçš„ç»ˆæ­¢æ“ä½œ</strong></h3><p><strong>å‰é¢è¯´è¿‡ä¸è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªæµï¼Œå› ä¸ºæµçš„ç»ˆæ­¢æ“ä½œä¼šå°†æµå…³é—­ï¼Œå…³é—­æµåå°±ä¸èƒ½ç»§ç»­ä½¿ç”¨è¿™ä¸ªæµï¼Œå¦‚æœç»§ç»­ä½¿ç”¨æµåˆ™ä¼šå‡ºç°å¼‚å¸¸</strong></p>
<p>æµçš„ç»ˆæ­¢æ“ä½œæœ‰ï¼šåŒ¹é…ã€èšåˆã€æ”¶é›†</p>
<hr>
<p><strong>åŒ¹é…</strong></p>
<p>åŒ¹é…æ“ä½œæ˜¯åˆ¤æ–­å…ƒç´ åœ¨æµä¸­çš„å­˜åœ¨å…³ç³»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Stream&lt;Integer&gt; stream &#x3D; Stream.of(integers);<br>boolean bool1 &#x3D; stream.allMatch(v-&gt;v&gt;5);	&#x2F;&#x2F;false<br>boolean bool2 &#x3D; stream.allMatch(v-&gt;v&gt;10);	&#x2F;&#x2F;æ­¤æ—¶ä¼šå‡ºç°å¼‚å¸¸ï¼Œå› ä¸ºæ‰§è¡Œäº†æµçš„ç»ˆæ­¢æ“ä½œã€‚<br><br>boolean allMatch &#x3D; Stream.of(integers).allMatch(v-&gt;v&gt;5);<br>   System.out.println(allMatch);	&#x2F;&#x2F;åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ç¬¦åˆæŸç§å…³ç³»<br><br>   boolean nonMatch &#x3D; Stream.of(integers).noneMatch(v-&gt;v&gt;100);<br>   System.out.println(nonMatch);	&#x2F;&#x2F;åˆ¤æ–­æµä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸ç¬¦åˆæŸç§å…³ç³»<br><br>   boolean anyMatch &#x3D; Stream.of(integers).anyMatch(v-&gt;v&gt;90);<br>   System.out.println(anyMatch);	&#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆ<br><br>   int res &#x3D; Stream.of(integers).findFirst().get();<br>   System.out.println(res);		&#x2F;&#x2F;è¿”å›æµä¸­ç¬¬ä¸€ä¸ªå…ƒç´ <br><br>   int any &#x3D; Stream.of(integers).findAny().get();<br>   System.out.println(any);		&#x2F;&#x2F;éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ <br></code></pre></td></tr></table></figure>

<hr>
<p><strong>èšåˆ</strong></p>
<p>èšåˆæ“ä½œæœ‰ï¼šè¿”å›æµä¸­å…ƒç´ ä¸ªæ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">long count &#x3D; Stream.of(integers).count();	&#x2F;&#x2F;è¿”å›longå‹<br><br>int maxElement &#x3D; Stream.of(integers).max(Integer::compareTo).get();<br><br>int minElement &#x3D; Stream.of(integers).min(Integer::compareTo).get();<br><br></code></pre></td></tr></table></figure>
<hr>
<p><strong>æ”¶é›†</strong></p>
<p>æ”¶é›†æ“ä½œå¯ä»¥å°†æµä¸­çš„å…ƒç´ åŒ…è£…æˆä¸€ä¸ªæœ€ç»ˆç»“æœé›†ï¼šListã€mapã€setç­‰ï¼Œå¦‚ï¼š</p>
<p>å…¶ä¸­ collect æ¥å—ä¸€ä¸ªCollectorå®ä¾‹ï¼Œå¯å°†å…ƒç´ æ”¶é›†æˆå¦å¤–ä¸€ä¸ªæ•°æ®ç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Set&lt;Integer&gt; set &#x3D; Stream.of(integers).collect(Collectors.toSet());	&#x2F;&#x2F;[1, 2, 3, 4, 5, 6, 23, 7, 8, 93]<br><br>List&lt;Integer&gt; list &#x3D; Stream.of(integers).collect(Collectors.toList());		&#x2F;&#x2F;[1, 23, 4, 5, 6, 7, 3, 3, 23, 6, 8, 93, 2, 4, 5]<br><br>Map&lt;Integer,Integer&gt; map &#x3D; Stream.of(integers).distinct().filter(v-&gt;v&gt;20).collect(Collectors.toMap(Integer::intValue,Integer::intValue));	&#x2F;&#x2F;&#123;23&#x3D;23, 93&#x3D;93&#125;<br></code></pre></td></tr></table></figure>
<p>æ”¶é›†æ“ä½œä¸­æ±‚æœ€å¤§ã€æœ€å°ã€æ±‚å’Œã€å¹³å‡å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">int max &#x3D; Stream.of(integers).collect(Collectors.maxBy(Integer::compare)).get();<br><br>int min &#x3D; Stream.of(integers).collect(Collectors.minBy(Integer::compare)).get();<br><br>double average &#x3D; Stream.of(integers).collect(Collectors.averagingDouble(Integer::intValue));<br><br>int sum &#x3D; Stream.of(integers).collect(Collectors.summingInt(Integer::intValue));<br></code></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ–¹æ³•å¯ä»¥é›†ä»¥ä¸Šå››ç§æ“ä½œäºä¸€èº«ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">IntSummaryStatistics sta &#x3D; Stream.of(integers).collect(Collectors.summarizingInt(Integer::intValue));<br>int max &#x3D; sta.getMax();<br>int min &#x3D; sta.getMin();<br>double average &#x3D; sta.getAverage();<br>long count &#x3D; sta.getCount();<br>long sum &#x3D; sta.getSum();<br></code></pre></td></tr></table></figure>


<hr>
<p><strong>åˆ†ç»„</strong></p>
<p>åˆ†ç»„æ“ä½œå°†æµä¸­ç›¸åŒå…ƒç´ å½’ä¸ºä¸€ç»„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Map&lt;Integer,List&lt;Integer&gt;&gt; map &#x3D; Stream.of(integers).distinct().collect(Collectors.groupingBy(Integer::intValue));		&#x2F;&#x2F;&#123;1&#x3D;[1], 2&#x3D;[2], 3&#x3D;[3], 4&#x3D;[4], 5&#x3D;[5], 6&#x3D;[6], 7&#x3D;[7], 23&#x3D;[23], 8&#x3D;[8], 93&#x3D;[93]&#125;<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>åˆ†åŒº</strong></p>
<p>åˆ†åŒºæ“ä½œä¸­ï¼Œè®¾ç½®æ¡ä»¶å°†æµä¸­å…ƒç´ åˆ†æˆä¸¤ç»„ï¼Œæ»¡è¶³æ¡ä»¶çš„ä¸ºtrueï¼Œä¸æ»¡è¶³çš„ä¸ºfalse</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Map&lt;Boolean,List&lt;Integer&gt;&gt; newmap &#x3D; Stream.of(integers).distinct().collect(Collectors.partitioningBy(v-&gt;v&gt;20));<br><br>       System.out.println(newmap);<br><br>       System.out.println(newmap.get(true));<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨newmap.get(true)è®¿é—®æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚</p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>JavaStreamæµ</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkDownå…¥é—¨</title>
    <url>/2020/09/21/MarkDown/</url>
    <content><![CDATA[<p>MarkDown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç›®å‰è®¸å¤šç½‘ç«™éƒ½åœ¨å¹¿æ³›ä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« æˆ–æ˜¯åœ¨è®ºå›å‘è¡¨æ–‡ç« ï¼Œå½“ç„¶ä¸ªäººåšå®¢ä¸­ä¹Ÿæ”¯æŒä½¿ç”¨MarkDownæ¥æ’°å†™æ–‡ç« ï¼Œä¸ºäº†æ›´å¥½åœ°æ­å»ºä¸ªäººåšå®¢ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ä½¿ç”¨MarkDownæ¥å¸®åŠ©æˆ‘ä»¬æ¥ç¼–å†™æ ¼å¼æ›´å¥½çš„æ–‡ç« ã€‚</p>
<hr>
<h3 id="ä¸€-æ ‡é¢˜"><a href="#ä¸€-æ ‡é¢˜" class="headerlink" title="ä¸€.æ ‡é¢˜"></a><strong><em>ä¸€.æ ‡é¢˜</em></strong></h3><p>æ ‡é¢˜ä½¿ç”¨#å·æ ‡è®°</p>
<p>ä¸€ä¸ª#æ˜¯ä¸€çº§æ ‡é¢˜ï¼ŒäºŒä¸ª#æ˜¯äºŒçº§æ ‡é¢˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ”¯æŒå…­çº§æ ‡é¢˜ã€‚</p>
<h1 id="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"></a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><p><strong>æ³¨ï¼š#åé¢è¦æœ‰ç©ºæ ¼ï¼Œä¸ç„¶æ— æ³•æ­£ç¡®æ˜¾ç¤º</strong></p>
<hr>
<h3 id="äºŒ-æ®µè½æ ¼å¼"><a href="#äºŒ-æ®µè½æ ¼å¼" class="headerlink" title="äºŒ.æ®µè½æ ¼å¼"></a><strong><em>äºŒ.æ®µè½æ ¼å¼</em></strong></h3><p>MarkDownå¯ä»¥ä½¿ç”¨ä¸‰ç§å­—ä½“ï¼šæ–œä½“ã€åŠ ç²—ã€æ–œä½“åŠ ç²—ã€‚</p>
<p>æ–œä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸€ä¸ª*</p>
<p><em>è¿™æ˜¯æ–œä½“</em></p>
<p>ç²—ä½“ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸¤ä¸ª*</p>
<p><strong>è¿™æ˜¯ç²—ä½“</strong></p>
<p>æ–œä½“åŠ ç²—ï¼šåœ¨æ–‡å­—ä¸¤ç«¯å„åŠ ä¸‰ä¸ª***</p>
<p><strong><em>è¿™æ˜¯æ–œä½“åŠ ç²—</em></strong></p>
<hr>
<p>åˆ†å‰²çº¿ä½¿ç”¨ â€” æ¥å»ºç«‹åˆ†å‰²çº¿</p>
<hr>
<p>æ–‡å­—ä¸¤ç«¯ä½¿ç”¨ ï½ï½ æ¥ä½¿æ–‡å­—å˜æˆåˆ é™¤æ ¼å¼</p>
<p><del>è¿™æ˜¯æ–‡å­—çš„åˆ é™¤æ ¼å¼</del></p>
<p><strong>æ³¨ï¼šï½ï½å¿…é¡»æ˜¯è‹±æ–‡çš„ï½</strong></p>
<hr>
<p>ä¸‹åˆ’çº¿æ˜¯é€šè¿‡htmlçš„ u æ ‡ç­¾æ¥å®ç°çš„ï¼Œåœ¨æ–‡å­—ä¸¤ç«¯åŠ ä¸Šå³å¯</p>
<p><u>è¿™æ˜¯ä¸‹åˆ’çº¿</u></p>
<hr>
<h3 id="ä¸‰-åˆ—è¡¨"><a href="#ä¸‰-åˆ—è¡¨" class="headerlink" title="ä¸‰.åˆ—è¡¨"></a><strong><em>ä¸‰.åˆ—è¡¨</em></strong></h3><p>åˆ—è¡¨åˆ†ä¸º <u>æœ‰åºåˆ—è¡¨</u> å’Œ <u>æ— åºåˆ—è¡¨</u></p>
<p><strong>æ— åºåˆ—è¡¨</strong>ä½¿ç”¨ *ã€+ã€- ä½œä¸ºåˆ—è¡¨æ ‡è®°</p>
<ul>
<li>ç¬¬ä¸€é¡¹</li>
<li>ç¬¬äºŒé¡¹</li>
<li>ç¬¬ä¸‰é¡¹</li>
</ul>
<p><strong>æœ‰åºåˆ—è¡¨</strong>ä½¿ç”¨ 1. 2. 3.æ ‡è®°</p>
<p>1.ç¬¬ä¸€é¡¹<br>2.ç¬¬äºŒé¡¹<br>3.ç¬¬ä¸‰é¡¹</p>
<p><strong><em>åˆ—è¡¨åµŒå¥—</em></strong></p>
<p>ç¬¬äºŒå±‚ä¸ºç¬¬ä¸€å±‚æ¢è¡ŒååŠ ä¸€ä¸ªtab</p>
<ul>
<li>ç¬¬ä¸€å±‚<ul>
<li>ç¬¬äºŒå±‚<ul>
<li>ç¬¬ä¸‰å±‚ <ul>
<li>ç¬¬å››å±‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong><em>åŒºå—å¼•ç”¨å’ŒåµŒå¥—</em></strong></p>
<p>åŒºå—å¼•ç”¨ï¼šåœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å·ï¼Œåé¢è·Ÿä¸€ä¸ªç©ºæ ¼</p>
<blockquote>
<p>è¿™æ˜¯åŒºå—ä¸€</p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯åŒºå—äºŒ</p>
</blockquote>
<p>åŒºå—åµŒå¥—ï¼šä¸€ä¸ª&gt;æ˜¯æœ€å¤–å±‚ï¼Œä¸¤ä¸ªæ˜¯ç¬¬ä¸€å±‚åµŒå¥—ï¼Œä»¥æ­¤ç±»æ¨</p>
<blockquote>
<p>çˆ¶äº²</p>
<blockquote>
<p>å„¿å­</p>
<blockquote>
<p>å­™å­</p>
</blockquote>
</blockquote>
</blockquote>
<p><strong><em>æ³¨ï¼šåŒºå—åµŒå¥—ä¸­&gt;ä¹Ÿè¦éš”ä¸€ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å››-é“¾æ¥å’Œå›¾ç‰‡"><a href="#å››-é“¾æ¥å’Œå›¾ç‰‡" class="headerlink" title="å››.é“¾æ¥å’Œå›¾ç‰‡"></a><strong><em>å››.é“¾æ¥å’Œå›¾ç‰‡</em></strong></h3><p>é“¾æ¥ä½¿ç”¨ï¼š<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">é“¾æ¥åç§°</a></p>
<p>å¦‚ï¼š<a href="https://zleo-bug.github.io/">zleoçš„åšå®¢</a>    </p>
<p>å›¾ç‰‡ä½¿ç”¨ï¼šå›¾ç‰‡çš„ä½¿ç”¨å’Œé“¾æ¥ä½¿ç”¨ä¸€æ ·</p>
<p>å¦‚ï¼š<a href="http://static.runoob.com/images/runoob-logo.png">èœé¸Ÿæ•™ç¨‹</a></p>
<p>è‹¥ä½¿ç”¨æœ¬åœ°å›¾ç‰‡ï¼Œåˆ™é“¾æ¥ä¸º åœ¨ä¸æœ¬mdæ–‡ä»¶åŒåçš„æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡åç§°ï¼Œæœ¬æ–‡çš„æ–‡ä»¶åä¸ºMarkDownï¼Œåˆ™é“¾æ¥ä¸ºMarkDownå›¾ç‰‡çš„åç§°</p>
<p><img src="/2020/09/21/MarkDown/f4131bc77889e084f2b3648261cc43df.jpg" alt="å›¾ç‰‡"></p>
<p>MarkDownè¿˜ä¸æ”¯æŒæŒ‡å®šå›¾ç‰‡çš„é«˜åº¦å’Œå¤§å°ï¼Œè‹¥æœ‰éœ€è¦å¯ä»¥ä½¿ç”¨htmlçš„imgæ ‡ç­¾</p>
<hr>
<h3 id="äº”-è¡¨æ ¼"><a href="#äº”-è¡¨æ ¼" class="headerlink" title="äº”.è¡¨æ ¼"></a><strong><em>äº”.è¡¨æ ¼</em></strong></h3><p>MarkDownä¸­ç”¨|åˆ†éš”ä¸åŒå•å…ƒæ ¼ï¼Œç”¨-æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œ</p>
<p>å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´&emsp;</th>
<th>è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
<td>å†…å®¹</td>
</tr>
</tbody></table>
<br>
è¡¨æ ¼ä¸­é»˜è®¤ä¸ºå‘å·¦çœ‹é½

<p>å‘å³çœ‹é½ï¼šå³è¾¹åŠ  :</p>
<p>æ–‡å­—å±…ä¸­ï¼šä¸¤è¾¹åŠ  :</p>
<p><strong><em>æ³¨ï¼š&amp;emsp; è¡¨ç¤ºä¸¤ä¸ªç©ºæ ¼</em></strong></p>
<hr>
<h3 id="å…­-ä»£ç å—"><a href="#å…­-ä»£ç å—" class="headerlink" title="å…­.ä»£ç å—"></a><strong><em>å…­.ä»£ç å—</em></strong></h3><p>å¦‚æœæ˜¯æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ç‰‡æ®µä»£ç å¯ä»¥ç”¨åå¼•å·åŒ…èµ·æ¥</p>
<p>å¦‚ï¼š<code>printf()</code> å‡½æ•°</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œåˆ™åœ¨ä»£ç å—å‰ååŠ åå¼•å·å³å¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">#include&lt;stdio.h&gt;<br>#include&lt;iostream&gt;<br>using namespace std;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"><a href="#ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚" class="headerlink" title="ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚"></a>ä»¥ä¸Šå°±æ˜¯MarkDownçš„åŸºæœ¬è¯­æ³•ã€‚</h3>]]></content>
      <tags>
        <tag>MarkDown</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡</title>
    <url>/2020/09/21/NewPassage/</url>
    <content><![CDATA[<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»¥åè¦æŠŠå­¦ä¹ è¿‡ç¨‹ä¸­çš„çŸ¥è¯†ç‚¹å†™åœ¨è‡ªå·±çš„åšå®¢ä¸ŠğŸ˜</p>
]]></content>
  </entry>
  <entry>
    <title>Pythonå…¥é—¨å­¦ä¹ </title>
    <url>/2020/09/21/Python/</url>
    <content><![CDATA[<p>è¿™å­¦æœŸé€‰ä¿®äº†ä¿¡æ¯æ£€ç´¢ï¼ˆpythonåŸºç¡€å…¥é—¨ï¼‰ï¼Œæ‰€ä»¥æœ‰å¿…è¦å°†pythonçš„åŸºç¡€markdownï¼Œä¾¿äºä»¥åå­¦ä¹ ã€‚è¯­è¨€éƒ½å…·æœ‰ç›¸ä¼¼æ€§ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºpythonä¸å…¶ä»–è¯­è¨€ä¸åŒçš„åœ°æ–¹</p>
<h1 id="ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š"><a href="#ä¸€-ä»€ä¹ˆæ˜¯pythonï¼š" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š"></a>ä¸€.ä»€ä¹ˆæ˜¯pythonï¼š</h1><p>pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>pythonè¯­è¨€æ˜¯ä¸€ç§è§£é‡Šæ€§è¯­è¨€ï¼šè¿™æ„å‘³ç€åœ¨ä»£ç ç¼–å†™ã€æ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰äº†ç¼–è¯‘è¿™ä¸ªç¯èŠ‚</p>
<h1 id="äºŒ-pythonåŸºç¡€ï¼š"><a href="#äºŒ-pythonåŸºç¡€ï¼š" class="headerlink" title="äºŒ.pythonåŸºç¡€ï¼š"></a>äºŒ.pythonåŸºç¡€ï¼š</h1><h2 id="è¯­å¥ç»“æŸç¬¦ï¼š"><a href="#è¯­å¥ç»“æŸç¬¦ï¼š" class="headerlink" title="è¯­å¥ç»“æŸç¬¦ï¼š"></a>è¯­å¥ç»“æŸç¬¦ï¼š</h2><p>pythonä¸­å¯ä»¥ä¸å†™ç»“æŸç¬¦ï¼› å¦‚ï¼šprint(val)    </p>
<h2 id="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"><a href="#å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š" class="headerlink" title="å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š"></a>å˜é‡å®šä¹‰ä¸åˆ é™¤ï¼š</h2><p>pythonä¸­å˜é‡ç±»å‹æ˜¯å¼±ç±»å‹ï¼Œå®šä¹‰å˜é‡æ—¶ä¸ç”¨å£°æ˜æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨delåˆ é™¤å˜é‡</p>
<h2 id="æ³¨é‡Šï¼š"><a href="#æ³¨é‡Šï¼š" class="headerlink" title="æ³¨é‡Šï¼š"></a>æ³¨é‡Šï¼š</h2><h2 id="è¡Œä¸ç¼©è¿›ï¼š"><a href="#è¡Œä¸ç¼©è¿›ï¼š" class="headerlink" title="è¡Œä¸ç¼©è¿›ï¼š"></a>è¡Œä¸ç¼©è¿›ï¼š</h2><p>è¡Œä¸ç¼©è¿›æ˜¯pythonè¯­è¨€æœ€å…·ç‰¹è‰²çš„ä¸€ä¸ªåœ°æ–¹ï¼Œpythonä¸åƒå…¶ä»–è¯­è¨€ä¸€æ ·ä½¿ç”¨å¤§æ‹¬å·æ¥åŒ…å«ä¸€ä¸ªä»£ç å—ï¼Œè€Œæ˜¯ä½¿ç”¨ï¼šæ¥åŒ…å«ä»£ç å—ï¼Œç¼©è¿›ç›¸åŒçš„ä»£ç å—ä¸ºåŒä¸€å±‚æ¬¡ã€‚</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">if True:<br>		print(&quot;True&quot;);<br>	else:<br>		print(&quot;False&quot;);<br></code></pre></td></tr></table></figure>

<h2 id="å¤šè¡Œè¯­å¥ï¼š"><a href="#å¤šè¡Œè¯­å¥ï¼š" class="headerlink" title="å¤šè¡Œè¯­å¥ï¼š"></a>å¤šè¡Œè¯­å¥ï¼š</h2><p>å¦‚æœä¸€è¡Œä»£ç å¾ˆé•¿ï¼Œå¯ä»¥ç”¨ \ æ¥å°†ä»£ç åˆ†è¡Œ<br>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">total &#x3D; item_one + \<br>      item_two + \<br>      item_three<br></code></pre></td></tr></table></figure>
<h2 id="å¯¼å…¥æ¨¡å—ï¼š"><a href="#å¯¼å…¥æ¨¡å—ï¼š" class="headerlink" title="å¯¼å…¥æ¨¡å—ï¼š"></a>å¯¼å…¥æ¨¡å—ï¼š</h2><p>pythonä¸­å¯¼å…¥æ¨¡å—ä½¿ç”¨ import [somemoudle] å’Œ from [somemoudle] import [moudle1],[moudle2]â€¦å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨importå¯ä»¥å¯¼å…¥å…¶ä»–pythonæ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼äºjavaä¸­çš„åŒ…ï¼Œå¯¼å…¥å…¶ä»–æ–‡ä»¶åä¼šè‡ªåŠ¨è¿è¡Œæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ä¸»æ–‡ä»¶ä¸­å°†ä»£ç å—æ”¾å…¥ <strong>name</strong> == <strong>main</strong> </p>
<h2 id="è¾“å…¥ä¸è¾“å‡ºï¼š"><a href="#è¾“å…¥ä¸è¾“å‡ºï¼š" class="headerlink" title="è¾“å…¥ä¸è¾“å‡ºï¼š"></a>è¾“å…¥ä¸è¾“å‡ºï¼š</h2><p>pythonä¸­ç”¨ input(â€œâ€)è¯­å¥è¾“å…¥ï¼Œè¾“å…¥é»˜è®¤ä¸ºå­—ç¬¦ä¸²ï¼Œè‹¥æƒ³å°†è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„å€¼å¯ç”¨å¼ºåˆ¶è½¬æ¢ã€‚å¦‚ val = int(input(â€œenter a val:â€))</p>
<p>pythonä¸­ç”¨ print()è¯­å¥è¾“å‡ºï¼Œè¾“å‡ºé»˜è®¤æ¢è¡Œï¼Œè‹¥æƒ³å–æ¶ˆæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼ï¼šprint(â€œâ€,end=â€ â€œ) ä½†endè¿™ä¸ªè¯­æ³•åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„python3æ‰æ”¯æŒã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨str.format()æ¥æ ¼å¼åŒ–è¾“å‡º</p>
<p>æ¡ä»¶æ§åˆ¶ï¼š</p>
<p>pythonä¸­æ²¡æœ‰switch caseè¡¨è¾¾å¼ï¼Œelifä»£æ›¿äº†elseï¼Œè¿˜æ·»åŠ äº†for elseã€while elseçš„è¡¨è¾¾å¼</p>
<h2 id="é”™è¯¯å’Œå¼‚å¸¸ï¼š"><a href="#é”™è¯¯å’Œå¼‚å¸¸ï¼š" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸ï¼š"></a>é”™è¯¯å’Œå¼‚å¸¸ï¼š</h2><p>pythonä¸­ä½¿ç”¨ try-expect-finally ä»£æ›¿ try-catch-else-finallyï¼Œå…¶ä¸­elseæ˜¯æ²¡æœ‰å¼‚å¸¸æ‰§è¡Œçš„ä»£ç </p>
<p>ç”¨raiseä»£æ›¿throwæŠ›å‡ºå¼‚å¸¸</p>
<h2 id="ç»§æ‰¿ï¼š"><a href="#ç»§æ‰¿ï¼š" class="headerlink" title="ç»§æ‰¿ï¼š"></a>ç»§æ‰¿ï¼š</h2><p>pythonæ”¯æŒå¤šç»§æ‰¿</p>
<h2 id="è¿ç®—ç¬¦ï¼š"><a href="#è¿ç®—ç¬¦ï¼š" class="headerlink" title="è¿ç®—ç¬¦ï¼š"></a>è¿ç®—ç¬¦ï¼š</h2><p>pythonä¸­è¿ç®—ç¬¦é™¤äº† æ¯”è¾ƒè¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ å¤– å…¶ä»–è¿ç®—ç¬¦å’Œå…¶ä»–è¯­è¨€æœ‰æ‰€ä¸åŒã€‚</p>
<h3 id="ç®—æ•°è¿ç®—ç¬¦ï¼š"><a href="#ç®—æ•°è¿ç®—ç¬¦ï¼š" class="headerlink" title="ç®—æ•°è¿ç®—ç¬¦ï¼š"></a>ç®—æ•°è¿ç®—ç¬¦ï¼š</h3><p>x/y çš„è¿ç®—ç»“æœä¸ºæµ®ç‚¹æ•° </p>
<p>x//y çš„ç»“æœä¸ºå‘ä¸‹å–æ•´çš„æ•´æ•°</p>
<p>x/<em>/</em>(val) è¡¨ç¤ºxçš„valæ¬¡å¹‚</p>
<h3 id="é€»è¾‘è¿ç®—ç¬¦ï¼š"><a href="#é€»è¾‘è¿ç®—ç¬¦ï¼š" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦ï¼š"></a>é€»è¾‘è¿ç®—ç¬¦ï¼š</h3><p>ä¸è¿ç®—ç¬¦ä¸ºï¼šand</p>
<p>æˆ–è¿ç®—ç¬¦ä¸ºï¼šor</p>
<p>éè¿ç®—ç¬¦ä¸ºï¼šnot</p>
<h3 id="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"><a href="#æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­" class="headerlink" title="æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­"></a>æˆå‘˜è¿ç®—ç¬¦ï¼šåœ¨pythonå¾ªç¯ä¸­ç»å¸¸è¢«ç”¨æ¥åˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨æŸåºåˆ—ä¸­</h3><p>inï¼šè¡¨ç¤ºæŸå…ƒç´ åœ¨æŒ‡å®šçš„åºåˆ—ä¸­ </p>
<p>not inï¼šè¡¨ç¤ºæŸå…ƒç´ ä¸åœ¨æŒ‡å®šåºåˆ—ä¸­</p>
<h3 id="Pythonå¾ªç¯ï¼š"><a href="#Pythonå¾ªç¯ï¼š" class="headerlink" title="Pythonå¾ªç¯ï¼š"></a>Pythonå¾ªç¯ï¼š</h3><p>Pythonå¾ªç¯ä¸­é€šå¸¸ä½¿ç”¨range(i,j)æ¥æŒ‡å®šéå†çš„èŒƒå›´ï¼Œrangeä¸ºå·¦é—­å³å¼€åŸåˆ™ï¼Œå¦‚for(i in range(0,5)) éå†ä¸‹æ ‡ä¸º0-4</p>
<h3 id="èº«ä»½è¿ç®—ç¬¦ï¼š"><a href="#èº«ä»½è¿ç®—ç¬¦ï¼š" class="headerlink" title="èº«ä»½è¿ç®—ç¬¦ï¼š"></a>èº«ä»½è¿ç®—ç¬¦ï¼š</h3><p>is æˆ– id() ï¼šç”¨æ¥è¡¨ç¤ºæŸå˜é‡çš„åœ°å€ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­åºåˆ—</p>
<p>== ï¼šç”¨æ¥åˆ¤æ–­å˜é‡å€¼æ˜¯å¦ç›¸ç­‰ï¼Œé€šå¸¸ç”¨æ¥åˆ¤æ–­å˜é‡</p>
<p>ç±»ä¼¼äºåœ¨javaä¸­ï¼ŒString str1 = â€œ123â€;String str2 = â€œ123â€; String str3 = new String(â€œ123â€);<br>str1 == str2 /true<br>str1 == str3 /false<br>ä¹‹é—´çš„åŒºåˆ«</p>
<h2 id="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"><a href="#åŸºæœ¬æ•°æ®ç±»å‹ï¼š" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹ï¼š"></a>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</h2><p>pythonä¸­ä½¿ç”¨type()è¿”å›å˜é‡çš„ç±»å‹ï¼Œä½¿ç”¨isinstanceæ–¹æ³•æ¥åˆ¤æ–­å˜é‡æ˜¯å¦ä¸æŒ‡å®šç±»å‹ç›¸åŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">a &#x3D; 10;<br>print(type(a))	#	&lt;class &#39;int&#39;&gt;<br>print(isinstance(a,int))	#True<br></code></pre></td></tr></table></figure>
<ul>
<li><h3 id="Number-æ•°å­—ç±»å‹-ï¼š"><a href="#Number-æ•°å­—ç±»å‹-ï¼š" class="headerlink" title="Number (æ•°å­—ç±»å‹)ï¼š"></a>Number (æ•°å­—ç±»å‹)ï¼š</h3></li>
</ul>
<p>pythonä¸­æ•°å­—ç±»å‹åªæœ‰intã€boolã€floatã€complexå››ç§</p>
<p>å¼ºåˆ¶è½¬æ¢ï¼šintï¼ˆï¼‰ã€boolï¼ˆï¼‰ã€floatï¼ˆï¼‰ã€complexï¼ˆx,yï¼‰</p>
<ul>
<li><h3 id="String-å­—ç¬¦ä¸²-ï¼š"><a href="#String-å­—ç¬¦ä¸²-ï¼š" class="headerlink" title="String (å­—ç¬¦ä¸²)ï¼š"></a>String (å­—ç¬¦ä¸²)ï¼š</h3></li>
</ul>
<p>pythonä¸­å­—ç¬¦ä¸²ç”¨â€˜â€™æˆ–â€œâ€æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨ä¸‹æ ‡è®¿é—®å­—ç¬¦ä¸²ï¼Œæœ‰æ­£åºè®¿é—®å’Œé€†åºè®¿é—®ä¸¤ç§æ–¹å¼</p>
<p>å­—ç¬¦ä¸²è¿ç®—ç¬¦ï¼š</p>
<ul>
<li>è¿ç®—ç¬¦ï¼šé‡å¤è¾“å‡º<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">str &#x3D; &quot;123&quot;<br>print(str * 3) #123123123<br></code></pre></td></tr></table></figure>
[]è¿ç®—ç¬¦ï¼šé€šè¿‡ç´¢å¼•æˆªå–å­—ç¬¦ä¸²çš„å­ä¸²(å·¦é—­å³å¼€)<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">str &#x3D; &quot;12312312412412&quot;<br>print(str[0:4]);<br></code></pre></td></tr></table></figure>
Pythonä¸­å­—ç¬¦ä¸²ä¸‹æ ‡æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯å¸¸è§„çš„ï¼š0â€¦n-1ï¼Œå¦ä¸€ç§æ˜¯ä»åé¢ç´¢å¼•ï¼š-nâ€¦-1</li>
</ul>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">	str &#x3D; &quot;123456789&quot;<br>	print(str[0:9])		#123456789<br>	print(str[-9:0]) 	#123456789<br>&#96;&#96;&#96;	<br>in å’Œ not in æˆå‘˜è¿ç®—ç¬¦ï¼šåˆ¤æ–­å­—ç¬¦æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²ä¸­<br></code></pre></td></tr></table></figure>
<pre><code>str = &quot;12312312412412&quot;
print(&#39;0&#39; in str);        #False</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">r&#x2F;Rè¿ç®—ç¬¦ï¼šå°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦è½¬ä¹‰ï¼Œå˜æˆæ™®é€šå­—ç¬¦<br></code></pre></td></tr></table></figure>
<pre><code>str = r&quot;12\n312312412412&quot;
print(str)            #12\n312312412412</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">%å­—ç¬¦ä¸²æ ¼å¼åŒ–è¿ç®—ç¬¦ï¼š<br>&#96;&#96;&#96;	<br>	str &#x3D; &quot;12312312412412&quot;<br>	print(&quot;string is %s&quot; %str)		#string is 12312312412412<br></code></pre></td></tr></table></figure>
<p>f-string å­—é¢é‡æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</p>
<p>f-string æ ¼å¼åŒ–å­—ç¬¦ä¸²ä»¥ f å¼€å¤´ï¼Œåé¢è·Ÿç€å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­çš„è¡¨è¾¾å¼ç”¨å¤§æ‹¬å·{} åŒ…èµ·æ¥ï¼Œå®ƒä¼šå°†å˜é‡æˆ–è¡¨è¾¾å¼è®¡ç®—åçš„å€¼æ›¿æ¢è¿›å»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">	name&#x3D;&quot;åäºŒç‚¹å‰è¦ç¡è§‰&quot;<br>	print(f&quot;æˆ‘&#123;name&#125;&quot;)		#æˆ‘åäºŒç‚¹å‰è¦ç¡è§‰<br><br>	print(f&quot;&#123;1+2&#125;&quot;) 	# 3<br>&#96;&#96;&#96;	<br>str.format()æ ¼å¼åŒ–ï¼š<br>&#96;&#96;&#96;	<br>	print(&#39;&#123;0&#125; å’Œ &#123;1&#125;&#39;.format(&#39;Google&#39;, &#39;Runoob&#39;))	#Google å’Œ Runoob<br><br>	print(&#39;&#123;name&#125;ç½‘å€ï¼š &#123;site&#125;&#39;.format(name&#x3D;&#39;èœé¸Ÿæ•™ç¨‹&#39;, site&#x3D;&#39;www.runoob.com&#39;))	#èœé¸Ÿæ•™ç¨‹ç½‘å€ï¼š www.runoob.com<br><br>	import math<br>	print(&#39;å¸¸é‡ PI çš„å€¼è¿‘ä¼¼ä¸º &#123;0:.3f&#125;ã€‚&#39;.format(math.pi))<br><br>	table &#x3D; &#123;&#39;Google&#39;: 1, &#39;Runoob&#39;: 2, &#39;Taobao&#39;: 3&#125;<br>	print(&#39;Runoob: &#123;0[Runoob]&#125;; Google: &#123;0[Google]&#125;; Taobao: &#123;0[Taobao]&#125;&#39;.format(table))<br></code></pre></td></tr></table></figure>
<ul>
<li><h3 id="List-åˆ—è¡¨-ï¼š"><a href="#List-åˆ—è¡¨-ï¼š" class="headerlink" title="List (åˆ—è¡¨)ï¼š"></a>List (åˆ—è¡¨)ï¼š</h3></li>
</ul>
<p>åˆ—è¡¨æ˜¯pythonä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬å’Œæ•°ç»„ç›¸ä¼¼ï¼Œä¸è¿‡åˆ—è¡¨å…è®¸å­˜åœ¨ä¸åŒç±»å‹çš„å€¼ï¼Œåˆ—è¡¨ç”¨[]å°†å…ƒç´ åŒ…è£…ï¼Œåˆ—è¡¨æ˜¯å¯å˜çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">list &#x3D; [1,2,3,4,]<br>list &#x3D; [&quot;abc&quot;,&quot;def&quot;]<br>list &#x3D; [1,2,3,&quot;abc&quot;,&quot;def&quot;]<br></code></pre></td></tr></table></figure>
<p>åˆ—è¡¨ä¹Ÿå¯ä»¥åƒå­—ç¬¦ä¸²ç±»å‹ä¸€æ ·ä»å°¾éƒ¨å¼€å§‹éå†ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ä¸º-1<br>åˆ—è¡¨çš„æˆªå–ä¹Ÿæ˜¯[]è¿ç®—ç¬¦ï¼Œå·¦é—­å³å¼€åŸåˆ™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print(list[-1])	# def<br></code></pre></td></tr></table></figure>
<p><strong>åˆ—è¡¨å¢åŠ å…ƒç´ ï¼š</strong></p>
<p>åˆ—è¡¨ä¸­ç”¨appendå¢åŠ å…ƒç´ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">list.append(1)<br>print(list)	#	[1, 2, 3, &#39;abc&#39;, &#39;def&#39;, 1]<br></code></pre></td></tr></table></figure>
<p>æˆ–è€…ä½¿ç”¨+è¿ç®—ç¬¦å¾€åˆ—è¡¨ä¸­å¢åŠ åˆ—è¡¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print(list+[1,2,3])		#[2, 3, &#39;abc&#39;, &#39;def&#39;, 1, 2, 3]<br></code></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨insert(i,x)å¾€ä¸‹æ ‡iæ’å…¥å…ƒç´ x</p>
<p><strong>åˆ—è¡¨åˆ é™¤å…ƒç´ </strong></p>
<p>ç”¨delæˆ–åˆ é™¤å…ƒç´ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">del list[0]<br>print(list)	#	[2, 3, &#39;abc&#39;, &#39;def&#39;, 1]<br></code></pre></td></tr></table></figure>
<p>ç”¨popåˆ é™¤å…ƒç´ ï¼Œé»˜è®¤åˆ é™¤å¹¶æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥åœ¨popæ–¹æ³•ä¸­é™å®šä¸‹æ ‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">x &#x3D; list.pop()	#def<br>print(x)	#[2, 3, &#39;abc&#39;]<br><br>list.pop(0)<br>print(list)	#[3, &#39;abc&#39;]<br></code></pre></td></tr></table></figure>


<ul>
<li><h3 id="Tuple-å…ƒç»„-ï¼š"><a href="#Tuple-å…ƒç»„-ï¼š" class="headerlink" title="Tuple (å…ƒç»„)ï¼š"></a>Tuple (å…ƒç»„)ï¼š</h3></li>
</ul>
<p>å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œå…ƒç»„ä¸å¯ä¿®æ”¹ï¼Œå…ƒç»„ç”¨()æ¥å£°æ˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">tuple &#x3D; (1,2,3,4,5)<br>print(tuple)	#(1, 2, 3, 4, 5)<br></code></pre></td></tr></table></figure>
<p>å…ƒç»„ä¸åˆ—è¡¨å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å…ƒç»„ä¸­æ²¡æœ‰appendæ·»åŠ å…ƒç´ æ–¹æ³•ï¼Œä¸è¿‡å¯ä»¥ç”¨+è¿ç®—è¿›è¡Œç»„åˆ<br>å¯ä»¥ç”¨list(tuple)å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print(tuple+(9,8,7))	#(1, 2, 3, 4, 5, 9, 8, 7)<br></code></pre></td></tr></table></figure>

<ul>
<li><h3 id="åˆ—è¡¨æ¨å¯¼å¼ï¼š"><a href="#åˆ—è¡¨æ¨å¯¼å¼ï¼š" class="headerlink" title="åˆ—è¡¨æ¨å¯¼å¼ï¼š"></a>åˆ—è¡¨æ¨å¯¼å¼ï¼š</h3></li>
</ul>
<p>åˆ—è¡¨æ¨å¯¼å¼å¾ˆå¤§ç®€ä¾¿äº†pythonçš„ç¼–ç¨‹ï¼Œåˆ—è¡¨æ¨å¯¼å¼æœ‰é‚£ä¹ˆä¸€ç‚¹åƒJavaä¸­çš„ é›†åˆ.foreach(lambda) æ–¹æ³•ï¼Œä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼å¯ä»¥å®ç°ä¸€è¡Œä»£ç å®ç°å¤šä¸ªæ“ä½œçš„åŠŸèƒ½</p>
<p>ç”Ÿæˆæ–°çš„åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">vec &#x3D; [1,3,5]<br>print([x*3 for x in vec])	#[3,9,15]<br>print(vec)	#[1,3,5]<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ¨å¯¼å¼è¿›è¡Œç­›é€‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print([x for x in vec if x&gt;&#x3D;3])	#[3,5]<br></code></pre></td></tr></table></figure>
<p>æ¨å¯¼å¼ä¸­ä½¿ç”¨if-elseï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print([x if x%2&#x3D;&#x3D;0 else -x for x in range(1,10)])	#[-1, 2, -3, 4, -5, 6, -7, 8, -9]<br></code></pre></td></tr></table></figure>

<p>ç”Ÿæˆé›†åˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">vec &#x3D; [1,3,5,4,4,4,4,4]<br>print(&#123;x for x in vec&#125;)	#&#123;1, 3, 4, 5&#125;<br></code></pre></td></tr></table></figure>
<p>ç”ŸæˆåµŒå¥—åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print([[x,x**2] for x in vec])	#[[1, 1], [3, 9], [5, 25]]<br></code></pre></td></tr></table></figure>
<p>ç”Ÿæˆå­—å…¸ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">print(&#123;x:x**2 for x in vec&#125;)    #&#123;1, 3, 4, 5&#125;<br></code></pre></td></tr></table></figure>
<p>æ¨å¯¼å¼ä¹Ÿå¯ä»¥è¿›è¡Œå¯¹åˆ—è¡¨çš„åè½¬ã€æ­£åºã€é€†åºè¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">vec &#x3D; [1,3,5,4,4,4,4,4]<br>print([x for x in reversed(vec)])	#[4, 4, 4, 4, 4, 5, 3, 1]<br>print([x for x in sorted(vec)]) #[1, 3, 4, 4, 4, 4, 4, 5]<br>print([x for x in reversed(sorted(vec))]) #[5, 4, 4, 4, 4, 4, 3, 1]<br></code></pre></td></tr></table></figure>



<ul>
<li><h3 id="set-é›†åˆ-ï¼š"><a href="#set-é›†åˆ-ï¼š" class="headerlink" title="set (é›†åˆ)ï¼š"></a>set (é›†åˆ)ï¼š</h3></li>
</ul>
<p>é›†åˆæ˜¯æ— åºçš„ï¼Œé›†åˆä½¿ç”¨{}æˆ–set()å‡½æ•°åˆ›å»ºé›†åˆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">set &#x3D; &#123;1,2,3,4,5,6&#125;<br>print(set)		#&#123;1, 2, 3, 4, 5, 6&#125;<br>print(set(&quot;123321&quot;))	#&#123;&#39;1&#39;, &#39;3&#39;, &#39;2&#39;&#125;<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ å…ƒç´ ï¼š</p>
<p>ç”¨addæ–¹æ³•å¾€é›†åˆæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥ç”¨updateæ·»åŠ é›†åˆã€å…ƒç»„ã€åˆ—è¡¨ç­‰    </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">set.add(4)<br>print(set)	#&#123;&#39;3&#39;, &#39;2&#39;, 4, &#39;1&#39;&#125;<br><br>set.update(&#123;5&#125;)	#&#123;&#39;2&#39;, 4, 5, &#39;3&#39;, &#39;1&#39;&#125;<br>print(set)<br></code></pre></td></tr></table></figure>
<p>åˆ é™¤å…ƒç´ ï¼š</p>
<p>ç”¨removeæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯å¦‚æœé›†åˆä¸­ä¸å­˜åœ¨å…ƒç´ ä¼šæŠ¥é”™</p>
<p>ç”¨discardæ–¹æ³•åˆ é™¤å…ƒç´ ï¼Œå¦‚æœé›†åˆä¸å­˜åœ¨å…ƒç´ ä¹Ÿä¸ä¼šæŠ¥é”™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">set.discard(5)<br>print(set)		#&#123;4, &#39;3&#39;, &#39;2&#39;, &#39;1&#39;&#125;<br></code></pre></td></tr></table></figure>
<p>é›†åˆå¹¶äº¤å·®è¡¥è¿ç®—</p>
<p>set1|set2: å¹¶é›†<br>set1&amp;set2: äº¤é›†<br>set1-set2: å·®é›†<br>set1^set2: ä¸åŒæ—¶å±äºset1å’Œset2çš„</p>
<ul>
<li><h3 id="Dictionary-å­—å…¸-ï¼š"><a href="#Dictionary-å­—å…¸-ï¼š" class="headerlink" title="Dictionary (å­—å…¸)ï¼š"></a>Dictionary (å­—å…¸)ï¼š</h3></li>
</ul>
<p>pythonä¸­å­—å…¸ç”¨{}å£°æ˜ï¼Œé”®å€¼å¯¹ç”¨:åˆ†éš”ï¼Œç”¨{}å£°æ˜ç©ºå­—å…¸ï¼Œå­—å…¸å€¼å¯ä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">dict &#x3D; &#123;&quot;1&quot;:1,&quot;2&quot;:2&#125;<br>print(dict)	&#123;&#39;1&#39;: 1, &#39;2&#39;: 2&#125;<br>print(dict[&quot;1&quot;])	# 1<br><br>dict[&quot;1&quot;] &#x3D; 100<br>print(dict)	#&#123;&#39;1&#39;: 100, &#39;2&#39;: 2&#125;<br></code></pre></td></tr></table></figure>
<p>å­—å…¸ä¸­ç”¨updateå¢åŠ ä¸€ä¸ªé”®å€¼å¯¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">dict.update(&#123;&quot;3&quot;:3&#125;)<br>print(dict)<br></code></pre></td></tr></table></figure>
<p>pop(key)åˆ é™¤é”®ä¸ºkeyçš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">val &#x3D; dict.pop(&quot;1&quot;)<br>print(val)	#100<br></code></pre></td></tr></table></figure>
<p>ç”¨popitemåˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªé”®å€¼å¯¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">d &#x3D; dict.popitem();<br>print(d)	#(&#39;3&#39;, 3)<br></code></pre></td></tr></table></figure>
<h2 id="pythonå‡½æ•°"><a href="#pythonå‡½æ•°" class="headerlink" title="pythonå‡½æ•°"></a>pythonå‡½æ•°</h2><p>pythonä¸­ç”¨defå®šä¹‰ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">def Method():<br>   print(&quot;éš¾é¡¶&quot;)<br>Method()	#éš¾é¡¶<br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°å‚æ•°ï¼š</strong></p>
<p>å‡½æ•°å‚æ•°ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ <strong>å…³é”®å­—å‚æ•°</strong> ã€<strong>é»˜è®¤å‚æ•°</strong> ã€<strong>ä¸å®šé•¿å‚æ•°</strong>ã€<strong>åŒ¿åå‡½æ•°</strong></p>
<p><strong>å…³é”®å­—å‚æ•°</strong><br>å‡½æ•°è°ƒç”¨å¯ä»¥ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥ç¡®å®šä¼ å…¥çš„å‚æ•°å€¼ï¼Œä½¿ç”¨å…³é”®å­—å‚æ•°æ—¶å…è®¸å‚æ•°é¡ºåºçš„ä¸ä¸€è‡´</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">def Method(name, age):<br>   print(name, age)<br><br>Method(age&#x3D;21, name&#x3D;&quot;zl&quot;)		#zl 21<br></code></pre></td></tr></table></figure>
<p><strong>é»˜è®¤å‚æ•°</strong><br>å‡½æ•°ä¸­å¯ä»¥å¯¹å‚æ•°è®¾ç½®é»˜è®¤å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">def Method(name,age,address&#x3D;&quot;guangdong&quot;):<br>   print(name, age,address)	#zl 21 guangdong<br>Method(age&#x3D;21, name&#x3D;&quot;zl&quot;)<br></code></pre></td></tr></table></figure>
<p><strong>ä¸å®šé•¿å‚æ•°</strong><br>ä¸å®šé•¿å‚æ•°ä¸­ï¼Œç”¨*å¯¼å…¥ä¸€ä¸ªå…ƒç»„ï¼Œ**å¯¼å…¥ä¸€ä¸ªå­—å…¸</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">def Method(*tuple):<br>   print(tuple)<br>Method(1,2,3,4,5,6,7)	#(1, 2, 3, 4, 5, 6, 7)<br><br>def Method(**dict):<br>   print(dict)<br>Method(a&#x3D;1,b&#x3D;2,c&#x3D;3,d&#x3D;4);	#&#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4&#125;<br></code></pre></td></tr></table></figure>
<p>ä¸å®šé•¿å‚æ•°åçš„å‚æ•°è¦ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¼ å…¥</p>
<p><strong>åŒ¿åå‡½æ•°</strong><br>åŒ¿åå‡½æ•°ä¸­ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¡¨è¾¾å¼ä¸­ä¼šæä¾›è¿”å›å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Method &#x3D; lambda val1&#x3D;1,val2&#x3D;2:val1+val2<br>print(Method())<br></code></pre></td></tr></table></figure>

<h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><p>pythonç±»ä¸­ä¸ç”¨åƒc++ã€javaä¸­å£°æ˜å±æ€§ï¼Œå¯ä»¥ç›´æ¥åœ¨æ„é€ æ–¹æ³•def <strong>init</strong>(self)ä½¿ç”¨ï¼Œå±æ€§æˆ–æ–¹æ³•å‰åŠ __ä»£è¡¨ç§æœ‰ï¼Œå¦å¤–ï¼Œåœ¨ç±»ä¸­çš„ä»»ä½•æ–¹æ³•éƒ½è¦åœ¨å‚æ•°åˆ—è¡¨ç¬¬ä¸€ä¸ªåŠ ä¸Šselfï¼Œç±»ä¼¼c++ã€javaçš„thiså…³é”®å­—ï¼Œåœ¨æ–¹æ³•ä¸­è°ƒç”¨å±æ€§æ—¶è¦ä½¿ç”¨self.çš„æ–¹å¼ï¼Œè€Œä¸”æ–°å»ºå¯¹è±¡ä¸ç”¨ä½¿ç”¨newå…³é”®å­—ï¼ŒAclass=Myclass()å³å¯ï¼Œç»§æ‰¿åˆ™ä½¿ç”¨Aclass(Bclass)å£°æ˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">class person:<br>    name &#x3D; &quot; &quot;<br>    age &#x3D; 0<br>    sex &#x3D; &quot; &quot;<br><br>   def __init__(self, name, age, sex):<br>       self.name &#x3D; name<br>       self.age &#x3D; age<br>       self.sex &#x3D; sex<br><br>   def show(self):<br>       return (&quot;&#123;0&#125; is a &#123;1&#125; years old &#123;2&#125;&quot;.format(self.name, self.age, self.sex))<br><br>class student(person):<br>   grade &#x3D; &quot; &quot;<br><br>   def __init__(self, name, age, sex, grade):<br>       person.__init__(self, name, age, sex)<br>       self.grade &#x3D; grade<br><br>   def show(self):<br>       return person.show(self) + &quot; å¤§å­¦ &#123;&#125; å¹´çº§&quot;.format(self.grade)<br><br>   def print(self):<br>       print(person.show(self))<br>       print(super().show())<br><br><br>class graduate(student, person):<br>   	salary &#x3D; 0<br><br>   def __init__(self, name, age, sex, grade, salary):<br>       student.__init__(self, name, age, sex, grade)<br>       self.salary &#x3D; salary<br></code></pre></td></tr></table></figure>
<h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><ul>
<li>å†…ç½®å‘½å</li>
<li>å…¨å±€å‘½å</li>
<li>å±€éƒ¨å‘½å</li>
</ul>
<p>è‹¥è¦åœ¨æ–¹æ³•æˆ–ç±»ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä½¿ç”¨globalå…³é”®å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">count &#x3D; 1<br>def change():<br>    global count<br>    print(count)<br>    count &#x3D; 100<br><br>change()<br>print(count)	#100<br></code></pre></td></tr></table></figure>
<p>è‹¥è¦åœ¨åµŒå¥—æ–¹æ³•ä¸­ä½¿ç”¨å¤–å±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œä½¿ç”¨nonlocalå…³é”®å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">def outer():<br>    num &#x3D; 10<br>    def inner():<br>        nonlocal num<br>        print(num)	#10<br>        num &#x3D; &quot;str&quot;<br>    inner()<br>    print(num)	#str<br>outer()<br></code></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaWebä¹‹Servlet</title>
    <url>/2020/10/04/Servlet/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨SpringMVCçš„æ—¶å€™æœ‰æ˜¯è¦ç”¨åˆ°Servletä¸­çš„æ–¹æ³•ï¼Œä¹Ÿå€Ÿæ­¤æœºä¼šå¤ä¹ ä¸€æ³¢Servlet</p>
<h1 id="ä»€ä¹ˆæ˜¯Servlet"><a href="#ä»€ä¹ˆæ˜¯Servlet" class="headerlink" title="ä»€ä¹ˆæ˜¯Servlet"></a><strong>ä»€ä¹ˆæ˜¯Servlet</strong></h1><p>Servletçš„å…¨ç§°æ˜¯JavaServletï¼Œæ˜¯è¿è¡Œåœ¨WebæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œç”±Servletå®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª Web æµè§ˆå™¨æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’ŒHTTPæœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚å…¶ä¸»è¦åŠŸèƒ½åœ¨äºäº¤äº’å¼åœ°æµè§ˆå’Œä¿®æ”¹æ•°æ®ï¼Œç”ŸæˆåŠ¨æ€Webå†…å®¹ã€‚</p>
<p>Servletçš„æœ¬è´¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Javaç±»ï¼Œç¼–å†™ä¸€ä¸ªServletï¼Œå…¶å®å°±æ˜¯æŒ‰ç…§ç›¸åº”çš„è§„èŒƒç¼–å†™ä¸€ä¸ªJavaç±»</p>
<h1 id="servletå®¹å™¨"><a href="#servletå®¹å™¨" class="headerlink" title="servletå®¹å™¨"></a><strong>servletå®¹å™¨</strong></h1><p>ä¸Šé¢è¯´åˆ°servletæ˜¯è¿è¡Œåœ¨webæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œç”±servletå®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œservletå®¹å™¨æ˜¯webæœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†ï¼ŒServletä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå®ƒå¿…é¡»è¢«éƒ¨ç½²åˆ°Servletå®¹å™¨ä¸­ï¼Œç”±å®¹å™¨æ¥å®ä¾‹åŒ–å’Œè°ƒç”¨Servletçš„æ–¹æ³•ï¼Œservletæ˜¯ç”±servletå®¹å™¨ç»Ÿä¸€ç®¡ç†çš„ï¼Œå®ƒè´Ÿè´£ç®¡ç†servletçš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h1 id="servletçš„å·¥ä½œæµç¨‹"><a href="#servletçš„å·¥ä½œæµç¨‹" class="headerlink" title="servletçš„å·¥ä½œæµç¨‹"></a><strong>servletçš„å·¥ä½œæµç¨‹</strong></h1><p><img src="/2020/10/04/Servlet/servlet.jpg" alt="servlet"></p>
<h1 id="servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†"><a href="#servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†" class="headerlink" title="servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†"></a><strong>servletçš„ä½¿ç”¨æ–¹æ³•å’ŒåŸç†</strong></h1><h2 id="servletçš„ä½¿ç”¨"><a href="#servletçš„ä½¿ç”¨" class="headerlink" title="servletçš„ä½¿ç”¨"></a><strong>servletçš„ä½¿ç”¨</strong></h2><p>ServletæŠ€æœ¯çš„æ ¸å¿ƒæ˜¯Servletæ¥å£ï¼Œå®ƒæ˜¯æ‰€æœ‰Servletç±»å¿…é¡»ç›´æ¥æˆ–è€…é—´æ¥å®ç°çš„ä¸€ä¸ªæ¥å£ã€‚è¦æƒ³ä½¿ç”¨servletï¼Œå°±å¿…é¡»å®ç°servletæ¥å£æˆ–è€…ç»§æ‰¿å®ç°äº†servletæ¥å£çš„ç±»ã€‚</p>
<h2 id="servletçš„å·¥ä½œåŸç†"><a href="#servletçš„å·¥ä½œåŸç†" class="headerlink" title="servletçš„å·¥ä½œåŸç†"></a><strong>servletçš„å·¥ä½œåŸç†</strong></h2><p>å½“å®¢æˆ·ç«¯æœ‰è¯·æ±‚æ—¶ï¼ŒServletå®¹å™¨å®ä¾‹åŒ–ç›¸å¯¹åº”çš„servletï¼Œå¹¶è°ƒç”¨å®ƒçš„service()æ–¹æ³•ï¼Œä¼ å…¥ServletRequestå¯¹è±¡å’ŒServletResponseå¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç”±servletå®¹å™¨å°è£…å¥½çš„ï¼ŒServletRequestå¯¹è±¡å°è£…äº†httpçš„è¯·æ±‚ï¼ŒServletResponseåˆ™å°è£…äº†å¯¹httpè¯·æ±‚çš„å“åº”ã€‚</p>
<p>å¯¹äºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ŒServletå®¹å™¨è¿˜ä¼šåˆ›å»ºä¸€ä¸ªServletContextå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸­å°è£…äº†ä¸Šä¸‹æ–‡ï¼ˆåº”ç”¨ç¨‹åºï¼‰çš„ç¯å¢ƒè¯¦æƒ…ã€‚</p>
<h1 id="servletçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#servletçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="servletçš„ç”Ÿå‘½å‘¨æœŸ"></a><strong>servletçš„ç”Ÿå‘½å‘¨æœŸ</strong></h1><p>servletçš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºinit()ã€service()å’Œdestroy()ä¸‰ä¸ªè¿‡ç¨‹</p>
<ul>
<li>init()</li>
</ul>
<p>å½“Servletç¬¬ä¸€æ¬¡è¢«è¯·æ±‚æ—¶ï¼ŒServletå®¹å™¨å°±ä¼šå¼€å§‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆå§‹åŒ–ä¸€ä¸ªServletå¯¹è±¡å‡ºæ¥ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨åç»­è¯·æ±‚ä¸­ä¸ä¼šå†è¢«Servletå®¹å™¨è°ƒç”¨ï¼Œå¯ä»¥åˆ©ç”¨init()æ–¹æ³•å¯¹servletè¿›è¡Œåˆå§‹åŒ–å·¥ä½œ</p>
<ul>
<li>service()</li>
</ul>
<p>æ¯å½“è¯·æ±‚Servletæ—¶ï¼ŒServletå®¹å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</p>
<ul>
<li>destroy()</li>
</ul>
<p>å½“è¦é”€æ¯Servletæ—¶ï¼ŒServletå®¹å™¨å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨å¸è½½åº”ç”¨ç¨‹åºæˆ–è€…å…³é—­Servletå®¹å™¨æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šå†™ä¸€äº›æ¸…é™¤ä»£ç ã€‚</p>
<h1 id="Servletã€ServletRequestã€ServletResponseæ¥å£"><a href="#Servletã€ServletRequestã€ServletResponseæ¥å£" class="headerlink" title="Servletã€ServletRequestã€ServletResponseæ¥å£"></a><strong>Servletã€ServletRequestã€ServletResponseæ¥å£</strong></h1><h2 id="Servletæ¥å£ï¼š"><a href="#Servletæ¥å£ï¼š" class="headerlink" title="Servletæ¥å£ï¼š"></a><strong>Servletæ¥å£ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface Servlet &#123;<br>    void init(ServletConfig var1) throws ServletException;<br> <br> &#x2F;&#x2F; è·å–é…ç½®ä¿¡æ¯<br>    ServletConfig getServletConfig();<br> <br>    void service(ServletRequest var1, ServletResponse var2) throws ServletException, IOException;<br> <br> &#x2F;&#x2F; è·å–servletä¿¡æ¯ ä¼ ç»™initï¼ˆï¼‰æ–¹æ³•çš„ServletConfigå¯¹è±¡<br>    String getServletInfo();<br> <br>    void destroy();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="ServletRequestæ¥å£"><a href="#ServletRequestæ¥å£" class="headerlink" title="ServletRequestæ¥å£"></a><strong>ServletRequestæ¥å£</strong></h2><p>ServletRequestæ¥å£ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ³•æ˜¯getParameteræ–¹æ³•ï¼Œç”¨äºè¿”å›è¯·æ±‚å‚æ•°çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String getParameter(String var1);&#x2F;&#x2F;è¿”å›è¯·æ±‚å‚æ•°çš„å€¼<br></code></pre></td></tr></table></figure>
<h2 id="ServletResponseæ¥å£"><a href="#ServletResponseæ¥å£" class="headerlink" title="ServletResponseæ¥å£"></a><strong>ServletResponseæ¥å£</strong></h2><p> javax.servlet.ServletResponseæ¥å£è¡¨ç¤ºä¸€ä¸ªServletå“åº”ï¼Œåœ¨è°ƒç”¨Servletçš„Service()æ–¹æ³•å‰ï¼ŒServletå®¹å™¨ä¼šå…ˆåˆ›å»ºä¸€ä¸ªServletResponseå¯¹è±¡ï¼Œå¹¶æŠŠå®ƒä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ ç»™Service()æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface ServletResponse &#123;<br><br>    String getCharacterEncoding();<br> <br>    String getContentType();<br> <br>    PrintWriter getWriter() throws IOException;<br> <br>    void setCharacterEncoding(String var1);<br> <br>    void setContentLength(int var1);<br> <br> 	&#x2F;&#x2F; ....çœç•¥ä¸€äº›æ–¹æ³•<br>    void setContentType(String var1);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼š </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">PrintWriter getWriter() throws IOException;<br><br>void setContentType(String var1);<br></code></pre></td></tr></table></figure>
<p>åœ¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œéƒ½å…ˆåº”è°ƒç”¨setContentTypeæ–¹æ³•ï¼Œè®¾ç½®å“åº”çš„å†…å®¹ç±»å‹ï¼Œå¹¶å°†â€œtext/htmlâ€ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œè¿™æ˜¯åœ¨å‘Šè¯‰æµè§ˆå™¨å“åº”çš„å†…å®¹ç±»å‹ä¸ºHTMLï¼Œéœ€è¦ä»¥HTMLçš„æ–¹æ³•è§£é‡Šå“åº”å†…å®¹è€Œä¸æ˜¯æ™®é€šçš„æ–‡æœ¬ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åŠ ä¸Šâ€œcharset=UTF-8â€æ”¹å˜å“åº”çš„ç¼–ç æ–¹å¼ä»¥é˜²æ­¢å‘ç”Ÿä¸­æ–‡ä¹±ç ç°è±¡ã€‚</p>
<p>getWriteræ–¹æ³•è¿”å›ä¸€ä¸ªå¯ä»¥å‘å®¢æˆ·ç«¯å‘é€æ–‡æœ¬çš„javaå¯¹è±¡ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯é¡µé¢ä¸­è¾“å‡ºä¿¡æ¯</p>
<h1 id="ServletContextå¯¹è±¡"><a href="#ServletContextå¯¹è±¡" class="headerlink" title="ServletContextå¯¹è±¡"></a><strong>ServletContextå¯¹è±¡</strong></h1><p>ServletContextå¯¹è±¡è¡¨ç¤ºServletåº”ç”¨ç¨‹åºã€‚æ¯ä¸ªWebåº”ç”¨ç¨‹åºéƒ½åªæœ‰ä¸€ä¸ªServletContextå¯¹è±¡ã€‚æœ‰äº†ServletContextå¯¹è±¡ï¼Œå°±å¯ä»¥å…±äº«ä»åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰èµ„æ–™å¤„è®¿é—®åˆ°çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ³¨å†ŒWebå¯¹è±¡ã€‚å‰è€…å°†å¯¹è±¡ä¿å­˜åœ¨ServletContextä¸­çš„ä¸€ä¸ªå†…éƒ¨Mapä¸­ã€‚ä¿å­˜åœ¨ServletContextä¸­çš„å¯¹è±¡è¢«ç§°ä½œå±æ€§ã€‚</p>
<p>servletcontextå¯¹è±¡ä¸­çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Object getAttribute(String var1);<br> <br>Enumeration&lt;String&gt; getAttributeNames();<br> <br>void setAttribute(String var1, Object var2);<br> <br>void removeAttribute(String var1);<br></code></pre></td></tr></table></figure>
<h1 id="ServletConfigæ¥å£"><a href="#ServletConfigæ¥å£" class="headerlink" title="ServletConfigæ¥å£"></a><strong>ServletConfigæ¥å£</strong></h1><p>å½“Servletå®¹å™¨åˆå§‹åŒ–Servletæ—¶ï¼ŒServletå®¹å™¨ä¼šç»™Servletçš„init()æ–¹å¼ä¼ å…¥ä¸€ä¸ªServletConfigå¯¹è±¡ã€‚ä¸€äº›æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String getInitParameter(String name) &#x2F;&#x2F;æ ¹æ®åˆå§‹åŒ–å‚æ•°åï¼Œè¿”å›å¯¹åº”çš„åˆå§‹åŒ–å‚æ•°å€¼<br><br>Enumeration getInitParameterNames()	&#x2F;&#x2F;è¿”å›ä¸€ä¸ªEnumerationå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰çš„åˆå§‹åŒ–å‚æ•°å<br><br>ServletContext getServletContext()	&#x2F;&#x2F;è¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰Webåº”ç”¨çš„ï¼ŒServletContextå¯¹è±¡<br><br>String getServletName()	&#x2F;&#x2F;è¿”å›Servletçš„åå­—ï¼Œå³web.xmlä¸­å…ƒç´ çš„å€¼<br></code></pre></td></tr></table></figure>
<h1 id="HttpServletã€HttpServletRequestã€HttpServlelResponse"><a href="#HttpServletã€HttpServletRequestã€HttpServlelResponse" class="headerlink" title="HttpServletã€HttpServletRequestã€HttpServlelResponse"></a><strong>HttpServletã€HttpServletRequestã€HttpServlelResponse</strong></h1><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ€å¸¸ç”¨çš„Servletç±»HttpServletæŠ½è±¡ç±»<br>å¸¸ç”¨çš„æ¥å£æ˜¯ServletRequestçš„å­æ¥å£HttpServletRequest å’Œ ServletResponseçš„å­æ¥å£HttpServletResponse </p>
<p>ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2020/10/04/Servlet/relationship.jpg" alt="relationship"></p>
<h2 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a><strong>HttpServlet</strong></h2><p>å¸¸ç”¨Servletå¯¹è±¡æ˜¯javax.servlet.httpåŒ…ä¸‹çš„HttpServletæŠ½è±¡ç±»</p>
<p>HttpServletæŠ½è±¡ç±»æ˜¯ç»§æ‰¿äºGenericServletæŠ½è±¡ç±»è€Œæ¥çš„ã€‚ä½¿ç”¨HttpServletæŠ½è±¡ç±»æ—¶ï¼Œè¿˜éœ€è¦å€ŸåŠ©åˆ†åˆ«ä»£è¡¨Servletè¯·æ±‚å’ŒServletå“åº”çš„HttpServletRequestå’ŒHttpServletResponseå¯¹è±¡</p>
<p>ç»§æ‰¿HttpServletçš„Servletç±»ä¸­è¦å®ç°doXXæ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºå®¢æˆ·ç«¯çš„ä¸åŒè¯·æ±‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;<br>&#125;<br><br>...<br><br>protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>HttpServletç±»ä¸­é‡å†™äº†service()æ–¹æ³•ï¼Œæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹çš„ä¸åŒè€Œè°ƒç”¨ç›¸åº”çš„doXXæ–¹æ³•</p>
<h2 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a><strong>HttpServletRequest</strong></h2><p>HttpServletRequestæ¥å£ä¸­æ·»åŠ äº†å‡ ä¸ªé‡è¦æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Cookie[] getCookies();&#x2F;&#x2F;è¿”å›ä¸€ä¸ªcookieå¯¹è±¡æ•°ç»„<br><br>String getHeader(String var1);&#x2F;&#x2F;è¿”å›æŒ‡å®šHTTPæ ‡é¢˜çš„å€¼<br><br>HttpSession getSession();&#x2F;&#x2F;è¿”å›ä¸è¿™ä¸ªè¯·æ±‚ç›¸å…³çš„ä¼šè¯å¯¹è±¡<br></code></pre></td></tr></table></figure>
<h2 id="HttpServlelResponse"><a href="#HttpServlelResponse" class="headerlink" title="HttpServlelResponse"></a><strong>HttpServlelResponse</strong></h2><p>HttpServlelResponseä¸­æ·»åŠ çš„é‡è¦æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">void addCookie(Cookie var1);&#x2F;&#x2F;ç»™è¿™ä¸ªå“åº”æ·»åŠ ä¸€ä¸ªcookie<br><br>void addHeader(String var1, String var2);&#x2F;&#x2F;ç»™è¿™ä¸ªè¯·æ±‚æ·»åŠ ä¸€ä¸ªå“åº”å¤´<br><br>void sendRedirect(String var1) throws IOException;&#x2F;&#x2F;å‘é€ä¸€æ¡å“åº”ç ï¼Œè®²æµè§ˆå™¨è·³è½¬åˆ°æŒ‡å®šçš„ä½ç½®<br><br>void setStatus(int var1);&#x2F;&#x2F;è®¾ç½®å“åº”è¡Œçš„çŠ¶æ€ç <br></code></pre></td></tr></table></figure>

<h1 id="cookieå’Œsession"><a href="#cookieå’Œsession" class="headerlink" title="cookieå’Œsession"></a><strong>cookieå’Œsession</strong></h1><p>ä¼šè¯ï¼ˆSessionï¼‰è·Ÿè¸ªæ˜¯Webç¨‹åºä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„æ•´ä¸ªä¼šè¯ã€‚å¸¸ç”¨çš„ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ˜¯Cookieä¸Session</p>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a><strong>cookie</strong></h2><p>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ã€‚ä¸€æ—¦æ•°æ®äº¤æ¢å®Œæ¯•ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„è¿æ¥å°±ä¼šå…³é—­ï¼Œå†æ¬¡äº¤æ¢æ•°æ®éœ€è¦å»ºç«‹æ–°çš„è¿æ¥ã€‚è¿™å°±æ„å‘³ç€æœåŠ¡å™¨æ— æ³•ä»è¿æ¥ä¸Šè·Ÿè¸ªä¼šè¯ã€‚è¦è·Ÿè¸ªè¯¥ä¼šè¯ï¼Œå¿…é¡»å¼•å…¥ä¸€ç§æœºåˆ¶ã€‚è€Œcookieå°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚</p>
<p>ç”±äºHTTPæ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼ŒæœåŠ¡å™¨å•ä»ç½‘ç»œè¿æ¥ä¸Šæ— ä»çŸ¥é“å®¢æˆ·èº«ä»½ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿå°±ç»™å®¢æˆ·ç«¯ä»¬é¢å‘ä¸€ä¸ªé€šè¡Œè¯å§ï¼Œæ¯äººä¸€ä¸ªï¼Œæ— è®ºè°è®¿é—®éƒ½å¿…é¡»æºå¸¦è‡ªå·±é€šè¡Œè¯ã€‚è¿™æ ·æœåŠ¡å™¨å°±èƒ½ä»é€šè¡Œè¯ä¸Šç¡®è®¤å®¢æˆ·èº«ä»½äº†ã€‚è¿™å°±æ˜¯Cookieçš„å·¥ä½œåŸç†ã€‚</p>
<p>Cookieå®é™…ä¸Šæ˜¯ä¸€å°æ®µçš„æ–‡æœ¬ä¿¡æ¯ã€‚å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çŠ¶æ€ï¼Œå°±ä½¿ç”¨responseå¯¹è±¡çš„addCookieæ–¹æ³•å‘å®¢æˆ·ç«¯æµè§ˆå™¨é¢å‘ä¸€ä¸ªCookieã€‚å®¢æˆ·ç«¯æµè§ˆå™¨ä¼šæŠŠCookieä¿å­˜èµ·æ¥ã€‚å½“æµè§ˆå™¨å†è¯·æ±‚è¯¥ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨æŠŠè¯·æ±‚çš„ç½‘å€è¿åŒè¯¥Cookieä¸€åŒæäº¤ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ£€æŸ¥è¯¥Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·çŠ¶æ€ã€‚æœåŠ¡å™¨è¿˜å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹Cookieçš„å†…å®¹ã€‚</p>
<p>Cookieç±»åœ¨javax.servlet.http.CookieåŒ…ä¸‹</p>
<p>Cookieå¯¹è±¡ä¸­å¸¸ç”¨çš„æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void setDomain(String pattern)	&#x2F;&#x2F;è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ xxx.com<br><br>public String getDomain()	&#x2F;&#x2F;è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„åŸŸï¼Œä¾‹å¦‚ xxx.comã€‚<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è®¾ç½®cookieæœ‰æ•ˆæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸è¿™æ ·è®¾ç½®ï¼Œcookieåªä¼šåœ¨å½“å‰sessionä¼šè¯ä¸­æŒç»­æœ‰æ•ˆã€‚<br>public void setMaxAge(int expiry)<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å› cookie çš„æœ€å¤§ç”Ÿå­˜å‘¨æœŸï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ-1 è¡¨ç¤º cookie å°†æŒç»­ä¸‹å»ï¼Œç›´åˆ°æµè§ˆå™¨å…³é—­ã€‚<br>public int getMaxAge()	<br><br>public String getName()	&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å› cookie çš„åç§°ã€‚åç§°åœ¨åˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚<br><br>public void setValue(String newValue)	&#x2F;&#x2F;è¯¥æ–¹æ³•è®¾ç½®ä¸ cookie å…³è”çš„å€¼ã€‚<br><br>public String getValue() &#x2F;&#x2F;è¯¥æ–¹æ³•è·å–ä¸ cookie å…³è”çš„å€¼ã€‚<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è®¾ç½® cookie é€‚ç”¨çš„è·¯å¾„ã€‚å¦‚æœä¸æŒ‡å®šè·¯å¾„ï¼Œä¸å½“å‰é¡µé¢ç›¸åŒç›®å½•ä¸‹çš„ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¸‹çš„ï¼‰æ‰€æœ‰ URL éƒ½ä¼šè¿”å› cookieã€‚<br>public void setPath(String uri)<br><br>public String getPath()	&#x2F;&#x2F;è¯¥æ–¹æ³•è·å– cookie é€‚ç”¨çš„è·¯å¾„ã€‚<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è®¾ç½®å¸ƒå°”å€¼ï¼Œè¡¨ç¤º cookie æ˜¯å¦åº”è¯¥åªåœ¨åŠ å¯†çš„ï¼ˆå³ SSLï¼‰è¿æ¥ä¸Šå‘é€ã€‚<br>public void setSecure(boolean flag)<br><br>public void setComment(String purpose)	&#x2F;&#x2F;è®¾ç½®cookieçš„æ³¨é‡Šã€‚è¯¥æ³¨é‡Šåœ¨æµè§ˆå™¨å‘ç”¨æˆ·å‘ˆç° cookie æ—¶éå¸¸æœ‰ç”¨ã€‚<br><br>public String getComment()	&#x2F;&#x2F;è·å– cookie çš„æ³¨é‡Šï¼Œå¦‚æœ cookie æ²¡æœ‰æ³¨é‡Šåˆ™è¿”å› nullã€‚<br></code></pre></td></tr></table></figure>


<h2 id="session"><a href="#session" class="headerlink" title="session"></a><strong>session</strong></h2><p>Sessionæ˜¯å¦ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒçš„æ˜¯Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€ŒSessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šã€‚è¿™å°±æ˜¯Sessionã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»è¯¥Sessionä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†ã€‚</p>
<p>Sessionå¯¹åº”çš„ç±»ä¸ºjavax.servlet.http.HttpSessionç±»</p>
<p>Servleté‡Œé€šè¿‡request.getSession()æ–¹æ³•è·å–è¯¥å®¢æˆ·çš„Session</p>
<p>HttpSessionå¯¹è±¡ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å›åœ¨è¯¥ session ä¼šè¯ä¸­å…·æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ï¼Œåˆ™è¿”å› nullã€‚<br>public Object getAttribute(String name)<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åç§°ç»‘å®šä¸€ä¸ªå¯¹è±¡åˆ°è¯¥ session ä¼šè¯ã€‚<br>public void setAttribute(String name, Object value)<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å› String å¯¹è±¡çš„æšä¸¾ï¼ŒString å¯¹è±¡åŒ…å«æ‰€æœ‰ç»‘å®šåˆ°è¯¥ session ä¼šè¯çš„å¯¹è±¡çš„åç§°ã€‚<br>public Enumeration getAttributeNames()<br><br>&#x2F;&#x2F;è®¾ç½®sessionçš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚<br>public void setMaxInactiveInterval(int interval)<br><br>&#x2F;&#x2F;è·å–sessionçš„è¶…æ—¶æ—¶é—´ä»¥ç§’ä¸ºå•ä½ã€‚<br>public int getMaxInactiveInterval()<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆ†é…ç»™è¯¥ session ä¼šè¯çš„å”¯ä¸€æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚<br>public String getId()<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•è¿”å›å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ä¸è¯¥ session ä¼šè¯ç›¸å…³çš„è¯·æ±‚çš„æ—¶é—´è‡ªæ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œç®—èµ·ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚<br>public long getLastAccessedTime()<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•æŒ‡ç¤ºè¯¥ session ä¼šè¯æ— æ•ˆï¼Œå¹¶è§£é™¤ç»‘å®šåˆ°å®ƒä¸Šé¢çš„ä»»ä½•å¯¹è±¡ã€‚<br>	public void invalidate()<br><br>&#x2F;&#x2F;å¦‚æœå®¢æˆ·ç«¯è¿˜ä¸çŸ¥é“è¯¥ session ä¼šè¯ï¼Œæˆ–è€…å¦‚æœå®¢æˆ·é€‰æ‹©ä¸å‚å…¥è¯¥ session ä¼šè¯ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› trueã€‚<br>	public boolean isNew()<br><br>&#x2F;&#x2F;è¯¥æ–¹æ³•å°†ä»è¯¥ session ä¼šè¯ç§»é™¤æŒ‡å®šåç§°çš„å¯¹è±¡ã€‚<br>	public void removeAttribute(String name)<br></code></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>Springç®€ä»‹</title>
    <url>/2020/09/22/Spring/</url>
    <content><![CDATA[<blockquote>
</blockquote>
<h2 id="ä¸€-ä»€ä¹ˆæ˜¯Spring"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Spring"></a><strong>ä¸€.ä»€ä¹ˆæ˜¯Spring</strong></h2><p>Springè½»é‡çº§çš„javaå¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼ŒSpringçš„æ ¸å¿ƒæ˜¯æ§åˆ¶åè½¬(IOC)å’Œé¢å‘åˆ‡é¢(AOP)ã€‚</p>
<p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€å…·æœ‰æ§åˆ¶åè½¬å’Œé¢å‘åˆ‡é¢çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯IOC"><a href="#ä»€ä¹ˆæ˜¯IOC" class="headerlink" title="ä»€ä¹ˆæ˜¯IOC"></a><strong>ä»€ä¹ˆæ˜¯IOC</strong></h3><p>IOCçš„å®šä¹‰ï¼šæ‰€è°“IOCï¼Œå°±æ˜¯ç”±Spring IOCå®¹å™¨æ¥è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚<br>åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éƒ½æ˜¯ä½¿ç”¨newç›´æ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ‰€éœ€è¦çš„å¯¹è±¡æ˜¯ç”±è‡ªå·±å¹¶æ§åˆ¶çš„ï¼Œä½†æ˜¯æœ‰äº†IOCå®¹å™¨åæˆ‘ä»¬æ‰€éœ€è¦çš„å¯¹è±¡ç”±IOCå®¹å™¨è´Ÿè´£ç®¡ç†ï¼Œç”±åŸæ¥çš„ä¸»åŠ¨ç”Ÿæˆå¯¹è±¡ -&gt; ç”±IOCå®¹å™¨ç”Ÿæˆå¯¹è±¡ ï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼æ”¹å˜äº†ï¼Œè¿™å°±æ˜¯æ§åˆ¶åè½¬ã€‚<br>åœ¨IOCä¸­ï¼Œé€šè¿‡ä»¥é…ç½®xmlæ–‡ä»¶æˆ–æ˜¯æ³¨è§£çš„æ–¹å¼å°†æˆ‘ä»¬æ‰€éœ€è¦çš„ç±»å’Œç±»çš„è·¯å¾„è¿›è¡Œè¯´æ˜ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­é€šè¿‡<strong>ä¸Šä¸‹æ–‡æ¨¡å—</strong>è·å–xmlæ–‡ä»¶çš„è·¯å¾„ï¼Œç”±IOCå®¹å™¨æä¾›æ‰€éœ€è¦çš„ç±»<br><a href="https://zhuanlan.zhihu.com/p/64001753">IOCå‚è€ƒé“¾æ¥</a></p>
<h3 id="ä»€ä¹ˆæ˜¯AOP"><a href="#ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯AOP"></a><strong>ä»€ä¹ˆæ˜¯AOP</strong></h3><p>AOPï¼šAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤å’Œå¤„ç†çš„ä¸€ç§æŠ€æœ¯ã€‚ä½†å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¤šä¸ªæ¨¡å—é—´æœ‰æŸäº›åŠŸèƒ½ç›¸åŒçš„ä»£ç ï¼Œä½†æ˜¯æ¨¡å—é—´åˆä¸å­˜åœ¨ä¸€ç§å±‚æ¬¡é—´çš„å…³ç³»ï¼Œè¿™æ—¶å€™åŠŸèƒ½å¦‚æœéœ€è¦æ”¹å˜ï¼Œé‚£ä¹ˆéœ€è¦å¯¹æ¯ä¸ªç±»è¿›è¡Œæ”¹åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å·¥ç¨‹ï¼Œè¿™æ—¶å€™æ€ä¹ˆè§£å†³ä»£ç é‡å¤è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä½¿ç”¨AOPï¼ŒAOPæŠ€æœ¯åˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œè§£å‰–å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†ç±»é—´å…±åŒçš„è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªæ–°çš„å¯é‡ç”¨æ¨¡å—ä¸­ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ã€‚</p>
<h3 id="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"><a href="#AOPçš„å®ç°æ–¹å¼æœ‰ï¼š" class="headerlink" title="AOPçš„å®ç°æ–¹å¼æœ‰ï¼š"></a>AOPçš„å®ç°æ–¹å¼æœ‰ï¼š</h3><ul>
<li>é¢„ç¼–è¯‘ï¼šAspectJ</li>
<li>è¿è¡ŒæœŸåŠ¨æ€ä»£ç†ï¼ˆJDKåŠ¨æ€ä»£ç†ã€CGLibåŠ¨æ€ä»£ç†ï¼‰ï¼šSpringAOPã€JbossAOP</li>
</ul>
<h3 id="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#AOPçš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="AOPçš„ä¸»è¦åŠŸèƒ½ï¼š"></a>AOPçš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul>
<li>æ—¥å¿—è®°å½•</li>
<li>æ€§èƒ½ç»Ÿè®¡</li>
<li>å®‰å…¨æ§åˆ¶</li>
<li>äº‹åŠ¡å¤„ç†</li>
<li>å¼‚å¸¸å¤„ç†</li>
</ul>
<h3 id="AOPçš„ä¸»è¦æ„å›¾ï¼š"><a href="#AOPçš„ä¸»è¦æ„å›¾ï¼š" class="headerlink" title="AOPçš„ä¸»è¦æ„å›¾ï¼š"></a>AOPçš„ä¸»è¦æ„å›¾ï¼š</h3><p>å°†æ—¥å¿—è®°å½•ï¼Œæ€§èƒ½ç»Ÿè®¡ï¼Œå®‰å…¨æ§åˆ¶ï¼Œäº‹åŠ¡å¤„ç†ï¼Œå¼‚å¸¸å¤„ç†ç­‰ä»£ç ä»ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­åˆ’åˆ†å‡ºæ¥ï¼Œé€šè¿‡å¯¹è¿™äº›è¡Œä¸ºçš„åˆ†ç¦»ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°†å®ƒä»¬ç‹¬ç«‹åˆ°éæŒ‡å¯¼ä¸šåŠ¡é€»è¾‘çš„æ–¹æ³•ä¸­ï¼Œè¿›è€Œæ”¹å˜è¿™äº›è¡Œä¸ºçš„æ—¶å€™ä¸å½±å“ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä½¿ä¸šåŠ¡é€»è¾‘æ›´åŠ çº¯ç²¹</p>
<h3 id="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"><a href="#AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š" class="headerlink" title="AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š"></a><strong>AOPä¸­ä¸“ä¸šçš„æ¦‚å¿µå®šä¹‰ï¼š</strong></h3><ul>
<li><p>Aspect å£°æ˜ç±»ä¼¼äº Java ä¸­çš„ç±»å£°æ˜ï¼Œåœ¨ Aspect ä¸­ä¼šåŒ…å«ç€ä¸€äº› Pointcut ä»¥åŠç›¸åº”çš„ Adviceã€‚ åŸºäºé…ç½®çš„åˆ‡é¢åªæ”¯æŒsingletonæ¨¡å¼</p>
</li>
<li><p>Joint pointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šè¡¨ç¤ºåœ¨ç¨‹åºä¸­æ˜ç¡®å®šä¹‰çš„ç‚¹ï¼Œå…¸å‹çš„åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ï¼Œå¯¹ç±»æˆå‘˜çš„è®¿é—®ä»¥åŠå¼‚å¸¸å¤„ç†ç¨‹åºå—çš„æ‰§è¡Œç­‰ç­‰ï¼Œå®ƒè‡ªèº«è¿˜å¯ä»¥åµŒå¥—å…¶å®ƒ joint pointã€‚</p>
</li>
<li><p>Pointcutï¼ˆåˆ‡ç‚¹ï¼‰ï¼šè¡¨ç¤ºä¸€ç»„ joint pointï¼Œè¿™äº› joint point æˆ–æ˜¯é€šè¿‡é€»è¾‘å…³ç³»ç»„åˆèµ·æ¥ï¼Œæˆ–æ˜¯é€šè¿‡é€šé…ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹å¼é›†ä¸­èµ·æ¥ï¼Œå®ƒå®šä¹‰äº†ç›¸åº”çš„ Advice å°†è¦å‘ç”Ÿçš„åœ°æ–¹ã€‚</p>
</li>
<li><p>Adviceï¼ˆå¢å¼ºï¼‰ï¼šAdvice å®šä¹‰äº†åœ¨ Pointcut é‡Œé¢å®šä¹‰çš„ç¨‹åºç‚¹å…·ä½“è¦åšçš„æ“ä½œï¼Œæœ‰beforeã€afterã€after-returingã€after-throwingã€aroundäº”ç§å¢å¼ºã€‚</p>
</li>
<li><p>Introductionï¼ˆå¼•å…¥ï¼‰ï¼šåœ¨ä¸ä¿®æ”¹ç±»ä»£ç çš„å‰æä¸‹ï¼Œä¸ºç±»æ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚<br>å…è®¸ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡</p>
</li>
<li><p>Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šç»‡å…¥ Advice çš„ç›®æ ‡å¯¹è±¡ã€‚</p>
</li>
<li><p>AOP Proxyï¼ˆAOPä»£ç†ï¼‰ AOPæ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œç”¨æ¥å®ç°åˆ‡é¢å¥‘çº¦</p>
</li>
<li><p>Weavingï¼ˆç»‡å…¥ï¼‰ï¼šå°† Aspect å’Œå…¶ä»–å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åˆ›å»º Adviced object çš„è¿‡ç¨‹</p>
</li>
</ul>
<h3 id="ä¸ªäººç†è§£ï¼š"><a href="#ä¸ªäººç†è§£ï¼š" class="headerlink" title="ä¸ªäººç†è§£ï¼š"></a><strong>ä¸ªäººç†è§£ï¼š</strong></h3><ul>
<li><p>Joint pointï¼šæ˜¯æ‰€æœ‰å¯èƒ½è¢«ç»‡å…¥åˆ°Adviceä¸­çš„ç‚¹,ä¸€ä¸ªç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯è¿æ¥ç‚¹</p>
</li>
<li><p>Pointcutï¼šæä¾›ä¸€ç»„è§„åˆ™ï¼Œå°†ç¬¦åˆè§„åˆ™çš„ä¸€ç»„Joint pointç»‡å…¥åˆ°Adviceä¸­</p>
</li>
<li><p>Adviceï¼šAdviceè¯´æ˜äº†Pointcutä¸­Joint Pointä¸Šå°†è¦æ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œï¼Œå³ä¸€ä¸²ä»£ç </p>
</li>
<li><p>Aspectï¼šåˆ‡é¢æ˜¯Adviceå’ŒPointcutçš„ç»„åˆï¼Œæè¿°äº†åˆ‡ç‚¹çš„è¡Œä¸º</p>
</li>
</ul>
<h2 id="äºŒ-Springçš„ç»„æˆ"><a href="#äºŒ-Springçš„ç»„æˆ" class="headerlink" title="äºŒ.Springçš„ç»„æˆ"></a><strong><em>äºŒ.Springçš„ç»„æˆ</em></strong></h2><p><img src="/2020/09/22/Spring/SpringFramworkRuntime.png" alt="framework"></p>
<p><a href="https://www.cnblogs.com/jpwz/p/10556012.html">å‚è€ƒé“¾æ¥</a></p>
<p>springç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼Œä¸‹é¢ä»‹ç»springæ¯ä¸ªæ¨¡å—åŠå…¶åŠŸèƒ½</p>
<h3 id="Core-Container-æ ¸å¿ƒå®¹å™¨"><a href="#Core-Container-æ ¸å¿ƒå®¹å™¨" class="headerlink" title="Core Container æ ¸å¿ƒå®¹å™¨"></a><strong>Core Container æ ¸å¿ƒå®¹å™¨</strong></h3><p>Springæ ¸å¿ƒå®¹å™¨å»ºç«‹åœ¨Beansã€Coreã€Contextã€SpElæ¨¡å—ä¹‹ä¸Š</p>
<p>Beansæ¨¡å—æä¾›äº†BeanFactoryï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç»å…¸ä½“ç°ï¼Œæ‰€æœ‰è¢«Springç®¡ç†çš„å¯¹è±¡éƒ½ç§°ä¸ºBeans</p>
<p>Coreæ¨¡å—æä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬IOCå’Œã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰åŠŸèƒ½</p>
<p>Contextä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨Beanså’ŒCoreæ¨¡å—åŸºç¡€ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªæ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹å¼ï¼Œæ˜¯è®¿é—®å®šä¹‰å’Œé…ç½®ä¸­Beanså¯¹è±¡çš„åª’ä»‹ï¼ŒApplicationContextæ¥å£é€šè¿‡xmlæ–‡æœ¬çš„è·¯å¾„è®¿é—®é…ç½®ä¸­çš„beanså¯¹è±¡ã€‚</p>
<p>SpElæ˜¯Springè¡¨è¾¾å¼è¯­è¨€ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€å»æ”¯æŒè¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡</p>
<h3 id="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"><a href="#é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—" class="headerlink" title="é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—"></a><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹æ¨¡å—</strong></h3><p>AOPæ¨¡å—æä¾›äº†ç¬¦åˆAOPè¦æ±‚çš„é¢å‘åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼Œå…è®¸å®šä¹‰æ–¹æ³•æ‹¦æˆªå™¨å’Œåˆ‡å…¥ç‚¹ï¼Œå°†ä»£ç æŒ‰ç…§åŠŸèƒ½è¿›è¡Œåˆ†ç¦»ï¼Œæ˜¯çº¯Javaå®ç°</p>
<p>Aspectsæ¨¡å—æä¾›äº†AspectJçš„é›†æˆåŠŸèƒ½ï¼ŒAspectJæ˜¯ä¸€ä¸ªåŸºäºJavaè¯­è¨€çš„AOPæ¡†æ¶</p>
<p>Instrumentæ¨¡å—æä¾›äº†ç±»æ¤å…¥æ”¯æŒå’Œç±»åŠ è½½å™¨çš„å®ç°ï¼Œå¯åœ¨ç‰¹å®šçš„åº”ç”¨æœåŠ¡å™¨ä¸­ä½¿ç”¨</p>
<h3 id="æ•°æ®è®¿é—®æ¨¡å—"><a href="#æ•°æ®è®¿é—®æ¨¡å—" class="headerlink" title="æ•°æ®è®¿é—®æ¨¡å—"></a><strong>æ•°æ®è®¿é—®æ¨¡å—</strong></h3><p>JDBCã€DAOæ¨¡å—ï¼šJDBCæ¨¡å—æ˜¯å¯¹JDBCçš„æŠ½è±¡ï¼Œå‡å°‘JDBCç¼–ç¨‹çš„ä»£ç é‡</p>
<p>ORMæ¨¡å—ï¼šå°è£…äº†å¤§é‡çš„å¯¹è±¡å…³ç³»æ˜ å°„çš„API</p>
<h3 id="Webæ¨¡å—"><a href="#Webæ¨¡å—" class="headerlink" title="Webæ¨¡å—"></a><strong>Webæ¨¡å—</strong></h3><p>WebSocketæ¨¡å—ï¼šæä¾›WebScoketã€SockJSçš„å®ç°ï¼Œä»¥åŠå¯¹STOMPçš„æ”¯æŒ</p>
<p>Servletæ¨¡å—ï¼šä¹Ÿç§°ä¸ºSpring-webmvcæ¨¡å—ï¼ŒåŒ…å«äº†Springçš„MVCã€‚</p>
<p>Webæ¨¡å—ï¼šæä¾›åŸºæœ¬çš„Webå¼€å‘é›†æˆç‰¹æ€§ï¼Œæ¯”å¦‚å¤šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€ä½¿ç”¨Servletç›‘å¬å™¨æ¥åˆå§‹åŒ–Iocå®¹å™¨ä»¥åŠWebåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p>
<p>Portletæ¨¡å—ï¼šæä¾›äº†å¯¹åœ¨Portletç¯å¢ƒä¸­ä½¿ç”¨MVCçš„æ”¯æŒã€‚</p>
<!-- åº•å±‚æ˜¯Springçš„æ ¸å¿ƒå®¹å™¨ï¼ŒåŒ…æ‹¬Beanså®¹å™¨ã€ä¸Šä¸‹æ–‡ã€Springè¡¨è¾¾å¼å’Œæ ¸å¿ƒå·¥å…·ï¼Œæ˜¯Springæ¡†æ¶æœ€åŸºæœ¬çš„æ”¯æ’‘
ä¸­é—´å±‚æ˜¯Springçš„åŠŸèƒ½ç»„ä»¶
ä¸Šå±‚æ˜¯Springçš„å…·ä½“ä½¿ç”¨ -->]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ajaxç®€ä»‹</title>
    <url>/2020/10/13/ajax/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯ajax"><a href="#ä»€ä¹ˆæ˜¯ajax" class="headerlink" title="ä»€ä¹ˆæ˜¯ajax"></a><strong>ä»€ä¹ˆæ˜¯ajax</strong></h1><p>Ajaxå³â€œAsynchronous Javascript And XMLâ€(å¼‚æ­¥JavaScript å’ŒXML)ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAjaxå¯ä»¥ä½¿ç”¨ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ï¼ˆæ— åˆ·æ–°æŠ€æœ¯ï¼‰ã€‚ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨Ajaxï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…é¡»é‡è½½æ•´ä¸ªç½‘é¡µé¡µé¢ã€‚</p>
<p>ä½¿ç”¨ajaxï¼Œè¦åœ¨htmlæˆ–jspæ–‡ä»¶ä¸­åŠ ä¸Šå¯¹ajaxçš„å¼•ç”¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;s3.pstatp.com&#x2F;cdn&#x2F;expire-1-M&#x2F;jquery&#x2F;3.3.1&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>ä¸€ä¸ªå®Œæ•´çš„ajaxå¸¸ç”¨è¯·æ±‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;script&gt;<br>       function uservalidator() &#123;<br>           $.ajax(&#123;<br>           	&#x2F;&#x2F;è¯·æ±‚çš„urlåœ°å€<br>               url:&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;test&quot;,<br>               &#x2F;&#x2F;å‚æ•°å€¼ å¯ä»¥ä¼ é€’Jsonå­—ç¬¦ä¸²ç±»å‹ ä¹Ÿå¯ä»¥ä¼ é€’å¯¹è±¡ç±»å‹<br>               data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,<br>               &#x2F;&#x2F;å‚æ•°ç±»å‹<br>               &#x2F;&#x2F;dataType:&quot;json&quot;,<br>               &#x2F;&#x2F;è¯·æ±‚æ–¹å¼<br>               type:&quot;GET&quot;,<br>               &#x2F;&#x2F;å›è°ƒå‡½æ•°<br>               success:function (data) &#123;<br>                   $(&quot;#usermsg&quot;).html(data)<br>               &#125;<br>           &#125;)<br>       &#125;<br>   &lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥å°†ajaxæ¢æˆç›¸åº”çš„è¯·æ±‚æ–¹æ³•    $.get({â€¦})ã€$.post({â€¦}) ç­‰ç­‰</p>
<p>ajaxä¸mvcçš„äº¤äº’è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/13/ajax/process.jpg" alt="process"></p>
<h1 id="ajaxå’Œjsp"><a href="#ajaxå’Œjsp" class="headerlink" title="ajaxå’Œjsp"></a><strong>ajaxå’Œjsp</strong></h1><p>ä¸ºä»€ä¹ˆç°åœ¨å‰åç«¯çš„æ•°æ®äº¤äº’åŸºæœ¬ä¸Šä¸ç”¨jspè€Œä½¿ç”¨html+ajaxï¼Ÿ</p>
<p>é¦–å…ˆè¦ç†è§£jspçš„åŸç†å’Œajaxçš„åŸç†</p>
<ul>
<li>jspåŸç†ï¼š</li>
</ul>
<p>jspçš„æœ¬è´¨æ˜¯servletï¼ŒæœåŠ¡å™¨é€šè¿‡ç›¸åº”çš„è¯·æ±‚æ‰¾åˆ°jspé¡µé¢å¹¶å°†jspé¡µé¢è½¬æ¢æˆjavaç¨‹åºï¼ˆservletï¼‰ï¼Œåå°æŠŠè¿”å›çš„æ•°æ®é€šè¿‡è¿™æ®µjavaä»£ç å°†ç»“æœæŒ‰ç…§htmlçš„æ ¼å¼è¾“å‡ºç»™å‰ç«¯æµè§ˆå™¨æ˜¾ç¤ºã€‚åœ¨jspä¸­ï¼Œhtmlå’Œjavaä»£ç ç›¸ç»“åˆ</p>
<ul>
<li>ajaxåŸç†ï¼š</li>
</ul>
<p>æœåŠ¡å™¨é€šè¿‡jsonç›´æ¥æŠŠæ•°æ®è¿”å›ç»™å‰ç«¯æµè§ˆå™¨ï¼Œè€Œæµè§ˆå™¨ä¸­ä½¿ç”¨jsè§£ææ•°æ®ï¼Œå¹¶æ”¹å˜æµè§ˆå™¨ä¸­çš„å†…å®¹</p>
<ul>
<li>jspçš„ç¼ºç‚¹ï¼š</li>
</ul>
<p>1.åŠ¨æ€å’Œé™æ€èµ„æºæ”¾åœ¨ä¸€èµ·ï¼Œä¸€æ—¦æœåŠ¡å™¨å‡ºç°çŠ¶å†µï¼Œå‰åå°ä¸€èµ·ç©å®Œï¼Œç”¨æˆ·ä½“éªŒæå·®ã€‚</p>
<p>2.ä¸€æ—¦jspå‡ºç°äº†é—®é¢˜ï¼Œå°±éœ€è¦å‰ç«¯åç«¯å‘å¼€äººå‘˜ä¸€å—æ¥åˆ†æè§£å†³ï¼Œæ•ˆç‡ä½ã€‚</p>
<p>3.jspæ— æ³•ä½¿ç”¨nginxç­‰ã€‚</p>
<p>4.jspé¡µé¢å¤æ‚ï¼Œéš¾ä»¥ä¿®æ”¹ã€‚</p>
<p>5.ç¬¬ä¸€æ¬¡åŠ è½½jspéœ€è¦ç¼–è¯‘æˆservletï¼Œæ—¶é—´ä¹…ï¼Œè€Œä¸”ä¸šåŠ¡é‡å¤§çš„æ—¶å€™ï¼Œjspè´Ÿæ‹…å¤ªå¤§ã€‚</p>
<p>6.jspæŠ€æœ¯æ— æ³•åŠ¨æ€çš„å±•ç¤ºæ•°æ®ï¼Œè¿”å›æ•°æ®çš„æ—¶å€™éƒ½æ˜¯æ•´ä¸ªé¡µé¢ä¸€èµ·è¿”å›ï¼Œæ²¡æœ‰åŠæ³•åšåˆ°å‰åç«¯åˆ†ç¦»</p>
<p>ç”±äºjspçš„è¿™äº›ç¼ºç‚¹ï¼Œå‰åç«¯åˆ†ç¦»çš„æ€æƒ³å¾ˆå¿«å°±å¼€å§‹æµè¡Œäº†</p>
<p>** é¡¹ç›®å¼€å‘çš„è¶‹åŠ¿ï¼šå®ç°å‰åç«¯çš„çœŸæ­£è§£è€¦**</p>
<p>ä»¥å‰çš„è€é¡¹ç›®ä¸­ï¼š</p>
<p>å®¢æˆ·ç«¯è¯·æ±‚ -&gt; æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ -&gt; ä¸šåŠ¡é€»è¾‘ -&gt; è§£æjspæ–‡ä»¶ -&gt; è¿”å›jsp</p>
<p>æ–°çš„æ–¹å¼ï¼š</p>
<p>å®¢æˆ·ç«¯è¯·æ±‚ -&gt; htmlé¡µé¢è°ƒç”¨æ¥å£äº§ç”Ÿæ•°æ®ï¼ˆajaxã€jsonï¼‰ -&gt; htmlåŠ¨æ€æ”¹å˜å†…å®¹</p>
<p>å‰åç«¯å„ç®¡å„ï¼Œè¦è¿›è¡Œæ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œåªè¦ä½¿ç”¨å‰åç«¯çº¦å®šå¥½çš„æ¥å£è¿›è¡Œäº¤äº’å³å¯</p>
<p><strong>ä½†æ˜¯jspå’Œajaxå¹¶ä¸å†²çªï¼Œå¾ˆå¤šç½‘ç«™å¾€å¾€å°†ä¸¤è€…ç»“åˆï¼Œæ¯”å¦‚ï¼Œé¦–å±çš„æ¸²æŸ“ä½¿ç”¨jspï¼Œæ•°æ®çš„äº¤äº’ä½¿ç”¨ajax</strong></p>
<h1 id="ajaxä¸mvcäº¤äº’å®ä¾‹"><a href="#ajaxä¸mvcäº¤äº’å®ä¾‹" class="headerlink" title="ajaxä¸mvcäº¤äº’å®ä¾‹"></a><strong>ajaxä¸mvcäº¤äº’å®ä¾‹</strong></h1><p>æ¨¡ä»¿æ³¨å†Œé¡µé¢ä¸­è´¦å·å’Œå¯†ç çš„æœ‰æ•ˆæ€§æ£€éªŒ</p>
<p>Userç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class User &#123;<br><br>    @NotBlank(message &#x3D; &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)<br>    private String name;<br>    @NotBlank(message &#x3D; &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)<br>    @Length(min &#x3D; 3,max &#x3D; 8,message &#x3D; &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)<br>    private String passwords;<br><br>    public String getPasswords() &#123;<br>        return passwords;<br>    &#125;<br><br>    public String getName() &#123;<br>        return name;<br>    &#125;<br><br>    public void setPasswords(String passwords) &#123;<br><br>        this.passwords &#x3D; passwords;<br>    &#125;<br><br>    public void setName(String name) &#123;<br>        this.name &#x3D; name;<br>    &#125;<br><br>    public String toString()&#123;<br>        return &quot;[name&#x3D;&quot;+name+&quot;,passwords&#x3D;&quot;+passwords+&quot;]&quot;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>UserControllerï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class UserController &#123;<br><br>    @RequestMapping(&quot;&#x2F;test&quot;)<br>    @ResponseBody<br>    public String test(User user)&#123;<br>&#x2F;&#x2F;        System.out.println(user+&quot; &quot;+passwords);<br>        System.out.println(user);<br>        String msg &#x3D; &quot;&quot;;<br>        if(user.getName()!&#x3D;null)&#123;<br>            if(user.getName().equals(&quot;123&quot;))&#123;<br>                msg &#x3D;  &quot;ok&quot;;<br>            &#125;else&#123;<br>                msg &#x3D;  &quot;failed&quot;;<br>            &#125;<br>        &#125;<br>        if(user.getPasswords()!&#x3D;null)&#123;<br>            if(user.getPasswords().equals(&quot;1233&quot;))&#123;<br>                msg &#x3D;  &quot;ok&quot;;<br>            &#125;else&#123;<br>                msg &#x3D; &quot;failed&quot;;<br>            &#125;<br>        &#125;<br>        return msg;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>jspæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;s3.pstatp.com&#x2F;cdn&#x2F;expire-1-M&#x2F;jquery&#x2F;3.3.1&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>    &lt;script&gt;<br>        function uservalidator() &#123;<br>            $.ajax(&#123;<br>                url:&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;test&quot;,<br>                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,<br>                success:function (data) &#123;<br>                    $(&quot;#usermsg&quot;).html(data)<br>                &#125;<br>            &#125;)<br>        &#125;<br>    &lt;&#x2F;script&gt;<br>    &lt;script&gt;<br>        function passwordsvalidator() &#123;<br>            $.ajax(&#123;<br>                url:&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;test&quot;,<br>                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,<br>                success:function (data) &#123;<br>                    $(&quot;#pswmsg&quot;).html(data)<br>                &#125;<br>            &#125;)<br>        &#125;<br>    &lt;&#x2F;script&gt;<br>    &lt;form&gt;<br>        ç”¨æˆ·åï¼š&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;user&quot; id&#x3D;&quot;user&quot; onblur&#x3D;&quot;uservalidator()&quot;&gt;&lt;br&gt;<br>        &lt;p id&#x3D;&quot;usermsg&quot;&gt;&lt;&#x2F;p&gt;<br>        å¯†ç ï¼š&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;passwords&quot; id&#x3D;&quot;passwords&quot; onblur&#x3D;&quot;passwordsvalidator()&quot;&gt;<br>        &lt;p id&#x3D;&quot;pswmsg&quot;&gt;&lt;&#x2F;p&gt;<br>    &lt;&#x2F;form&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨sqlè¯­å¥</title>
    <url>/2020/10/21/dboperator/</url>
    <content><![CDATA[<p>æŒæ¡sqlè¯­å¥æ˜¯åç«¯ç¨‹åºå‘˜ä¸æ•°æ®åº“æ‰“äº¤é“çš„å¿…å¤‡æŠ€èƒ½ï¼Œä¸‹é¢ç®€å•å›é¡¾ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„sqlè¯­å¥</p>
<h1 id="å¯¹æ•°æ®åº“çš„æ“ä½œ"><a href="#å¯¹æ•°æ®åº“çš„æ“ä½œ" class="headerlink" title="å¯¹æ•°æ®åº“çš„æ“ä½œ"></a><strong>å¯¹æ•°æ®åº“çš„æ“ä½œ</strong></h1><h2 id="ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼š"><a href="#ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼š" class="headerlink" title="ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼š"></a><strong>ç»ˆç«¯è¿›å…¥æ•°æ®åº“ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">mysql -u root -p<br></code></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š"></a><strong>æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">show databases;<br></code></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ•°æ®åº“ï¼š"><a href="#åˆ›å»ºæ•°æ®åº“ï¼š" class="headerlink" title="åˆ›å»ºæ•°æ®åº“ï¼š"></a><strong>åˆ›å»ºæ•°æ®åº“ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">create database dbname;<br></code></pre></td></tr></table></figure>
<h2 id="åˆ é™¤æ•°æ®åº“ï¼š"><a href="#åˆ é™¤æ•°æ®åº“ï¼š" class="headerlink" title="åˆ é™¤æ•°æ®åº“ï¼š"></a><strong>åˆ é™¤æ•°æ®åº“ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">drop database dbname;<br></code></pre></td></tr></table></figure>
<h2 id="é€‰æ‹©æ•°æ®åº“ï¼š"><a href="#é€‰æ‹©æ•°æ®åº“ï¼š" class="headerlink" title="é€‰æ‹©æ•°æ®åº“ï¼š"></a><strong>é€‰æ‹©æ•°æ®åº“ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">use dbname;<br></code></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼š"><a href="#æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼š" class="headerlink" title="æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼š"></a><strong>æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">show tables;<br></code></pre></td></tr></table></figure>
<h1 id="å¯¹è¡¨ç»“æ„çš„æ“ä½œ"><a href="#å¯¹è¡¨ç»“æ„çš„æ“ä½œ" class="headerlink" title="å¯¹è¡¨ç»“æ„çš„æ“ä½œ"></a><strong>å¯¹è¡¨ç»“æ„çš„æ“ä½œ</strong></h1><h2 id="æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼š"><a href="#æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼š" class="headerlink" title="æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼š"></a><strong>æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">desc tablename;<br></code></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥ï¼š"><a href="#æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥ï¼š" class="headerlink" title="æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥ï¼š"></a><strong>æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">show create table newtable;<br></code></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºè¡¨ï¼š"><a href="#åˆ›å»ºè¡¨ï¼š" class="headerlink" title="åˆ›å»ºè¡¨ï¼š"></a><strong>åˆ›å»ºè¡¨ï¼š</strong></h2><pre><code>create table table_name(
å­—æ®µå1 æ•°æ®ç±»å‹1 å¯é€‰çš„çº¦æŸæ¡ä»¶1,
å­—æ®µå2 æ•°æ®ç±»å‹2 å¯é€‰çš„çº¦æŸæ¡ä»¶2,
...
ï¼‰ï¼›</code></pre>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">create table newtable(<br>id int primary key not null,<br>name varchar(10) not null,<br>age int<br>);<br></code></pre></td></tr></table></figure>
<h2 id="åˆ é™¤è¡¨ï¼š"><a href="#åˆ é™¤è¡¨ï¼š" class="headerlink" title="åˆ é™¤è¡¨ï¼š"></a><strong>åˆ é™¤è¡¨ï¼š</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">drop table newtable;<br></code></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹è¡¨ï¼š"><a href="#ä¿®æ”¹è¡¨ï¼š" class="headerlink" title="ä¿®æ”¹è¡¨ï¼š"></a><strong>ä¿®æ”¹è¡¨ï¼š</strong></h2><p>æ·»åŠ å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable add address varchar(10);<br></code></pre></td></tr></table></figure>
<p>é‡å‘½åå­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable change address addr varchar(10);<br></code></pre></td></tr></table></figure>
<p>ä¿®æ”¹å­—æ®µç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable modify id varchar(10);<br></code></pre></td></tr></table></figure>
<p>ä¿®æ”¹å­—æ®µçº¦æŸï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable modify id int;<br></code></pre></td></tr></table></figure>
<p>åˆ é™¤å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable drop addr;<br></code></pre></td></tr></table></figure>
<p>è®¾ç½®é»˜è®¤å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable alter age set default 0;<br></code></pre></td></tr></table></figure>
<p>åˆ é™¤é»˜è®¤å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">alter table newtable alter age drop default;<br></code></pre></td></tr></table></figure>
<h1 id="å¯¹è¡¨å†…å®¹çš„å¢åˆ æŸ¥æ”¹"><a href="#å¯¹è¡¨å†…å®¹çš„å¢åˆ æŸ¥æ”¹" class="headerlink" title="å¯¹è¡¨å†…å®¹çš„å¢åˆ æŸ¥æ”¹"></a><strong>å¯¹è¡¨å†…å®¹çš„å¢åˆ æŸ¥æ”¹</strong></h1><h2 id="åŸºæœ¬æŸ¥è¯¢è¯­å¥"><a href="#åŸºæœ¬æŸ¥è¯¢è¯­å¥" class="headerlink" title="åŸºæœ¬æŸ¥è¯¢è¯­å¥"></a><strong>åŸºæœ¬æŸ¥è¯¢è¯­å¥</strong></h2><p><strong>æŸ¥è¯¢è¡¨çš„æ‰€æœ‰å­—æ®µï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from tablename;<br></code></pre></td></tr></table></figure>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable<br></code></pre></td></tr></table></figure>
<p><strong>æŸ¥è¯¢æŒ‡å®šçš„å­—æ®µï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select n1,n2,n3,... from tablename;	<br></code></pre></td></tr></table></figure>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select id,name from newtable<br></code></pre></td></tr></table></figure>
<p><strong>aså…³é”®å­—ï¼š</strong></p>
<p>ç»™å­—æ®µèµ·åˆ«åï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select id as å­¦å·,name as å§“å from newtable<br></code></pre></td></tr></table></figure>
<p>ç»™è¡¨èµ·åˆ«åï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select t.id,t.name from newtable as t;<br></code></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶æŸ¥è¯¢è¯­å¥"><a href="#æ¡ä»¶æŸ¥è¯¢è¯­å¥" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢è¯­å¥"></a><strong>æ¡ä»¶æŸ¥è¯¢è¯­å¥</strong></h2><h3 id="ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢"><a href="#ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢"></a><strong>ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢</strong></h3><p>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š= &gt; â‰¥ &lt; â‰¤ !=</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select id,name from newtable where age&gt;&#x3D;18<br><br>select id,name from newtable where name&#x3D;&quot;å¼ ä¸‰&quot;<br></code></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢"><a href="#ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢"></a><strong>ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦è¿›è¡ŒæŸ¥è¯¢</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select id,name from newtable where id&gt;1235 and age&gt;18<br><br>select * from newtable where age&gt;18 or sex&#x3D;&#39;ç”·&#39;<br></code></pre></td></tr></table></figure>
<h3 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a><strong>æ¨¡ç³ŠæŸ¥è¯¢</strong></h3><p>æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨likeè¿›è¡ŒæŸ¥è¯¢ï¼Œ%ä»£è¡¨ä»»æ„å¤šä¸ªå…³é”®å­— ä¸‹åˆ’çº¿_ è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦</p>
<p>ä¸€èˆ¬æ¨¡ç³ŠæŸ¥è¯¢è¯­å¥å¦‚ï¼šSELECT å­—æ®µ FROM è¡¨ WHERE æŸå­—æ®µ [not]Like æ¡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where name like &quot;å¼ %&quot;<br><br>select * from newtable where name like &quot;_ä¸€&quot;<br></code></pre></td></tr></table></figure>
<p>å¦‚æœå­—æ®µåå­—ä¸­å­˜åœ¨ ä¸‹åˆ’çº¿_ æˆ–è€… ç™¾åˆ†å·%ï¼Œæ­¤æ—¶è¦è¿›å°†å­—ç¬¦è½¬ä¹‰ï¼Œè½¬ä¹‰è¦åœ¨è¯­å¥åé¢åŠ ä¸Š escapeâ€™â€™</p>
<p>å¦‚ï¼Œè¡¨ä¸­å­—æ®µå­˜åœ¨ä¸‹åˆ’çº¿ï¼Œåˆ™æŸ¥è¯¢ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where addr like &#39;%&#x2F;_%&#39; escape &#39;&#x2F;&#39;<br></code></pre></td></tr></table></figure>
<p>[]ï¼šè¡¨ç¤ºåŒ¹é…æ‹¬å·ä¸­æ‰€åˆ—å­—ç¬¦çš„ä»»æ„ä¸€ä¸ªï¼Œç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼</p>
<p> å¦‚æœ[ ] å†…æœ‰ä¸€ç³»åˆ—å­—ç¬¦ï¼ˆ01234ã€abcdeä¹‹ç±»çš„ï¼‰åˆ™å¯ç•¥å†™ä¸ºâ€œ0-4â€ã€â€œa-eâ€ </p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where name like &#39;å¼ [ä¸‰ä¸ƒå…«]&#39;;<br></code></pre></td></tr></table></figure>
<p>[^ ]è¡¨ç¤ºè¡¨ç¤ºä¸åœ¨æ‹¬å·æ‰€åˆ—ä¹‹å†…çš„å•ä¸ªå­—ç¬¦ã€‚</p>
<h3 id="èŒƒå›´æŸ¥è¯¢"><a href="#èŒƒå›´æŸ¥è¯¢" class="headerlink" title="èŒƒå›´æŸ¥è¯¢"></a><strong>èŒƒå›´æŸ¥è¯¢</strong></h3><p>èŒƒå›´æŸ¥è¯¢åˆ†ä¸ºè¿ç»­æŸ¥è¯¢å’Œéè¿ç»­æŸ¥è¯¢</p>
<p>inå…³é”®å­—è¡¨ç¤ºä¸€ä¸ªéè¿ç»­çš„èŒƒå›´</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where age in(18,19,20);<br></code></pre></td></tr></table></figure>
<p>between and è¡¨ç¤ºåœ¨ä¸€ä¸ªè¿ç»­çš„èŒƒå›´å†…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where age between 17 and 22;<br></code></pre></td></tr></table></figure>

<h3 id="ç©ºåˆ¤æ–­"><a href="#ç©ºåˆ¤æ–­" class="headerlink" title="ç©ºåˆ¤æ–­"></a><strong>ç©ºåˆ¤æ–­</strong></h3><p>åˆ¤æ–­å­—æ®µæ˜¯å¦ä¸ºç©ºï¼š is null</p>
<p>ä¸ä¸ºç©ºï¼šis not null</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable where addr is not null<br></code></pre></td></tr></table></figure>
<h3 id="existsè¯­å¥"><a href="#existsè¯­å¥" class="headerlink" title="existsè¯­å¥"></a><strong>existsè¯­å¥</strong></h3><p>ä½¿ç”¨existsåˆ¤æ–­æŸè¡Œæ˜¯å¦å­˜åœ¨</p>
<h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a><strong>æ’åº</strong></h3><p>æ’åºçš„æŸ¥è¯¢è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from è¡¨å order by åˆ—1 asc|desc [,åˆ—2 asc|desc,...]<br></code></pre></td></tr></table></figure>
<p>ascä¸ºå‡åºï¼Œdescä¸ºé™åºï¼Œé»˜è®¤ä¸ºasc</p>
<p>order by è¯­å¥åªèƒ½å¯¹æœ€ç»ˆç»“æœè¿›è¡Œæ’åº</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable order by id asc,age desc;<br></code></pre></td></tr></table></figure>
<h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a><strong>åˆ†é¡µ</strong></h3><p>è·å–æ‰€æœ‰æ•°æ®çš„å‰n-mæ¡ï¼šselect * from è¡¨å limit start=n,count=mï¼Œstarté»˜è®¤ä¸º0</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from newtable limit 1,5;<br></code></pre></td></tr></table></figure>
<h3 id="å–å­—æ®µå€¼å”¯ä¸€"><a href="#å–å­—æ®µå€¼å”¯ä¸€" class="headerlink" title="å–å­—æ®µå€¼å”¯ä¸€"></a><strong>å–å­—æ®µå€¼å”¯ä¸€</strong></h3><p>distinct å…³é”®å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select distinct age from newtable<br></code></pre></td></tr></table></figure>
<h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a><strong>èšåˆå‡½æ•°</strong></h3><h4 id="æ±‚æ€»æ•°ï¼š"><a href="#æ±‚æ€»æ•°ï¼š" class="headerlink" title="æ±‚æ€»æ•°ï¼š"></a><strong>æ±‚æ€»æ•°ï¼š</strong></h4><p>count( * )ï¼šç»Ÿè®¡å…ƒç»„ä¸ªæ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select count(*) from newtable<br></code></pre></td></tr></table></figure>
<p>count([distinct|all]åˆ—å)ï¼šç»Ÿè®¡æŸåˆ—å€¼çš„ä¸ªæ•°</p>
<h4 id="æ±‚æœ€å¤§å€¼ï¼š"><a href="#æ±‚æœ€å¤§å€¼ï¼š" class="headerlink" title="æ±‚æœ€å¤§å€¼ï¼š"></a><strong>æ±‚æœ€å¤§å€¼ï¼š</strong></h4><p>max(æŸåˆ—)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select max(age) from newtable<br></code></pre></td></tr></table></figure>
<h4 id="æ±‚æœ€å°å€¼ï¼š"><a href="#æ±‚æœ€å°å€¼ï¼š" class="headerlink" title="æ±‚æœ€å°å€¼ï¼š"></a><strong>æ±‚æœ€å°å€¼ï¼š</strong></h4><p>min(æŸåˆ—)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select min(age) from newtable<br></code></pre></td></tr></table></figure>
<h4 id="æ±‚å’Œï¼š"><a href="#æ±‚å’Œï¼š" class="headerlink" title="æ±‚å’Œï¼š"></a><strong>æ±‚å’Œï¼š</strong></h4><p>sum(æŸåˆ—)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sum(age) from newtable<br></code></pre></td></tr></table></figure>
<h4 id="å¹³å‡å€¼"><a href="#å¹³å‡å€¼" class="headerlink" title="å¹³å‡å€¼"></a><strong>å¹³å‡å€¼</strong></h4><p>avg(æŸåˆ—)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select avg(age) from newtable<br></code></pre></td></tr></table></figure>
<h3 id="åˆ†ç»„æ“ä½œ"><a href="#åˆ†ç»„æ“ä½œ" class="headerlink" title="åˆ†ç»„æ“ä½œ"></a><strong>åˆ†ç»„æ“ä½œ</strong></h3><p>åˆ†ç»„æ“ä½œä½¿ç”¨group byï¼Œå°†æŸ¥è¯¢è¿”å›çš„ç»“æœé›†è¿›è¡Œä¸€ä¸ªåˆ†ç»„ï¼Œå¹¶å±•ç¤ºå„ä¸ªåˆ†ç»„ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„è®°å½•ï¼Œå°†åˆ†ç»„ä¸­å…¶ä½™æˆå‘˜éšè—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select avg(age) from newtable group by sex<br></code></pre></td></tr></table></figure>
<h3 id="havingå­å¥"><a href="#havingå­å¥" class="headerlink" title="havingå­å¥"></a><strong>havingå­å¥</strong></h3><p>HAVING å­å¥æ˜¯ä¸€ä¸ªé«˜é…ç‰ˆçš„ where å­å¥ï¼Œæ— è®ºæ˜¯æˆ‘ä»¬çš„åˆ†ç»„æˆ–æ˜¯æ’åºï¼Œéƒ½æ˜¯åŸºäºä»¥è¿”å›çš„ç»“æœé›†ï¼Œä¹Ÿå°±æ˜¯è¯´ where å­å¥çš„ç­›é€‰å·²ç»ç»“æŸã€‚<br>å¦‚æœæˆ‘ä»¬å¯¹æ’åºã€åˆ†ç»„åçš„æ•°æ®é›†ä¾ç„¶æœ‰ç­›é€‰éœ€æ±‚ï¼Œå°±è¦ç”¨åˆ° HAVING å­å¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select avg(age) as avg_age from newtable group by sex<br>having avg_age &gt; 20;<br></code></pre></td></tr></table></figure>
<h2 id="æ’å…¥è¯­å¥"><a href="#æ’å…¥è¯­å¥" class="headerlink" title="æ’å…¥è¯­å¥"></a><strong>æ’å…¥è¯­å¥</strong></h2><p>æ’å…¥è¯­å¥çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼šinsert into tablename(â€¦) values(â€¦);</p>
<p>å…¨åˆ—æ’å…¥ï¼šå€¼çš„é¡ºåºä¸è¡¨ç»“æ„å­—æ®µçš„é¡ºåºå®Œå…¨ä¸€ä¸€å¯¹åº”</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">insert into newtable values (1241,&quot;å¼ ä¸‰&quot;,22,&quot;ç”·&quot;,&quot;åŒ—äº¬å¸‚_&quot;);<br></code></pre></td></tr></table></figure>
<p>éƒ¨åˆ†åˆ—æ’å…¥ï¼šå€¼çš„é¡ºåºä¸ç»™å‡ºçš„åˆ—é¡ºåºå¯¹åº”ï¼Œæ­¤æ—¶éœ€è¦æ ¹æ®å®é™…çš„æ•°æ®çš„ç‰¹ç‚¹ å¡«å†™å¯¹åº”å­—æ®µåˆ—è¡¨</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">insert into newtable(id,name,sex) values (1242,&quot;å¼ ä¸‰&quot;,&quot;ç”·&quot;);<br></code></pre></td></tr></table></figure>
<p>å…¨åˆ—å¤šè¡Œæ’å…¥ï¼š</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">insert into newtable values (1245,&quot;å¼ ä¸‰&quot;,22,&quot;ç”·&quot;,&quot;åŒ—äº¬å¸‚_&quot;),(1246,&quot;å¼ ä¸‰&quot;,22,&quot;ç”·&quot;,&quot;åŒ—äº¬å¸‚_&quot;);<br></code></pre></td></tr></table></figure>
<p>éƒ¨åˆ†åˆ—å¤šè¡Œæ’å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">insert into newtable(id,name,age) values(1222,&quot;li&quot;,21),(1223,&quot;zhang&quot;,22);<br></code></pre></td></tr></table></figure>
<h2 id="åˆ é™¤è¯­å¥"><a href="#åˆ é™¤è¯­å¥" class="headerlink" title="åˆ é™¤è¯­å¥"></a><strong>åˆ é™¤è¯­å¥</strong></h2><p>åˆ é™¤è¯­å¥çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼šdelete from tablename where æ¡ä»¶</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">delete from newtable where id&#x3D;1242 or id&#x3D;1241<br></code></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹è¯­å¥"><a href="#ä¿®æ”¹è¯­å¥" class="headerlink" title="ä¿®æ”¹è¯­å¥"></a><strong>ä¿®æ”¹è¯­å¥</strong></h2><p>ä¿®æ”¹è¯­å¥çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼šupdate tablename set åˆ—1=å€¼1,åˆ—2=å€¼2â€¦ where æ¡ä»¶</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">update newtable set name&#x3D;&quot;èœé€¼&quot;,age&#x3D;21 where id&#x3D;1246;<br></code></pre></td></tr></table></figure>
<h1 id="å¤šè¡¨æŸ¥è¯¢æ“ä½œ"><a href="#å¤šè¡¨æŸ¥è¯¢æ“ä½œ" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢æ“ä½œ"></a><strong>å¤šè¡¨æŸ¥è¯¢æ“ä½œ</strong></h1><p>åˆ›å»ºå­¦ç”Ÿè¡¨stuã€è¯¾ç¨‹è¡¨courseã€å­¦ç”Ÿé€‰è¯¾è¡¨sc</p>
<p>stu:</p>
<p><img src="/2020/10/21/dboperator/stu.png" alt="stu"></p>
<p>course:</p>
<p><img src="/2020/10/21/dboperator/course.png" alt="course"></p>
<p>sc:</p>
<p><img src="/2020/10/21/dboperator/sc.png" alt="sc"></p>
<h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a><strong>è¿æ¥æŸ¥è¯¢</strong></h2><p>è¿æ¥æŸ¥è¯¢çš„whereå­å¥ä¸­ç”¨æ¥è¿æ¥ä¸¤ä¸ªè¡¨çš„æ¡ä»¶ç§°ä¸º è¿æ¥æ¡ä»¶</p>
<p>ä¸»è¦çš„è¿æ¥æ¡ä»¶ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œä¸»è¦æœ‰ = &gt; &lt; â‰¥ â‰¤ !=ç­‰</p>
<p>ä¸€èˆ¬æ ¼å¼ä¸ºï¼š[table1] c1 æ¯”è¾ƒè¿ç®—ç¬¦ [table2] c2</p>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰ä¿®è¯¾ç¨‹çš„æƒ…å†µ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sum(ccredit)<br>from sc,course<br>where sc.sno&#x3D;&#39;201215121&#39; and sc.cno&#x3D;course.cno<br></code></pre></td></tr></table></figure>

<p>æŸ¥è¯¢é€‰ä¿®2å·è¯¾ç¨‹ä¸”æˆç»©åœ¨80åˆ†ä»¥ä¸Šçš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·å’Œå§“å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select stu.sno,stu.sname<br>from stu,sc<br>where stu.sno&#x3D;sc.sno and sc.cno&#x3D;&#39;2&#39; and sc.grade&gt;80;<br><br></code></pre></td></tr></table></figure>
<h2 id="è‡ªèº«è¿æ¥"><a href="#è‡ªèº«è¿æ¥" class="headerlink" title="è‡ªèº«è¿æ¥"></a><strong>è‡ªèº«è¿æ¥</strong></h2><p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢æ¯ä¸€é—¨è¯¾çš„é—´æ¥å…ˆä¿®è¯¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select first.cno,second.cpno<br>from course first,course second<br>where first.cpno &#x3D; second.cno;<br></code></pre></td></tr></table></figure>

<h2 id="å¤šè¡¨è¿æ¥"><a href="#å¤šè¡¨è¿æ¥" class="headerlink" title="å¤šè¡¨è¿æ¥"></a><strong>å¤šè¡¨è¿æ¥</strong></h2><p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å­¦å·ã€å§“åã€é€‰ä¿®çš„è¯¾ç¨‹ååŠæˆç»©</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select stu.sno,stu.sname,course.cno,sc.grade<br>from stu,course,sc<br>where stu.sno&#x3D;sc.sno and course.cno &#x3D; sc.cno<br><br></code></pre></td></tr></table></figure>
<h2 id="åµŒå¥—æŸ¥è¯¢"><a href="#åµŒå¥—æŸ¥è¯¢" class="headerlink" title="åµŒå¥—æŸ¥è¯¢"></a><strong>åµŒå¥—æŸ¥è¯¢</strong></h2><p>ä¸€ä¸ªselect-from-whereè¯­å¥ç§°ä¸ºä¸€ä¸ªæŸ¥è¯¢å—ï¼Œå°†ä¸€ä¸ªæŸ¥è¯¢å—æ”¾åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢å—çš„whereå­å¥æˆ–havingçŸ­è¯­çš„æ¡ä»¶ä¸­ç§°ä¸ºåµŒå¥—æŸ¥è¯¢</p>
<p>åµŒå¥—æŸ¥è¯¢ä¸­ï¼Œå­æŸ¥è¯¢çš„ç»“æœå¾€å¾€æ˜¯ä¸€ä¸ªé›†åˆï¼Œæ‰€ä»¥è°“è¯inæ˜¯åµŒå¥—æŸ¥è¯¢ä¸­æœ€å¸¸ä½¿ç”¨çš„è°“è¯</p>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢ä¸â€œåˆ˜æ™¨â€åœ¨åŒä¸€ä¸ªç³»çš„å­¦ç”Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select *<br>from stu<br>where sdept in <br>(select sdept<br>from stu<br>where sname&#x3D;&quot;åˆ˜æ™¨&quot;);<br></code></pre></td></tr></table></figure>

<p>æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹åä¸ºâ€œä¿¡æ¯ç³»ç»Ÿâ€çš„å­¦ç”Ÿå­¦å·å’Œå§“å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sno,sname<br>from stu<br>where sno in <br>	(select sno<br>	from sc<br>	where sc.cno in<br>		(select course.cno<br>		from course<br>		where course.cname&#x3D;&quot;ä¿¡æ¯ç³»ç»Ÿ&quot;));<br></code></pre></td></tr></table></figure>

<p>è‹¥é‡‡ç”¨è¿æ¥æŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select stu.sno,stu.sname<br>from stu,sc,course<br>where course.cname&#x3D;&quot;ä¿¡æ¯ç³»ç»Ÿ&quot; and course.cno &#x3D; sc.cno and stu.sno &#x3D; sc.sno;<br></code></pre></td></tr></table></figure>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œèƒ½ä½¿ç”¨è¿æ¥æŸ¥è¯¢å°½é‡ä½¿ç”¨è¿æ¥æŸ¥è¯¢</p>
<h3 id="å¸¦æœ‰anyã€allè°“è¯çš„å­æŸ¥è¯¢"><a href="#å¸¦æœ‰anyã€allè°“è¯çš„å­æŸ¥è¯¢" class="headerlink" title="å¸¦æœ‰anyã€allè°“è¯çš„å­æŸ¥è¯¢"></a><strong>å¸¦æœ‰anyã€allè°“è¯çš„å­æŸ¥è¯¢</strong></h3><blockquote>
<p>any å¤§äºå­æŸ¥è¯¢ä¸­ä»»ä½•ä¸€ä¸ª<br>&lt; any å°äºå­æŸ¥è¯¢ä¸­ä»»ä½•ä¸€ä¸ª<br>all å¤§äºå­æŸ¥è¯¢ä¸­æ‰€æœ‰<br>&lt; all å°äºå­æŸ¥è¯¢ä¸­æ‰€æœ‰<br>â€¦</p>
</blockquote>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢éè®¡ç®—æœºç§‘å­¦ç³»ä¸­æ¯”è®¡ç®—æœºç§‘å­¦ç³»ä»»æ„ä¸€ä¸ªå­¦ç”Ÿå¹´é¾„å°çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sname,sage<br>from stu<br>where sage &lt; any<br>(<br>	select sage<br>	from stu<br>	where sdept&#x3D;&#39;cs&#39;) and sdept!&#x3D;&#39;cs&#39;;<br></code></pre></td></tr></table></figure>
<h3 id="å¸¦æœ‰existsè°“è¯çš„å­æŸ¥è¯¢"><a href="#å¸¦æœ‰existsè°“è¯çš„å­æŸ¥è¯¢" class="headerlink" title="å¸¦æœ‰existsè°“è¯çš„å­æŸ¥è¯¢"></a>å¸¦æœ‰existsè°“è¯çš„å­æŸ¥è¯¢</h3><p>existsè¡¨ç¤ºå­˜åœ¨é‡è¯ï¼Œå¸¦æœ‰existsè°“è¯çš„å­æŸ¥è¯¢åªè¿”å›é€»è¾‘å€¼ï¼Œexistsçš„ä½œç”¨åŸŸä¸ºå­æŸ¥è¯¢</p>
<p>æµç¨‹ä¸ºï¼šå–å‡ºå¤–å±‚æŸ¥è¯¢çš„å…ƒç»„ï¼Œæ ¹æ®å®ƒè¿›è¡Œå†…å±‚æŸ¥è¯¢ï¼Œå¦‚æœè¿”å›å€¼ä¸ºçœŸï¼Œåˆ™å­˜å…¥ç»“æœé›†</p>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢æ‰€æœ‰é€‰ä¿®äº†1å·è¯¾ç¨‹çš„å­¦ç”Ÿå§“å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sname<br>from stu<br>where exists<br>(select sno<br>from sc<br>where sc.sno &#x3D; stu.sno and cno&#x3D;&#39;1&#39;);<br><br></code></pre></td></tr></table></figure>
<p>ä¸existså¯¹åº”çš„æ˜¯not exists</p>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢æ²¡æœ‰é€‰ä¿®1å·è¯¾ç¨‹çš„å­¦ç”Ÿå§“å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select sname<br>from stu<br>where not exists<br>(select *<br>from sc<br>where stu.sno&#x3D;sc.sno and cno&#x3D;&#39;1&#39;);<br></code></pre></td></tr></table></figure>
<h3 id="é›†åˆæŸ¥è¯¢"><a href="#é›†åˆæŸ¥è¯¢" class="headerlink" title="é›†åˆæŸ¥è¯¢"></a><strong>é›†åˆæŸ¥è¯¢</strong></h3><p>selectè¯­å¥çš„æŸ¥è¯¢ç»“æœä¸ºå…ƒç»„çš„é›†åˆï¼Œæ‰€ä»¥å¤šä¸ªselectè¯­å¥çš„ç»“æœå¯è¿›è¡Œé›†åˆæ“ä½œ</p>
<p>é›†åˆæ“ä½œä¸»è¦æœ‰ å¹¶æ“ä½œunionã€äº¤æ“ä½œintersectã€å·®æ“ä½œexcept</p>
<p><strong>æ³¨ï¼šå‚åŠ é›†åˆæ“ä½œçš„å„æŸ¥è¯¢ç»“æœçš„åˆ—æ•°å¿…é¡»ç›¸åŒï¼Œå¯¹åº”çš„æ•°æ®ç±»å‹ä¹Ÿå¿…é¡»ç›¸åŒ</strong></p>
<p>å¦‚ï¼š</p>
<p>æŸ¥è¯¢è®¡ç®—æœºç§‘å­¦ç³»çš„å­¦ç”ŸåŠå¹´é¾„ä¸å¤§äº19å²çš„å­¦ç”Ÿ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select *<br>from stu<br>where sdept&#x3D;&#39;cs&#39;<br><br>union<br><br>select *<br>from stu<br>where sage&lt;&#x3D;19<br></code></pre></td></tr></table></figure>
<p>æŸ¥è¯¢è®¡ç®—æœºç§‘å­¦ç³»çš„å­¦ç”Ÿä¸å¹´é¾„ä¸å¤§äº19å²çš„å­¦ç”Ÿçš„äº¤é›†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select *<br>from stu<br>where sdept&#x3D;&#39;cs&#39;<br><br>intersect<br><br>select *<br>from stu<br>where sage&lt;&#x3D;19;<br></code></pre></td></tr></table></figure>
<p>æŸ¥è¯¢è®¡ç®—æœºç§‘å­¦ç³»çš„å­¦ç”Ÿä¸å¹´é¾„ä¸å¤§äº19å²çš„å­¦ç”Ÿçš„å·®é›†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select *<br>from stu<br>where sdept&#x3D;&#39;cs&#39;<br><br>except<br><br>select *<br>from stu<br>where sage&lt;&#x3D;19;<br></code></pre></td></tr></table></figure>


]]></content>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>java jdbcçš„åŸºæœ¬ä½¿ç”¨</title>
    <url>/2020/10/20/javadb/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨åšjavaå®éªŒçš„æ—¶å€™ç”¨åˆ°äº†jdbcï¼Œç°åœ¨é¡ºä¾¿å¤ä¹ ä¸€ä¸‹jdbcçš„æ“ä½œã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯JDBC"><a href="#ä»€ä¹ˆæ˜¯JDBC" class="headerlink" title="ä»€ä¹ˆæ˜¯JDBC"></a><strong>ä»€ä¹ˆæ˜¯JDBC</strong></h1><p>JDBCå…¨ç§°ä¸º Java Database Connectivity ï¼Œjdbcå¯ä»¥é€šè¿‡è½½å…¥ä¸åŒçš„æ•°æ®åº“çš„é©±åŠ¨ç¨‹åºä¸ä¸åŒçš„æ•°æ®åº“è¿›è¡Œè¿æ¥</p>
<h1 id="jdbcçš„ä½¿ç”¨"><a href="#jdbcçš„ä½¿ç”¨" class="headerlink" title="jdbcçš„ä½¿ç”¨"></a><strong>jdbcçš„ä½¿ç”¨</strong></h1><p>è¦æƒ³ä½¿ç”¨jdbcï¼Œé¦–å…ˆè¦å¯¼å…¥å¯¹åº”æ•°æ®åº“çš„é©±åŠ¨ç±»ï¼š</p>
<p><img src="/2020/10/20/javadb/jar.jpg" alt="jar"></p>
<p>jdbcçš„ä½¿ç”¨æµç¨‹ä¸ºï¼š</p>
<p>1.æ³¨å†Œé©±åŠ¨<br>2.è·å–è¿æ¥<br>3.æ‰§è¡ŒSQLè¯­å¥<br>4.è·å–ç»“æœ<br>5.å…³é—­è¿æ¥</p>
<h2 id="æ³¨å†Œé©±åŠ¨"><a href="#æ³¨å†Œé©±åŠ¨" class="headerlink" title="æ³¨å†Œé©±åŠ¨"></a><strong>æ³¨å†Œé©±åŠ¨</strong></h2><p>æ³¨å†Œé©±åŠ¨çš„è¯­å¥ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">Class.forName(JDBC_DRIVER);<br></code></pre></td></tr></table></figure>
<p>JDBC_DRIVERä¸ºå¯¹åº”çš„æ•°æ®åº“é©±åŠ¨ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String JDBC_DRIVER &#x3D; &quot;com.mysql.cj.jdbc.Driver&quot;;<br></code></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯Class.forNameä¸ºåå°„ä¸­çš„çŸ¥è¯†ï¼Œè‹¥æ‰¾ä¸åˆ°ç›¸åº”çš„ç±»åï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨try-catchå¤„ç†å¼‚å¸¸æˆ–è€…å£°æ˜å¼‚å¸¸</p>
<h2 id="è·å–è¿æ¥"><a href="#è·å–è¿æ¥" class="headerlink" title="è·å–è¿æ¥"></a><strong>è·å–è¿æ¥</strong></h2><p>è·å–è¿æ¥çš„ç›®çš„æ˜¯è·å–Connectionå¯¹è±¡ï¼Œå¯é€šè¿‡DriverManagerç±»çš„getConnectionæ–¹æ³•è·å–</p>
<p>å…¶ä¸­getConnectionæ–¹æ³•ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">getConnection(url,user,pwd);<br></code></pre></td></tr></table></figure>
<p>urlä¸ºè¿æ¥æ•°æ®åº“çš„è·¯å¾„ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String DB_URL &#x3D; &quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;dbtest01?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;UTC&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true&quot;;<br></code></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œdetest01ä¸ºè·¯å¾„ä¸Šçš„æŸä¸ªæ•°æ®åº“</p>
<p>characterEncoding=utf-8è®¾ç½®ä¸ºä¸­æ–‡</p>
<p>serverTimezone=UTCè¡¨ç¤ºå½“å‰æ—¶åŒº</p>
<p>useServerPrepStmts=true è¡¨ç¤ºpreparedstatementè¿›è¡Œé¢„ç¼–è¯‘ï¼Œé»˜è®¤preparedstatementä¸ä¼šè¿›è¡Œé¢„ç¼–è¯‘</p>
<p>cachePrepStmts=trueè¡¨ç¤ºç¼“å­˜ï¼Œå½“ä½¿ç”¨ä¸åŒçš„PreparedStatementå¯¹è±¡æ¥æ‰§è¡Œç›¸åŒçš„SQLè¯­å¥æ—¶ï¼Œè¿˜æ˜¯ä¼šå‡ºç°ç¼–è¯‘ä¸¤æ¬¡çš„ç°è±¡ï¼Œè¿™æ˜¯å› ä¸ºé©±åŠ¨æ²¡æœ‰ç¼“å­˜ç¼–è¯‘åçš„å‡½æ•°keyï¼Œå¯¼è‡´äºŒæ¬¡ç¼–è¯‘ã€‚</p>
<p>userå’Œpwdåˆ†åˆ«ä¸ºæ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç </p>
<p>è·å–è¿æ¥çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">private static final String user &#x3D; &quot;root&quot;;<br><br>   private static final String password &#x3D; &quot;111111&quot;;<br><br>   private static final String url &#x3D; &quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;dbtest01?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;UTC&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true&quot;;<br><br>   private static final String jdbc_driver &#x3D; &quot;com.mysql.cj.jdbc.Driver&quot;;<br><br>   ...<br><br>   Class.forName(jdbc_driver);<br><br>   connection &#x3D; DriverManager.getConnection(url,user,password);<br></code></pre></td></tr></table></figure>
<h2 id="æ‰§è¡Œsqlè¯­å¥"><a href="#æ‰§è¡Œsqlè¯­å¥" class="headerlink" title="æ‰§è¡Œsqlè¯­å¥"></a><strong>æ‰§è¡Œsqlè¯­å¥</strong></h2><p>JDBCæ‰§è¡Œsqlè¯­å¥çš„æ–¹å¼ä¸»è¦ä½¿ç”¨Statementå¯¹è±¡æˆ–PreparedStatementå¯¹è±¡</p>
<h3 id="Statement"><a href="#Statement" class="headerlink" title="Statement"></a><strong>Statement</strong></h3><p>è¦è·å–Statementå¯¹è±¡ï¼Œè¦ä½¿ç”¨Connectionå¯¹è±¡çš„createStatement(sql)æ–¹æ³•</p>
<p>statementå¯¹è±¡ä¸­æœ‰å‡ ç§å¯¹æ•°æ®åº“æ“ä½œçš„æ–¹æ³•ï¼š</p>
<ul>
<li>statement.execute()</li>
</ul>
<p>execute()æ–¹æ³•è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œè¡¨ç¤ºsqlè¯­å¥æ‰§è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥</p>
<ul>
<li>statement.executeQuery()</li>
</ul>
<p>å¯¹äºæŸ¥è¯¢ç±»çš„sqlè¯­å¥ï¼Œé€šå¸¸ä½¿ç”¨executeQuery()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªResultSetç»“æœé›†</p>
<ul>
<li>statement.executeUpdate()</li>
</ul>
<p>å¯¹äºæ›´æ–°ç±»çš„sqlè¯­å¥ï¼Œé€šå¸¸ä½¿ç”¨executeUpdate()æ–¹æ³•ï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°,è¡¨ç¤ºå—å½±å“çš„è¡Œæ•°</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">statement &#x3D; connection.createStatement(&quot;select * from table&quot;);<br>ResultSet resultSet &#x3D; statement.executeQuery();<br></code></pre></td></tr></table></figure>
<p><strong>è¦æ³¨æ„statementä¸­çš„sqlè¯­å¥è¦å°†æ‰€æœ‰çš„æ•°æ®éƒ½å¡«å……å¥½æ‰å¯ä»¥</strong></p>
<p>å¦‚æ‰§è¡Œæ’å…¥è¯­å¥ï¼ŒString sql = â€œinsert into stu values(1,2,3);â€</p>
<p>å¿…é¡»æŠŠæ•°æ®ç»™æå‰å†™å¥½æ‰å¯ä»¥</p>
<h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a><strong>PreparedStatement</strong></h3><p>è¦è·å–PreparedStatementå¯¹è±¡ï¼Œä½¿ç”¨Connectionå¯¹è±¡çš„prepareStatement(sql)æ–¹æ³•</p>
<p>PrepareStatementçš„åŠŸèƒ½ä¸Statementç›¸ä¼¼ï¼Œä½†ä¸åŒçš„æ˜¯ï¼ŒPrepareStatementå¯ä»¥ä½¿ç”¨å ä½ç¬¦,å®ƒæ˜¯ç”±å ä½ç¬¦æ ‡è¯†éœ€è¦è¾“å…¥æ•°æ®çš„ä½ç½®ï¼Œç„¶åå†é€ä¸€å¡«å…¥æ•°æ®ã€‚å½“ç„¶ï¼ŒPreparedStatementä¹Ÿå¯ä»¥æ‰§è¡Œæ²¡æœ‰å ä½ç¬¦çš„sqlè¯­å¥</p>
<p>å¦‚æ‰§è¡Œæ’å…¥è¯­å¥ï¼ŒString sql = â€œinsert into stu values(?,?,?);â€</p>
<p>ä½¿ç”¨å ä½ç¬¦åä¾¿å¯ä»¥åœ¨sqlè¯­å¥æ‰§è¡Œå‰å†å¡«å……æ•°æ®</p>
<p>è¦å¡«å……æ•°æ®ï¼Œè¦ä½¿ç”¨PreparedStatementå¯¹è±¡çš„setXXæ–¹æ³•</p>
<p>setXXXæ–¹æ³•ä¸­ï¼ŒXXXæ˜¯è¦å¡«å……çš„æ•°æ®ç±»å‹</p>
<p>setXXXæ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‚æ•°åœ¨è¡¨ä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‚æ•°çš„å€¼</p>
<p><strong>æ³¨ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå‚æ•°ä¸‹è¡¨æ˜¯ä»1å¼€å§‹çš„</strong></p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String sql &#x3D; &quot;insert into stu values(?,?,?);&quot;;<br><br>PreparedStatement statement &#x3D; connection.prepareStatement(sql);<br><br>statement.setInt(1,no);<br><br>statement.setString(2,name);<br><br>statement.setInt(3,age);<br></code></pre></td></tr></table></figure>
<p>åœ¨è·å–äº†statementå¯¹è±¡åï¼Œä¾¿å¯è°ƒç”¨æƒ³ä½¿ç”¨çš„æ‰§è¡Œæ–¹æ³•æ‰§è¡Œsqlè¯­å¥</p>
<h2 id="è·å–ç»“æœ"><a href="#è·å–ç»“æœ" class="headerlink" title="è·å–ç»“æœ"></a><strong>è·å–ç»“æœ</strong></h2><p>sqlè¯­å¥çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªç»“æœé›†ï¼ŒResultSetä¸»è¦ç”¨äºå­˜å‚¨ç»“æœé›†ï¼Œå¯ä»¥é€šè¿‡next()æ–¹æ³•ç”±å‰å‘åé€ä¸ªè·å–ç»“æœé›†ä¸­çš„æ•°æ®</p>
<p>åœ¨resultsetä¸­ï¼Œå¯ä»¥ä½¿ç”¨getXXX(index)è·å¾—ä¸‹æ ‡ä¸ºindexçš„å€¼ï¼Œæˆ–è€…ä½¿ç”¨getXXX(â€œproperty_nameâ€)é€šè¿‡å±æ€§åè·å¾—ç›¸åº”çš„å€¼ï¼Œå…¶ä¸­XXXä¸ºæ•°æ®ç±»å‹</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">statement.executeQuery();<br>ResultSet resultSet &#x3D; statement.getResultSet();<br>while(resultSet.next())&#123;<br>       int sno &#x3D; resultSet.getInt(&quot;sno&quot;);<br>       String sname &#x3D; resultSet.getString(&quot;sname&quot;);<br>       System.out.println(sno + sname);<br>   &#125;<br></code></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼šè¦æƒ³è·å¾—resultSetä¸­çš„æ•°æ®ï¼Œé¦–å…ˆè¦ä½¿ç”¨resultSet.next()æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</strong></p>
<h2 id="å…³é—­è¿æ¥"><a href="#å…³é—­è¿æ¥" class="headerlink" title="å…³é—­è¿æ¥"></a><strong>å…³é—­è¿æ¥</strong></h2><p>åœ¨æ‰§è¡Œå®Œæ•°æ®åº“æ“ä½œåï¼Œé€šå¸¸è¦å…³é—­å’Œæ•°æ®åº“çš„è¿æ¥</p>
<p>ä½¿ç”¨.close()å…³é—­è¿æ¥ï¼Œé€šå¸¸æ”¾åœ¨finallyä¸­æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">resultSet.close();<br>statement.close();<br>connection.close();<br></code></pre></td></tr></table></figure>

<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a><strong>äº‹åŠ¡</strong></h1><p>æŠŠä¸€ç³»åˆ—è¦æ‰§è¡Œçš„æ“ä½œç§°ä¸ºäº‹åŠ¡ï¼Œè€Œäº‹åŠ¡ç®¡ç†å°±æ˜¯ç®¡ç†è¿™äº›æ“ä½œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼Œæ‰€æœ‰å‘½ä»¤å…¨éƒ¨æˆåŠŸæ‰§è¡Œæ‰æ„å‘³ç€è¯¥äº‹åŠ¡çš„æˆåŠŸï¼Œä»»ä½•ä¸€ä¸ªå‘½ä»¤å¤±è´¥éƒ½æ„å‘³ç€è¯¥äº‹åŠ¡çš„å¤±è´¥ã€‚</p>
<h2 id="äº‹åŠ¡ç®¡ç†çš„ç‰¹æ€§"><a href="#äº‹åŠ¡ç®¡ç†çš„ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡ç®¡ç†çš„ç‰¹æ€§"></a><strong>äº‹åŠ¡ç®¡ç†çš„ç‰¹æ€§</strong></h2><p>åŸå­æ€§ï¼šäº‹åŠ¡çš„æ•´ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸å¯ä»¥åˆ†å‰²ï¼Œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åšã€‚</p>
<p>ä¸€è‡´æ€§ï¼šäº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åéƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚</p>
<p>éš”ç¦»æ€§ï¼šå½“å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ¯”å¦‚æ“ä½œåŒä¸€å¼ è¡¨æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚</p>
<p>æŒä¹…æ€§ï¼šäº‹åŠ¡ä¸€æ—¦è¢«æäº¤äº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„</p>
<h2 id="JDBCä¸­äº‹åŠ¡ç®¡ç†æ“ä½œ"><a href="#JDBCä¸­äº‹åŠ¡ç®¡ç†æ“ä½œ" class="headerlink" title="JDBCä¸­äº‹åŠ¡ç®¡ç†æ“ä½œ"></a><strong>JDBCä¸­äº‹åŠ¡ç®¡ç†æ“ä½œ</strong></h2><p>JDBCä¸­ï¼ŒConnectionæœ‰ä¸‰ä¸ªæ–¹æ³•ä¸äº‹åŠ¡æ“ä½œæœ‰å…³</p>
<ul>
<li>setAutoCommit(boolean)</li>
</ul>
<p>è¦æƒ³è¿›è¡Œäº‹åŠ¡ç®¡ç†ï¼Œåœ¨è¿›è¡Œç›¸åº”çš„sqlæ“ä½œä¹‹å‰ï¼Œè¦æ‰§è¡Œï¼š</p>
<pre><code>connection.setAutoCommit(false);</code></pre>
<p>å–æ¶ˆäº‹åŠ¡çš„è‡ªåŠ¨æäº¤ï¼ŒsetAutoCommitçš„é»˜è®¤å€¼ä¸ºtrue</p>
<ul>
<li>commit()</li>
</ul>
<p>commitè¡¨ç¤ºæäº¤äº‹åŠ¡</p>
<ul>
<li>rollback()</li>
</ul>
<p>rollbakcè¡¨ç¤ºå›æ»šï¼Œé€šå¸¸åœ¨å¤„ç†å¼‚å¸¸æˆ–å‡ºç°é”™è¯¯çš„æ—¶å€™è¿›è¡Œ</p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>jdbc</tag>
      </tags>
  </entry>
  <entry>
    <title>javaæ—¥å¿—ä½¿ç”¨</title>
    <url>/2020/10/24/javarecord/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æ—¥å¿—"><a href="#ä»€ä¹ˆæ˜¯æ—¥å¿—" class="headerlink" title="ä»€ä¹ˆæ˜¯æ—¥å¿—"></a><strong>ä»€ä¹ˆæ˜¯æ—¥å¿—</strong></h1><p>é€šå¸¸ï¼Œåœ¨å¹³æ—¶å†™ä»£ç å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¹ æƒ¯ä½¿ç”¨debugæˆ–è€…soutæ¥è°ƒè¯•é”™è¯¯ï¼Œä½†æœ‰æ—¶å€™é”™è¯¯å¾ˆéš¾æ‰¾ï¼Œè¿™æ—¶å€™éœ€è¦æ’é”™å°±æ˜¾å¾—å¾ˆå›°éš¾äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ—¥å¿—æ¥å¸®åŠ©æˆ‘ä»¬æ›´æœ‰æ•ˆåœ°æ’é”™ã€‚æ—¥å¿—è®°å½•äº†ç¨‹åºçš„è¿è¡Œè½¨è¿¹æ—¥å¿—ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å…³é”®ä¿¡æ¯ï¼Œä¹Ÿæ–¹ä¾¿å¿«é€Ÿå®šä½è§£å†³é—®é¢˜ï¼Œæ˜¯åº”ç”¨è½¯ä»¶ä¸­ä¸å¯ç¼ºå°‘çš„éƒ¨åˆ†</p>
<h1 id="å¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶"><a href="#å¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶" class="headerlink" title="å¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶"></a><strong>å¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶</strong></h1><p>log4jã€log4j2ã€Loggingã€commons-loggingã€slf4jã€logbackç­‰ï¼Œé‡ç‚¹ä»‹ç»log4j</p>
<h1 id="ä»€ä¹ˆæ˜¯log4j"><a href="#ä»€ä¹ˆæ˜¯log4j" class="headerlink" title="ä»€ä¹ˆæ˜¯log4j"></a><strong>ä»€ä¹ˆæ˜¯log4j</strong></h1><p>log4jæ˜¯ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œæ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡log4jå¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºä½ç½®ï¼Œæ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œè¿˜å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ã€‚</p>
<h2 id="log4jå…¥é—¨å®ä¾‹"><a href="#log4jå…¥é—¨å®ä¾‹" class="headerlink" title="log4jå…¥é—¨å®ä¾‹"></a><strong>log4jå…¥é—¨å®ä¾‹</strong></h2><p>å¯¼å…¥ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>    &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;log4j&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;1.2.16&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<p>åœ¨resourcesç›®å½•ä¸‹åˆ›å»º log4j.propertiesæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"><br>#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç ä¸­<br>log4j.rootLogger&#x3D;DEBUG,console,file<br><br>#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®<br>log4j.appender.console &#x3D; org.apache.log4j.ConsoleAppender<br>log4j.appender.console.Target &#x3D; System.out<br>log4j.appender.console.Threshold&#x3D;DEBUG<br>log4j.appender.console.layout &#x3D; org.apache.log4j.PatternLayout<br>log4j.appender.console.layout.ConversionPattern&#x3D;[%c]-%m%n<br><br>#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³é…ç½®<br>log4j.appender.file &#x3D; org.apache.log4j.RollingFileAppender<br>log4j.appender.file.File&#x3D;.&#x2F;log&#x2F;loginfo.log<br>log4j.appender.file.MaxFileSize&#x3D;10mb<br>log4j.appender.file.Threshold&#x3D;DEBUG<br>log4j.appender.file.layout&#x3D;org.apache.log4j.PatternLayout<br>log4j.appender.file.layout.ConversionPattern&#x3D;[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n<br><br>#æ—¥å¿—è¾“å‡ºçº§åˆ«<br>log4j.logger.org.mybatis&#x3D;DEBUG<br>log4j.logger.java.sql&#x3D;DEBUG<br>log4j.logger.java.sql.Statement&#x3D;DEBUG<br>log4j.logger.java.sql.ResultSet&#x3D;DEBUG<br>log4j.logger.java.sql.PreparedStatement&#x3D;DEBUG<br></code></pre></td></tr></table></figure>


<p>å¦‚æœæ˜¯åœ¨mybatiså±‚ï¼Œåˆ™è¦åœ¨mybatis-config.xmlä¸­é…ç½®settings</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;settings&gt;<br>	&lt;setting name&#x3D;&quot;logImpl&quot; value&#x3D;&quot;LOG4J&quot;&#x2F;&gt;<br>&lt;&#x2F;settings&gt;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»ä¸­å¯¼å…¥org.apache.log4j.loggerç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">import org.apache.log4j.Logger;<br></code></pre></td></tr></table></figure>

<p>è®¾ç½®é™æ€å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">static Logger logger &#x3D; Logger.getLogger(studentMapperTest.class);<br><br></code></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void test()&#123;<br>    Logger logger &#x3D; Logger.getLogger(userTest.class);<br>    logger.info(&quot;info userTest&quot;);<br>    logger.debug(&quot;debug userTest&quot;);<br>    logger.error(&quot;error userTest&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ§åˆ¶å°è¾“å‡º</p>
<p>[pojo.userTest]-info userTest<br>[pojo.userTest]-debug userTest<br>[pojo.userTest]-error userTest</p>
<p>åŒæ—¶ï¼Œé¡¹ç›®ç›®å½•ä¸‹ç”Ÿæˆlogç›®å½•ï¼Œlogç›®å½•ä¸‹ç”Ÿæˆloginfo.logæ–‡ä»¶</p>
<p><img src="/2020/10/24/javarecord/log.jpg" alt="log"></p>
<p><img src="/2020/10/24/javarecord/loginfo.jpg" alt="loginfo"></p>
<h2 id="log4jçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#log4jçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="log4jçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a><strong>log4jçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•</strong></h2><p>Log4jç”±ä¸‰ä¸ªé‡è¦çš„ç»„ä»¶æ„æˆï¼š</p>
<ul>
<li><p>æ—¥å¿—ä¿¡æ¯çš„ä¼˜å…ˆçº§<br>æ—¥å¿—ä¿¡æ¯çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æœ‰ERRORã€WARNã€ INFOã€DEBUGï¼Œåˆ†åˆ«ç”¨æ¥æŒ‡å®šè¿™æ¡æ—¥å¿—ä¿¡æ¯çš„é‡è¦ç¨‹åº¦</p>
</li>
<li><p>æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„åœ°<br>æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºç›®çš„åœ°æŒ‡å®šäº†æ—¥å¿—å°†æ‰“å°åˆ°æ§åˆ¶å°è¿˜æ˜¯æ–‡ä»¶ä¸­ï¼›</p>
</li>
<li><p>æ—¥å¿—ä¿¡æ¯çš„è¾“å‡ºæ ¼å¼ã€‚<br>è¾“å‡ºæ ¼å¼åˆ™æ§åˆ¶äº†æ—¥å¿—ä¿¡æ¯çš„æ˜¾ ç¤ºå†…å®¹ã€‚</p>
</li>
</ul>
<h3 id="å®šä¹‰log4jçš„é…ç½®æ–‡ä»¶"><a href="#å®šä¹‰log4jçš„é…ç½®æ–‡ä»¶" class="headerlink" title="å®šä¹‰log4jçš„é…ç½®æ–‡ä»¶"></a><strong>å®šä¹‰log4jçš„é…ç½®æ–‡ä»¶</strong></h3><p>Log4jæ”¯æŒä¸¤ç§é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œä¸€ç§æ˜¯XMLæ ¼å¼çš„æ–‡ä»¶ï¼Œä¸€ç§æ˜¯Javaç‰¹æ€§æ–‡ä»¶properties.xmlæ–‡ä»¶ï¼Œä¸‹é¢ä»‹ç»ä½¿ç”¨properties.xmlæ–‡ä»¶åšä¸ºé…ç½®æ–‡ä»¶çš„æ–¹æ³•</p>
<h4 id="é…ç½®rootLogger"><a href="#é…ç½®rootLogger" class="headerlink" title="é…ç½®rootLogger"></a><strong>é…ç½®rootLogger</strong></h4><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">log4j.rootLogger&#x3D;level(ERROR WARN INFO DEBUG) appenderName1,appenderName2,...<br></code></pre></td></tr></table></figure>
<p>levelæ˜¯æ—¥å¿—è®°å½•çš„ä¼˜å…ˆçº§ï¼Œé€šè¿‡åœ¨è¿™é‡Œå®šä¹‰çš„çº§åˆ«ï¼Œå¯ä»¥æ§åˆ¶åº”ç”¨ç¨‹åºä¸­ç›¸åº”çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯çš„å¼€å…³ï¼Œå¦‚é…ç½®ä¸ºINFOï¼Œåˆ™DEBUGçº§åˆ«çš„æ—¥å¿—å°±ä¸å†è¾“å‡ºï¼Œè‹¥é…ç½®ä¸ºDEBUGï¼Œåˆ™ERROR WARN INFO DEBUGçš„ä¿¡æ¯éƒ½ä¼šè¾“å‡º</p>
<p>appenderNameæ˜¯æŒ‡æ—¥å¿—ä¿¡æ¯å°†è¦è¾“å‡ºçš„åœ°æ–¹ï¼Œå¦‚consoleã€fileç­‰ç­‰</p>
<h4 id="é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºçš„ä½ç½®"><a href="#é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºçš„ä½ç½®" class="headerlink" title="é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºçš„ä½ç½®"></a><strong>é…ç½®æ—¥å¿—ä¿¡æ¯è¾“å‡ºçš„ä½ç½®</strong></h4><p>é€šè¿‡log4j.appender.appenderName = fully.qualified.name.of.appender.class çš„æ–¹å¼æŒ‡å®šè¾“å‡ºç›®çš„åœ°</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">log4j.appender.stdout&#x3D;org.apache.log4j.ConsoleAppender<br><br>log4j.appender.console &#x3D; org.apache.log4j.ConsoleAppender<br><br>log4j.appender.file &#x3D; org.apache.log4j.RollingFileAppender<br></code></pre></td></tr></table></figure>

<h4 id="é…ç½®appenderNameçš„è¾“å‡ºé—¨æ§›Threshold"><a href="#é…ç½®appenderNameçš„è¾“å‡ºé—¨æ§›Threshold" class="headerlink" title="é…ç½®appenderNameçš„è¾“å‡ºé—¨æ§›Threshold"></a><strong>é…ç½®appenderNameçš„è¾“å‡ºé—¨æ§›Threshold</strong></h4><p>é€šè¿‡log4j.appender.appenderName.Threshold = level(ERROR WARN INFO DEBUG)çš„æ–¹å¼è®¾ç½®é—¨æ§›ï¼Œä½äºé—¨æ§›çš„ä¿¡æ¯å°†ä¸å†è¾“å‡º</p>
<h4 id="é…ç½®æ—¥å¿—ä¿¡æ¯çš„å¸ƒå±€layout"><a href="#é…ç½®æ—¥å¿—ä¿¡æ¯çš„å¸ƒå±€layout" class="headerlink" title="é…ç½®æ—¥å¿—ä¿¡æ¯çš„å¸ƒå±€layout"></a><strong>é…ç½®æ—¥å¿—ä¿¡æ¯çš„å¸ƒå±€layout</strong></h4><p>é€šè¿‡log4j.appender.appenderName.layoutçš„æ–¹å¼è®¾ç½®å¸ƒå±€</p>
<p>log4jæä¾›çš„layoutæœ‰ï¼š</p>
<ul>
<li>org.apache.log4j.HTMLLayoutï¼ˆä»¥HTMLè¡¨æ ¼å½¢å¼å¸ƒå±€ï¼‰ï¼Œ  </li>
<li>org.apache.log4j.PatternLayoutï¼ˆå¯ä»¥çµæ´»åœ°æŒ‡å®šå¸ƒå±€æ¨¡å¼ï¼‰ï¼Œ  </li>
<li>org.apache.log4j.SimpleLayoutï¼ˆåŒ…å«æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«å’Œä¿¡æ¯å­—ç¬¦ä¸²ï¼‰ï¼Œ  </li>
<li>org.apache.log4j.TTCCLayoutï¼ˆåŒ…å«æ—¥å¿—äº§ç”Ÿçš„æ—¶é—´ã€çº¿ç¨‹ã€ç±»åˆ«ç­‰ç­‰ä¿¡æ¯ï¼‰</li>
</ul>
<h4 id="é…ç½®æ—¥å¿—æ‰“å°ä¿¡æ¯çš„å…·ä½“æ ¼å¼"><a href="#é…ç½®æ—¥å¿—æ‰“å°ä¿¡æ¯çš„å…·ä½“æ ¼å¼" class="headerlink" title="é…ç½®æ—¥å¿—æ‰“å°ä¿¡æ¯çš„å…·ä½“æ ¼å¼"></a><strong>é…ç½®æ—¥å¿—æ‰“å°ä¿¡æ¯çš„å…·ä½“æ ¼å¼</strong></h4><p>é€šè¿‡log4j.appender.appenderName.layout.ConversionPatternçš„æ–¹å¼æä¾›å…·ä½“æ ¼å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">%m è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯<br><br>%p è¾“å‡ºä¼˜å…ˆçº§ï¼Œå³DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERRORï¼ŒFATAL<br><br>%r è¾“å‡ºè‡ªåº”ç”¨å¯åŠ¨åˆ°è¾“å‡ºè¯¥logä¿¡æ¯è€—è´¹çš„æ¯«ç§’æ•°<br><br>%c è¾“å‡ºæ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å<br><br>%t è¾“å‡ºäº§ç”Ÿè¯¥æ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹å<br><br>%n è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸ºâ€œrnâ€ï¼ŒUnixå¹³å°ä¸ºâ€œnâ€<br><br>%d è¾“å‡ºæ—¥å¿—æ—¶é—´ç‚¹çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼ä¸ºISO8601ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶åæŒ‡å®šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š%d&#123;yyyy MMM dd HH:mm:ss,SSS&#125;ï¼Œè¾“å‡ºç±»ä¼¼ï¼š2002å¹´10æœˆ18æ—¥ 22ï¼š10ï¼š28ï¼Œ921<br><br>%l è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„å‘ç”Ÿä½ç½®ï¼ŒåŒ…æ‹¬ç±»ç›®åã€å‘ç”Ÿçš„çº¿ç¨‹ï¼Œä»¥åŠåœ¨ä»£ç ä¸­çš„è¡Œæ•°ã€‚<br><br></code></pre></td></tr></table></figure>
<p>å¦‚ä¸Šé¢é…ç½®ä¸­çš„ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">log4j.appender.console.layout.ConversionPattern&#x3D;[%c]-%m%n<br></code></pre></td></tr></table></figure>

<h4 id="å½“è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶çš„æ—¶å€™"><a href="#å½“è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶çš„æ—¶å€™" class="headerlink" title="å½“è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶çš„æ—¶å€™"></a><strong>å½“è¾“å‡ºç›®çš„åœ°ä¸ºæ–‡ä»¶çš„æ—¶å€™</strong></h4><p>æ­¤æ—¶è¦é…ç½®</p>
<ul>
<li><p>log4j.appender.file<br>é€šå¸¸ä¸º org.apache.log4j.RollingFileAppender</p>
</li>
<li><p>log4j.appender.file.File<br>è¿™ä¸ªçš„å«ä¹‰ä¸ºè¾“å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œé€šå¸¸å–å½“å‰é¡¹ç›®ç›®å½•ä¸‹ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">log4j.appender.file.File&#x3D;.&#x2F;log&#x2F;loginfo.log<br></code></pre></td></tr></table></figure>
</li>
<li><p>log4j.appender.file.MaxFileSize<br>è®¾ç½®æ–‡ä»¶å¤§å°</p>
</li>
</ul>
<h2 id="ä¸€ä¸ªç®€å•çš„log4jé…ç½®æ–‡ä»¶"><a href="#ä¸€ä¸ªç®€å•çš„log4jé…ç½®æ–‡ä»¶" class="headerlink" title="ä¸€ä¸ªç®€å•çš„log4jé…ç½®æ–‡ä»¶"></a><strong>ä¸€ä¸ªç®€å•çš„log4jé…ç½®æ–‡ä»¶</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç ä¸­<br>log4j.rootLogger&#x3D;DEBUG,console,file<br><br>#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®<br>log4j.appender.console &#x3D; org.apache.log4j.ConsoleAppender<br>log4j.appender.console.Target &#x3D; System.out<br>log4j.appender.console.Threshold&#x3D;DEBUG<br>log4j.appender.console.layout &#x3D; org.apache.log4j.PatternLayout<br>log4j.appender.console.layout.ConversionPattern&#x3D;[%c]-%m%n<br><br>#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³é…ç½®<br>log4j.appender.file &#x3D; org.apache.log4j.RollingFileAppender<br>log4j.appender.file.File&#x3D;.&#x2F;log&#x2F;loginfo.log<br>log4j.appender.file.MaxFileSize&#x3D;10mb<br>log4j.appender.file.Threshold&#x3D;DEBUG<br>log4j.appender.file.layout&#x3D;org.apache.log4j.PatternLayout<br>log4j.appender.file.layout.ConversionPattern&#x3D;[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n<br><br>#æ—¥å¿—è¾“å‡ºçº§åˆ«<br>log4j.logger.org.mybatis&#x3D;DEBUG<br>log4j.logger.java.sql&#x3D;DEBUG<br>log4j.logger.java.sql.Statement&#x3D;DEBUG<br>log4j.logger.java.sql.ResultSet&#x3D;DEBUG<br>log4j.logger.java.sql.PreparedStatement&#x3D;DEBUG<br><br></code></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>java</tag>
        <tag>æ—¥å¿—</tag>
      </tags>
  </entry>
  <entry>
    <title>lombokçš„ä½¿ç”¨</title>
    <url>/2020/10/23/lombok/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯lombok"><a href="#ä»€ä¹ˆæ˜¯lombok" class="headerlink" title="ä»€ä¹ˆæ˜¯lombok"></a><strong>ä»€ä¹ˆæ˜¯lombok</strong></h1><p>lombokæ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ç®€å•çš„æ³¨è§£çš„å½¢å¼æ¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–æ¶ˆé™¤ä¸€äº›å¿…é¡»æœ‰ä½†æ˜¾å¾—å¾ˆè‡ƒè‚¿çš„ Java ä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªjavaç±»åº“ï¼Œlombokèƒ½å¤Ÿè¾¾åˆ°çš„æ•ˆæœå°±æ˜¯åœ¨æºç ä¸­ä¸éœ€è¦å†™ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆè¿™äº›æ–¹æ³•ã€‚</p>
<p>æœ‰äº†lombokï¼Œå°±ä¸ç”¨å†å†™setter getterç­‰å…¶ä»–æ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªæ³¨é‡Šï¼Œå°±å¯å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<p>è¯´ç™½äº†ï¼Œä½¿ç”¨lombokçš„ç›®çš„å°±æ˜¯ä¸ºäº†å·æ‡’</p>
<h1 id="lombokçš„ä½¿ç”¨"><a href="#lombokçš„ä½¿ç”¨" class="headerlink" title="lombokçš„ä½¿ç”¨"></a><strong>lombokçš„ä½¿ç”¨</strong></h1><h2 id="å®‰è£…lombok"><a href="#å®‰è£…lombok" class="headerlink" title="å®‰è£…lombok"></a><strong>å®‰è£…lombok</strong></h2><p>è¦ä½¿ç”¨lombokï¼Œé¦–å…ˆè¦å®‰è£…lombok</p>
<p><img src="/2020/10/23/lombok/settup.jpg" alt="settup"></p>
<h2 id="lombokçš„æ³¨è§£"><a href="#lombokçš„æ³¨è§£" class="headerlink" title="lombokçš„æ³¨è§£"></a><strong>lombokçš„æ³¨è§£</strong></h2><p>lombokçš„æ³¨è§£ï¼š</p>
<p><img src="/2020/10/23/lombok/annonation.jpg" alt="annonation"></p>
<p>å…¶ä¸­ï¼Œ@Dataã€@Getterã€@Setterã€ToStringã€@xxxConstructorã€@EqualsAndHashCodeè¿™å‡ ä¸ªæ³¨é‡Šæ˜¯æœ€å¸¸ç”¨çš„</p>
<p>@Data = NoArgsConstructor + getter + setter + ToString + EqualsAndHashCode</p>
<p>å…¶ä¸­ï¼Œ@Getterå’Œ@Setterå¯ä½œç”¨äºç±»æˆ–å±æ€§ï¼Œä½œç”¨äºç±»åˆ™è‡ªåŠ¨ç”Ÿæˆå…¨éƒ¨getterå’Œsetterï¼Œå±æ€§ä¸Šåˆ™ç”Ÿæˆå±æ€§çš„getterå’Œsetter</p>
<h2 id="lombokçš„ç®€å•ä½¿ç”¨"><a href="#lombokçš„ç®€å•ä½¿ç”¨" class="headerlink" title="lombokçš„ç®€å•ä½¿ç”¨"></a><strong>lombokçš„ç®€å•ä½¿ç”¨</strong></h2><p>å¯¼å…¥ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;org.projectlombok&#x2F;lombok --&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;1.18.12&lt;&#x2F;version&gt;<br>    &lt;scope&gt;provided&lt;&#x2F;scope&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<p>åœ¨pojoåŒ…ä¸‹åˆ›å»ºUserç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package pojo;<br><br>public class User &#123;<br>    private String username;<br>    private String password;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>pojoç±»æ·»åŠ @Dataæ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Data<br>public class User &#123;<br>    private String username;<br>    private String password;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶Userçš„ç»“æ„ä¸­è‡ªåŠ¨ç”Ÿæˆäº†ä¸€äº›æ–¹æ³•</p>
<p><img src="/2020/10/23/lombok/@Data.jpg" alt="@Data"></p>
<p>å…¶ä»–æ–¹æ³•ä¹Ÿä¸€æ ·ï¼Œæ·»åŠ å“ªä¸ªæ³¨é‡Šï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ–¹æ³•</p>
<p>@Getterå’Œ@Setterä½œç”¨äºå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class User &#123;<br>    <br>    @Getter<br>    @Setter<br>    private String username;<br>    private String password;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶ä¸ºusernameè‡ªåŠ¨ç”Ÿæˆgetterå’Œsetter</p>
<p><img src="/2020/10/23/lombok/gs.jpg" alt="gs"></p>
<p>ä½¿ç”¨@NoArgsConstructorå’Œ@AllArgsConstructor</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>public class User &#123;<br>    private String username;<br>    private String password;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/2020/10/23/lombok/na.jpg" alt="na"></p>
<p>ä¸è¿‡ï¼Œlombokåªèƒ½ç”Ÿæˆæ— å‚å’Œå…¨å‚çš„æ„é€ å™¨ï¼Œä¸èƒ½ç”ŸæˆæŸä¸ªå±æ€§æˆ–è€…å¤šä¸ªå±æ€§çš„æ„é€ å™¨ï¼Œæ­¤æ—¶è¦è‡ªå·±æ‰‹åŠ¨ç”Ÿæˆè¿™ç±»çš„æ„é€ å™¨ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>public class User &#123;<br>    private String username;<br>    private String password;<br>    public User(String username) &#123;<br>        this.username &#x3D; username;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/2020/10/23/lombok/naa.jpg" alt="naa"></p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>lombok</tag>
      </tags>
  </entry>
  <entry>
    <title>MVC å¼‚å¸¸è§£å†³</title>
    <url>/2020/10/12/mvcwrong/</url>
    <content><![CDATA[<p>æ³¨è§£é©±åŠ¨å¼‚å¸¸ï¼š</p>
<p>åœ¨æ–°å»ºçš„MVCé¡¹ç›®ä¸­ï¼Œè¦æƒ³ä½¿ç”¨æ³¨è§£é©±åŠ¨ï¼Œå‡ºç°å¼‚å¸¸ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">12-Oct-2020 17:43:10.828 è­¦å‘Š [RMI TCP Connection(21)-127.0.0.1] org.springframework.web.context.support.XmlWebApplicationContext.refresh Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cache.interceptor.CacheInterceptor#0&#39;: Cannot resolve reference to bean &#39;cacheManager&#39; while setting bean property &#39;cacheManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available<br>12-Oct-2020 17:43:10.830 ä¸¥é‡ [RMI TCP Connection(21)-127.0.0.1] org.springframework.web.servlet.DispatcherServlet.initServletBean Context initialization failed<br>	org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cache.interceptor.CacheInterceptor#0&#39;: Cannot resolve reference to bean &#39;cacheManager&#39; while setting bean property &#39;cacheManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available<br>		at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)<br>		at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)<br>		at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1699)<br>		at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1444)<br>		at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)<br>		at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)<br>		at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)<br>		at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)<br>		at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)<br>		at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)<br>		at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:702)<br>		at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:668)<br>		at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:716)<br>		at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:591)<br>		at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:530)<br>		at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:170)<br>		at javax.servlet.GenericServlet.init(GenericServlet.java:158)<br>		at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1134)<br>		at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1089)<br>		at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:983)<br>		at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4864)<br>		at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)<br>		at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)<br>		at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)<br>		at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690)<br>		at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:706)<br>		at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1727)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>		at java.base&#x2F;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>		at java.base&#x2F;java.lang.reflect.Method.invoke(Method.java:564)<br>		at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:288)<br>		at java.management&#x2F;com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:809)<br>		at java.management&#x2F;com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)<br>		at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:456)<br>		at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:405)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>		at java.base&#x2F;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>		at java.base&#x2F;java.lang.reflect.Method.invoke(Method.java:564)<br>		at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:288)<br>		at java.management&#x2F;com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:809)<br>		at java.management&#x2F;com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)<br>		at java.management&#x2F;com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:468)<br>		at java.management.rmi&#x2F;javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1466)<br>		at java.management.rmi&#x2F;javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1307)<br>		at java.base&#x2F;java.security.AccessController.doPrivileged(AccessController.java:691)<br>		at java.management.rmi&#x2F;javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1406)<br>		at java.management.rmi&#x2F;javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:827)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>		at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>		at java.base&#x2F;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>		at java.base&#x2F;java.lang.reflect.Method.invoke(Method.java:564)<br>		at java.rmi&#x2F;sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)<br>		at java.rmi&#x2F;sun.rmi.transport.Transport$1.run(Transport.java:200)<br>		at java.rmi&#x2F;sun.rmi.transport.Transport$1.run(Transport.java:197)<br>		at java.base&#x2F;java.security.AccessController.doPrivileged(AccessController.java:691)<br>		at java.rmi&#x2F;sun.rmi.transport.Transport.serviceCall(Transport.java:196)<br>		at java.rmi&#x2F;sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)<br>		at java.rmi&#x2F;sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)<br>		at java.rmi&#x2F;sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)<br>		at java.base&#x2F;java.security.AccessController.doPrivileged(AccessController.java:391)<br>		at java.rmi&#x2F;sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)<br>		at java.base&#x2F;java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)<br>		at java.base&#x2F;java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)<br>		at java.base&#x2F;java.lang.Thread.run(Thread.java:832)<br>	Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;cacheManager&#39; available<br>		at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:805)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1278)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:297)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276)<br>		at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)<br>		at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)<br>		... 68 more<br></code></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>åœ¨é…ç½®Dispatcherçš„xmlæ–‡ä»¶ä¸­ï¼Œ   </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:annotation-driven&gt;&lt;&#x2F;mvc:annotation-driven&gt;<br></code></pre></td></tr></table></figure>
<p>ä½¿ç”¨é”™è¯¯</p>
<p>å› ä¸ºannotation-drivenæœ‰å‡ ä¸ªåŒåçš„</p>
<p><img src="/2020/10/12/mvcwrong/driven.jpg" alt="driven"></p>
<p>å¦‚æœè¦é€‰æ‹©æ³¨è§£é©±åŠ¨ï¼Œè¦é€‰æ‹©ç¬¬ä¸‰ä¸ª</p>
<p>ä¸€ä¸ªæˆ–å¤šä¸ªlistenerså¯åŠ¨å¤±è´¥ï¼š</p>
<p><img src="/2020/10/12/mvcwrong/listener.jpg" alt="listener"></p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
        <tag>å¼‚å¸¸è§£å†³</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisä¹‹åˆ†é¡µ</title>
    <url>/2020/10/24/mybatisPaging/</url>
    <content><![CDATA[<p>å½“ä»æ•°æ®åº“ä¸­æ ¹æ®æŸ¥æ‰¾æ¡ä»¶æŸ¥å‡ºæ•°æ®æ—¶ï¼Œè¿”å›çš„æ•°æ®é‡å¯èƒ½éå¸¸å¤§ï¼Œæˆ‘ä»¬éƒ½ä¸ä¼šå¸Œæœ›ä¸€æ¬¡æ€§çš„å°†æ‰€æœ‰çš„æ•°æ®ä¸€èµ·æ€§è¯»å–å‡ºæ¥ï¼Œå¹¶ä¸”æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œå¸¸ç”¨çš„æ“ä½œå°±æ˜¯å¯¹æŸ¥æ‰¾åˆ°çš„æ•°æ®è¿›è¡Œåˆ†é¡µï¼Œæ¯æ¬¡å¤„ç†å°éƒ¨åˆ†æ•°æ®ï¼Œä»è€Œå‡å°‘å¯¹æ•°æ®çš„å¤„ç†é‡</p>
<h2 id="åˆ©ç”¨é›†åˆ-æ•°ç»„å®ç°åˆ†é¡µ"><a href="#åˆ©ç”¨é›†åˆ-æ•°ç»„å®ç°åˆ†é¡µ" class="headerlink" title="åˆ©ç”¨é›†åˆ/æ•°ç»„å®ç°åˆ†é¡µ"></a><strong>åˆ©ç”¨é›†åˆ/æ•°ç»„å®ç°åˆ†é¡µ</strong></h2><p>studentMapperæ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface studentMapper &#123;<br>    public List&lt;student&gt; getStudentList();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>studentMapper.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentList&quot; resultMap&#x3D;&quot;studentMap&quot; &gt;<br>    select * from dbtest01.stu;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"><br>@Test<br>public void test1()&#123;<br><br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    studentMapper studentMapper &#x3D; sqlSession.getMapper(studentMapper.class);<br><br>    List&lt;student&gt; list &#x3D;  studentMapper.getStudentList().subList(0,2);<br><br>    for(student stu:list)&#123;<br>        System.out.println(stu);<br>    &#125;<br><br>    sqlSession.close();<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="åœ¨sqlä¸­å®ç°åˆ†é¡µ"><a href="#åœ¨sqlä¸­å®ç°åˆ†é¡µ" class="headerlink" title="åœ¨sqlä¸­å®ç°åˆ†é¡µ"></a><strong>åœ¨sqlä¸­å®ç°åˆ†é¡µ</strong></h2><p>åœ¨studentMapperæ¥å£ä¸­æ·»åŠ getStudentByLimitæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public List&lt;student&gt; getStudentByLimit(Map&lt;String,Integer&gt;map);<br></code></pre></td></tr></table></figure>

<p>Mapper.xmlä¸­é…ç½®getStudentByLimitçš„å®ç°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentByLimit&quot; parameterType&#x3D;&quot;map&quot; resultMap&#x3D;&quot;studentMap&quot;&gt;<br>	select * from dbtest01.stu limit $&#123;startIndex&#125;,$&#123;pageSize&#125;;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>å•å…ƒæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void getStudentByLimit()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    studentMapper studentMapper &#x3D; sqlSession.getMapper(mybatis.dao.studentMapper.class);<br><br>    Map&lt;String,Integer&gt; map &#x3D; new HashMap&lt;String, Integer&gt;();<br><br>    map.put(&quot;startIndex&quot;,0);<br><br>    map.put(&quot;pageSize&quot;,2);<br><br>    List&lt;student&gt; list &#x3D; studentMapper.getStudentByLimit(map);<br><br>    for (student student : list) &#123;<br>        System.out.println(student);<br>    &#125;<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="RowBoundsåˆ†é¡µ"><a href="#RowBoundsåˆ†é¡µ" class="headerlink" title="RowBoundsåˆ†é¡µ"></a><strong>RowBoundsåˆ†é¡µ</strong></h2><p>æ¥å£æ·»åŠ æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public List&lt;student&gt; getStudentByRowBound();<br></code></pre></td></tr></table></figure>

<p>xmlé…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentByRowBound&quot; resultMap&#x3D;&quot;studentMap&quot;&gt;<br>	select * from dbtest01.stu;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void getStudentByRowBound()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    List&lt;student&gt; students &#x3D; sqlSession.selectList(<br>            &quot;mybatis.dao.studentMapper.getStudentByRowBound&quot;,<br>            null, new RowBounds(1, 2));<br>    for (student student : students) &#123;<br>        System.out.println(student);<br>    &#125;<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>


<h2 id="åˆ†é¡µæ’ä»¶"><a href="#åˆ†é¡µæ’ä»¶" class="headerlink" title="åˆ†é¡µæ’ä»¶"></a><strong>åˆ†é¡µæ’ä»¶</strong></h2><p>æ–‡æ¡£ä¼ é€é—¨ï¼š <a href="https://pagehelper.github.io/docs/howtouse/">https://pagehelper.github.io/docs/howtouse/</a></p>
]]></content>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>mybaitså¼‚å¸¸è§£å†³</title>
    <url>/2020/10/25/mybatiswrong/</url>
    <content><![CDATA[<p>org.springframework.jdbc.BadSqlGrammarException</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥è¡¨çš„å­—æ®µæ˜¯å¦æ­£ç¡®</p>
<p>org.apache.ibatis.binding.BindingException</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><p>æ£€æŸ¥mapperæ¥å£æ˜¯å¦å’Œ.xmlåœ¨åŒä¸€ç›®å½•ä¸‹</p>
</li>
<li><p>æ£€æŸ¥.xmlæ–‡ä»¶çš„namespaceæ˜¯å¦è·Ÿmapperæ¥å£ä¸€æ ·</p>
</li>
<li><p>æ£€æŸ¥æ¥å£çš„è¿”å›å€¼å’Œxmlä¸­çš„æ˜¯å¦ä¸€è‡´</p>
</li>
<li><p>æ£€æŸ¥æ˜¯å¦ä¸ºpom.xmlçš„èµ„æºå¯¼å‡ºé—®é¢˜</p>
</li>
</ul>
<p><img src="/2020/10/25/mybatiswrong/pom.jpg" alt="pom"></p>
<p>åœ¨pom.xmlä¸­æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;build&gt;<br>    &lt;resources&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;resources&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;java&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>    &lt;&#x2F;resources&gt;<br>&lt;&#x2F;build&gt;<br></code></pre></td></tr></table></figure>

<p>è§£å†³èµ„æºå¯¼å‡ºé—®é¢˜</p>
<p>c3p0å¼‚å¸¸ï¼š</p>
<p><img src="/2020/10/25/mybatiswrong/c3p0wrong.jpg" alt="c3p0wrong"></p>
<p>åŸæ¥çš„ä¾èµ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>    &lt;groupId&gt;c3p0&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;c3p0&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.9.1.2&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<p>æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>    &lt;groupId&gt;com.mchange&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;c3p0&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;0.9.5.2&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>



<p>Cannot find class [com.mchange.v2.c3p0.ComboPooledDataSource] for bean with name â€˜dataSourceâ€™ defined in class path resource [spring-dao.xml]</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p><img src="/2020/10/25/mybatiswrong/c3p0wrong2.jpg" alt="c3p0wrong2"></p>
]]></content>
      <tags>
        <tag>å¼‚å¸¸è§£å†³</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring AOPçš„ä¸¤ç§å®ç°æ–¹å¼ï¼ˆXMLã€AspectJï¼‰</title>
    <url>/2020/09/25/AOP/</url>
    <content><![CDATA[<h2 id="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"><a href="#åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š" class="headerlink" title="åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š"></a>åŸºäºXMLé…ç½®çš„AOPå®ä¾‹ï¼š</h2><p>è¦ä½¿ç”¨é…ç½®å®ç°AOPç¼–ç¨‹ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­ä½¿ç”¨<a href="aop:config">aop:config</a>æ¥å£°æ˜ï¼Œè¿™ç§å£°æ˜æ–¹å¼ä½¿ç”¨äº†å¤§é‡çš„è‡ªåŠ¨ä»£ç†æ–¹å¼<br><strong>æ³¨ï¼šç¯å¢ƒå¯èƒ½ä¼šç¼ºå°‘å¿…è¦çš„åŒ…ï¼Œå¦‚aopalliance.jarã€aspectweaver.jar</strong></p>
<p>åœ¨<a href="aop:config">aop:config</a>ä¸­ä½¿ç”¨&lt;aop:aspect id=â€â€ ref=â€â€&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡é¢ï¼Œ&lt;aop:pointcut id expression/&gt;æ¥é…ç½®ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œ&lt;aop:before(or other) method=â€â€ pointcut=â€â€&gt;é…ç½®ä¸€ä¸ªå¢å¼ºï¼Œè¿™ä¸‰ä¸ªå°±ç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„åˆ‡é¢</p>
<p>ä¸‹é¢ä»‹ç»å¦‚ä½•é…ç½®ä¸€ä¸ªåˆ‡é¢å’Œåˆ‡é¢ä¸­çš„å‡ ç§å¢å¼º</p>
<p>å®šä¹‰ä¸€ä¸ªä¸šåŠ¡ç±»ServiceClassï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class ServiceClass &#123;<br>    public void service()&#123;<br>        System.out.println(&quot;this is service&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å®šä¹‰ä¸€ä¸ªMyAspectåˆ‡é¢ç±»ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶newcontext.xmlï¼Œå…¶ä¸­ï¼ŒMyAspectç±»ä½¿ç”¨Componentæ³¨è§£é…ç½®</p>
<h3 id="before"><a href="#before" class="headerlink" title="before"></a>before</h3><p><strong>beforeæ˜¯ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class MyAspect &#123;<br>    public void before()&#123;<br>        System.out.println(&quot;MyAspect&#39;s before&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>newcontext.xmlæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xmlns:aop&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&#x2F;spring-aop.xsd&quot;&gt;<br>    &lt;context:component-scan base-package&#x3D;&quot;demo&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;aop:config&gt;<br>        &lt;aop:aspect id&#x3D;&quot;aspect&quot; ref&#x3D;&quot;myAspect&quot;&gt;<br>            &lt;aop:pointcut id&#x3D;&quot;pointcut&quot; expression&#x3D;&quot;execution(* newdemo.ServiceClass.*(..))&quot;&#x2F;&gt;<br>            &lt;aop:before method&#x3D;&quot;before&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:before&gt;<br>        &lt;&#x2F;aop:aspect&gt;<br>    &lt;&#x2F;aop:config&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œåˆ‡ç‚¹ä¸­çš„expressionçš„å«ä¹‰ä¸ºï¼šåˆ‡ç‚¹ä¸ºnewdemo.ServiceClassè¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•</p>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        ServiceClass serviceClass &#x3D; (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);<br>        serviceClass.service();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service</p>
<h3 id="after"><a href="#after" class="headerlink" title="after"></a>after</h3><p><strong>ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•è¿›è¡Œçš„æ“ä½œï¼Œé€šå¸¸ç”¨äºé‡Šæ”¾èµ„æº</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ afteræ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void after()&#123;<br>        System.out.println(&quot;MyAspect&#39;s after&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;aop:after method&#x3D;&quot;after&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:after&gt;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after</p>
<h3 id="after-returing"><a href="#after-returing" class="headerlink" title="after-returing"></a>after-returing</h3><p><strong>after-returingæ˜¯ä¸šåŠ¡æ–¹æ³•è¿”å›å‰è¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ after-returningæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void afterReturning()&#123;<br>        System.out.println(&quot;MyAspect&#39;s afterReturning&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;aop:after-returning method&#x3D;&quot;afterReturning&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:after-returning&gt;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterReturning</p>
<h3 id="after-throwing"><a href="#after-throwing" class="headerlink" title="after-throwing"></a>after-throwing</h3><p><strong>after-throwingæ˜¯ä¸šåŠ¡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè¿›è¡Œçš„æ“ä½œ</strong></p>
<p>åˆ‡é¢ç±»æ·»åŠ afterthrowingæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void afterThrowing()&#123;<br>       System.out.println(&quot;MyAspect&#39;s afterThrowing&quot;);<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨ä¸šåŠ¡ç±»ServiceClassçš„serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void service() throws Exception&#123;<br>       System.out.println(&quot;this is service&quot;);<br>       throw new Exception();<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;aop:after-throwing method&#x3D;&quot;afterThrowing&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:after-throwing&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        ServiceClass serviceClass &#x3D; (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);<br>        try &#123;<br>            serviceClass.service();<br>        &#125;<br>        catch (Exception e)&#123;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s before<br>this is service<br>MyAspectâ€™s after<br>MyAspectâ€™s afterThrowing</p>
<h3 id="around"><a href="#around" class="headerlink" title="around"></a>around</h3><p><strong>aroundï¼šAdviceæœ€å¼ºæ“ä½œï¼Œå¯ä»¥ç»¼åˆå‰é¢å››ç§advice</strong></p>
<p>aroundæ–¹æ³•å¿…é¡»æœ‰Objectè¿”å›å€¼ï¼Œä¸”ç¬¬ä¸€ä¸ªå½¢å‚å¿…é¡»ä¸ºProceedingJoinPointç±»å‹ï¼Œaroundæ—¢å¯ä»¥åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹å‰å¢å¼ºåŠ¨ä½œï¼Œä¹Ÿèƒ½åœ¨æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹åè¿›è¡Œå¢å¼ºçš„æ‰§è¡Œï¼Œaroundå¢å¼ºå¯ä»¥å†³å®šä¸šåŠ¡æ–¹æ³•åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œåœ¨aroundæ–¹æ³•ä½“å†…ï¼Œåªæœ‰è°ƒç”¨ProceedingJoinPointå‚æ•°çš„procedd()æ–¹æ³•æ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ aroundæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public Object around(ProceedingJoinPoint pjp)&#123;<br>    Object object &#x3D; null;<br>    try&#123;<br>        object &#x3D; pjp.proceed();<br>        System.out.println(&quot;MyAspect&#39;s around&quot;);<br>    &#125;<br>    catch (Throwable throwable) &#123;<br><br>    &#125;<br>    return object;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xmlns:aop&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&#x2F;spring-aop.xsd&quot;&gt;<br>    &lt;context:component-scan base-package&#x3D;&quot;newdemo&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;aop:config&gt;<br>        &lt;aop:aspect id&#x3D;&quot;aspect&quot; ref&#x3D;&quot;myAspect&quot;&gt;<br>            &lt;aop:pointcut id&#x3D;&quot;pointcut&quot; expression&#x3D;&quot;execution(* newdemo.ServiceClass.*(..))&quot;&#x2F;&gt;<br>            &lt;aop:around method&#x3D;&quot;around&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:around&gt;<br>        &lt;&#x2F;aop:aspect&gt;<br>    &lt;&#x2F;aop:config&gt;<br>&lt;&#x2F;beans&gt;<br><br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>   public static void main(String[] args) &#123;<br>       ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>       ServiceClass serviceClass &#x3D; (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);<br>       serviceClass.service();<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>this is service<br>MyAspectâ€™s around</p>
<p>æ”¹å˜aroundæ–¹æ³•ä¸­ä¸¤æ¡è¯­å¥çš„ä½ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">System.out.println(&quot;MyAspect&#39;s around&quot;);<br>   object &#x3D; pjp.proceed();<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>MyAspectâ€™s around<br>this is service</p>
<p>è¯´æ˜åªæœ‰åœ¨æ‰§è¡ŒProceedingJoinPointå¯¹è±¡çš„proceedæ–¹æ³•åï¼Œæ‰ä¼šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•</p>
<ul>
<li>advice-parametersï¼šå¯ä»¥å¾€å¢å¼ºæ–¹æ³•ä¸­ä¼ å…¥ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œåœ¨åˆ‡å…¥ç‚¹é…ç½®å¥½å‚æ•°ç±»å‹å’Œå±æ€§åå³å¯</li>
</ul>
<p><strong>ä¸‹é¢ç”¨aroundæ¥æ¨¡æ‹Ÿå‰é¢çš„advice</strong></p>
<p>åˆ‡é¢ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class MyAspect &#123;<br>    public Object around(ProceedingJoinPoint pjp)&#123;<br>        Object object &#x3D; null;<br>        System.out.println(&quot;before&quot;);       &#x2F;&#x2F;æ­¤æ—¶è¿˜æœªæ‰§è¡Œpjpçš„proceedæ–¹æ³•ï¼Œä¸šåŠ¡æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°adviceå¢å¼º<br>        try&#123;<br>            object &#x3D; pjp.proceed();<br>        &#125;<br>        catch (Throwable throwable) &#123;       &#x2F;&#x2F;pjp.proceed()æ–¹æ³•è‹¥æ•æ‰å¼‚å¸¸ï¼Œåˆ™è¯´æ˜ä¸šåŠ¡æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸<br>        &#125;<br>        finally &#123;<br>        	System.out.println(&quot;after&quot;);    &#x2F;&#x2F;æ­¤æ—¶æ•æ‰å¼‚å¸¸ï¼Œä¸šåŠ¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ç›¸å½“äºå®ç°afterå¢å¼º<br>        &#125;<br>        System.out.println(&quot;after throwing&quot;);   &#x2F;&#x2F;è¿™å°±æ¨¡æ‹Ÿafter-throwingå¢å¼º<br>        return object;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xmlns:aop&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&#x2F;spring-aop.xsd&quot;&gt;<br>    &lt;context:component-scan base-package&#x3D;&quot;newdemo&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;aop:config&gt;<br>        &lt;aop:aspect id&#x3D;&quot;aspect&quot; ref&#x3D;&quot;myAspect&quot;&gt;<br>            &lt;aop:pointcut id&#x3D;&quot;pointcut&quot; expression&#x3D;&quot;execution(* newdemo.ServiceClass.*(..))&quot;&#x2F;&gt;<br>            &lt;aop:around method&#x3D;&quot;around&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:around&gt;<br>        &lt;&#x2F;aop:aspect&gt;<br>    &lt;&#x2F;aop:config&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        ServiceClass serviceClass &#x3D; (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);<br>        try &#123;<br>            serviceClass.service();<br>        &#125;<br>        catch (Exception e)&#123;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>before<br>this is service<br>after<br>after throwing</p>
<h3 id="advice-parameters"><a href="#advice-parameters" class="headerlink" title="advice-parameters"></a>advice-parameters</h3><p>åœ¨pointcutçš„expressionä¸­æŒ‡å®šæ–¹æ³•å‚æ•°ï¼Œå¯ä»¥è·å–ä¸šåŠ¡æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä»è€Œä½¿å¢å¼ºæ–¹æ³•ä¸­èƒ½ä½¿ç”¨è¿™äº›å‚æ•°</p>
<p>ServiceClassç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">	@Component<br>	public class ServiceClass &#123;<br>	    public void parametersService(String name,int age)&#123;<br>	        System.out.println(&quot;parametersService&#39;s&quot;+name+&quot; &quot;+age);<br>	    &#125;<br>	&#125;<br>&#96;&#96;&#96;	<br>åˆ‡é¢ç±»ä¸­æ·»åŠ ParametersMethodæ–¹æ³•ï¼š<br></code></pre></td></tr></table></figure>
<pre><code>public void ParametersMethod(String name,int age)&#123;
    System.out.println(&quot;ParametersMethod&#39;s&quot;+name+&quot; &quot;+age);
&#125;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æ·»åŠ é…ç½®ï¼š<br></code></pre></td></tr></table></figure>
<pre><code>&lt;aop:before method=&quot;ParametersMethod&quot; pointcut=&quot;execution(* newdemo.ServiceClass.parametersService(String,int)) and args(name,age)&quot;&gt;&lt;/aop:before&gt;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æµ‹è¯•ï¼š<br></code></pre></td></tr></table></figure>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        ServiceClass serviceClass = (ServiceClass)applicationContext.getBean(&quot;serviceClass&quot;);
        serviceClass.parametersService(&quot;zzzz&quot;,21);
    &#125;
&#125;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">è¾“å‡ºç»“æœ<br><br>ParametersMethod&#39;szzzz 21<br>parametersService&#39;szzzz 21<br><br><br>### Introduction å¼•å…¥<br><br>Introductionå…è®¸å°†ä¸€ä¸ªåˆ‡é¢å£°æ˜ä¸€ä¸ªå®ç°æŒ‡å®šæ¥å£çš„é€šçŸ¥å¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæ¥å£å®ç°ç±»æ¥ä»£è¡¨è¿™äº›å¯¹è±¡<br><br>ç”± &lt;aop: declare-parents&gt;å…ƒç´ å£°æ˜ <br><br>å®šä¹‰ä¸€ä¸ªMyInterfaceæ¥å£<br></code></pre></td></tr></table></figure>
<pre><code>public interface MyInterface &#123;
    public void show();
&#125;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æ¥å£å®ç°ç±»MyInterfaceImpl<br></code></pre></td></tr></table></figure>
<pre><code>public class MyInterfaceImpl implements MyInterface&#123;
    @Override
    public void show() &#123;
        System.out.println(&quot;this is my interface&quot;);
    &#125;
&#125;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æ·»åŠ é…ç½®ï¼š<br></code></pre></td></tr></table></figure>
<pre><code>aop:declare-parents types-matching=&quot;newdemo.ServiceClass&quot; implement-interface=&quot;newdemo.MyInterface&quot;
                             default-impl=&quot;newdemo.MyInterfaceImpl&quot;&gt;&lt;/aop:declare-parents&gt;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æµ‹è¯•ç±»ï¼š<br></code></pre></td></tr></table></figure>
<pre><code>public class TestClass &#123;
    public static void main(String[] args) &#123;
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);
        MyInterface myInterface = (MyInterface)applicationContext.getBean(&quot;serviceClass&quot;);
        myInterface.show();
    &#125;
&#125;</code></pre>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">è¾“å‡ºç»“æœï¼š<br>	<br>this is my interface<br><br>introductionçš„ä½œç”¨æ˜¯å¼ºè¡Œä¸ºServiceClassæ·»åŠ ä¸€ä¸ªçˆ¶ç±»ï¼Œå³MyInterfaceæ¥å£ï¼Œç”±ServiceClassä½œä¸ºæ¥å£çš„å®ç°ç±»<br><br><br>## åŸºäº@AspectJæ³¨è§£çš„AOPå®ä¾‹<br><br>@AspectJæ˜¯é¢„ç¼–è¯‘çš„AOPå®ç°æ–¹å¼ï¼Œ@AspecJçš„é£æ ¼ç±»ä¼¼çº¯javaæ³¨è§£çš„æ™®é€šjavaç±»ï¼Œ@AspectJæ˜¯æŒ‡æ˜aspectsçš„å¦ä¸€ç§é£æ ¼ï¼ŒåƒåŸºäºæ³¨è§£çš„IOCä¸€æ ·ï¼ŒåŸºäºæ³¨è§£çš„é…ç½®èƒ½è®©å¼€å‘å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚<br><br>å¯¹@AspectJçš„æ”¯æŒå¯ä»¥ä½¿ç”¨XMLæˆ–javaæ³¨é‡Šé£æ ¼çš„é…ç½®ï¼Œä¸¤ç§æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸€æ ·çš„<br><br>* ä½¿ç”¨XMlï¼Œè¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š<br>&#96;&#96;&#96;	<br>	&lt;aop: aspectj-autoproxy&gt;&lt;&#x2F;aop: aspectj-autoproxy&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>javaæ³¨é‡Šé£æ ¼çš„é…ç½®</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Configuration<br>@EnableAspectJAutoProxy<br></code></pre></td></tr></table></figure>
<p><strong>ä¸‹é¢ä½¿ç”¨XMLæ–‡ä»¶é…ç½®çš„æ–¹å¼ã€‚</strong></p>
<p>å®ç°ä¸€ä¸ªä¸šåŠ¡ç±»ServiceCLass</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class ServiceCLass &#123;<br>	    public void service()&#123;<br>       	System.out.println(&quot;service&quot;);<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>ç”Ÿæˆé…ç½®æ–‡ä»¶AspectJContext.xmlï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xmlns:aop&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&#x2F;spring-aop.xsd&quot;&gt;<br><br>    &lt;context:component-scan base-package&#x3D;&quot;NewAspectJ&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;aop:aspectj-autoproxy&gt;&lt;&#x2F;aop:aspectj-autoproxy&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>

<h3 id="Aspect"><a href="#Aspect" class="headerlink" title="@Aspect"></a>@Aspect</h3><p>æ‹¥æœ‰@Aspectçš„ä»»ä½•beanéƒ½ä¼šè¢«Springè‡ªåŠ¨è¯†åˆ«å¹¶åº”ç”¨</p>
<p>ç”¨@Aspectæ³¨è§£çš„ç±»å¯ä»¥æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰åˆ‡å…¥ç‚¹ã€é€šçŸ¥ã€å¼•å…¥ç­‰</p>
<p>@Aspectè¦å’Œ@Componentä¸€èµ·ä½¿ç”¨ï¼Œ@Componentæ˜¯è‡ªåŠ¨é…ç½®ä¸€ä¸ªbeanï¼Œè€Œ@Aspectæ˜¯è‡ªåŠ¨å°†è¿™ä¸ªbeané…ç½®ä¸ºåˆ‡é¢ï¼ˆæˆ–è€…åœ¨XMLä¸­æ‰‹åŠ¨é…ç½®beanï¼‰</p>
<p>å®šä¹‰åˆ‡é¢ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>@Aspect<br>public class MyAspect &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Pointcut"><a href="#Pointcut" class="headerlink" title="@Pointcut"></a>@Pointcut</h3><p>@Pointcut = è¡¨è¾¾å¼+ç­¾å</p>
<p><strong>@Pointcutçš„è¡¨è¾¾å¼æ ‡ç­¾æœ‰10ä¸­ï¼š</strong></p>
<ul>
<li>executionï¼šç”¨äºåŒ¹é…æ–¹æ³•æ‰§è¡Œçš„è¿æ¥ç‚¹</li>
<li>withinï¼šç”¨äºåŒ¹é…æŒ‡å®šç±»å‹å†…çš„æ–¹æ³•æ‰§è¡Œ</li>
<li>thisï¼šç”¨äºåŒ¹é…å½“å‰AOPä»£ç†å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯AOPä»£ç†å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±å¯èƒ½åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼›æ³¨æ„æ˜¯ç›®æ ‡å¯¹è±¡çš„ç±»å‹åŒ¹é…ï¼Œè¿™æ ·å°±ä¸åŒ…æ‹¬å¼•å…¥æ¥å£ä¹Ÿç±»å‹åŒ¹é…</li>
<li>argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸ºæŒ‡å®šç±»å‹çš„æ‰§è¡Œæ–¹æ³•</li>
<li>@withinï¼šç”¨äºåŒ¹é…æ‰€ä»¥æŒæœ‰æŒ‡å®šæ³¨è§£ç±»å‹å†…çš„æ–¹æ³•</li>
<li>@targetï¼šç”¨äºåŒ¹é…å½“å‰ç›®æ ‡å¯¹è±¡ç±»å‹çš„æ‰§è¡Œæ–¹æ³•ï¼Œå…¶ä¸­ç›®æ ‡å¯¹è±¡æŒæœ‰æŒ‡å®šçš„æ³¨è§£</li>
<li>@argsï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œçš„æ–¹æ³•ä¼ å…¥çš„å‚æ•°æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ‰§è¡Œ</li>
<li>@annotationï¼šç”¨äºåŒ¹é…å½“å‰æ‰§è¡Œæ–¹æ³•æŒæœ‰æŒ‡å®šæ³¨è§£çš„æ–¹æ³•</li>
<li>beanï¼šSpringAOPæ‰©å±•çš„ï¼ŒAspectJæ²¡æœ‰å¯¹äºæŒ‡ç¤ºç¬¦ï¼Œç”¨äºåŒ¹é…ç‰¹å®šåç§°çš„Beanå¯¹è±¡çš„æ‰§è¡Œæ–¹æ³•</li>
</ul>
<p>åˆ‡å…¥ç‚¹ä½¿ç”¨@Pointcutå¯¹æ–¹æ³•è¿›è¡Œæ³¨è§£ï¼Œæ–¹æ³•è¿”å›ç±»å‹å¿…é¡»ä¸ºvoidï¼Œ@Pointcutå®é™…ä¸Šæ˜¯å°†æ–¹æ³•åä½œä¸ºåˆ‡å…¥ç‚¹çš„ä¸€ä¸ªç­¾åï¼Œå³æ–¹æ³•å=åˆ‡å…¥ç‚¹id</p>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ pointcutç­¾å</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>@Aspect<br>public class MyAspect &#123;<br>    <br>    @Pointcut(&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;)<br>    public void pointcut()&#123;&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;aop:pointcut id&#x3D;&quot;pointcut&quot; expression&#x3D;&quot;execution(* NewAspectJ.ServiceCLass.service(..))&quot;&#x2F;&gt;<br></code></pre></td></tr></table></figure>
<p>Pointcutå®šä¹‰æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨&amp;&amp;ã€||ã€ï¼è¿™ä¸‰ç§è¿ç®—</p>
<pre><code>@Pointcut(&quot;within(NewAspectJ.ServiceCLass)&quot;)
public void pointcut1()&#123;&#125;
@Pointcut(&quot;execution(public * *(..))&quot;)
public void pointcut2()&#123;&#125;
@Pointcut(&quot;pointcut1()&amp;&amp;pointcut2()&quot;)
public void pointcut3()&#123;&#125;</code></pre>
<p>pointcut3è¡¨ç¤ºåˆ‡ç‚¹ä¸ºNewAspect.ServiceClassç±»ä¸­çš„æ‰€æœ‰publicæ–¹æ³•</p>
<h3 id="Adivce"><a href="#Adivce" class="headerlink" title="@Adivce"></a>@Adivce</h3><ul>
<li>@Before</li>
</ul>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ beforeæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Before(&quot;pointcut()&quot;)<br>   public void before()&#123;<br>       System.out.println(&quot;before&quot;);<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>ç­‰æ•ˆäºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;aop:before method&#x3D;&quot;before&quot; pointcut-ref&#x3D;&quot;pointcut&quot;&gt;&lt;&#x2F;aop:before&gt;<br></code></pre></td></tr></table></figure>
<p>åœ¨æµ‹è¯•ç±»TestClassä¸­æµ‹è¯•ï¼Œè¾“å‡º</p>
<p>before<br>service</p>
<p>å…¶ä»–adviceåŒç†</p>
<ul>
<li>@AfterReturning</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°è¿”å›çš„å®é™…å€¼ï¼Œå¯ä½¿ç”¨@AfterReturningç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨ä¸šåŠ¡ç±»ä¸­æ·»åŠ serviceResultæ–¹æ³•ï¼Œç”¨äºè¿”å›resultå€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public String serviceResult()&#123;<br>       return &quot;success&quot;;<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨åˆ‡é¢ç±»ä¸­æ·»åŠ æ–°çš„åˆ‡ç‚¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Pointcut(&quot;execution(* NewAspectJ.ServiceClass.serviceResult(..))&quot;)<br>   public void pointcut4()&#123;&#125;<br></code></pre></td></tr></table></figure>
<p>åˆ‡é¢ç±»ä¸­æ·»åŠ AfterReturningæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@AfterReturning(&quot;pointcut4(),returning &#x3D; &quot;Result&quot;&quot;)<br>public void AfterReturning(String Result)&#123;<br>    System.out.println(&quot;AfterReturning &#39;s &quot; + Result);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>AfterReturning &#39;s success</code></pre>
<ul>
<li>@AfterThrowing</li>
</ul>
<p>æœ‰æ—¶å€™éœ€è¦åœ¨é€šçŸ¥ä½“å†…å¾—åˆ°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¯ä½¿ç”¨åƒ@AfterReturningé‚£æ ·çš„ç»‘å®šè¿”å›å€¼çš„å½¢å¼</p>
<p>åœ¨serviceæ–¹æ³•ä¸­æŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void service() throws Exception&#123;<br>        System.out.println(&quot;service&quot;);<br>        throw new Exception(&quot;failed&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åˆ‡é¢ç±»æ·»åŠ AfterThrowingæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@AfterThrowing(value &#x3D; &quot;pointcut()&quot;,throwing &#x3D; &quot;e&quot;)<br>   public void AfterThrowing(Exception e)&#123;<br>       System.out.println(e.getMessage());<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>ç»“æœï¼š</p>
<pre><code>before
service
failed</code></pre>
<ul>
<li><p>@After<br>ä¸aop::afterç›¸åŒ</p>
</li>
<li><p>@Around<br>ä¸aop:aroundç›¸åŒ</p>
</li>
<li><p>@ç»™adviceä¼ é€’å‚æ•°</p>
</li>
</ul>
<p>åœ¨adviceä¸­ä½¿ç”¨advice(pointcut&amp;&amp;args)çš„æ–¹å¼å°†å‚æ•°ä¼ ç»™adviceï¼Œè‹¥æœ‰é‡è½½æ–¹æ³•ï¼Œåˆ™ä¼šè‡ªåŠ¨æ ¹æ®å‚æ•°åŒ¹é…</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨Aroundä¸­çš„ProceedingJoinPointå¯¹è±¡çš„getArgsæ–¹æ³•è¿”å›å‚æ•°æ•°ç»„</p>
<p>ä¸šåŠ¡ç±»ä¸­é‡è½½serviceæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void service(String users,String passwords)&#123;<br>       System.out.println(&quot;service &#39;s &quot; + users + &quot; &quot;+passwords);<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>åˆ‡é¢ç±»å®ç°aroundçš„adviceï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Around(&quot;pointcut()&amp;&amp;args(users,passwords)&quot;)<br>   public Object Around(ProceedingJoinPoint pjp,String users,String passwords)&#123;<br>       Object object &#x3D; null;<br>       System.out.println(&quot;Around&#39;s &quot; + users +&quot; &quot; + passwords);<br>       try&#123;<br>           object &#x3D; pjp.proceed();<br>           Object[] objects &#x3D; pjp.getArgs();<br>           System.out.println(&quot;ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°&quot;);<br>           System.out.println(Arrays.toString(objects));<br>       &#125;<br>       catch (Throwable e)&#123;<br><br>       &#125;<br>       return object;<br>   &#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœï¼š</p>
<p>Aroundâ€™s 123 123<br>before<br>service â€˜s 123 123<br>ä¹Ÿå¯ä»¥é€šè¿‡pjp.getArgs()è·å¾—å‚æ•°<br>[123, 123]</p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Springä¹‹æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</title>
    <url>/2020/09/24/IOC/</url>
    <content><![CDATA[<h2 id="IOCæ§åˆ¶åè½¬ï¼š"><a href="#IOCæ§åˆ¶åè½¬ï¼š" class="headerlink" title="IOCæ§åˆ¶åè½¬ï¼š"></a><strong>IOCæ§åˆ¶åè½¬ï¼š</strong></h2><h3 id="IOCæ¡ˆä¾‹ï¼š"><a href="#IOCæ¡ˆä¾‹ï¼š" class="headerlink" title="IOCæ¡ˆä¾‹ï¼š"></a><strong>IOCæ¡ˆä¾‹ï¼š</strong></h3><p>æ¥å£UserInterfaceï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface UserInterface &#123;<br>   	public void use();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ¥å£UserInterfaceçš„å®ç°ç±» UserImplï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class UserImpl implements UserInterface&#123;<br>   @Override<br>   	public void use() &#123;<br>       	System.out.println(&quot;User using!&quot;);<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç±» TextClassï¼š</p>
<!--     import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext; -->
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TextClass &#123;<br>   	public static void main(String[] args) &#123;<br>        UserInterface userInterface &#x3D; new UserImpl();<br>        userInterface.use();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>User usingï¼</p>
<p>åœ¨ä½¿ç”¨IOCä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨newæ¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨IOCä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨newæ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®XMLæ–‡ä»¶ï¼ŒæŠŠæ‰€éœ€è¦çš„ç±»å†™å…¥XMLæ–‡ä»¶ä¸­ï¼Œç”±Springæ¥ç®¡ç†å’Œè·å–å¯¹è±¡</p>
<p>å°†TextCLassä¸­ç¨‹åºæ”¹ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">import org.springframework.context.ApplicationContext;<br>import org.springframework.context.support.ClassPathXmlApplicationContext;<br>public class TextClass &#123;<br>    public static void main(String[] args) &#123;<br>        String xmlPath &#x3D; &quot;ApplicationContext.xml&quot;;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(xmlPath);<br>        UserInterface userInterface &#x3D; (UserInterface)applicationContext.getBean(&quot;UserId&quot;);<br>        userInterface.use();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åŒæ—¶åˆ›å»ºApplicationContext.XMLæ–‡ä»¶ï¼Œå¹¶é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;&gt;<br><br>    &lt;bean id&#x3D;&quot;UserId&quot; class&#x3D;&quot;UserImpl&quot;&gt;&lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­<strong>ç”±ä¸»åŠ¨åˆ›å»ºç±»</strong>è½¬å˜ä¸º<strong>é€šè¿‡Springç®¡ç†å’Œè·å–ç±»</strong>ï¼Œè¿™ä¸€è½¬å˜ç§°ä¸ºæ§åˆ¶åè½¬</p>
<hr>
<h2 id="DIä¾èµ–æ³¨å…¥"><a href="#DIä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¾èµ–æ³¨å…¥"></a><strong>DIä¾èµ–æ³¨å…¥</strong></h2><p>åœ¨IOCä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æ§åˆ¶åè½¬ï¼Œäº§ç”Ÿäº†ä¾èµ–ï¼Œä½†åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ¨æ€åœ°å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–ç±»ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°ä¾èµ–æ³¨å…¥DIï¼Œè¦æƒ³å®ç°ä¾èµ–æ³¨å…¥ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨éœ€è¦å…¶ä»–ç±»çš„æŸä¸ªå¯¹è±¡ä¸­æä¾›ä¸€ç§æ¸ é“ï¼ˆæ–¹æ³•ï¼‰æ¥å°†ä¾èµ–æ³¨å…¥ï¼Œæœ€ååœ¨XMLæ–‡ä»¶ä¸­è¿›è¡Œç›¸åº”çš„é…ç½®</p>
<p>ä¾èµ–æ³¨å…¥é€šå¸¸æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<ul>
<li><p>Setteræ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ„é€ æ–¹æ³•æ³¨å…¥</p>
</li>
<li><p>æ¥å£æ³¨å…¥</p>
</li>
</ul>
<p>ä¸‹é¢ä¸»è¦ä»‹ç»å‰ä¸¤ç§æ–¹æ³•</p>
<h3 id="DIæ¡ˆä¾‹ï¼š"><a href="#DIæ¡ˆä¾‹ï¼š" class="headerlink" title="DIæ¡ˆä¾‹ï¼š"></a><strong>DIæ¡ˆä¾‹ï¼š</strong></h3><p>æ·»åŠ ä¸€ä¸ªMyClassç±»ï¼Œç±»ä¸­æœ‰ç§æœ‰æˆå‘˜ userInterface</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyInterface &#123;<br>   	private UserInterface userInterface;<br>   	public void show()&#123;<br>   	    userInterface.use();<br>   	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="Setteræ–¹æ³•æ³¨å…¥"><a href="#Setteræ–¹æ³•æ³¨å…¥" class="headerlink" title="Setteræ–¹æ³•æ³¨å…¥"></a><strong>Setteræ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨ç±»ä¸­æ·»åŠ Setteræ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyClass &#123;<br>    private UserInterface userInterface;<br>    public void show()&#123;<br>        userInterface.use();<br>    &#125;<br>    public void setUserInterface(UserInterface userInterface)&#123;<br>        this.userInterface &#x3D; userInterface;<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®XMLæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>      xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>      xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;&gt;<br>   &lt;bean id&#x3D;&quot;UserId&quot; class&#x3D;&quot;UserImpl&quot;&gt;&lt;&#x2F;bean&gt;<br>   &lt;bean id&#x3D;&quot;MyClassId&quot; class&#x3D;&quot;MyClass&quot;&gt;<br>       &lt;property name&#x3D;&quot;userInterface&quot; ref&#x3D;&quot;UserId&quot;&gt;&lt;&#x2F;property&gt;<br>   &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>TextClassç±»ä¸­è¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">import org.springframework.context.ApplicationContext;<br>import org.springframework.context.support.ClassPathXmlApplicationContext;<br>public class TextClass &#123;<br>    public static void main(String[] args) &#123;<br>        String xmlPath &#x3D; &quot;ApplicationContext.xml&quot;;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(xmlPath);<br>        MyInterface myInterface &#x3D; (MyInterface)applicationContext.getBean(&quot;MyInterfaceId&quot;);<br>        myInterface.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>User usingï¼</p>
<h4 id="æ„é€ æ–¹æ³•æ³¨å…¥"><a href="#æ„é€ æ–¹æ³•æ³¨å…¥" class="headerlink" title="æ„é€ æ–¹æ³•æ³¨å…¥"></a><strong>æ„é€ æ–¹æ³•æ³¨å…¥</strong></h4><p>åœ¨MyClassç±»ä¸­æ·»åŠ æ„é€ å‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyClass &#123;<br>    private UserInterface userInterface;<br>    public void show()&#123;<br>        userInterface.use();<br>    &#125;<br>    public MyClass()&#123;&#125;<br>&#x2F;&#x2F;    æ„é€ æ–¹æ³•æ³¨å…¥<br>    public MyClass(UserInterface userInterface)&#123;<br>        this.userInterface &#x3D; userInterface;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®XMLæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;&gt;<br>    &lt;bean id&#x3D;&quot;UserId&quot; class&#x3D;&quot;UserImpl&quot;&gt;&lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;MyClassId&quot; class&#x3D;&quot;MyClass&quot;&gt;<br>        &lt;constructor-arg index&#x3D;&quot;0&quot; ref&#x3D;&quot;UserId&quot;&gt;&lt;&#x2F;constructor-arg&gt;<br>    &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰å¤šä¸ªå±æ€§ï¼Œindexåˆ™æŒ‰ç…§ä»0â€¦nè¿›è¡Œé…ç½®</p>
<p>è¿è¡ŒTextCLassï¼Œè¾“å‡ºç»“æœï¼š</p>
<p>User Usingï¼</p>
<h3 id="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"><a href="#DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥" class="headerlink" title="DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥"></a><strong>DIä¸­å±æ€§çš„ä¾èµ–æ³¨å…¥</strong></h3><p>ä»¥setteræ–¹æ³•æ³¨å…¥ä¸ºä¾‹ï¼š</p>
<p>æ–°å»ºä¸€ä¸ªUserç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">import java.util.*;<br><br>public class User &#123;<br>    private String id;<br>    private String name;<br>    private String[] strings &#x3D; new String[10];<br>    private List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();<br>    private Set&lt;String&gt; set &#x3D; new HashSet&lt;&gt;();<br>    private Map&lt;String,Integer&gt; map &#x3D; new HashMap&lt;&gt;();<br><br>    public void setId(String id) &#123;<br>        this.id &#x3D; id;<br>    &#125;<br><br>    public void setName(String name) &#123;<br>        this.name &#x3D; name;<br>    &#125;<br><br>    public void setStrings(String[] strings) &#123;<br>        this.strings &#x3D; strings;<br>    &#125;<br><br>    public void setList(List&lt;String&gt; list) &#123;<br>        this.list &#x3D; list;<br>    &#125;<br><br>    public void setSet(Set&lt;String&gt; set) &#123;<br>        this.set &#x3D; set;<br>    &#125;<br><br>    public void setMap(Map&lt;String, Integer&gt; map) &#123;<br>        this.map &#x3D; map;<br>    &#125;<br><br>    public Map&lt;String, Integer&gt; getMap() &#123;<br>        return map;<br>    &#125;<br><br>    public Set&lt;String&gt; getSet() &#123;<br>        return set;<br>    &#125;<br><br>    public List&lt;String&gt; getList() &#123;<br>        return list;<br>    &#125;<br><br>    public String[] getStrings() &#123;<br>        return strings;<br>    &#125;<br><br>    public String getName() &#123;<br>        return name;<br>    &#125;<br><br>    public String getId() &#123;<br>        return id;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®XMLæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>      xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>      xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;&gt;<br><br>   &lt;bean id&#x3D;&quot;UserId&quot; class&#x3D;&quot;User&quot;&gt;<br>       &lt;property name&#x3D;&quot;id&quot; value&#x3D;&quot;20185625&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zl&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;strings&quot;&gt;<br>           &lt;array&gt;<br>               &lt;value&gt;&quot;11&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;22&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;33&quot;&lt;&#x2F;value&gt;<br>           &lt;&#x2F;array&gt;<br>       &lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;list&quot;&gt;<br>           &lt;list&gt;<br>               &lt;value&gt;&quot;44&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;55&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;66&quot;&lt;&#x2F;value&gt;<br>           &lt;&#x2F;list&gt;<br>       &lt;&#x2F;property&gt;<br><br>       &lt;property name&#x3D;&quot;set&quot;&gt;<br>           &lt;set&gt;<br>               &lt;value&gt;&quot;77&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;88&quot;&lt;&#x2F;value&gt;<br>               &lt;value&gt;&quot;99&quot;&lt;&#x2F;value&gt;<br>           &lt;&#x2F;set&gt;<br>       &lt;&#x2F;property&gt;<br><br>       &lt;property name&#x3D;&quot;map&quot;&gt;<br>           &lt;map&gt;<br>               &lt;entry key&#x3D;&quot;111&quot; value&#x3D;&quot;111&quot;&gt;&lt;&#x2F;entry&gt;<br>               &lt;entry key&#x3D;&quot;222&quot; value&#x3D;&quot;222&quot;&gt;&lt;&#x2F;entry&gt;<br>           &lt;&#x2F;map&gt;<br>       &lt;&#x2F;property&gt;<br><br>   &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">import org.springframework.context.ApplicationContext;<br>import org.springframework.context.support.ClassPathXmlApplicationContext;<br><br>import java.util.Arrays;<br><br>public class TextClass &#123;<br>    public static void main(String[] args) &#123;<br>        String xmlPath &#x3D; &quot;ApplicationContext.xml&quot;;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(xmlPath);<br><br>        User user &#x3D; (User)applicationContext.getBean(&quot;UserId&quot;);<br>        System.out.println(Arrays.toString(user.getStrings()));<br>        System.out.println(user.getList());<br>        System.out.println(user.getMap());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code>[&quot;11&quot;, &quot;22&quot;, &quot;33&quot;]
[&quot;44&quot;, &quot;55&quot;, &quot;66&quot;]
&#123;111=111, 222=222&#125;</code></pre>
<hr>
<h2 id="Beançš„ä½œç”¨åŸŸ"><a href="#Beançš„ä½œç”¨åŸŸ" class="headerlink" title="Beançš„ä½œç”¨åŸŸ"></a><strong>Beançš„ä½œç”¨åŸŸ</strong></h2><p>å®šä¹‰ä¸€ä¸ªScopeClassç±» å’Œ TestClassï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class ScopeClass &#123;<br><br>    public void show()&#123;<br>        System.out.println(this.hashCode());<br>    &#125;<br><br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext&quot;);<br>        ScopeClass scopeClass &#x3D; (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);<br>        scopeClass.show();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="singleton"><a href="#singleton" class="headerlink" title="singleton:"></a><strong>singleton:</strong></h3><p>åœ¨XMLæ–‡ä»¶ä¸­é…ç½®:    </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;ScopeClassId&quot; class&#x3D;&quot;com.newdemo.ScopeClass&quot; scope&#x3D;&quot;singleton&quot;&gt;&lt;&#x2F;bean&gt;<br></code></pre></td></tr></table></figure>
<p>åœ¨TestClassè¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">	public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        ScopeClass scopeClass &#x3D; (ScopeClass)applicationContext.getBean(&quot;ScopeClassId&quot;);<br>        scopeClass.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>346224929<br>346224929</p>
<p>è¯´æ˜beanä¸­é…ç½®singletonå•ä¾‹ï¼Œä¸€ä¸ªbeanå®¹å™¨ï¼ˆåŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼‰ä¸­åªå­˜åœ¨ä¸€ä»½</p>
<hr>
<h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype:"></a><strong>prototype:</strong></h3><p>åœ¨xmlæ–‡ä»¶ä¸­å°†singletonæ”¹ä¸ºprototype</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>550752602<br>680779399</p>
<p>è¯´æ˜æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„å®ä¾‹</p>
<hr>
<h3 id="requestå’Œsession"><a href="#requestå’Œsession" class="headerlink" title="requestå’Œsession"></a><strong>requestå’Œsession</strong></h3><ul>
<li>requestï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ä¸”ä»…åœ¨å½“å‰requestæœ‰æ•ˆ</li>
<li>sessionï¼šåŒä¸Šï¼Œæ¯æ¬¡httpè¯·æ±‚åˆ›å»ºï¼Œå½“å‰sessionæœ‰æ•ˆ</li>
</ul>
<hr>
<h2 id="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯"></a><strong>Beançš„ç”Ÿå‘½å‘¨æœŸä¹‹åˆå§‹åŒ–å’Œé”€æ¯</strong></h2><p>å®Œæ•´çš„Beançš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šå®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ã€åˆå§‹åŒ–ã€é”€æ¯ï¼Œä¸‹é¢ä»‹ç»åˆå§‹åŒ–å’Œé”€æ¯ä¸¤éƒ¨åˆ†</p>
<p>Beançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
<li>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</li>
<li>åœ¨xmlå¤´ä¸­ä¸ºæ‰€æœ‰Beanå®šä¹‰é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªLifeCircleClassç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class LifeCircleClass &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>åœ¨ç±»ä¸­å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class LifeCircleClass &#123;<br>   	public void init()&#123;<br>       	System.out.println(&quot;init&quot;);<br>   	&#125;<br>   	public void destroy()&#123;<br>       	System.out.println(&quot;destroy&quot;);<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨xmlæ–‡ä»¶ä¸­é…ç½®beanï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;LifeCircleClassId&quot; class&#x3D;&quot;com.newdemo.LifeCircleClass&quot; init-method&#x3D;&quot;init&quot; destroy-method&#x3D;&quot;destroy&quot;&gt;&lt;&#x2F;bean&gt;<br><br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>       LifeCircleClass lifeCircleClass &#x3D; (LifeCircleClass)applicationContext.getBean(&quot;LifeCircleClassId&quot;);<br>       ((AbstractApplicationContext) applicationContext).close();  &#x2F;&#x2F;å…³é—­å®¹å™¨<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<p>init<br>destroy</p>
<hr>
<h3 id="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"><a href="#å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£" class="headerlink" title="å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£"></a><strong>å®ç°InitializingBeanå’ŒDisposableBeanæ¥å£</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class LifeCircleClass implements InitializingBean, DisposableBean &#123;<br><br>   	@Override<br>   	public void afterPropertiesSet() throws Exception &#123;<br>       	System.out.println(&quot;init&quot;);<br>   	&#125;<br><br>   	@Override<br>   	public void destroy() throws Exception &#123;<br>       	System.out.println(&quot;destroy&quot;);<br>   	&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯ä»¥ä¸åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h3 id="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a href="#åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•" class="headerlink" title="åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a><strong>åœ¨xmlæ–‡ä»¶å¤´ä¸­é…ç½®é»˜è®¤çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</strong></h3><p>default-init-method é¡¶çº§ <beans> å…ƒç´ å±æ€§ä¸Šå­˜åœ¨å±æ€§ä¼šå¯¼è‡´Spring IoCå®¹å™¨ init å°†beanç±»ä¸Šè°ƒç”¨çš„æ–¹æ³•è¯†åˆ«ä¸ºåˆå§‹åŒ–æ–¹æ³•å›è°ƒã€‚å½“beanè¢«åˆ›å»ºå’Œç»„è£…æ—¶ï¼Œå¦‚æœbeanç±»å…·æœ‰è¿™æ ·çš„æ–¹æ³•ï¼Œåˆ™åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨å®ƒã€‚</beans></p>
<p>å¦‚ï¼šåœ¨LifeCircleClassä¸­è‡ªå®šä¹‰init()å’Œdestroy()æ–¹æ³•ï¼Œåœ¨xmlå¤´ä¸­é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>      xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>      xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;<br>default-init-method&#x3D;&quot;init&quot; default-destroy-method&#x3D;&quot;destroy&quot;&gt;<br><br>   	&lt;bean id&#x3D;&quot;ScopeClassId&quot; class&#x3D;&quot;com.newdemo.ScopeClass&quot; scope&#x3D;&quot;prototype&quot;&gt;&lt;&#x2F;bean&gt;<br><br>   	&lt;bean id&#x3D;&quot;LifeCircleClassId&quot; class&#x3D;&quot;com.newdemo.LifeCircleClass&quot; &gt;&lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ªInitClassç±»å¹¶åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ï¼Œæµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        InitClass initClass &#x3D; (InitClass) applicationContext.getBean(&quot;InitClassId&quot;);<br>        ((AbstractApplicationContext) applicationContext).close();  &#x2F;&#x2F;å…³é—­å®¹å™¨<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœç›¸åŒ</p>
<hr>
<h2 id="Awareæ¥å£"><a href="#Awareæ¥å£" class="headerlink" title="Awareæ¥å£"></a><strong>Awareæ¥å£</strong></h2><p>Springä¸­æœ‰å¾ˆå¤šç»§æ‰¿äºAwareæ¥å£çš„å­—æ¥å£ï¼Œå¦‚ï¼š</p>
<p><img src="/2020/09/24/IOC/3397380-6ef519bbc705ce28.png" alt="Aware"></p>
<p>awareç¿»è¯‘ä¸ºæ„ŸçŸ¥çš„ï¼Œæ ¹æ®å­—é¢æ„æ€Awareæ¥å£åº”è¯¥æ˜¯å…·æœ‰æŸäº›æ„ŸçŸ¥çš„åŠŸèƒ½</p>
<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹ApplicationContextAwareæ¥å£å’ŒBeanNameAwareæ¥å£</p>
<p>æ–°å»ºä¸€ä¸ªAwareClassç±»ï¼Œç»§æ‰¿BeanNameAwareæ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class AwareClass implements BeanNameAware &#123;<br>    private String BeanName;<br>    @Override<br>    public void setBeanName(String s) &#123;<br>        this.BeanName &#x3D; s;<br>    &#125;<br><br>    public String getBeanName() &#123;<br>        return BeanName;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®bean</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;AwareClassId&quot; class&#x3D;&quot;com.newdemo.AwareClass&quot;&gt;&lt;&#x2F;bean&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>   public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        AwareClass awareClass &#x3D; (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);<br>        System.out.println(awareClass.getBeanName());<br>   	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<pre><code>AwareClassId</code></pre>
<p>å®ç°BeanNameAwareæ¥å£çš„ç±»é€šè¿‡setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–é…ç½®æ–‡ä»¶ä¸­çš„beanid</p>
<p>ç°åœ¨è®©Awareç±»ç»§æ‰¿ApplicationContextAwareç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class AwareClass implements BeanNameAware, ApplicationContextAware &#123;<br>    private String BeanName;<br>    private ApplicationContext applicationContext;<br>    @Override<br>    public void setBeanName(String s) &#123;<br>        this.BeanName &#x3D; s;<br>    &#125;<br><br>    public String getBeanName() &#123;<br>        return BeanName;<br>    &#125;<br><br>    @Override<br>    public void setApplicationContext(ApplicationContext applicationContext) &#123;<br>        this.applicationContext &#x3D; applicationContext;<br>    &#125;<br><br>    public ApplicationContext getApplicationContext() &#123;<br>        return applicationContext;<br>    &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>   public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        AwareClass awareClass &#x3D; (AwareClass)applicationContext.getBean(&quot;AwareClassId&quot;);<br>        ApplicationContext applicationContext1 &#x3D; awareClass.getApplicationContext();<br>        System.out.println(applicationContext&#x3D;&#x3D;applicationContext1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶è¾“å‡ºtrueï¼Œè¯´æ˜ApplicationContextæ¥å£ä¸­çš„setteræ–¹æ³•å¯ä»¥è‡ªåŠ¨è·å–è¯¥å®ç°ç±»æ‰€åœ¨çš„å®¹å™¨ï¼ˆä¸Šä¸‹æ–‡ï¼‰</p>
<p>åŒç†ï¼Œå…¶ä»–Awareçš„å­æ¥å£ä¹ŸåŒæ ·å…·æœ‰æ„ŸçŸ¥åŠŸèƒ½</p>
<hr>
<h2 id="Beançš„è‡ªåŠ¨è£…é…"><a href="#Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="Beançš„è‡ªåŠ¨è£…é…"></a><strong>Beançš„è‡ªåŠ¨è£…é…</strong></h2><p>å¯¹äºBeançš„å±æ€§çš„è‡ªåŠ¨è£…é…ï¼Œæ­¤æ—¶ä¸å†éœ€è¦åœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨å¯¹å±æ€§æ³¨å…¥ï¼Œä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°å±æ€§çš„è‡ªåŠ¨è£…é…ï¼š</p>
<ul>
<li>byname id==name</li>
<li>bytype å±æ€§type == xmlæ–‡ä»¶ä¸­çš„type</li>
<li>byconstructor æ„é€ å™¨åˆ—è¡¨å‚æ•°type==å±æ€§ç±»å‹</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªPersonç±»ã€PersonalInfoç±»ã€AddressInfoç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class Person &#123;<br>    private PersonalInfo personalInfo;<br>    private AddressInfo addressInfo;<br><br>    public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>        this.personalInfo &#x3D; personalInfo;<br>    &#125;<br><br>    public void setAddressInfo(AddressInfo addressInfo) &#123;<br>        this.addressInfo &#x3D; addressInfo;<br>    &#125;<br><br>    public void show()&#123;<br>        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>    &#125;<br>&#125;<br><br>public class PersonalInfo &#123;<br>    private String name;<br>    private int age;<br>    public void setName(String name) &#123;<br>        this.name &#x3D; name;<br>    &#125;<br>    public void setAge(int age) &#123;<br>        this.age &#x3D; age;<br>    &#125;<br><br>    public String getName() &#123;<br>        return name;<br>    &#125;<br><br>    public int getAge() &#123;<br>        return age;<br>    &#125;<br><br>    public int getAge() &#123;<br>        return age;<br>    &#125;<br>&#125;	<br><br>public class AddressInfo &#123;<br><br>    private String Province;<br>    private String city;<br><br>    public void setProvince(String province) &#123;<br>        Province &#x3D; province;<br>    &#125;<br><br>    public void setCity(String city) &#123;<br>        this.city &#x3D; city;<br>    &#125;<br><br>    public String getProvince() &#123;<br>        return Province;<br>    &#125;<br><br>    public String getCity() &#123;<br>        return city;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<hr>
<h3 id="byname"><a href="#byname" class="headerlink" title="byname"></a><strong>byname</strong></h3><p>ä½¿ç”¨bynameè‡ªåŠ¨è£…é…ï¼Œè¦æ±‚è¢«è£…é…çš„å±æ€§åè¦ä¸xmlæ–‡ä»¶ä¸­æŸä¸ªBeançš„beanIdç›¸åŒï¼Œå¦åˆ™ä¸è¿›è¡Œè£…é…</p>
<p>åœ¨xmlä¸­é…ç½®bean </p>
<p><strong><em>æ³¨ï¼šåœ¨é…ç½®idçš„æ—¶å€™å°½é‡é…ç½®å°å†™ï¼Œä¸ç„¶æœ‰æ—¶å€™ä¼šå‡ºé”™ï¼ŒåŸå› ä¸æ¸…æ¥š</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;personalInfo&quot; class&#x3D;&quot;com.newdemo.PersonalInfo&quot;&gt;<br>       &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zll&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;age&quot; value&#x3D;&quot;21&quot;&gt;&lt;&#x2F;property&gt;<br>   &lt;&#x2F;bean&gt;<br><br>   &lt;bean id&#x3D;&quot;addressInfo&quot; class&#x3D;&quot;com.newdemo.AddressInfo&quot;&gt;<br>       &lt;property name&#x3D;&quot;province&quot; value&#x3D;&quot;GuangDong&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;city&quot; value&#x3D;&quot;GuangZhou&quot;&gt;&lt;&#x2F;property&gt;<br>   &lt;&#x2F;bean&gt;<br><br>   &lt;bean id&#x3D;&quot;PersonId&quot; class&#x3D;&quot;com.newdemo.Person&quot; autowire&#x3D;&quot;byName&quot;&gt;&lt;&#x2F;bean&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;PersonId&quot;);<br>        person.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<hr>
<h3 id="bytype"><a href="#bytype" class="headerlink" title="bytype"></a><strong>bytype</strong></h3><p>bytypeè¦æ±‚å±æ€§çš„ç±»å‹ä¸xmlæ–‡ä»¶ä¸­çš„ç±»å‹ç›¸åŒæ—¶æ‰è‡ªåŠ¨è£…é…</p>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h3 id="byConstructor"><a href="#byConstructor" class="headerlink" title="byConstructor"></a><strong>byConstructor</strong></h3><p>åœ¨Personç±»ä¸­æ·»åŠ æ„é€ æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"> public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;<br>    	this.personalInfo &#x3D; personalInfo;<br>    	this.addressInfo &#x3D; addressInfo;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨xmlæ–‡ä»¶ä¸­çš„autowireæ”¹ä¸ºbytypeï¼Œè¾“å‡ºç»“æœç›¸åŒ</p>
<hr>
<h2 id="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"><a href="#æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®" class="headerlink" title="æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®"></a><strong>æ³¨è§£å®ç°Beançš„è‡ªåŠ¨é…ç½®</strong></h2><p>Spring2.5å¼•å…¥äº†é€šè¿‡æ³¨è§£æ¥é…ç½®beanåŠæ³¨å…¥ä¾èµ–çš„æ–¹æ³•ï¼Œä½¿ç”¨æ³¨è§£é…ç½®æ—¶ï¼Œä¸å†éœ€è¦é€šè¿‡xmlæ–‡ä»¶é…ç½®beanç±»ï¼Œç®€åŒ–äº†é…ç½®å·¥ä½œ</p>
<h3 id="Componentã€-Serviceã€-Controllerã€-Repository"><a href="#Componentã€-Serviceã€-Controllerã€-Repository" class="headerlink" title="@Componentã€@Serviceã€@Controllerã€@Repository"></a><strong>@Componentã€@Serviceã€@Controllerã€@Repository</strong></h3><p>@Componentæ˜¯ä¸€ä¸ªé€šç”¨çš„Beanæ³¨è§£ï¼Œé€šå¸¸ç”¨äºæ³¨è§£ä¸šåŠ¡ä¸­åŠŸèƒ½ä¸æ¸…æ¥šçš„Bean</p>
<p>@Serviceã€@Controllerã€@Repositoryåˆ™æ˜¯æ ¹æ®ä¸åŒåœºæ™¯æ‰€é‡‡å–çš„ç‰¹å®šæ³¨è§£ï¼Œåœ¨Springçš„ä¸‰å±‚æ¶æ„ä¸­ï¼Œ@Serviceå¯¹åº”ä¸šåŠ¡å±‚ã€@Controllerå¯¹åº”æ§åˆ¶å±‚ã€@Repositoryå¯¹åº”æŒä¹…å±‚</p>
<p>ä»¥ä¸Šå››ä¸ªæ³¨è§£èƒ½å¤Ÿè‡ªåŠ¨è£…é…æŸä¸ªç±»ï¼Œç›¸å½“äºåœ¨xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨é…ç½®beanï¼Œé»˜è®¤çš„idä¸ºç±»åé¦–å­—æ¯å°å†™</p>
<p>@Componentçš„ç±»ä¸­å±æ€§ä¹Ÿä¼šè¢«è‡ªåŠ¨è£…é…ï¼ˆæŒ‰æ„é€ å™¨typeè‡ªåŠ¨è£…é…ï¼‰</p>
<p><strong><em>æ³¨ï¼šå®ç°è‡ªåŠ¨é…ç½®å‰ï¼Œè¦åœ¨xmlæ–‡ä»¶ä¸­åŠ ä¸Šï¼š</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;context:component-scan base-package&#x3D;&quot;packageName&quot;&#x2F;&gt;<br></code></pre></td></tr></table></figure>
<p>å¦åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°beanidçš„å¼‚å¸¸</p>
<p>è¿˜æ˜¯ä¸Šé¢çš„Personç±»ï¼Œåˆ é™¤Personç±»åœ¨xmlä¸­çš„é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class Person &#123;<br>    private PersonalInfo personalInfo;<br>    private AddressInfo addressInfo;<br><br>&#x2F;&#x2F;    public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>&#x2F;&#x2F;        this.personalInfo &#x3D; personalInfo;<br>&#x2F;&#x2F;    &#125;<br>&#x2F;&#x2F;<br>&#x2F;&#x2F;    public void setAddressInfo(AddressInfo addressInfo) &#123;<br>&#x2F;&#x2F;        this.addressInfo &#x3D; addressInfo;<br>&#x2F;&#x2F;    &#125;<br><br><br>    public Person(PersonalInfo personalInfo,AddressInfo addressInfo) &#123;<br>        this.personalInfo &#x3D; personalInfo;<br>        this.addressInfo &#x3D; addressInfo;<br>    &#125;<br><br>    public void show()&#123;<br>        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;person&quot;);<br>        person.show();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>å®ŒæˆPersonçš„è‡ªåŠ¨é…ç½®ï¼Œä¸”Personä¸­çš„å±æ€§ä¹Ÿè‡ªåŠ¨è£…é…</p>
<hr>
<h3 id="Required"><a href="#Required" class="headerlink" title="@Required"></a>@Required</h3><p>@Requiredä½œç”¨äºå±æ€§çš„setteræ–¹æ³•ï¼Œè¡¨æ˜è¯¥å±æ€§å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<p>åœ¨Personç±»ä¸­æ·»åŠ å±æ€§String nameã€setterå’Œgetteræ–¹æ³•ï¼Œå¹¶æ·»åŠ @Requiredæ³¨è§£</p>
<p>è‹¥ä¸è¿›è¡Œé…ç½®ï¼Œåˆ™ä¼šæç¤ºé”™è¯¯ï¼š</p>
<p><img src="/2020/09/24/IOC/1601282519408.jpg" alt="error"></p>
<p>æ·»åŠ é…ç½®å³å¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;RequiredName&quot;&gt;&lt;&#x2F;property&gt;<br></code></pre></td></tr></table></figure>


<hr>
<h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>@Autowiredæ³¨è§£çš„åŠŸèƒ½æ˜¯ä¸ºå±æ€§è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œ@Autowiredå¯ä½œç”¨äºå±æ€§ã€setterã€æ„é€ æ–¹æ³•ï¼Œ@Autowiredé€šè¿‡bytypeæ–¹æ³•æŸ¥æ‰¾ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§typeç›¸åŒçš„beanè¿›è¡Œé…ç½®ï¼Œ@Autowiredä¸­é»˜è®¤ä¸ºRequired=true å³å¼ºåˆ¶ä¸Šä¸‹æ–‡å¿…é¡»è¦å­˜åœ¨ä¸å±æ€§typeç›¸åŒçš„beanï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ç”¨required=falseæ¶ˆé™¤è¿™ç§å¼ºåˆ¶æ€§</p>
<p><strong>ä½œç”¨äºå±æ€§</strong></p>
<p>å½“@Autowiredä½œç”¨äºå±æ€§æ—¶ï¼Œå¯ä»¥ä¸ç”¨åœ¨ç±»ä¸­æ·»åŠ è¯¥å±æ€§çš„setteræ–¹æ³•æˆ–æ„é€ å™¨ï¼Œä¹Ÿä¸ç”¨åœ¨è¯¥ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<p>å°†Personç±»ä¸­çš„PersonalInfoå’ŒAddressInfoéƒ½åŠ ä¸Š@Autowiredæ³¨è§£ï¼Œåˆ é™¤æ„é€ æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class Person &#123;<br>    @Autowired<br>    private PersonalInfo personalInfo;<br>    @Autowired<br>    private AddressInfo addressInfo;<br>&#x2F;&#x2F;    public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>&#x2F;&#x2F;        this.personalInfo &#x3D; personalInfo;<br>&#x2F;&#x2F;    &#125;<br>&#x2F;&#x2F;    public void setAddressInfo(AddressInfo addressInfo) &#123;<br>&#x2F;&#x2F;        this.addressInfo &#x3D; addressInfo;<br>&#x2F;&#x2F;    &#125;<br>&#x2F;&#x2F;    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;<br>&#x2F;&#x2F;        this.personalInfo &#x3D; personalInfo;<br>&#x2F;&#x2F;        this.addressInfo &#x3D; addressInfo;<br>&#x2F;&#x2F;    &#125;<br><br>    public void show()&#123;<br>        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;person&quot;);<br>        person.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<p>zll 21<br>GuangDong GuangZhou</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæŠŠxmlæ–‡ä»¶ä¸­PersonalInfoçš„beané…ç½®åˆ é™¤ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ å› ä¸ºä½¿ç”¨@Autowiredæ³¨è§£çš„å±æ€§ï¼Œé»˜è®¤xmlæ–‡ä»¶ä¸­å¿…é¡»å­˜åœ¨ä¸å±æ€§ç›¸åŒç±»å‹çš„bean</p>
<p>å°†PersonalInfoçš„@Autowiredæ³¨è§£æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Autowired(required &#x3D; false)<br>   private PersonalInfo personalInfo;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶é€šè¿‡ç¼–è¯‘ï¼Œä¸è¿‡ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºä¸Šä¸‹æ–‡æ— æ³•åŒ¹é…PersonalInfoè¿™ä¸€å±æ€§ï¼Œå°†Personç±»ä¸­çš„showå‡½æ•°æ³¨é‡ŠPersonalInfoçš„è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">    public void show()&#123;<br>&#x2F;&#x2F;        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<p>GuangDong GuangZhou</p>
<hr>
<p><strong>ä½œç”¨äºsetteræ–¹æ³•</strong></p>
<p>@Autowiredä½œç”¨äºsetteræ–¹æ³•æ—¶ï¼Œä¸éœ€è¦åœ¨ç±»çš„beanä¸­é…ç½®å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class Person &#123;<br>    private PersonalInfo personalInfo;<br>    private AddressInfo addressInfo;<br>    @Autowired<br>    public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>        this.personalInfo &#x3D; personalInfo;<br>    &#125;<br>    @Autowired<br>    public void setAddressInfo(AddressInfo addressInfo) &#123;<br>        this.addressInfo &#x3D; addressInfo;<br>    &#125;<br>&#x2F;&#x2F;    public Person(PersonalInfo personalInfo, AddressInfo addressInfo) &#123;<br>&#x2F;&#x2F;        this.personalInfo &#x3D; personalInfo;<br>&#x2F;&#x2F;        this.addressInfo &#x3D; addressInfo;<br>&#x2F;&#x2F;    &#125;<br><br>    public void show()&#123;<br>        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœç›¸åŒï¼Œç›¸å½“äºbeanä¸­é…ç½®autowire=bytype</p>
<hr>
<p><strong>ä½œç”¨äºæ„é€ æ–¹æ³•</strong></p>
<p>ä¸ä½œç”¨äºsetteræ–¹æ³•åŒç†</p>
<hr>
<p><strong>é›†åˆçš„æ³¨å…¥</strong></p>
<p>Personç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class Person &#123;<br>    private PersonalInfo personalInfo;<br>    private AddressInfo addressInfo;<br>    private List&lt;PersonalInfo&gt; list;<br><br>    @Autowired<br>    public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>        this.personalInfo &#x3D; personalInfo;<br>    &#125;<br>    @Autowired<br>    public void setAddressInfo(AddressInfo addressInfo) &#123;<br>        this.addressInfo &#x3D; addressInfo;<br>    &#125;<br><br>    @Autowired<br>    public void setList(List&lt;PersonalInfo&gt; list) &#123;<br>        this.list &#x3D; list;<br>    &#125;<br><br>    public void show()&#123;<br>		list.forEach(v-&gt; System.out.println(v.getName()+&quot; &quot;+v.getAge()));<br>    &#125;<br>&#125;	<br></code></pre></td></tr></table></figure>
<p>å¹¶åœ¨xmlæ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ªPersonalInfoçš„Bean</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;personalInfo&quot; class&#x3D;&quot;com.newdemo.PersonalInfo&quot;&gt;<br>       &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zll&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;age&quot; value&#x3D;&quot;21&quot;&gt;&lt;&#x2F;property&gt;<br>   &lt;&#x2F;bean&gt;<br>   <br>   &lt;bean id&#x3D;&quot;personalInfo1&quot; class&#x3D;&quot;com.newdemo.PersonalInfo&quot;&gt;<br>       &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zlll&quot;&gt;&lt;&#x2F;property&gt;<br>       &lt;property name&#x3D;&quot;age&quot; value&#x3D;&quot;211&quot;&gt;&lt;&#x2F;property&gt;<br>   &lt;&#x2F;bean&gt;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;person&quot;);<br>        person.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>è¯´æ˜é›†åˆçš„è‡ªåŠ¨è£…é…ä¸­ï¼Œä¼šè‡ªåŠ¨æœç´¢ä¸Šä¸‹æ–‡ä¸­ä¸å±æ€§ç±»å‹ç›¸åŒçš„beanï¼Œå¹¶æŠŠè¿™äº›æ‰€æœ‰çš„beanåŒæ—¶æ³¨å…¥é›†åˆä¸­</p>
<p>å°†å±æ€§æ”¹ä¸ºmapæ˜ å°„      private Map&lt;String,PersonalInfo&gt; map;</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">    public void show()&#123;<br>&#x2F;&#x2F;        System.out.println(personalInfo.getName()+&quot; &quot;+personalInfo.getAge());<br>&#x2F;&#x2F;        System.out.println(addressInfo.getProvince()+&quot; &quot;+addressInfo.getCity());<br>&#x2F;&#x2F;        System.out.println(list);<br>        map.forEach((k,v)-&gt; System.out.println(map.get(k).getName()+&quot; &quot;+map.get(k).getAge()));<br>        System.out.println();<br>        map.forEach((k,v)-&gt; System.out.println(k+&quot; &quot; +v));<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<p>zll 21<br>zlll 211</p>
<p>personalInfo com.newdemo.PersonalInfo@1eb5174b<br>personalInfo1 com.newdemo.PersonalInfo@67080771</p>
<p>è¯´æ˜æ˜¯å°†beançš„idä½œä¸ºé”®ï¼Œå¯¹è±¡ä½œä¸ºå€¼</p>
<hr>
<h3 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a><strong>@Qualifier</strong></h3><p>å½“xmlæ–‡ä»¶ä¸­å­˜åœ¨å¤šä¸ªtypeç›¸åŒç±»å‹çš„beanæ—¶ï¼Œè‹¥ä½¿ç”¨è‡ªåŠ¨é…ç½®ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥åŒ¹é…å“ªä¸ªåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç”¨@Qualifieræ¥åˆ¶å®šåŒ¹é…å“ªä¸ªbean</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"> &lt;bean id&#x3D;&quot;personalInfo&quot; class&#x3D;&quot;com.newdemo.PersonalInfo&quot;&gt;<br>    &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zll&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;property name&#x3D;&quot;age&quot; value&#x3D;&quot;21&quot;&gt;&lt;&#x2F;property&gt;<br>&lt;&#x2F;bean&gt;<br>&lt;bean id&#x3D;&quot;personalInfo_Id&quot; class&#x3D;&quot;com.newdemo.PersonalInfo&quot;&gt;<br>    &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;zllll&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;property name&#x3D;&quot;age&quot; value&#x3D;&quot;2111&quot;&gt;&lt;&#x2F;property&gt;<br>&lt;&#x2F;bean&gt;<br><br>   @Autowired<br>@Qualifier(&quot;personalInfo_Id&quot;)<br>public void setPersonalInfo(PersonalInfo personalInfo) &#123;<br>    this.personalInfo &#x3D; personalInfo;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<p>zllll 2111</p>
<hr>
<h3 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a><strong>@Bean</strong></h3><p>ç”¨@Beanæ³¨è§£çš„æ–¹æ³•ä¼šé…ç½®ã€å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”±IOCå®¹å™¨ç®¡ç†ï¼Œbean_idä¸ºæ–¹æ³•åï¼Œç›¸å½“äº <bean id="method-name" class="..."></bean></p>
<p>æ–°å»ºä¸€ä¸ªCharacterInfoç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class CharacterInfo &#123;<br>    public void show()&#123;<br>        System.out.println(&quot;Character&#39;show&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨Personç±»ä¸­æ·»åŠ CharacterInfoç±»å±æ€§ï¼Œå¹¶æ·»åŠ getCharacterInfo()æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public CharacterInfo getCharacterInfo()&#123;<br>    return new CharacterInfo();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨testClassä¸­æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        CharacterInfo characterInfo &#x3D; (CharacterInfo)applicationContext.getBean(&quot;getCharacterInfo&quot;);<br>        characterInfo.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<p>Characterâ€™show</p>
<hr>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a><strong>@Configuration</strong></h3><p>@Configurationç”¨äºå®šä¹‰é…ç½®ç±»ï¼Œç›¸å½“äº<beans>â€¦</beans>ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¢«@Beanæ³¨è§£çš„æ–¹æ³•</p>
<p>å°†Personç±»çš„æ³¨è§£æ”¹ä¸º@Configurationï¼Œå¯å¾—åˆ°ç›¸åŒçš„ç»“æœ</p>
<ul>
<li>@Scope</li>
</ul>
<p>@Scopeç”¨æ¥å®šä¹‰beançš„ä½œç”¨åŸŸï¼Œé»˜è®¤å•ä¾‹ï¼Œç›¸å½“äº<bean id class scope="singleton"></bean></p>
<p>å°†@Scopeä½œç”¨åœ¨Personç±»ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;person&quot;);<br>        Person person1 &#x3D; (Person)applicationContext.getBean(&quot;person&quot;);<br>        System.out.println(person);<br>        System.out.println(person1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<p>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6<br>com.newdemo.Person$$EnhancerBySpringCGLIB$$5578c3b8@6f10d5b6</p>
<hr>
<h2 id="è‡ªå®šä¹‰å‘½åç­–ç•¥"><a href="#è‡ªå®šä¹‰å‘½åç­–ç•¥" class="headerlink" title="è‡ªå®šä¹‰å‘½åç­–ç•¥"></a><strong>è‡ªå®šä¹‰å‘½åç­–ç•¥</strong></h2><p>åœ¨Springä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é€šè¿‡å®ç°BeanNameGeneratoræ¥å£ï¼Œç„¶ååœ¨xmlæ–‡ä»¶ä¸­é…ç½®è‡ªå®šä¹‰å‘½åç±»ï¼Œæ¥å®Œæˆå¯¹beançš„è‡ªå®šä¹‰å‘½åç­–ç•¥    </p>
<p>å®šä¹‰MyBeanNameGeneratorç±»ï¼Œå®ç°BeanNameGeneratoræ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyBeanNameGenerator implements BeanNameGenerator &#123;<br>    @Override<br>    public String generateBeanName(BeanDefinition beanDefinition, BeanDefinitionRegistry beanDefinitionRegistry) &#123;<br>        return beanDefinition.getBeanClassName()+&quot;Id&quot;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class TestClass &#123;<br>    public static void main(String[] args) &#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;newcontext.xml&quot;);<br>        Person person &#x3D; (Person)applicationContext.getBean(&quot;com.newdemo.PersonId&quot;);<br>        person.show();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p>zllll 2111</p>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
        <tag>IOC</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¦‚è¿°</title>
    <url>/2020/10/28/os/</url>
    <content><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿå¼•è®º"><a href="#æ“ä½œç³»ç»Ÿå¼•è®º" class="headerlink" title="æ“ä½œç³»ç»Ÿå¼•è®º"></a><strong>æ“ä½œç³»ç»Ÿå¼•è®º</strong></h1><h2 id="ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"></a><strong>ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</strong></h2><p>æ“ä½œç³»ç»Ÿï¼ˆosï¼‰æ˜¯é…ç½®åœ¨è®¡ç®—æœºç¡¬ä»¶ä¸Šçš„ç¬¬ä¸€å±‚è½¯ä»¶ï¼Œæ˜¯å¯¹ç¡¬ä»¶ç³»ç»Ÿçš„é¦–æ¬¡æ‰©å……ï¼Œosçš„ä¸»è¦ä½œç”¨æ˜¯ç®¡ç†å¥½è¿™äº›è®¾å¤‡ï¼Œæé«˜å®ƒä»¬çš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼Œå¹¶ä¸ºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºæä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œä¾¿äºä½¿ç”¨ã€‚</p>
<p>osæ˜¯ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­æœ€åŸºæœ¬å’Œæœ€é‡è¦çš„ç³»ç»Ÿè½¯ä»¶ï¼Œå…¶ä»–çš„ç¼–è¯‘ç¨‹åºã€ç®¡ç†ç³»ç»Ÿç­‰ç³»ç»Ÿè½¯ä»¶ï¼Œä»¥åŠå¤§é‡çš„åº”ç”¨è½¯ä»¶ï¼Œéƒ½ç›´æ¥ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„æ”¯æŒå’ŒæœåŠ¡</p>
<h2 id="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡å’Œä½œç”¨"><a href="#æ“ä½œç³»ç»Ÿçš„ç›®æ ‡å’Œä½œç”¨" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡å’Œä½œç”¨"></a><strong>æ“ä½œç³»ç»Ÿçš„ç›®æ ‡å’Œä½œç”¨</strong></h2><h3 id="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡"><a href="#æ“ä½œç³»ç»Ÿçš„ç›®æ ‡" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡"></a><strong>æ“ä½œç³»ç»Ÿçš„ç›®æ ‡</strong></h3><p>åœ¨è®¡ç®—æœºä¸Šé…ç½®æ“ä½œç³»ç»Ÿï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>æ–¹ä¾¿æ€§</li>
<li>æœ‰æ•ˆæ€§</li>
<li>å¯æ‰©å……æ€§</li>
<li>å¼€æ”¾æ€§</li>
</ul>
<h3 id="æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨"><a href="#æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨"></a><strong>æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨</strong></h3><h4 id="osä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£"><a href="#osä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£" class="headerlink" title="osä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£"></a><strong>osä½œä¸ºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´çš„æ¥å£</strong></h4><p>oså¤„äºç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ç³»ç»Ÿä¹‹é—´ï¼Œç”¨æˆ·é€šè¿‡osæ¥ä½¿ç”¨è®¡ç®—æœºç³»ç»Ÿ</p>
<p><img src="/2020/10/28/os/osinterface.jpg" alt="osinterface"></p>
<p>ç”±å›¾çœ‹å‡ºï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ å‘½ä»¤æ–¹å¼ ã€ ç³»ç»Ÿè°ƒç”¨æ–¹å¼ ã€ å›¾æ ‡-çª—å£æ–¹å¼ å®ç°ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„é€šä¿¡</p>
<h4 id="osä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…"><a href="#osä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…" class="headerlink" title="osä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…"></a><strong>osä½œä¸ºè®¡ç®—æœºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…</strong></h4><p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œé€šå¸¸åŒ…å«è®¸å¤šç¡¬ä»¶å’Œè½¯ä»¶èµ„æºï¼Œè¿™äº›èµ„æºå¯åˆ†ä¸ºï¼š</p>
<ul>
<li><p>å¤„ç†æœº</p>
</li>
<li><p>å­˜å‚¨å™¨</p>
</li>
<li><p>I/Oè®¾å¤‡</p>
</li>
<li><p>æ–‡ä»¶ï¼ˆæ•°æ®å’Œç¨‹åºï¼‰</p>
</li>
</ul>
<p>ç›¸åº”åœ°ï¼ŒOSçš„åŠŸèƒ½ä¹Ÿæ­£æ˜¯å¯¹è¿™å››ç±»èµ„æºè¿›è¡Œæœ‰æ•ˆçš„ç®¡ç†</p>
<h4 id="oså®ç°äº†å¯¹è®¡ç®—æœºèµ„æºçš„æŠ½è±¡"><a href="#oså®ç°äº†å¯¹è®¡ç®—æœºèµ„æºçš„æŠ½è±¡" class="headerlink" title="oså®ç°äº†å¯¹è®¡ç®—æœºèµ„æºçš„æŠ½è±¡"></a><strong>oså®ç°äº†å¯¹è®¡ç®—æœºèµ„æºçš„æŠ½è±¡</strong></h4><p>å¯¹äºä¸€å°å®Œå…¨æ— è½¯ä»¶çš„è®¡ç®—æœºç³»ç»Ÿï¼Œç”±äºå®ƒå‘ç”¨æˆ·æä¾›çš„ä»…æ˜¯ç¡¬ä»¶æ¥å£ï¼Œå› æ­¤ï¼Œç”¨æˆ·å¿…é¡»å¯¹ç‰©ç†æ¥å£çš„å®ç°ç»†èŠ‚æœ‰å……åˆ†çš„äº†è§£ã€‚ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨I/Oè®¾å¤‡ï¼Œåœ¨è£¸æœºä¸Šè¦†ç›–ä¸€å±‚I/Oè®¾å¤‡ç®¡ç†è½¯ä»¶ï¼Œç”±å®ƒå®ç°å¯¹I/Oè®¾å¤‡çš„æ“ä½œç»†èŠ‚ï¼Œè¿™æ ·ï¼Œç”¨æˆ·å°±æ— éœ€å…³å¿ƒI/Oæ˜¯å¦‚ä½•å…·ä½“å®ç°çš„ï¼Œä»è€Œæ›´å®¹æ˜“åœ°ä½¿ç”¨è®¡ç®—æœºç¡¬ä»¶èµ„æº</p>
<p>é€šå¸¸æŠŠè¿™äº›è¦†ç›–äº†è½¯ä»¶çš„æœºå™¨ç§°ä¸ºæ‰©å……æœºå™¨æˆ–è™šæœºå™¨</p>
<h3 id="æ¨åŠ¨æ“ä½œç³»ç»Ÿå‘å±•çš„åŠ¨åŠ›"><a href="#æ¨åŠ¨æ“ä½œç³»ç»Ÿå‘å±•çš„åŠ¨åŠ›" class="headerlink" title="æ¨åŠ¨æ“ä½œç³»ç»Ÿå‘å±•çš„åŠ¨åŠ›"></a><strong>æ¨åŠ¨æ“ä½œç³»ç»Ÿå‘å±•çš„åŠ¨åŠ›</strong></h3><ul>
<li><p>ä¸æ–­æé«˜è®¡ç®—æœºèµ„æºçš„åˆ©ç”¨ç‡</p>
</li>
<li><p>æ–¹ä¾¿ç”¨æˆ·</p>
</li>
<li><p>å™¨ä»¶çš„ä¸æ–­æ›´æ–°</p>
</li>
<li><p>è®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¸æ–­å‘å±•</p>
</li>
<li><p>ä¸æ–­æå‡ºæ–°çš„åº”ç”¨éœ€æ±‚</p>
</li>
</ul>
<h2 id="æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹"><a href="#æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹"></a><strong>æ“ä½œç³»ç»Ÿçš„å‘å±•è¿‡ç¨‹</strong></h2><h3 id="æœªé…ç½®æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿ"><a href="#æœªé…ç½®æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="æœªé…ç½®æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿ"></a><strong>æœªé…ç½®æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºç³»ç»Ÿ</strong></h3><p>åœ¨ç¬¬ä¸€ä»£è®¡ç®—æœºä¸­ï¼Œè¿™äº›è®¡ç®—æœºè¿˜æ²¡é…ç½®osï¼Œå¯¹è®¡ç®—æœºçš„å…¨éƒ¨æ“ä½œéƒ½æ˜¯ç”±ç”¨æˆ·é‡‡å–äººå·¥æ“ä½œæ–¹å¼è¿›è¡Œ</p>
<p>äººæœºæ“ä½œæ–¹å¼ä¸­ä¸¥é‡é™ä½äº†è®¡ç®—æœºèµ„æºçš„åˆ©ç”¨ç‡ï¼Œæ›´åŠ çªå‡ºäº†cpuå’ŒI/Oè®¾å¤‡ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾</p>
<ul>
<li>äººå·¥æ“ä½œæ–¹å¼</li>
</ul>
<p>ç”¨æˆ·ç‹¬å å…¨æœºï¼Œå³ä¸€å°è®¡ç®—æœºçš„å…¨éƒ¨èµ„æºç”±ä¸Šæœºç”¨æˆ·æ‰€ç‹¬å </p>
<p>CPUç­‰å¾…äººå·¥æ“ä½œã€‚å½“ç”¨æˆ·è¿›è¡Œè£…å¸¦ï¼ˆå¡ï¼‰ã€å¸å¸¦ï¼ˆå¡ï¼‰ç­‰äººå·¥æ“ä½œæ—¶ï¼ŒCPUåŠå†…å­˜ç­‰èµ„æºæ˜¯ç©ºé—²çš„</p>
<ul>
<li>è„±æœºè¾“å…¥/è¾“å‡ºæ–¹å¼</li>
</ul>
<p>ç¨‹åºçš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯åœ¨å¤–å›´æœºçš„æ§åˆ¶ä¸‹å®Œæˆçš„ï¼Œæˆ–è€…è¯´ï¼Œä»–ä»¬æ˜¯åœ¨è„±ç¦»ä¸»æœºçš„çš„æƒ…å†µä¸‹è¿›è¡Œçš„ï¼Œæ•…ç§°è„±æœºè¾“å…¥/è¾“å‡º</p>
<p>ç¼ºç‚¹ï¼šå‡å°‘äº†CPUçš„ç©ºé—²æ—¶é—´</p>
<p>ä¼˜ç‚¹ï¼šæé«˜äº†I/Oé€Ÿåº¦</p>
<h3 id="å•é“æ‰¹å¤„ç†ç³»ç»Ÿ"><a href="#å•é“æ‰¹å¤„ç†ç³»ç»Ÿ" class="headerlink" title="å•é“æ‰¹å¤„ç†ç³»ç»Ÿ"></a><strong>å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</strong></h3><p>ä¸ºäº†è§£å†³ç¬¬ä¸€ä»£è®¡ç®—æœºèµ„æºåˆ©ç”¨ç‡çš„ä¸è¶³ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œå°½é‡ä¿æŒç³»ç»Ÿçš„è¿ç»­è¿è¡Œï¼Œå³åœ¨å¤„ç†å®Œä¸€ä¸ªä½œä¸šåç´§æ¥ç€å¤„ç†ä¸‹ä¸€ä¸ªä½œä¸šï¼Œå‡å°‘æœºå™¨çš„ç©ºé—²æ—¶é—´ï¼Œå¼•å…¥äº†å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</p>
<p>å•é“æ‰¹å¤„ç†ç³»ç»Ÿçš„å¤„ç†è¿‡ç¨‹ä¸ºï¼š</p>
<ul>
<li><p>æŠŠä¸€æ‰¹ä½œä¸šä»¥è„±æœºæ–¹å¼è¾“å…¥åˆ°ç£å¸¦ä¸Šï¼Œå¹¶åœ¨ç³»ç»Ÿä¸­é…ä¸Šç›‘ç£ç¨‹åºï¼ˆMonitor)ï¼Œåœ¨å®ƒçš„æ§åˆ¶ä¸‹ï¼Œä½¿è¿™æ‰¹ä½œä¸šèƒ½ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿ç»­å¤„ç†ã€‚</p>
</li>
<li><p>ç”±ç›‘ç£ç¨‹åºå°†ç£å¸¦ä¸Šçš„ç¬¬ä¸€ä¸ªä½œä¸šè£…å…¥å†…å­˜ï¼Œå¹¶æŠŠè¿è¡Œæ§åˆ¶æƒäº¤ç»™è¯¥ä½œä¸š</p>
</li>
<li><p>å½“è¯¥ä½œä¸šå¤„ç†å®Œæˆæ—¶ï¼ŒåˆæŠŠæ§åˆ¶æƒäº¤è¿˜ç»™ç›‘ç£ç¨‹åºï¼Œå†ç”±ç›‘ç£ç¨‹åºæŠŠç£å¸¦ä¸Šçš„ç¬¬äºŒä¸ªä½œä¸šè°ƒå…¥å†…å­˜ã€‚</p>
</li>
</ul>
<p>è®¡ç®—æœºç³»ç»Ÿå°±è¿™æ ·è‡ªåŠ¨åœ°ä¸€ä¸ªä½œä¸šç´§æ¥ä¸€ä¸ªä½œä¸šåœ°è¿›è¡Œå¤„ç†ï¼Œç›´è‡³ç£å¸¦ä¸Šçš„æ‰€æœ‰ä½œä¸šå…¨éƒ¨å®Œæˆã€‚è™½ç„¶ç³»ç»Ÿå¯¹ä½œä¸šçš„å¤„ç†æ˜¯æˆæ‰¹è¿›è¡Œçš„ï¼Œä½†æ˜¯å†…å­˜ä¸­å§‹ç»ˆåªä¿æŒä¸€é“ä½œä¸šã€‚</p>
<p>å•é“æ‰¹å¤„ç†ç³»ç»Ÿçš„ç¼ºç‚¹ï¼š</p>
<p>æœ€ä¸»è¦çš„ç¼ºç‚¹æ˜¯ï¼šç³»ç»Ÿä¸­çš„èµ„æºå¾—ä¸åˆ°å……åˆ†çš„åˆ©ç”¨ï¼Œå› ä¸ºåœ¨å†…å­˜ä¸­åªæœ‰ä¸€é“ç¨‹åºï¼Œå½“ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘å‡ºI/Oè¯·æ±‚åï¼Œcpuä¾¿å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¿…é¡»åœ¨I/Oè¯·æ±‚å®Œæˆåæ‰èƒ½ç»§ç»­è¿è¡Œ</p>
<h3 id="å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ"><a href="#å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ" class="headerlink" title="å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ"></a><strong>å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</strong></h3><p>ä¸ºäº†æé«˜èµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼Œå¼•å…¥äº†å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</p>
<p>åœ¨å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æäº¤çš„ä½œä¸šå…ˆå­˜æ”¾åœ¨å¤–å­˜ä¸Šå¹¶æ’æˆä¸€ä¸ªåå¤‡é˜Ÿåˆ—ï¼Œç”±ä½œä¸šè°ƒåº¦ç¨‹åºæŒ‰ä¸€å®šçš„ç®—æ³•ä»åå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©è‹¥å¹²ä¸ªä½œä¸šè°ƒå…¥å†…å­˜ï¼Œä½¿å®ƒä»¬å…±äº«cpuå’Œç³»ç»Ÿä¸­çš„å„ç§èµ„æºï¼Œç”±äºå†…å­˜ä¸­å­˜åœ¨è‹¥å¹²ä¸ªç¨‹åºï¼Œè¿™æ ·ä¾¿å¯ä»¥åœ¨è¿è¡Œç¨‹åºAæ—¶ï¼Œåˆ©ç”¨å…¶å› I/Oæ“ä½œè€Œæš‚åœæ‰§è¡Œæ—¶çš„cpuç©ºé—²æ—¶é—´å†è°ƒåº¦ç¨‹åºBï¼Œâ€¦ ä½¿å¤šé“ç¨‹åºå¯ä»¥äº¤æ›¿æ‰§è¡Œï¼Œä¿æŒcpuå¤„äºå¿™ç¢ŒçŠ¶æ€</p>
<p>å¤šé“æ‰¹å¤„ç†ç¨‹åºçš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li><p>èµ„æºåˆ©ç”¨ç‡é«˜</p>
</li>
<li><p>ç³»ç»Ÿååé‡å¤§</p>
</li>
<li><p>å¹³å‡å‘¨è½¬æ—¶é—´é•¿</p>
</li>
<li><p>æ— äº¤äº’èƒ½åŠ›</p>
</li>
</ul>
<p>å¤šé“æ‰¹å¤„ç†ç¨‹åºçš„éœ€è¦è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li><p>å¤„ç†æœºäº‰ç”¨é—®é¢˜</p>
</li>
<li><p>å†…å­˜åˆ†é…å’Œä¿æŠ¤é—®é¢˜</p>
</li>
<li><p>I/Oè®¾å¤‡åˆ†é…é—®é¢˜</p>
</li>
<li><p>æ–‡ä»¶çš„ç»„ç»‡å’Œç®¡ç†é—®é¢˜</p>
</li>
<li><p>ä½œä¸šç®¡ç†é—®é¢˜</p>
</li>
<li><p>ç”¨æˆ·ä¸ç³»ç»Ÿé—´çš„æ¥å£é—®é¢˜</p>
</li>
</ul>
<h3 id="åˆ†æ—¶ç³»ç»Ÿ"><a href="#åˆ†æ—¶ç³»ç»Ÿ" class="headerlink" title="åˆ†æ—¶ç³»ç»Ÿ"></a><strong>åˆ†æ—¶ç³»ç»Ÿ</strong></h3><p>ä¸ºäº†æ»¡è¶³äººæœºäº¤äº’çš„éœ€æ±‚ï¼Œå¼•å…¥äº†åˆ†æ—¶ç³»ç»Ÿ</p>
<p><strong>äººæœºäº¤äº’</strong></p>
<p>æœ‰æ—¶å€™ç”¨æˆ·å¸Œæœ›èƒ½å¤Ÿç‹¬å å…¨æœºå¹¶å¯¹å®ƒè¿›è¡Œç›´æ¥æ§åˆ¶ï¼Œä»¥ä¾¿èƒ½æ–¹ä¾¿åœ°ä¸è‡ªå·±çš„ä½œä¸šè¿›è¡Œäº¤äº’</p>
<p><strong>å…±äº«ä¸»æœº</strong></p>
<p>ç”¨æˆ·ä»¬åœ¨å…±äº«ä¸€å°è®¡ç®—æœºæ—¶ï¼Œæ¯ä¸ªäººéƒ½å¸Œæœ›èƒ½å‘ç‹¬å æ—¶ä¸€æ ·ï¼Œå¯ä»¥éšæ—¶ä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’ï¼Œè€Œä¸”è¿˜ä¸ä¼šæ„Ÿè§‰åˆ°å…¶ä»–ç”¨æˆ·çš„å­˜åœ¨</p>
<p>åˆ†æ—¶ç³»ç»Ÿæ˜¯æŒ‡ï¼šåœ¨ä¸€å°ä¸»æœºä¸Šè¿æ¥äº†å¤šä¸ªé…æœ‰æ˜¾ç¤ºå™¨å’Œé”®ç›˜çš„ç»ˆç«¯å¹¶ç”±æ­¤æ‰€ç»„æˆçš„ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶é€šè¿‡è‡ªå·±çš„ç»ˆç«¯ï¼Œä»¥äº¤äº’çš„æ–¹å¼ä½¿ç”¨è®¡ç®—æœºï¼Œå…±äº«ä¸»æœºä¸­çš„èµ„æº</p>
<p><strong>åˆ†æ—¶ç³»ç»Ÿéœ€è¦è§£å†³çš„é—®é¢˜</strong></p>
<p>ä¸ºäº†å®ç°äººæœºäº¤äº’ï¼Œå¿…é¡»è§£å†³çš„é—®é¢˜æ˜¯ï¼šå®ç°ç”¨æˆ·ä¸è‡ªå·±ä½œä¸šçš„äº¤äº’</p>
<ul>
<li><p>ç³»ç»Ÿä¸ºå¤šä¸ªç”¨æˆ·æä¾›å¤šä¸ªç»ˆç«¯</p>
</li>
<li><p>ç”¨æˆ·åœ¨è‡ªå·±çš„ç»ˆç«¯ä¸Šè¾“å…¥å‘½ä»¤ï¼Œç³»ç»ŸåŠæ—¶æ¥å—å¹¶å“åº”ï¼Œå°†ç»“æœè¿”å›ç»™ç”¨æˆ·</p>
</li>
<li><p>ç”¨æˆ·æ ¹æ®è¿”å›çš„ç»“æœç»§ç»­è¾“å…¥ä¸‹ä¸€æ¡å‘½ä»¤â€¦</p>
</li>
<li><p>ç³»ç»Ÿå…è®¸å¤šä¸ªç”¨æˆ·é€šè¿‡è‡ªå·±çš„ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼Œå¹¶åŠæ—¶æ¥å—å’Œå¤„ç†ç”¨æˆ·çš„å…¨éƒ¨å‘½ä»¤</p>
</li>
</ul>
<p><strong>ç³»ç»Ÿçš„åŠæ—¶æ¥å—ä¸åŠæ—¶å¤„ç†</strong></p>
<ul>
<li><p>åŠæ—¶æ¥å—<br>è¦åšåˆ°åŠæ—¶æ¥å—å¤šä¸ªç”¨æˆ·çš„å‘½ä»¤ï¼Œéœ€è¦åœ¨ç³»ç»Ÿä¸­é…ç½®å¤šè·¯å¡ï¼ŒåŒæ—¶ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·ç»ˆç«¯é…ç½®ç¼“å†²åŒºï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾ç”¨æˆ·çš„å‘½ä»¤æˆ–æ•°æ®</p>
</li>
<li><p>åŠæ—¶å¤„ç†<br>è¦å®ç°äººæœºäº¤äº’ï¼Œå¿…é¡»æ”¹å˜åŸæœ‰çš„æ‰¹å¤„ç†ç³»ç»Ÿçš„è¿è¡Œæ–¹å¼ï¼Œå› ä¸ºä½œä¸šæ˜¯å…ˆå­˜æ”¾åœ¨å¤–å­˜ä¸­ï¼Œè€Œä½œä¸šæ˜¯ä¸èƒ½åœ¨å¤–å­˜ä¸­è¿è¡Œçš„ï¼Œç³»ç»Ÿæ— æ³•åšåˆ°åŠæ—¶å¤„ç†ï¼Œè¦è½¬ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p>
<ul>
<li><p>ä½œä¸šç›´æ¥è¿›å…¥å†…å­˜</p>
</li>
<li><p>é‡‡ç”¨è½®è½¬æ–¹å¼è¿è¡Œï¼šå¦‚æœä¸€ä¸ªä½œä¸šç‹¬å CPUè¿ç»­è¿è¡Œï¼Œé‚£ä¹ˆå…¶ä»–ä½œä¸šæ²¡æ³•è¿è¡Œã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¼•å…¥äº†æ—¶é—´ç‰‡æ¦‚å¿µã€‚ä¸€ä¸ªæ—¶é—´ç‰‡æ˜¯ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´ï¼Œç³»ç»Ÿè§„å®šäº†æ¯ä¸ªä½œä¸šæ¯æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œç„¶åå°±æš‚åœè¯¥ä½œä¸šçš„è¿è¡Œï¼Œå¹¶ç«‹å³è°ƒåº¦ä¸‹ä¸€ä¸ªä½œä¸šè¿è¡Œã€‚å¦‚æœåœ¨ä¸é•¿çš„æ—¶é—´å†…èƒ½ä½¿æ‰€æœ‰çš„ä½œä¸šéƒ½æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡çš„æ—¶é—´ï¼Œä¾¿å¯ä»¥ä½¿æ¯ä¸ªç”¨æˆ·éƒ½èƒ½åŠæ—¶åœ°ä¸è‡ªå·±çš„ä½œä¸šè¿›è¡Œäº¤äº’ï¼Œä»è€Œä½¿ç”¨æˆ·çš„è¯·æ±‚çš„åˆ°åŠæ—¶å“åº”ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>åˆ†æ—¶ç³»ç»Ÿçš„ç‰¹å¾</strong></p>
<ul>
<li><p>å¤šè·¯æ€§</p>
</li>
<li><p>ç‹¬ç«‹æ€§</p>
</li>
<li><p>åŠæ—¶æ€§</p>
</li>
<li><p>äº¤äº’æ€§</p>
</li>
</ul>
<h3 id="å®æ—¶ç³»ç»Ÿ"><a href="#å®æ—¶ç³»ç»Ÿ" class="headerlink" title="å®æ—¶ç³»ç»Ÿ"></a><strong>å®æ—¶ç³»ç»Ÿ</strong></h3><p>å®æ—¶ç³»ç»Ÿæ˜¯æŒ‡ç³»ç»Ÿèƒ½åŠæ—¶å“åº”å¤–éƒ¨äº‹ä»¶çš„è¯·æ±‚ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…å®Œæˆå¯¹è¯¥äº‹ä»¶çš„å¤„ç†ï¼Œå¹¶æ§åˆ¶æ‰€æœ‰å®æ—¶ä»»åŠ¡åè°ƒä¸€è‡´åœ°è¿è¡Œï¼Œå®æ—¶ç³»ç»Ÿæœ€ä¸»è¦çš„ç‰¹å¾æ˜¯å°†<strong>æ—¶é—´</strong>ä½œä¸ºå…³é”®å‚æ•°ï¼Œå…·æœ‰å®æ—¶ç‰¹å¾</p>
<p><strong>å®æ—¶ç³»ç»Ÿçš„ç±»å‹</strong></p>
<ul>
<li><p>å·¥ä¸šæ§åˆ¶ç³»ç»Ÿ</p>
</li>
<li><p>ä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ</p>
</li>
<li><p>å¤šåª’ä½“ç³»ç»Ÿ</p>
</li>
<li><p>åµŒå…¥å¼ç³»ç»Ÿ</p>
</li>
</ul>
<p>** å®æ—¶ä»»åŠ¡çš„ç±»å‹**</p>
<ul>
<li>å‘¨æœŸæ€§å®æ—¶ä»»åŠ¡</li>
</ul>
<p>å‘¨æœŸæ€§å®æ—¶ä»»åŠ¡æ˜¯æŒ‡ï¼šå¤–éƒ¨è®¾å¤‡å‘¨æœŸæ€§åœ°å‘å‡ºæ¿€åŠ±ä¿¡å·ç»™è®¡ç®—æœºï¼Œè¦æ±‚è®¡ç®—æœºæŒ‰æŒ‡å®šå‘¨æœŸå¾ªç¯æ‰§è¡Œï¼Œä»¥ä¾¿å‘¨æœŸæ€§åœ°æ§åˆ¶å¤–éƒ¨è®¾å¤‡</p>
<ul>
<li>éå‘¨æœŸæ€§å®æ—¶ä»»åŠ¡</li>
</ul>
<p>éå‘¨æœŸæ€§ä»»åŠ¡æ— æ˜æ˜¾çš„å‘¨æœŸæ€§</p>
<p>åœ¨è¿™ä¸¤ç§ä»»åŠ¡ä¸­ï¼Œéƒ½å¿…é¡»å…³è”ç€ä¸€ä¸ªæˆªæ­¢æ—¶é—´ï¼ˆæœ€åæœŸé™ï¼‰</p>
<ol>
<li>å¼€å§‹æˆªæ­¢æ—¶é—´ï¼šæŒ‡æŸä»»åŠ¡å¿…é¡»å¼€å§‹çš„æœ€è¿Ÿæ—¶é—´</li>
<li>å®Œæˆæˆªæ­¢æ—¶é—´ï¼šæŒ‡æŸä»»åŠ¡å¿…é¡»åœ¨æŸæ—¶é—´å‰å®Œæˆ</li>
</ol>
<ul>
<li>ç¡¬å®æ—¶ä»»åŠ¡</li>
</ul>
<p>ç¡¬å®æ—¶ä»»åŠ¡æ˜¯æŒ‡ç³»ç»Ÿå¿…é¡»æ»¡è¶³ä»»åŠ¡å¯¹æˆªæ­¢æ—¶é—´çš„è¦æ±‚ï¼Œå¦åˆ™å¯èƒ½å‡ºç°éš¾ä»¥é¢„æµ‹çš„åæœ</p>
<ul>
<li>è½¯å®æ—¶ä»»åŠ¡</li>
</ul>
<p>è½¯å®æ—¶ä»»åŠ¡ä¹Ÿå…³è”ç€ä¸€ä¸ªæˆªæ­¢æ—¶é—´ï¼Œä½†å¹¶ä¸ä¸¥æ ¼ï¼Œå³è‹¥å¶å°”é”™è¿‡äº†ä»»åŠ¡çš„æˆªæ­¢æ—¶é—´ï¼Œå¯¹ç³»ç»Ÿäº§ç”Ÿçš„å½±å“ä¹Ÿä¸å¤§</p>
<h3 id="å¾®æ“ä½œç³»ç»Ÿ"><a href="#å¾®æ“ä½œç³»ç»Ÿ" class="headerlink" title="å¾®æ“ä½œç³»ç»Ÿ"></a><strong>å¾®æ“ä½œç³»ç»Ÿ</strong></h3><ul>
<li><p>å•ç”¨æˆ·å•ä»»åŠ¡æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å•ç”¨æˆ·å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>å¤šç”¨æˆ·å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ</p>
</li>
</ul>
<h2 id="æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹æ€§"><a href="#æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹æ€§" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹æ€§"></a><strong>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹æ€§</strong></h2><p>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬ç‰¹æ€§æœ‰ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥å››ä¸ªåŸºæœ¬ç‰¹å¾ï¼Œå…¶ä¸­<strong>å¹¶å‘</strong>å’Œ<strong>å…±äº«</strong>æ˜¯å¤šç”¨æˆ·OSçš„ä¸¤ä¸ªæœ€åŸºæœ¬çš„ç‰¹å¾</p>
<h3 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a><strong>å¹¶å‘</strong></h3><ul>
<li><p>å¹¶è¡Œï¼šæŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿ</p>
</li>
<li><p>å¹¶å‘ï¼šæŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€ä¸ªæ—¶é—´é—´éš”å‘ç”Ÿ</p>
</li>
</ul>
<p>åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œå¹¶å‘æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…å®è§‚ä¸Šæœ‰å¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œï¼Œ ä½†åœ¨å•å¤„ç†ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€æ—¶åˆ»å´ä»…æœ‰ä¸€é“ç¨‹åºè¿è¡Œï¼Œå¾®è§‚ä¸Šè¿™äº›ç¨‹åºåªèƒ½æ˜¯åˆ†æ—¶åœ°äº¤æ›¿æ‰§è¡Œ</p>
<p>è‹¥è®¡ç®—æœºç³»ç»Ÿæœ‰å¤šä¸ªå¤„ç†æœºï¼Œè¿™äº›å¹¶å‘çš„ç¨‹åºä¾¿å¯ä»¥åˆ†é…åˆ°å¤šä¸ªå¤„ç†æœºä¸Šï¼Œå®ç°å¹¶è¡Œæ‰§è¡Œ</p>
<p>3.è¿›ç¨‹</p>
<p>åœ¨ä¸€ä¸ªæœªå¼•å…¥çš„è¿›ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œåœ¨å±äºåŒä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªç¨‹åºé—´åªèƒ½æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œä¸ºäº†å®ç°å¹¶å‘ï¼Œå¼•å…¥äº†è¿›ç¨‹ï¼Œå¦‚æœä¸ºæ¯ä¸ªç¨‹åºåˆ†åˆ«å»ºç«‹ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹é—´å°±å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå¹¶ä¸”èƒ½æå¤§æé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿçš„ååé‡</p>
<p>è¿›ç¨‹ï¼šè¿›ç¨‹æ˜¯æŒ‡åœ¨ç³»ç»Ÿä¸­èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œå¹¶ä½œä¸ºèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒæ˜¯ç”±ä¸€ç»„æœºå™¨æŒ‡ä»¤ã€æ•°æ®ã€å †æ ˆç­‰ç»„æˆçš„</p>
<h3 id="å…±äº«"><a href="#å…±äº«" class="headerlink" title="å…±äº«"></a><strong>å…±äº«</strong></h3><p>åœ¨OSçš„ç¯å¢ƒä¸‹çš„èµ„æºå…±äº«ï¼ˆèµ„æºå¤ç”¨ï¼‰æ˜¯æŒ‡ç³»ç»Ÿä¸­çš„èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨</p>
<p>å®ç°èµ„æºå…±äº«çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>äº’æ–¥å…±äº«æ–¹å¼</li>
</ul>
<p>ç³»ç»Ÿä¸­çš„æŸäº›èµ„æºï¼Œå¦‚æ‰“å°æœºã€ç£å¸¦æœºç­‰ï¼Œè™½ç„¶å¯ä»¥æä¾›ç»™å¤šä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä½†åº”è§„å®šåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®è¯¥èµ„æºã€‚</p>
<p>å½“è¿›ç¨‹Aè¦è®¿é—®æŸèµ„æºæ—¶ï¼Œå¿…é¡»å…ˆæå‡ºè¯·æ±‚ï¼Œè‹¥æ­¤æ—¶èµ„æºç©ºé—²ï¼Œåˆ™åˆ†é…ç»™è¿›ç¨‹Aä½¿ç”¨ï¼Œæ­¤åè‹¥å†æœ‰å…¶ä»–è¿›ç¨‹ä¹Ÿè¦è®¿é—®è¯¥èµ„æºï¼Œåªè¦Aè¿˜æ²¡ç”¨å®Œå°±å¿…é¡»ç­‰å¾…ï¼Œä»…å½“Aè¿›ç¨‹è®¿é—®å®Œå¹¶é‡Šæ”¾è¯¥èµ„æºåï¼Œæ‰å…è®¸å¦ä¸€è¿›ç¨‹å¯¹è¯¥èµ„æºè¿›è¡Œè®¿é—®ã€‚</p>
<p>è¿™ç§èµ„æºå…±äº«æ–¹å¼ç§°ä¸ºäº’æ–¥å…±äº«æ–¹å¼ï¼Œè¿™ç§èµ„æºç§°ä¸ºä¸´ç•Œèµ„æº</p>
<ul>
<li>åŒæ—¶è®¿é—®æ–¹å¼</li>
</ul>
<p>ç³»ç»Ÿä¸­è¿˜å­˜åœ¨å¦ä¸€ç±»èµ„æºï¼Œå…è®¸åœ¨ä¸€æ®µæ—¶é—´å†…ç”±å¤šä¸ªè¿›ç¨‹â€œåŒæ—¶â€å¯¹å®ƒä»¬è¿›è¡Œè®¿é—®ï¼Œå…¸å‹çš„èµ„æºä¸ºç£ç›˜è®¾å¤‡</p>
<h3 id="è™šæ‹Ÿ"><a href="#è™šæ‹Ÿ" class="headerlink" title="è™šæ‹Ÿ"></a><strong>è™šæ‹Ÿ</strong></h3><p>åœ¨OSä¸­ï¼ŒæŠŠé€šè¿‡æŸç§æŠ€æœ¯å°†ä¸€ä¸ªç‰©ç†å®ä½“å˜ä¸ºè‹¥å¹²ä¸ªé€»è¾‘ä¸Šå¯¹åº”ç‰©çš„åŠŸèƒ½ç§°ä¸ºâ€œè™šæ‹Ÿâ€ï¼Œå‰è€…æ˜¯å®çš„ï¼Œåè€…æ˜¯è™šçš„ï¼Œæ˜¯ç”¨æˆ·æ„Ÿè§‰ä¸Šçš„ä¸œè¥¿</p>
<p>è™šæ‹ŸæŠ€æœ¯æ˜¯é€šè¿‡â€œç©ºåˆ†å¤ç”¨â€å’Œâ€œæ—¶åˆ†å¤ç”¨â€æŠ€æœ¯å®ç°çš„</p>
<p>1.æ—¶åˆ†å¤ç”¨</p>
<p>æ—¶åˆ†å¤ç”¨æŠ€æœ¯è¢«å¹¿æ³›ç”¨æ¥å®ç°è™šæ‹Ÿå¤„ç†æœºã€è™šæ‹Ÿè®¾å¤‡ç­‰ã€‚</p>
<p>æ—¶åˆ†å¤ç”¨æŠ€æœ¯èƒ½æé«˜èµ„æºåˆ©ç”¨ç‡çš„æ ¹æœ¬åŸå› åœ¨äºï¼šå®ƒåˆ©ç”¨æŸè®¾å¤‡ä¸ºä¸€ç”¨æˆ·æœåŠ¡çš„ç©ºé—²æ—¶é—´ï¼Œåˆè½¬å»ä¸ºå…¶ä»–ç”¨æˆ·æœåŠ¡ï¼Œä½¿è®¾å¤‡å¾—åˆ°æœ€å……åˆ†çš„åˆ©ç”¨</p>
<p>1.1 è™šæ‹Ÿå¤„ç†æœºæŠ€æœ¯</p>
<p>åœ¨è¯¥æŠ€æœ¯ä¸­ï¼Œåˆ©ç”¨å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯ï¼Œä¸ºæ¯é“ç¨‹åºåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œè®©å¤šé“ç¨‹åºå¹¶å‘åœ°æ‰§è¡Œï¼Œä»¥æ­¤æ¥åˆ†æ—¶ä½¿ç”¨ä¸€å°å¤„ç†æœºã€‚æ­¤æ—¶è™½ç„¶ç³»ç»Ÿä¸­åªæœ‰ä¸€å°å¤„ç†æœºï¼Œä½†å®ƒèƒ½åŒæ—¶ä¸ºå¤šä¸ªç”¨æˆ·æœåŠ¡ï¼Œä½¿æ¯ä¸ªç»ˆç«¯ç”¨æˆ·éƒ½è®¤ä¸ºæ˜¯æœ‰ä¸€ä¸ªå¤„ç†æœºåœ¨ä¸“é—¨çš„ä¸ºè‡ªå·±æœåŠ¡ã€‚äº¦å³ï¼Œåˆ©ç”¨å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯ï¼ŒæŠŠä¸€å°ç‰©ç†ä¸Šçš„å¤„ç†æœºè™šæ‹Ÿä¸ºå¤šå°é€»è¾‘ä¸Šçš„å¤„ç†æœºï¼Œåœ¨æ¯å°é€»è¾‘å¤„ç†æœºä¸Šè¿è¡Œä¸€é“ç¨‹åºã€‚æˆ‘ä»¬æŠŠç”¨æˆ·æ„Ÿè§‰åˆ°çš„å¤„ç†æœºç§°ä¸ºè™šæ‹Ÿå¤„ç†å™¨ã€‚</p>
<p>1.2 è™šæ‹Ÿè®¾å¤‡æŠ€æœ¯</p>
<p>é€šè¿‡è™šæ‹Ÿè®¾å¤‡æŠ€æœ¯ï¼Œå°†ä¸€å°ç‰©ç†I\Oè®¾å¤‡è™šæ‹Ÿä¸ºå¤šå°é€»è¾‘ä¸Šçš„I\Oè®¾å¤‡ï¼Œå¹¶å…è®¸æ¯ä¸ªç”¨æˆ·å ç”¨åŒä¸€å°é€»è¾‘ä¸Šçš„I\Oè®¾å¤‡ï¼Œè¿™æ ·ä¾¿å¯ä½¿åŸæ¥ä»…å…è®¸åœ¨ä¸€æ®µæ—¶é—´å†…ç”±ä¸€ä¸ªç”¨æˆ·è®¿é—®çš„è®¾å¤‡ï¼ˆå³ä¸´ç•Œèµ„æºï¼‰ï¼Œå˜ä¸ºåœ¨ä¸€æ®µæ—¶é—´å†…å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®çš„å…±äº«è®¾å¤‡ã€‚</p>
<p>2.ç©ºåˆ†å¤ç”¨</p>
<p>ç©ºåˆ†å¤ç”¨æŠ€æœ¯æ˜¯åˆ©ç”¨å­˜å‚¨å™¨çš„ç©ºé—²ç©ºé—´åˆ†åŒºåŸŸå­˜æ”¾å’Œå…è®¸å…¶ä»–çš„å¤šé“ç¨‹åºï¼Œä»¥æ­¤æ¥æé«˜å†…å­˜çš„åˆ©ç”¨ç‡ã€‚</p>
<p>ä½†æ˜¯ï¼Œå•çº¯çš„ç©ºåˆ†å¤ç”¨å­˜å‚¨å™¨åªèƒ½æé«˜å†…å­˜çš„åˆ©ç”¨ç‡ï¼Œå¹¶ä¸èƒ½å®ç°åœ¨é€»è¾‘ä¸Šæ‰©å¤§å­˜å‚¨å™¨å®¹é‡çš„åŠŸèƒ½ï¼Œè¿˜å¿…é¡»å¼•å…¥è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯ã€‚</p>
<p>è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯åœ¨æœ¬è´¨ä¸Šæ˜¯å®ç°å†…å­˜çš„åˆ†æ—¶å¤ç”¨</p>
<p>åº”è¯¥æŒ‡å‡ºï¼Œæ—¶åˆ†å¤ç”¨å’Œç©ºåˆ†å¤ç”¨ä¸­ï¼Œè™šæ‹Ÿè®¾å¤‡çš„å¹³å‡é€Ÿåº¦å’Œå¹³å‡ç©ºé—´ç­‰äºæˆ–ä½äºç‰©ç†è®¾å¤‡çš„1/n</p>
<h3 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a><strong>å¼‚æ­¥</strong></h3><p>å¼‚æ­¥æŒ‡è¿›ç¨‹ä¸æ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå®Œæ¯•ï¼Œè€Œæ˜¯èµ°èµ°åœåœï¼Œä»¥ä¸å¯çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ã€‚</p>
<h2 id="æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½"><a href="#æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½"></a><strong>æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</strong></h2><h3 id="å¤„ç†æœºç®¡ç†"><a href="#å¤„ç†æœºç®¡ç†" class="headerlink" title="å¤„ç†æœºç®¡ç†"></a><strong>å¤„ç†æœºç®¡ç†</strong></h3><p>åœ¨ä¼ ç»Ÿçš„å¤šé“ç¨‹åºç³»ç»Ÿä¸­ï¼Œå¤„ç†æœºçš„åˆ†é…å’Œè¿è¡Œéƒ½æ˜¯ä»¥è¿›ç¨‹ä¸ºåŸºæœ¬å•ä½çš„ï¼Œå› è€Œå¯¹å¤„ç†æœºçš„ç®¡ç†å¯å½’ç»“ä¸ºå¯¹è¿›ç¨‹çš„ç®¡ç†</p>
<ul>
<li>è¿›ç¨‹æ§åˆ¶ï¼ˆè¿›ç¨‹åˆ›å»ºä¸æ’¤é”€ï¼‰</li>
</ul>
<p>åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œä¸ºä½¿ä½œä¸šèƒ½å¤Ÿå¹¶å‘æ‰§è¡Œï¼Œå¿…é¡»ä¸ºä½œä¸šåˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ä¸ºä¹‹åˆ†é…å¿…è¦çš„èµ„æºã€‚å½“è¿›ç¨‹ç»“æŸåï¼Œåº”è¯¥ç«‹å³æ’¤é”€è¿›ç¨‹ï¼Œä»¥ä¾¿åŠæ—¶å›æ”¶èµ„æºã€‚</p>
<p>è¿›ç¨‹æ§åˆ¶çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºä½œä¸šåˆ›å»ºè¿›ç¨‹ã€æ’¤é”€è¿›ç¨‹ã€ä»¥åŠæ§åˆ¶è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€è½¬æ¢</p>
<ul>
<li><p>è¿›ç¨‹åŒæ­¥ï¼šè¯¥æœºåˆ¶çš„ä¸»è¦ä»»åŠ¡æ˜¯åè°ƒå¤šä¸ªè¿›ç¨‹çš„è¿è¡Œ</p>
<ul>
<li><p>è¿›ç¨‹äº’æ–¥æ–¹å¼</p>
</li>
<li><p>è¿›ç¨‹åŒæ­¥æ–¹å¼</p>
</li>
</ul>
</li>
<li><p>è¿›ç¨‹é€šä¿¡ï¼š</p>
</li>
</ul>
<p>è¿›ç¨‹é€šä¿¡çš„ä»»åŠ¡æ˜¯å®ç°ç›¸äº’åˆä½œè¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢</p>
<p>å½“ç›¸äº’åˆä½œçš„è¿›ç¨‹å¤„äºåŒä¸€è®¡ç®—æœºç³»ç»Ÿæ—¶ï¼Œé€šå¸¸é‡‡ç”¨ç›´æ¥é€šä¿¡æ–¹å¼ï¼Œç”±æºè¿›ç¨‹åˆ©ç”¨å‘é€å‘½ä»¤ç›´æ¥å°†æ¶ˆæ¯æŒ‚åˆ°ç›®æ ‡è¿›ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸Šï¼Œä»¥åç”±ç›®æ ‡è¿›ç¨‹åˆ©ç”¨æ¥å—å‘½ä»¤ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å»é™¤æ¶ˆæ¯</p>
<ul>
<li><p>è°ƒåº¦ï¼š</p>
<ul>
<li><p>ä½œä¸šè°ƒåº¦</p>
</li>
<li><p>è¿›ç¨‹è°ƒåº¦</p>
</li>
</ul>
</li>
</ul>
<h3 id="å­˜å‚¨å™¨ç®¡ç†"><a href="#å­˜å‚¨å™¨ç®¡ç†" class="headerlink" title="å­˜å‚¨å™¨ç®¡ç†"></a><strong>å­˜å‚¨å™¨ç®¡ç†</strong></h3><p>å­˜å‚¨å™¨ç®¡ç†çš„ä¸»è¦ä»»åŠ¡æ˜¯ä¸ºå¤šé“ç¨‹åºçš„è¿è¡Œæä¾›è‰¯å¥½çš„ç¯å¢ƒï¼Œæé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼Œå¹¶èƒ½ä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜</p>
<ul>
<li><p>å†…å­˜åˆ†é…çš„ä¸»è¦ä»»åŠ¡ï¼š</p>
<ul>
<li><p>ä¸ºæ¯é“ç¨‹åºåˆ†é…å†…å­˜ç©ºé—´ï¼Œä½¿å®ƒä»¬â€œå„å¾—å…¶æ‰€â€</p>
</li>
<li><p>æé«˜å­˜å‚¨å™¨çš„åˆ©ç”¨ç‡ï¼Œå°½é‡å‡å°‘ä¸å¯ç”¨çš„å†…å­˜ç©ºé—´ï¼ˆç¢ç‰‡ï¼‰</p>
</li>
<li><p>å…è®¸æ­£åœ¨è¿è¡Œçš„ç¨‹åºç”³è¯·é™„åŠ çš„å†…å­˜ç©ºé—´</p>
</li>
</ul>
</li>
<li><p>å†…å­˜çš„åˆ†é…æ–¹å¼ï¼š</p>
<ul>
<li><p>é™æ€åˆ†é…æ–¹å¼ï¼šä¸€æ¬¡æ€§ç”³è¯·ç©ºé—´</p>
</li>
<li><p>åŠ¨æ€åˆ†é…æ–¹å¼ï¼šåŠ¨æ€ç”³è¯·ç©ºé—´</p>
</li>
</ul>
</li>
<li><p>å†…å­˜ä¿æŠ¤</p>
<ul>
<li><p>ç¡®ä¿ç”¨æˆ·ç¨‹åºéƒ½ä»…åœ¨è‡ªå·±çš„å†…å­˜ç©ºé—´å†…è¿è¡Œï¼Œå½¼æ­¤äº’ä¸å¹²æ‰°ï¼Œï¼ˆè®¾ç½®å†…å­˜ä¿æŠ¤æœºåˆ¶ï¼‰</p>
</li>
<li><p>ä¸å…è®¸ç”¨æˆ·ç¨‹åºè®¿é—®æ“ä½œç³»ç»Ÿçš„ç¨‹åºå’Œæ•°æ®</p>
</li>
<li><p>ä¸å…è®¸ç”¨æˆ·ç¨‹åºè½¬ç§»åˆ°éå…±äº«çš„å…¶ä»–ç”¨æˆ·ç¨‹åºä¸­å»æ‰§è¡Œ</p>
</li>
</ul>
</li>
<li><p>åœ°å€æ˜ å°„</p>
</li>
</ul>
<p>å°†åœ°å€ç©ºé—´ä¸­çš„é€»è¾‘åœ°å€è½¬æ¢ä¸ºå†…å­˜ç©ºé—´ä¸­ä¸ä¹‹å¯¹åº”çš„ç‰©ç†åœ°å€</p>
<ul>
<li>å†…å­˜æ‰©å……</li>
</ul>
<p>å€ŸåŠ©äºè™šæ‹Ÿå­˜å‚¨æŠ€æœ¯ï¼Œä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡ã€‚</p>
<p>ä¸ºäº†èƒ½å¤Ÿåœ¨é€»è¾‘ä¸Šæ‰©å……å†…å­˜ï¼Œç³»ç»Ÿå¿…é¡»è®¾ç½®å†…å­˜æ‰©å……æœºåˆ¶ï¼Œå¹¶å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>è¯·æ±‚è°ƒå…¥åŠŸèƒ½</li>
</ol>
<p>ç³»ç»Ÿå…è®¸åœ¨ä»…è£…å…¥éƒ¨åˆ†ç”¨æˆ·ç¨‹åºå’Œæ•°æ®çš„æƒ…å†µä¸‹ä¾¿èƒ½å¯åŠ¨è¯¥ç¨‹åºè¿è¡Œï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç°ç»§ç»­è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºå’Œæ•°æ®å°šæœªè£…å…¥å†…å­˜ï¼Œåˆ™è¯·æ±‚OSå°†æ‰€éœ€éƒ¨åˆ†è°ƒå…¥å†…å­˜</p>
<ol start="2">
<li>ç½®æ¢åŠŸèƒ½</li>
</ol>
<p>è‹¥å‘ç°åœ¨å†…å­˜ä¸­æ— è¶³å¤Ÿçš„ç©ºé—´è£…å…¥éœ€è¦è°ƒåº¦çš„ç¨‹åºå’Œæ•°æ®æ—¶ï¼Œç³»ç»Ÿå°†å†…å­˜ä¸­ä¸€éƒ¨åˆ†æš‚æ—¶ä¸ç”¨çš„ç¨‹åºå’Œæ•°æ®è°ƒè‡³ç¡¬ç›˜ä¸Šè…¾å‡ºç©ºé—´</p>
<h3 id="è®¾å¤‡ç®¡ç†"><a href="#è®¾å¤‡ç®¡ç†" class="headerlink" title="è®¾å¤‡ç®¡ç†"></a><strong>è®¾å¤‡ç®¡ç†</strong></h3><p>è®¾å¤‡ç®¡ç†çš„ä¸»è¦ä»»åŠ¡å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>å®Œæˆç”¨æˆ·æå‡ºçš„I/Oè¯·æ±‚ï¼Œä¸ºè¿›ç¨‹åˆ†é…æ‰€éœ€çš„I/Oè®¾å¤‡ï¼Œå¹¶å®ŒæˆæŒ‡å®šçš„I/Oæ“ä½œ</p>
</li>
<li><p>æé«˜cpuå’ŒI/Oè®¾å¤‡çš„åˆ©ç”¨ç‡ï¼Œæé«˜I/Oé€Ÿåº¦ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨I/Oè®¾å¤‡</p>
</li>
</ol>
<ul>
<li>ç¼“å†²ç®¡ç†</li>
</ul>
<p>åœ¨I/Oè®¾å¤‡å’Œcpué—´å¼•å…¥ç¼“å†²ï¼Œå¯æœ‰æ•ˆåœ°ç¼“å’Œcpuå’ŒI/Oè®¾å¤‡é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ï¼Œæé«˜cpuåˆ©ç”¨ç‡ï¼Œè¿›è€Œæé«˜ç³»ç»Ÿååé‡</p>
<ul>
<li>è®¾å¤‡åˆ†é…</li>
</ul>
<p>è®¾å¤‡åˆ†é…çš„åŸºæœ¬ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·è¿›ç¨‹çš„I/Oè¯·æ±‚ã€ç³»ç»Ÿçš„ç°æœ‰èµ„æºæƒ…å†µä»¥åŠæŒ‰ç…§æŸç§è®¾å¤‡åˆ†é…ç­–ç•¥ï¼Œä¸ºä¹‹åˆ†é…å…¶æ‰€éœ€çš„è®¾å¤‡</p>
<ul>
<li>è®¾å¤‡å¤„ç†</li>
</ul>
<p>è®¾å¤‡å¤„ç†ç¨‹åºåˆç§°ä¸ºè®¾å¤‡é©±åŠ¨ç¨‹åºï¼ŒåŸºæœ¬ä»»åŠ¡æ˜¯ç”¨äºå®ç°cpuå’Œè®¾å¤‡æ§åˆ¶å™¨é—´çš„é€šä¿¡</p>
<h3 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a><strong>æ–‡ä»¶ç®¡ç†</strong></h3><ul>
<li><p>æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†</p>
</li>
<li><p>ç›®å½•ç®¡ç†</p>
</li>
<li><p>æ–‡ä»¶çš„è¯»/å†™ç®¡ç†å’Œä¿æŠ¤</p>
</li>
</ul>
<h3 id="å‘ç”¨æˆ·æä¾›æ–¹ä¾¿çš„ç”¨æˆ·æ¥å£"><a href="#å‘ç”¨æˆ·æä¾›æ–¹ä¾¿çš„ç”¨æˆ·æ¥å£" class="headerlink" title="å‘ç”¨æˆ·æä¾›æ–¹ä¾¿çš„ç”¨æˆ·æ¥å£"></a><strong>å‘ç”¨æˆ·æä¾›æ–¹ä¾¿çš„ç”¨æˆ·æ¥å£</strong></h3><p>ä¸ºæ–¹ä¾¿ç”¨æˆ·å¯¹æ“ä½œç³»ç»Ÿçš„ä½¿ç”¨ï¼Œå‘ç”¨æˆ·æä¾›ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿçš„æ¥å£</p>
<ul>
<li><p>ç”¨æˆ·æ¥å£</p>
<ul>
<li><p>ç”¨æˆ·è”æœºæ¥å£ï¼šä¸ºè”æœºç”¨æˆ·æä¾›</p>
</li>
<li><p>è„±æœºç”¨æˆ·æ¥å£ï¼šä¸ºæ‰¹å¤„ç†ä½œä¸šçš„ç”¨æˆ·æä¾›</p>
</li>
<li><p>å›¾å½¢ç”¨æˆ·æ¥å£ï¼šæä¾›å›¾å½¢åŒ–çš„æ“ä½œé¡µé¢</p>
</li>
</ul>
</li>
<li><p>ç¨‹åºæ¥å£</p>
</li>
</ul>
<p>ä¸ºç”¨æˆ·ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æä¾›è®¿é—®ç³»ç»Ÿèµ„æºçš„å”¯ä¸€è·¯å¾„</p>
]]></content>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>ssmæ¡†æ¶æ•´åˆ</title>
    <url>/2020/10/26/ssmintegration/</url>
    <content><![CDATA[<p>åœ¨å­¦ä¹ å®Œssmä¸‰å±‚æ¶æ„ä¹‹åï¼Œå°±è¦å¼€å§‹å¯¹è¿™ä¸‰å¤§å—è¿›è¡Œæ•´åˆäº†</p>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¯¹ssmè¿›è¡Œæ•´åˆ</p>
<p>åˆ›å»ºæ•°æ®åº“è¡¨ä¹¦ç±è¡¨book</p>
<p><img src="/2020/10/26/ssmintegration/booktable.jpg" alt="booktable"></p>
<p>åˆ›å»ºmavené¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependencies&gt;<br><br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;spring-core&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;4.3.29.RELEASE&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br><br>        &lt;dependency&gt;<br>            &lt;groupId&gt;javax.servlet&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;javax.servlet-api&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;4.0.1&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;spring-webmvc&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;3.2.8.RELEASE&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;!--        å•å…ƒæµ‹è¯•--&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.junit.jupiter&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;junit-jupiter-api&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;5.7.0&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;!--        æ•°æ®åº“--&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;8.0.22&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;!--        mybatis--&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.mybatis&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;mybatis&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;3.5.6&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;!--        mybaits-spring--&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.mybatis&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;mybatis-spring&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;2.0.5&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;spring-jdbc&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;4.3.29.RELEASE&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;1.18.16&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>            &lt;groupId&gt;com.mchange&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;c3p0&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;0.9.5.2&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br><br>        &lt;dependency&gt;<br>            &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>            &lt;artifactId&gt;jackson-annotations&lt;&#x2F;artifactId&gt;<br>            &lt;version&gt;2.12.0-rc1&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>          &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>          &lt;artifactId&gt;jackson-core&lt;&#x2F;artifactId&gt;<br>          &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>          &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>          &lt;artifactId&gt;jackson-databind&lt;&#x2F;artifactId&gt;<br>          &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br>        &lt;dependency&gt;<br>          &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>          &lt;artifactId&gt;jackson-annotations&lt;&#x2F;artifactId&gt;<br>          &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>        &lt;&#x2F;dependency&gt;<br><br>    &lt;&#x2F;dependencies&gt;<br></code></pre></td></tr></table></figure>

<p>è¿›è¡Œèµ„æºè¿‡æ»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;build&gt;<br>    &lt;resources&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;resources&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;java&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>    &lt;&#x2F;resources&gt;<br>&lt;&#x2F;build&gt;<br><br></code></pre></td></tr></table></figure>


<p>è¿æ¥æ•°æ®åº“</p>
<p>é…ç½®springã€mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<p>applicationContext.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br><br><br>&lt;&#x2F;beans&gt;<br><br></code></pre></td></tr></table></figure>

<p>dbbase.properties</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">driver&#x3D;com.mysql.cj.jdbc.Driver<br>url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;ssmintegration?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;GMT%2B8&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true<br>username&#x3D;root<br>password&#x3D;111111<br></code></pre></td></tr></table></figure>


<p>mybatis-config.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;<br>&lt;!DOCTYPE configuration<br>        PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;<br>        &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;<br>&lt;configuration&gt;<br>    &lt;properties resource&#x3D;&quot;dbbase.properties&quot;&gt;&lt;&#x2F;properties&gt;<br><br>    &lt;settings&gt;<br>        &lt;setting name&#x3D;&quot;logImpl&quot; value&#x3D;&quot;STDOUT_LOGGING&quot;&#x2F;&gt;<br>    &lt;&#x2F;settings&gt;<br><br>    &lt;typeAliases&gt;<br>        &lt;typeAlias type&#x3D;&quot;com.pojo.Book&quot; alias&#x3D;&quot;book&quot;&gt;&lt;&#x2F;typeAlias&gt;<br>    &lt;&#x2F;typeAliases&gt;<br><br><br>    &lt;environments default&#x3D;&quot;development&quot;&gt;<br>        &lt;environment id&#x3D;&quot;development&quot;&gt;<br>            &lt;transactionManager type&#x3D;&quot;JDBC&quot;&gt;&lt;&#x2F;transactionManager&gt;<br>            &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;<br>                &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;<br>            &lt;&#x2F;dataSource&gt;<br>        &lt;&#x2F;environment&gt;<br>    &lt;&#x2F;environments&gt;<br><br><br>    &lt;mappers&gt;<br>        &lt;!--èµ„æºæ–‡ä»¶çš„è·¯å¾„--&gt;<br>        &lt;package name&#x3D;&quot;com.dao&quot;&#x2F;&gt;<br>    &lt;&#x2F;mappers&gt;<br><br>&lt;&#x2F;configuration&gt;<br></code></pre></td></tr></table></figure>

<p>åˆ›å»ºå®ä½“ç±»com.pojo.Book</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package com.pojo;<br><br><br>import lombok.AllArgsConstructor;<br>import lombok.Data;<br>import lombok.NoArgsConstructor;<br><br>@Data<br>@AllArgsConstructor<br>@NoArgsConstructor<br>public class Book &#123;<br>    private int bookId;<br>    private String bookName;<br>    private int bookCounts;<br>    private String detail;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>åˆ›å»ºdaoæ¥å£å’Œå¯¹åº”çš„.xmlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface BookMapper &#123;<br><br>    public int insertBook(Book book);<br><br>    public int deleteBookById(int bookId);<br><br>    public Book queryBookById(@Param(&quot;bookId&quot;) int bookId);<br><br>    public int updateBook(Map map);<br><br>    public List&lt;Book&gt; queryAllBooks();<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>BookMapper.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;<br>&lt;!DOCTYPE mapper<br>        PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;<br>        &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;<br>&lt;mapper namespace&#x3D;&quot;com.dao.BookMapper&quot;&gt;<br><br>    &lt;insert id&#x3D;&quot;insertBook&quot; parameterType&#x3D;&quot;book&quot;&gt;<br>        insert into books values(#&#123;bookId&#125;,#&#123;bookName&#125;,#&#123;bookCounts&#125;,#&#123;detail&#125;);<br>    &lt;&#x2F;insert&gt;<br><br>    &lt;delete id&#x3D;&quot;deleteBookById&quot; &gt;<br>        delete from books where bookId &#x3D; #&#123;bookId&#125;;<br>    &lt;&#x2F;delete&gt;<br><br>    &lt;update id&#x3D;&quot;updateBook&quot; parameterType&#x3D;&quot;map&quot;&gt;<br>        update books set bookName &#x3D; #&#123;bookName&#125;,bookCounts &#x3D; #&#123;bookCounts&#125;,detail &#x3D; #&#123;datail&#125;;<br>    &lt;&#x2F;update&gt;<br>    <br>    &lt;select id&#x3D;&quot;queryBookById&quot; resultType&#x3D;&quot;book&quot;&gt;<br>        select * from books where bookId &#x3D; #&#123;bookId&#125;;<br>    &lt;&#x2F;select&gt;<br>    <br>    &lt;select id&#x3D;&quot;queryAllBooks&quot; resultType&#x3D;&quot;book&quot;&gt;<br>        select * from books;<br>    &lt;&#x2F;select&gt;<br><br>&lt;&#x2F;mapper&gt;<br></code></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸šåŠ¡æ¥å£å’Œå®ç°ç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface BookService &#123;<br><br>    public int insertBook(Book book);<br><br>    public int deleteBookById(int bookId);<br><br>    public Book queryBookById(int bookId);<br><br>    public int updateBook(Map map);<br><br>    public List&lt;Book&gt; queryAllBooks();<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Data<br>@AllArgsConstructor<br>@NoArgsConstructor<br>public class BookServiceImpl implements BookService &#123;<br><br>&#x2F;&#x2F;    service é€šè¿‡ dao è°ƒç”¨daoå±‚<br>    private BookMapper bookMapper;<br><br>    @Override<br>    public int insertBook(Book book) &#123;<br>        return bookMapper.insertBook(book);<br>    &#125;<br><br>    @Override<br>    public int deleteBookById(int bookId) &#123;<br>        return bookMapper.deleteBookById(bookId);<br>    &#125;<br><br>    @Override<br>    public Book queryBookById(int bookId) &#123;<br>        return bookMapper.queryBookById(bookId);<br>    &#125;<br><br>    @Override<br>    public int updateBook(Map map) &#123;<br>        return bookMapper.updateBook(map);<br>    &#125;<br><br>    @Override<br>    public List&lt;Book&gt; queryAllBooks() &#123;<br>        return bookMapper.queryAllBooks();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œmybatiså±‚å’Œserviceä¸šåŠ¡å·²ç»æ­å»ºå®Œæ¯•ï¼Œç°åœ¨æ­å»ºspringå±‚ä¸mybatiså±‚çš„è¿æ¥</p>
<p>å°†MyBatisä¸Springè¿›è¡Œæ•´åˆï¼Œä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯å°†SqlSessionFactoryå¯¹è±¡äº¤ç”±Springå®¹å™¨æ¥ç®¡ç†ï¼Œæ‰€ä»¥è¯¥æ•´åˆåªéœ€è¦å°†SqlSessionFactoryçš„å¯¹è±¡ç”Ÿæˆå™¨SqlSessionFactoryBeanæ³¨å†Œåœ¨Springå®¹å™¨ä¸­ï¼Œå†å°†å…¶æ³¨å…¥ç»™Daoçš„å®ç°ç±»å³å¯å®Œæˆæ•´åˆã€‚</p>
<p>ç¼–å†™spring-dao.xmlæ–‡ä»¶ï¼Œå°†SqlSessionFactoryäº¤ç»™springå®¹å™¨ç®¡ç†</p>
<p>spring-dao.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br><br>    &lt;!--    å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶--&gt;<br>    &lt;context:property-placeholder location&#x3D;&quot;classpath:dbbase.properties&quot;&#x2F;&gt;<br><br>    &lt;!--    &lt;context:component-scan base-package&#x3D;&quot;com.dao&quot;&gt;&lt;&#x2F;context:component-scan&gt;--&gt;<br><br><br>    &lt;!--    æ•°æ®åº“è¿æ¥æ± --&gt;<br>    &lt;bean id&#x3D;&quot;dataSource&quot; class&#x3D;&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;<br>        &lt;property name&#x3D;&quot;driverClass&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;jdbcUrl&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;user&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br><br>    &lt;!--    é…ç½®sqlSessionFactory--&gt;<br>    &lt;bean id&#x3D;&quot;sqlSessionFactory&quot; class&#x3D;&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;<br>        &lt;property name&#x3D;&quot;dataSource&quot; ref&#x3D;&quot;dataSource&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;!--        ç»‘å®šmybatisçš„é…ç½®æ–‡ä»¶--&gt;<br>        &lt;property name&#x3D;&quot;configLocation&quot; value&#x3D;&quot;classpath:mybatis-config.xml&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br><br><br>    &lt;bean class&#x3D;&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;<br>        &lt;!--        æ³¨å…¥sqlSessionFactory--&gt;<br>        &lt;property name&#x3D;&quot;sqlSessionFactoryBeanName&quot; value&#x3D;&quot;sqlSessionFactory&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;!--        è¦æ‰«æçš„daoåŒ…--&gt;<br>        &lt;property name&#x3D;&quot;basePackage&quot; value&#x3D;&quot;com.dao&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>

<p>ç¼–å†™spring-service.xmlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br><br>    &lt;!--    æ‰«æserviceä¸‹çš„åŒ…--&gt;<br>    &lt;context:component-scan base-package&#x3D;&quot;com.service&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;!--å°†ä¸šåŠ¡ç±»æ³¨å…¥spring--&gt;<br>    &lt;bean id&#x3D;&quot;BookServiceImpl&quot; class&#x3D;&quot;com.service.BookServiceImpl&quot;&gt;<br>        &lt;property name&#x3D;&quot;bookMapper&quot; ref&#x3D;&quot;bookMapper&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>&lt;!--    å£°æ˜äº‹åŠ¡--&gt;<br>    &lt;bean id&#x3D;&quot;transactionManager&quot; class&#x3D;&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;<br>&lt;!--        æ³¨å…¥æ•°æ®æº--&gt;<br>        &lt;property name&#x3D;&quot;dataSource&quot; ref&#x3D;&quot;dataSource&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br><br></code></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œspring-mybatisçš„æ•´åˆå®Œæ¯•</p>
<p>ä¸‹é¢å¼€å§‹æ•´åˆspring-springmvc</p>
<p>æ·»åŠ webæ”¯æŒ</p>
<p><img src="/2020/10/26/ssmintegration/mvc.jpg" alt="mvc"></p>
<p>ç¼–å†™spring-mvc.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:mvc&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans<br>       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd<br>        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc<br>        https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&#x2F;spring-mvc.xsd<br>        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context<br>        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br><br>    &lt;!--        æ³¨è§£é©±åŠ¨--&gt;<br>    &lt;mvc:annotation-driven&#x2F;&gt;<br><br>    &lt;!--    æ‰«æcontrolleråŒ…--&gt;<br><br>    &lt;context:component-scan base-package&#x3D;&quot;com.controller&quot;&#x2F;&gt;<br>    &lt;!--    è¯•å›¾è§£æå™¨--&gt;<br><br>    &lt;bean id&#x3D;&quot;internalResourceViewResolver&quot; class&#x3D;&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;<br>        &lt;property name&#x3D;&quot;prefix&quot; value&#x3D;&quot;&#x2F;WEB-INF&#x2F;&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;suffix&quot; value&#x3D;&quot;.jsp&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br><br>    &lt;mvc:annotation-driven&gt;<br>        &lt;mvc:message-converters register-defaults&#x3D;&quot;true&quot;&gt;<br>            &lt;bean class&#x3D;&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;<br>                &lt;constructor-arg value&#x3D;&quot;UTF-8&quot;&#x2F;&gt;<br>            &lt;&#x2F;bean&gt;<br>            &lt;bean class&#x3D;&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;<br>                &lt;property name&#x3D;&quot;objectMapper&quot;&gt;<br>                    &lt;bean class&#x3D;&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt;<br>                        &lt;property name&#x3D;&quot;failOnEmptyBeans&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;<br>                    &lt;&#x2F;bean&gt;<br>                &lt;&#x2F;property&gt;<br>            &lt;&#x2F;bean&gt;<br>        &lt;&#x2F;mvc:message-converters&gt;<br>    &lt;&#x2F;mvc:annotation-driven&gt;<br><br><br><br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹applicationContext.xmlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;<br>    &lt;import resource&#x3D;&quot;classpath:spring-dao.xml&quot;&gt;&lt;&#x2F;import&gt;<br>    &lt;import resource&#x3D;&quot;classpath:spring-service.xml&quot;&gt;&lt;&#x2F;import&gt;<br>    &lt;import resource&#x3D;&quot;classpath:spring-mvc.xml&quot;&gt;&lt;&#x2F;import&gt;<br>&lt;&#x2F;beans&gt;<br><br></code></pre></td></tr></table></figure>

<p><strong>æ³¨ï¼šè¿™å››ä¸ªxmlæ–‡ä»¶è¦å…³è”åœ¨ä¸€èµ·</strong></p>
<p><img src="/2020/10/26/ssmintegration/applicationContext.xml.jpg" alt="applicationContext.xml"></p>
<p>ç¼–å†™web.xmlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"><br>&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;web-app xmlns&#x3D;&quot;http:&#x2F;&#x2F;xmlns.jcp.org&#x2F;xml&#x2F;ns&#x2F;javaee&quot;<br>         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;xmlns.jcp.org&#x2F;xml&#x2F;ns&#x2F;javaee http:&#x2F;&#x2F;xmlns.jcp.org&#x2F;xml&#x2F;ns&#x2F;javaee&#x2F;web-app_4_0.xsd&quot;<br>         version&#x3D;&quot;4.0&quot;&gt;<br><br>    &lt;servlet&gt;<br>        &lt;servlet-name&gt;springmvc&lt;&#x2F;servlet-name&gt;<br>        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-class&gt;<br>        &lt;init-param&gt;<br>            &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;<br>            &lt;param-value&gt;classpath:spring-mvc.xml&lt;&#x2F;param-value&gt;<br>        &lt;&#x2F;init-param&gt;<br>    &lt;&#x2F;servlet&gt;<br><br>    &lt;servlet-mapping&gt;<br>        &lt;servlet-name&gt;springmvc&lt;&#x2F;servlet-name&gt;<br>        &lt;url-pattern&gt;&#x2F;&lt;&#x2F;url-pattern&gt;<br>    &lt;&#x2F;servlet-mapping&gt;<br>    &lt;filter&gt;<br>        &lt;filter-name&gt;encodingFilter&lt;&#x2F;filter-name&gt;<br>        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;&#x2F;filter-class&gt;<br>        &lt;init-param&gt;<br>            &lt;param-name&gt;encoding&lt;&#x2F;param-name&gt;<br>            &lt;param-value&gt;utf-8&lt;&#x2F;param-value&gt;<br>        &lt;&#x2F;init-param&gt;<br>    &lt;&#x2F;filter&gt;<br>    &lt;filter-mapping&gt;<br>        &lt;filter-name&gt;encodingFilter&lt;&#x2F;filter-name&gt;<br>        &lt;url-pattern&gt;&#x2F;*&lt;&#x2F;url-pattern&gt;<br>    &lt;&#x2F;filter-mapping&gt;<br><br>&lt;&#x2F;web-app&gt;<br><br></code></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œä¸‰å±‚æ¶æ„æ•´åˆå®Œæ¯•</p>
<p>ç¼–å†™BookController</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class BookController &#123;<br><br>    @Autowired<br>    private BookService bookService;<br><br>    @RequestMapping(&quot;&#x2F;result&quot;)<br>    public String list()&#123;<br>        return &quot;result&quot;;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>è¿›è¡Œæµ‹è¯•ï¼Œæ­¤æ—¶å‡ºç°å¼‚å¸¸ï¼Œå‘ç°bookserviceæ³¨å…¥å¤±è´¥</p>
<p><img src="/2020/10/26/ssmintegration/beanwrong1.jpg" alt="beanwrong1"></p>
<p><img src="/2020/10/26/ssmintegration/beanwrong2.jpg" alt="beanwrong2"></p>
<p>è¿›è¡Œæ’æŸ¥ï¼š</p>
<ol>
<li>å‘ç°æ­¤æ—¶BookServiceçš„å®ç°ç±»æ˜¯æ‰‹åŠ¨é…ç½®ï¼Œæ’é™¤æ³¨å…¥æ³¨å…¥å¤±è´¥çš„é—®é¢˜ï¼</li>
</ol>
<p><img src="/2020/10/26/ssmintegration/dealbeanwrong.jpg" alt="dealbeanwrong"></p>
<ol start="2">
<li>è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½æŸ¥å‡ºæ•°æ®åº“ä¸­çš„å€¼</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>    public void test()&#123;<br>        ApplicationContext applicationContext &#x3D; new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);<br><br>        BookService bookServiceImpl &#x3D; (BookService) applicationContext.getBean(&quot;BookServiceImpl&quot;);<br><br>        Book book &#x3D; bookServiceImpl.queryBookById(1);<br><br>        System.out.println(book);<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>è¾“å‡ºæˆåŠŸ</p>
<ol start="3">
<li><p>ç”±äºæ˜¯åœ¨controllerä¸­è°ƒç”¨çš„BookServiceï¼Œæ£€æŸ¥spring-mvc.xmlï¼Œå‘ç°æ²¡æœ‰é…ç½®BookServiceçš„å®ç°ç±»</p>
</li>
<li><p>æœ€ç»ˆæ£€æŸ¥å‡ºåŸå› ï¼ŒåŸå› æ˜¯å› ä¸ºåœ¨web.xmlæ–‡ä»¶ä¸­ï¼Œå‰ç«¯æ§åˆ¶å™¨ç»‘å®šçš„æ˜¯spring-mvc.xmlæ–‡ä»¶ï¼Œè€Œspring-mvc.xmlæ–‡ä»¶ä¸­æ²¡æœ‰æ³¨å†Œè¿™ä¸ªbeanï¼Œæ‰€ä»¥å‡ºç°é”™è¯¯</p>
</li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>ä¿®æ”¹web.xmlæ–‡ä»¶çš„ç»‘å®š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;servlet&gt;<br>    &lt;servlet-name&gt;springmvc&lt;&#x2F;servlet-name&gt;<br>    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-class&gt;<br>    &lt;init-param&gt;<br>        &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;<br>        &lt;param-value&gt;classpath:spring-mvc.xml&lt;&#x2F;param-value&gt;<br>    &lt;&#x2F;init-param&gt;<br>&lt;&#x2F;servlet&gt;<br></code></pre></td></tr></table></figure>

<p>å†æ¬¡è¿›è¡Œæµ‹è¯•ï¼šæˆåŠŸè§£å†³å¼‚å¸¸</p>
<p><img src="/2020/10/26/ssmintegration/success.jpg" alt="success"></p>
]]></content>
      <tags>
        <tag>SSMæ¡†æ¶</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVCå…¥é—¨</title>
    <url>/2020/10/04/SpringMVC/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯MVCæ¡†æ¶"><a href="#ä»€ä¹ˆæ˜¯MVCæ¡†æ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯MVCæ¡†æ¶"></a><strong>ä»€ä¹ˆæ˜¯MVCæ¡†æ¶</strong></h1><p>MVCçš„å…¨åæ˜¯Model View Controllerï¼Œæ˜¯æ¨¡å‹(model)ï¼è§†å›¾(view)ï¼æ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œæ˜¯åœ¨WEBæ¨¡å‹ä¸­ä¸€ç§å¾ˆæµè¡Œçš„æ¡†æ¶ï¼Œé€šè¿‡æŠŠModelï¼ŒViewï¼ŒControlleråˆ†ç¦»ï¼ŒæŠŠè¾ƒä¸ºå¤æ‚çš„webåº”ç”¨åˆ†æˆé€»è¾‘æ¸…æ™°çš„å‡ éƒ¨åˆ†ï¼Œæ˜¯ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œå¢å¼ºå¼€å‘äººå‘˜é—´çš„é…åˆï¼Œå‡å°‘å‡ºé”™ï¼ŒMVCæ˜¯ä¸€ç§åˆ†å±‚å·¥ä½œçš„æ–¹æ³•ã€‚</p>
<p>model æ¨¡å‹ï¼šä¸€ä¸ªæˆ–å¤šä¸ªbeanï¼Œè´Ÿè´£å­˜å‚¨æ•°æ®å’Œå¤„ç†ä¸šåŠ¡é€»è¾‘<br>view è§†å›¾ï¼šä¸€ä¸ªæˆ–å¤šä¸ªjspæ–‡ä»¶ï¼Œè´Ÿè´£æ˜¾ç¤ºä¿¡æ¯<br>controller æ§åˆ¶å™¨ï¼šä¸€ä¸ªæˆ–å¤šä¸ªservletï¼Œè´Ÿè´£å¤„ç†ä¸ç”¨æˆ·é—´çš„äº¤äº’</p>
<hr>
<h1 id="ä»€ä¹ˆæ˜¯SpringMVC"><a href="#ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="ä»€ä¹ˆæ˜¯SpringMVC"></a><strong>ä»€ä¹ˆæ˜¯SpringMVC</strong></h1><p>SpringMVCæ˜¯Springçš„ä¸€ä¸ªå­æ¡†æ¶ï¼Œæ‹¥æœ‰Springçš„ç‰¹æ€§</p>
<h2 id="SpringMVCçš„ç»„æˆ"><a href="#SpringMVCçš„ç»„æˆ" class="headerlink" title="SpringMVCçš„ç»„æˆ"></a><strong>SpringMVCçš„ç»„æˆ</strong></h2><p>Spring MVCä¸»è¦ç”± DispatcherServlet(å‰ç«¯æ§åˆ¶å™¨)ã€HandlerMapping(å¤„ç†å™¨æ˜ å°„)ã€Controller(å¤„ç†å™¨)ã€ViewResolver(è§†å›¾è§£æå™¨)ã€View(è§†å›¾) ç»„æˆ</p>
<ul>
<li><h3 id="DispatcherServletæ¥å£ï¼š"><a href="#DispatcherServletæ¥å£ï¼š" class="headerlink" title="DispatcherServletæ¥å£ï¼š"></a>DispatcherServletæ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet)</p>
<p>DispatcherServletæ˜¯SpringMVCçš„æ ¸å¿ƒï¼ŒDispatcherServletæ¥å£æ˜¯å‰ç«¯æ§åˆ¶å™¨ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æœ‰ç»è¿‡å®ƒæ¥ç»Ÿä¸€åˆ†å‘ã€‚åœ¨DispatcherServletå°†è¯·æ±‚åˆ†å‘ç»™Spring Controllerä¹‹å‰ï¼Œéœ€è¦å€ŸåŠ©äºSpringæä¾›çš„HandlerMappingç±»å®šä½åˆ°å…·ä½“çš„Controller</p>
<ul>
<li><h3 id="HandlerMappingæ¥å£ï¼š"><a href="#HandlerMappingæ¥å£ï¼š" class="headerlink" title="HandlerMappingæ¥å£ï¼š"></a>HandlerMappingæ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet-Mapping)</p>
<p>DispatcherServleté€šè¿‡HandlerMappingå®šä½å…·ä½“çš„Controllerï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚äº¤ç»™Controller</p>
<ul>
<li><h3 id="Controlleræ¥å£ï¼š"><a href="#Controlleræ¥å£ï¼š" class="headerlink" title="Controlleræ¥å£ï¼š"></a>Controlleræ¥å£ï¼š</h3></li>
</ul>
<p>(Servlet)</p>
<p>Controllerå°†å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ï¼Œä¸€æ—¦Controllerå¤„ç†å®Œç”¨æˆ·è¯·æ±‚ï¼Œå°†è¿”å›ModelAndViewå¯¹è±¡ç»™ DispatcherServletå‰ç«¯æ§åˆ¶å™¨ï¼ŒModelAndViewä¸­åŒ…å«äº†æ¨¡å‹ï¼ˆModelï¼‰å’Œè§†å›¾ï¼ˆViewï¼‰ã€‚</p>
<ul>
<li><h3 id="ViewResolveræ¥å£ï¼š"><a href="#ViewResolveræ¥å£ï¼š" class="headerlink" title="ViewResolveræ¥å£ï¼š"></a>ViewResolveræ¥å£ï¼š</h3></li>
</ul>
<p>Springæä¾›çš„è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰åœ¨Webåº”ç”¨ä¸­æŸ¥æ‰¾Viewå¯¹è±¡ï¼Œä»è€Œå°†ç›¸åº”ç»“æœæ¸²æŸ“ç»™å®¢æˆ·ã€‚</p>
<h2 id="SpringMVCçš„è¿è¡Œè¿‡ç¨‹"><a href="#SpringMVCçš„è¿è¡Œè¿‡ç¨‹" class="headerlink" title="SpringMVCçš„è¿è¡Œè¿‡ç¨‹"></a>SpringMVCçš„è¿è¡Œè¿‡ç¨‹</h2><p><img src="/2020/10/04/SpringMVC/SpringMVC.png"></p>
<p>SpringMVCçš„è¿è¡Œè¿‡ç¨‹ä¸ºï¼š</p>
<p>å®¢æˆ·ç«¯æäº¤è¯·æ±‚ç»™DispatcherServletï¼ŒDispatcherServletå¯»æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªçš„å¤„ç†å™¨æ˜ å°„HandlerMappingï¼Œæ‰¾åˆ°ä¸è¯·æ±‚ç›¸åº”çš„Controllerï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™Controllerï¼ŒControllerå¤„ç†å®Œæ¯•è¯·æ±‚ä¹‹åè¿”å›ModelAndViewå¯¹è±¡ç»™Dispatcherï¼ŒDispatcheré€šè¿‡ViewResolveræ‰¾åˆ°ModelAndViewä¸­æŒ‡å®šçš„è§†å›¾åï¼Œå°†è§†å›¾è¿”å›ç»™å®¢æˆ·ç«¯</p>
<hr>
<h1 id="SpringMVCå…¥é—¨ä¹‹HelloWorld"><a href="#SpringMVCå…¥é—¨ä¹‹HelloWorld" class="headerlink" title="SpringMVCå…¥é—¨ä¹‹HelloWorld"></a><strong>SpringMVCå…¥é—¨ä¹‹HelloWorld</strong></h1><p>åœ¨springmvc.controlleråŒ…ä¸‹åˆ›å»ºHelloWorldControllerç±»ï¼Œç»§æ‰¿Controlleræ¥å£ï¼š</p>
<p><strong>æ³¨ï¼šè¦é€‰æ‹©org.springframework.web.servletæ¥å£ä¸‹çš„Controllerå­æ¥å£</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package springmvc.controller;<br><br>import org.springframework.web.servlet.ModelAndView;<br>import org.springframework.web.servlet.mvc.Controller;<br><br>public class HelloWorldController implements Controller &#123;<br>    @Override<br>    public ModelAndView handleRequest(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse) throws Exception &#123;<br>        ModelAndView mav &#x3D; new ModelAndView();<br>        mav.addObject(&quot;message&quot;,&quot;helloworld!&quot;);<br>        mav.setViewName(&quot;&#x2F;WEB-INF&#x2F;helloWorld.jsp&quot;);<br>        return mav;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„helloWorld.jspæ–‡ä»¶åé¢ä¼šåˆ›å»º</p>
<p>é…ç½®dispatcher-servlet.xmlæ–‡ä»¶ï¼Œä¸ºå‰ç«¯å¤„ç†å™¨æ·»åŠ å¤„ç†å™¨æ˜ å°„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;<br>&lt;!DOCTYPE beans PUBLIC &quot;-&#x2F;&#x2F;SPRING&#x2F;&#x2F;DTD BEAN&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;dtd&#x2F;spring-beans.dtd&quot;&gt;<br>&lt;beans&gt;<br>    &lt;bean id&#x3D;&quot;simpleUrlHandlerMapping&quot;<br>          class&#x3D;&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;<br>        &lt;property name&#x3D;&quot;mappings&quot;&gt;<br>            &lt;props&gt;<br>&lt;!--                è¿™é‡ŒHelloWorldControllerä½¿ç”¨çš„æ˜¯åè¾¹beançš„id--&gt;<br>                &lt;prop key&#x3D;&quot;&#x2F;index&quot;&gt;HelloWorldController&lt;&#x2F;prop&gt;<br>            &lt;&#x2F;props&gt;<br>        &lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>    &lt;bean id&#x3D;&quot;HelloWorldController&quot; class&#x3D;&quot;springmvc.controller.HelloWorldController&quot;&gt;&lt;&#x2F;bean&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>

<p>ç»‘å®šå‰ç«¯æ§åˆ¶å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p>
<p>åœ¨resourcesç›®å½•ä¸‹ç¼–å†™xxx.xmlæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å¦‚ä¸‹æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;servlet&gt;<br>    &lt;servlet-name&gt;springmvc&lt;&#x2F;servlet-name&gt;<br>    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-class&gt;<br>    &lt;init-param&gt;<br>        &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;<br>        &lt;param-value&gt;classpath:applicationContext.xml&lt;&#x2F;param-value&gt;<br>    &lt;&#x2F;init-param&gt;<br>&lt;&#x2F;servlet&gt;<br></code></pre></td></tr></table></figure>

<p>é…ç½®web.xmlæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;web-app version&#x3D;&quot;2.4&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&quot;<br>         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee<br>http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&#x2F;web-app_2_4.xsd&quot;&gt;<br>    &lt;servlet&gt;<br><br>&lt;!--        ä¼šè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªnameåˆ°WEB-INFä¸­æ‰¾***-servlet.xml çš„æ–‡ä»¶ï¼Œæ‰€ä»¥xmlæ–‡ä»¶åä¸ºdispatcher-servlet.xmlï¼Œè€Œè¿™é‡Œçš„servlet-nameä¸ºdispatcher--&gt;<br><br>        &lt;servlet-name&gt;dispatcher&lt;&#x2F;servlet-name&gt;<br>        &lt;servlet-class&gt;<br>            org.springframework.web.servlet.DispatcherServlet<br>        &lt;&#x2F;servlet-class&gt;<br>        &lt;load-on-startup&gt;1&lt;&#x2F;load-on-startup&gt;<br>    &lt;&#x2F;servlet&gt;<br>    &lt;servlet-mapping&gt;<br>        &lt;servlet-name&gt;dispatcher&lt;&#x2F;servlet-name&gt;<br>        &lt;!--è¿™é‡Œå°†urlè®¾ç½®ä¸º&#x2F;ï¼Œå¤„ç†æ‰€æœ‰çš„url        --&gt;<br>        &lt;url-pattern&gt;&#x2F;&lt;&#x2F;url-pattern&gt;	<br>    &lt;&#x2F;servlet-mapping&gt;<br><br>    &#x2F;&#x2F;è§£å†³ä¹±ç <br>    &lt;filter&gt;<br>	    &lt;filter-name&gt;encodingFilter&lt;&#x2F;filter-name&gt;<br>	    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;&#x2F;filter-class&gt;<br>	    &lt;init-param&gt;<br>	        &lt;param-name&gt;encoding&lt;&#x2F;param-name&gt;<br>	        &lt;param-value&gt;utf-8&lt;&#x2F;param-value&gt;<br>	    &lt;&#x2F;init-param&gt;<br>	&lt;&#x2F;filter&gt;<br>	&lt;filter-mapping&gt;<br>	    &lt;filter-name&gt;encodingFilter&lt;&#x2F;filter-name&gt;<br>	    &lt;url-pattern&gt;&#x2F;*&lt;&#x2F;url-pattern&gt;<br>	&lt;&#x2F;filter-mapping&gt;<br>&lt;&#x2F;web-app&gt;<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹index.jspæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<br>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;title&gt;$Title$&lt;&#x2F;title&gt;<br>  &lt;&#x2F;head&gt;<br>  &lt;body&gt;<br>  &lt;h1&gt;welcome to login&lt;&#x2F;h1&gt;<br>  &lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>
<p>åœ¨WEB-INFä¸‹æ·»åŠ helloWorld.jspæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>&lt;%--ç»‘å®šå¤„ç†å™¨ä¸­æ·»åŠ çš„å€¼--%&gt;<br><br>    &lt;h1&gt;$&#123;message&#125;&lt;&#x2F;h1&gt;	<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>

<p>é¡¹ç›®çš„æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/04/SpringMVC/content.jpg" alt="content"></p>
<p>postmanè®¿é—®<a href="http://localhost:8080/">http://localhost:8080</a><br><img src="/2020/10/04/SpringMVC/8080.jpg" alt="8080"></p>
<p>è®¿é—®<a href="http://localhost:8080/index">http://localhost:8080/index</a><br><img src="/2020/10/04/SpringMVC/index.jpg" alt="index"></p>
<p>SpringMVCä¸­çš„æ•°æ®ç»‘å®šï¼Œåªè¦åœ¨æ§åˆ¶å™¨ä¸­å¯¹æ•°æ®æ¨¡å‹è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œå¦‚ä¸Šé¢ä¾‹å­çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">mav.addObject(&quot;message&quot;,&quot;helloworld!&quot;); <br></code></pre></td></tr></table></figure>
<p>æˆ–è€…Modelç±»å‹å¯¹è±¡çš„ addAttribute()æ–¹æ³•å¤„ç†æ•°æ®ï¼Œç„¶ååœ¨ç›¸åº”çš„viewå±‚ä½¿ç”¨${}æ˜¾ç¤ºæ•°æ®å³å¯ã€‚</p>
<p>å¦‚æœåœ¨Dispatcherä¸­é…ç½®è§†å›¾è§£æå™¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;bean id&#x3D;&quot;internalResourceViewResolver&quot; class&#x3D;&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;<br>    &lt;property name&#x3D;&quot;prefix&quot; value&#x3D;&quot;&#x2F;WEB-INF&#x2F;&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;property name&#x3D;&quot;suffix&quot; value&#x3D;&quot;.jsp&quot;&gt;&lt;&#x2F;property&gt;<br>&lt;&#x2F;bean&gt;<br></code></pre></td></tr></table></figure>
<p>åˆ™Controllerä¸­çš„è¿”å›å¯¹è±¡ModelAndViewä¸­æŒ‡å®šçš„è§†å›¾ä¸ç”¨æ·»åŠ å‰ç¼€å’Œåç¼€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">mav.setViewName(&quot;result&quot;);<br></code></pre></td></tr></table></figure>
<p>å°†è¿”å›åŒæ ·çš„ç»“æœ</p>
<hr>
<h1 id="Controlleræ³¨è§£å’Œ-RequestMappingæ³¨è§£"><a href="#Controlleræ³¨è§£å’Œ-RequestMappingæ³¨è§£" class="headerlink" title="@Controlleræ³¨è§£å’Œ@RequestMappingæ³¨è§£"></a><strong>@Controlleræ³¨è§£å’Œ@RequestMappingæ³¨è§£</strong></h1><p><strong>æ³¨ï¼šè¦ä½¿ç”¨æ³¨è§£ï¼Œè¦åœ¨æ§åˆ¶å™¨çš„é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹è¯­å¥</strong>    </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;context: component-scan base-package&#x3D;&quot;package-name&quot;&gt;&lt;&#x2F;context: component-scan&gt;<br></code></pre></td></tr></table></figure>

<h2 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h2><p>ä½¿ç”¨@Controlleræ³¨è§£å°†æŸç±»å£°æ˜ä¸ºæ§åˆ¶å™¨ï¼Œä½¿ç”¨@Controllerå°±ä¸ç”¨åœ¨Dispatcheré…ç½®æ–‡ä»¶ä¸­é…ç½®æ§åˆ¶å™¨äº†</p>
<h2 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h2><p>ä½¿ç”¨@RequestMappingå¯ä»¥ä¸ºæ¯ä¸ªè¯·æ±‚ç¼–å†™å¯¹åº”çš„å¤„ç†æ–¹æ³•</p>
<h3 id="æ–¹æ³•çº§åˆ«æ³¨è§£"><a href="#æ–¹æ³•çº§åˆ«æ³¨è§£" class="headerlink" title="æ–¹æ³•çº§åˆ«æ³¨è§£"></a>æ–¹æ³•çº§åˆ«æ³¨è§£</h3><p>@RequestMappingä½œç”¨äºæ–¹æ³•æ—¶ï¼Œè‹¥å®¢æˆ·ç«¯æœ‰ç›¸åº”çš„è¯·æ±‚ï¼Œåˆ™dispatcherå°†é€šè¿‡è¯¥è¯·æ±‚æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ï¼Œä»è€Œæ‰¾åˆ°æ–¹æ³•æ‰€åœ¨çš„æ§åˆ¶å™¨ï¼Œç”±æ§åˆ¶å™¨å¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class LoginController &#123;<br>    @RequestMapping(&quot;&#x2F;login&quot;)<br>    public String login()&#123;<br>        return &quot;login&quot;;<br>    &#125;<br>    @RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>    public String result()&#123;<br>        return &quot;result&quot;;<br>    &#125;<br>&#125;<br><br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;$Title$&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;welcome to login&lt;&#x2F;h1&gt;<br>&lt;form action&#x3D;&quot;&#x2F;result&quot;&gt;<br>    å­¦å·ï¼š&lt;input name&#x3D;&quot;id&quot;&gt;&lt;br&gt;<br>    å§“åï¼š&lt;input name&#x3D;&quot;name&quot;&gt;&lt;br&gt;<br>    å¹´é¾„ï¼š&lt;input name&#x3D;&quot;age&quot;&gt;&lt;br&gt;<br>    &lt;button type&#x3D;&quot;sumbit&quot;&gt;æäº¤&lt;&#x2F;button&gt;<br>&lt;&#x2F;form&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼šæ­¤é…ç½®æ˜¯åŸºäºè§†å›¾å¤„ç†å™¨çš„é…ç½®</strong></p>
<p>æ­¤æ—¶ï¼Œæµè§ˆå™¨æ‰“å¼€<a href="http://localhost:8080/login">http://localhost:8080/login</a> å°†ä¼šæˆåŠŸæ˜¾ç¤ºç™»é™†ç•Œé¢</p>
<h3 id="ç±»çº§åˆ«æ³¨è§£"><a href="#ç±»çº§åˆ«æ³¨è§£" class="headerlink" title="ç±»çº§åˆ«æ³¨è§£"></a>ç±»çº§åˆ«æ³¨è§£</h3><p>åœ¨ç±»çº§åˆ«æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œæ§åˆ¶å™¨ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†æ˜ å°„ä¸ºç±»çº§åˆ«çš„è¯·æ±‚ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>@RequestMapping(&quot;&#x2F;init&quot;)<br>public class LoginController &#123;<br>    @RequestMapping(&quot;&#x2F;login&quot;)<br>    public String login()&#123;<br>        return &quot;login&quot;;<br>    &#125;<br>    @RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>    public String result()&#123;<br>        return &quot;result&quot;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œæµè§ˆå™¨æ‰“å¼€<a href="http://localhost:8080/init/login">http://localhost:8080/init/login</a> å°†ä¼šæˆåŠŸæ˜¾ç¤ºç™»é™†ç•Œé¢</p>
<h2 id="æ¥æ”¶è¯·æ±‚å‚æ•°"><a href="#æ¥æ”¶è¯·æ±‚å‚æ•°" class="headerlink" title="æ¥æ”¶è¯·æ±‚å‚æ•°"></a><strong>æ¥æ”¶è¯·æ±‚å‚æ•°</strong></h2><h3 id="ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­"><a href="#ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­" class="headerlink" title="ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­"></a><strong>ç›´æ¥æŠŠè¡¨å•æ•°æ®å†™åœ¨å‚æ•°åˆ—è¡¨ä¸­</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class LoginController &#123;<br>    @RequestMapping(&quot;&#x2F;login&quot;)<br>    public String login()&#123;<br>        return &quot;login&quot;;<br>    &#125;<br>    @RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>    public String result(String name,String id,int age,Model model)&#123;<br>        model.addAttribute(&quot;id&quot;,id);<br>        model.addAttribute(&quot;name&quot;,name);<br>        model.addAttribute(&quot;age&quot;,age);<br>        return &quot;result&quot;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="HttpServletRequestè·å¾—å‚æ•°"><a href="#HttpServletRequestè·å¾—å‚æ•°" class="headerlink" title="HttpServletRequestè·å¾—å‚æ•°"></a><strong>HttpServletRequestè·å¾—å‚æ•°</strong></h3><p>å¦‚Modelæ¥å£å’Œjavax.servlet.http.HttpServletRequestç»„åˆå¯ä»¥åƒModelAndViewé‚£æ ·è¿”å›å®¢æˆ·ç«¯çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>public String result(Model model,javax.servlet.http.HttpServletRequest httpServletRequest)&#123;<br>    model.addAttribute(&quot;id&quot;,httpServletRequest.getParameter(&quot;id&quot;));<br>    model.addAttribute(&quot;name&quot;,httpServletRequest.getParameter(&quot;name&quot;));<br>    model.addAttribute(&quot;age&quot;,httpServletRequest.getParameter(&quot;age&quot;));<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°"><a href="#é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°" class="headerlink" title="é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°"></a><strong>é€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°</strong></h3><p>studentç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class student &#123;<br>    private String id;<br>    private String name;<br>    private int age;<br>    &#x2F;&#x2F;çœç•¥getterå’Œsetter<br>    public String toString()&#123;<br>    	return &quot;[id&#x3D;&quot;+id+&quot;,name&#x3D;&quot;+name+&quot;,age&#x3D;&quot;+age+&quot;]&quot;;<br>	&#125;<br>&#125;<br><br>@RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>public String result(student stu,Model model)&#123;<br>    model.addAttribute(&quot;id&quot;,stu.getId());<br>    model.addAttribute(&quot;name&quot;,stu.getName());<br>    model.addAttribute(&quot;age&quot;,stu.getAge());<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a><strong>@RequestParam</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>public String result(student stu, Model model, @RequestParam String name, @RequestParam String id)&#123;<br>        System.out.println(id + &quot; &quot; + name);<br>        model.addAttribute(&quot;id&quot;, stu.getId());<br>        model.addAttribute(&quot;name&quot;, stu.getName());<br>        model.addAttribute(&quot;age&quot;, stu.getAge());<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a><strong>@ModelAttribute</strong></h3><p>å½“ @ModelAttribute æ³¨è§£æ”¾åœ¨å¤„ç†æ–¹æ³•çš„å½¢å‚ä¸Šæ—¶ï¼Œç”¨äºå°†å¤šä¸ªè¯·æ±‚å‚æ•°å°è£…åˆ°ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œä»è€Œç®€åŒ–æ•°æ®ç»‘å®šæµç¨‹ï¼Œè€Œä¸”è‡ªåŠ¨æš´éœ²ä¸ºæ¨¡å‹æ•°æ®ï¼Œåœ¨è§†å›¾é¡µé¢å±•ç¤ºæ—¶ä½¿ç”¨ã€‚è€Œâ€œé€šè¿‡å®ä½“Beanæ¥æ”¶è¯·æ±‚å‚æ•°â€ä¸­åªæ˜¯å°†å¤šä¸ªè¯·æ±‚å‚æ•°å°è£…åˆ°ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œå¹¶ä¸èƒ½æš´éœ²ä¸ºæ¨¡å‹æ•°æ®ï¼ˆéœ€è¦ä½¿ç”¨ model.addAttribute è¯­å¥æ‰èƒ½æš´éœ²ä¸ºæ¨¡å‹æ•°æ®)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>public String result(@ModelAttribute(&quot;stu&quot;) student stu)&#123;<br>    System.out.println(stu.getId()+&quot; &quot;+stu.getName()+&quot; &quot;+stu.getAge());<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨resultå¤„ç†æ–¹æ³•ä¸­ï¼ŒModelAttribute(â€œstuâ€) student stuå…ˆå°†è¯·æ±‚å‚æ•°çš„è¾“å…¥å°è£…åˆ°studentå¯¹è±¡ä¸­ï¼Œç„¶åå†åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ï¼Œä»¥é”®å€¼ä¸ºstuå­˜å‚¨åœ¨Modelå¯¹è±¡ä¸­</p>
<p>æ­¤æ—¶ï¼Œåªè¦åœ¨ç›¸åº”çš„result.jspä¸­ä½¿ç”¨ELè¡¨è¾¾å¼Â¥{property}å°±å¯ä»¥å°†æ•°æ®è¡¨ç¤ºå‡ºæ¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;&#x2F;h1&gt;<br>    &lt;p&gt;$&#123;id&#125;&lt;&#x2F;p&gt;<br>    &lt;p&gt;$&#123;name&#125;&lt;&#x2F;p&gt;<br>    &lt;p&gt;$&#123;age&#125;&lt;&#x2F;p&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>

<p>ModelAttributeä½œç”¨äºæ— è¿”å›å€¼çš„æ–¹æ³•ï¼Œè¢«@ModelAttributeæ³¨é‡Šçš„æ–¹æ³•ä¼šåœ¨æ­¤controlleræ¯ä¸ªæ–¹æ³•æ‰§è¡Œå‰è¢«æ‰§è¡Œ</p>
<p>åœ¨æ§åˆ¶å™¨ä¸­æ·»åŠ showæ–¹æ³•ï¼Œæƒ³è¦æŠŠè¯·æ±‚å‚æ•°æ˜¾ç¤ºåœ¨result.jspä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@ModelAttribute<br>public void show(Model model,@RequestParam String name)&#123;<br>    model.addAttribute(&quot;name&quot;,name);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¿è¡Œå‘ç°ï¼Œnameè¯·æ±‚å‚æ•°æˆåŠŸæ˜¾ç¤ºåœ¨é¡µé¢ä¸­</p>
<h1 id="Serviceå’Œ-AutoWired"><a href="#Serviceå’Œ-AutoWired" class="headerlink" title="@Serviceå’Œ@AutoWired"></a>@Serviceå’Œ@AutoWired</h1><p>åœ¨springmvc.controlleråŒ…ä¸‹åˆ›å»ºServiceInterfaceæ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface ServiceInterface &#123;<br>    public void service(student stu);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æä¾›å®ç°ç±»ServiceImplï¼Œè¯¥ç±»æ ‡æ³¨ä¸ºServiceç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Service<br>public class ServiceImpl implements ServiceInterface&#123;<br>    public void service(student stu)&#123;<br>        System.out.println(&quot;service&quot;);<br>        System.out.println(stu.toString());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨LoginControlleræ§åˆ¶å™¨ä¸­æ·»åŠ å±æ€§ï¼Œæ ‡å¿—ä¸ºè‡ªåŠ¨æ³¨å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Autowired(required &#x3D; false)<br>ServiceInterface serviceInterface;<br></code></pre></td></tr></table></figure>
<p>ä¿®æ”¹resultå¤„ç†æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(value &#x3D; &quot;&#x2F;result&quot;)<br>public String result(@ModelAttribute(&quot;stu&quot;) student stu)&#123;<br>    serviceInterface.service(stu);<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨postmanä¸­æäº¤è¯·æ±‚ï¼Œå¯ä»¥å‘ç°IDEAè¾“å‡ºç«¯æˆåŠŸæ˜¾ç¤ºè¡¨å•ä¿¡æ¯</p>
<h1 id="è½¬å‘å’Œé‡å®šå‘"><a href="#è½¬å‘å’Œé‡å®šå‘" class="headerlink" title="è½¬å‘å’Œé‡å®šå‘"></a><strong>è½¬å‘å’Œé‡å®šå‘</strong></h1><p>é‡å®šå‘æ˜¯å°†ç”¨æˆ·ä»å½“å‰å¤„ç†è¯·æ±‚å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾æˆ–å¤„ç†è¯·æ±‚ï¼Œä»¥å‰çš„è¯·æ±‚ï¼ˆrequestï¼‰ä¸­å­˜æ”¾çš„ä¿¡æ¯å…¨éƒ¨å¤±æ•ˆï¼Œå¹¶è¿›å…¥ä¸€ä¸ªæ–°çš„ request ä½œç”¨åŸŸï¼Œå¦‚return â€œredirect:aviewâ€;</p>
<p>è½¬å‘æ˜¯å°†ç”¨æˆ·å¯¹å½“å‰å¤„ç†çš„è¯·æ±‚è½¬å‘ç»™å¦ä¸€ä¸ªè§†å›¾æˆ–å¤„ç†è¯·æ±‚ï¼Œä»¥å‰çš„ request ä¸­å­˜æ”¾çš„ä¿¡æ¯ä¸ä¼šå¤±æ•ˆã€‚</p>
<p>è½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</p>
<p>åœ¨ Spring MVC æ¡†æ¶ä¸­ï¼Œæ§åˆ¶å™¨ç±»ä¸­å¤„ç†æ–¹æ³•çš„ return è¯­å¥é»˜è®¤å°±æ˜¯è½¬å‘å®ç°ï¼Œåªä¸è¿‡å®ç°çš„æ˜¯è½¬å‘åˆ°è§†å›¾ã€‚</p>
<h1 id="SpringMVCä¸JSONçš„æ•°æ®äº¤äº’"><a href="#SpringMVCä¸JSONçš„æ•°æ®äº¤äº’" class="headerlink" title="SpringMVCä¸JSONçš„æ•°æ®äº¤äº’"></a>SpringMVCä¸JSONçš„æ•°æ®äº¤äº’</h1><h2 id="jackson"><a href="#jackson" class="headerlink" title="jackson"></a><strong>jackson</strong></h2><p>æ·»åŠ ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>  &lt;artifactId&gt;jackson-core&lt;&#x2F;artifactId&gt;<br>  &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br>&lt;dependency&gt;<br>  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>  &lt;artifactId&gt;jackson-databind&lt;&#x2F;artifactId&gt;<br>  &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br>&lt;dependency&gt;<br>  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;<br>  &lt;artifactId&gt;jackson-annotations&lt;&#x2F;artifactId&gt;<br>  &lt;version&gt;2.8.1&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>
<p>åœ¨UserControllerä¸­æ·»åŠ jsonæ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(&quot;&#x2F;json&quot;)<br>@ResponseBody<br>public String json()&#123;<br>    return new student(&quot;123&quot;,&quot;å¼ ä¸‰&quot;,12).toString();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æˆ–è€…ä½¿ç”¨ObjectMapperå¯¹è±¡çš„writeValueAsStringæ–¹æ³•ï¼Œå°†å¯¹è±¡è§£æä¸ºå­—ç¬¦ä¸²</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(value &#x3D; &quot;&#x2F;json&quot;)<br>@ResponseBody<br>public String json() throws IOException &#123;<br>    student stu &#x3D;  new student(&quot;123&quot;,&quot;å¼ ä¸‰&quot;,12);<br>    ObjectMapper objectMapper &#x3D; new ObjectMapper();<br>    String str &#x3D; objectMapper.writeValueAsString(stu);<br>    return str;<br>    &#125;<br></code></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œç”¨@ResponseBodyä½œç”¨äºæ–¹æ³•è¿”å›å­—ç¬¦ä¸²ç»™è¯·æ±‚ï¼Œ@RequestBodyä½œç”¨äºå‚æ•°ç”¨äºæ¥å—Jsonå¯¹è±¡å­—ç¬¦ä¸²åè‡ªåŠ¨è½¬æ¢ä¸ºå¯¹è±¡</p>
<p>postmanæµ‹è¯•ï¼Œç½‘é¡µä¸­å‡ºç°[id=123,name=??,age=12]ï¼Œå‡ºç°ä¹±ç </p>
<p><strong>JSONä¹±ç è§£å†³</strong></p>
<ul>
<li>@RequestMappingæ·»åŠ å±æ€§ produces=â€application/json;charset=utf-8â€</li>
</ul>
<p>æ­¤æ—¶è¿”å›[id=123,name=å¼ ä¸‰,age=12]</p>
<ul>
<li>åœ¨dispatcher-servletä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ç»Ÿä¸€è§£å†³é—®é¢˜<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:annotation-driven&gt;<br>    &lt;mvc:message-converters register-defaults&#x3D;&quot;true&quot;&gt;<br>        &lt;bean class&#x3D;&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&gt;<br>            &lt;constructor-arg value&#x3D;&quot;UTF-8&quot;&#x2F;&gt;<br>        &lt;&#x2F;bean&gt;<br>        &lt;bean class&#x3D;&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;<br>            &lt;property name&#x3D;&quot;objectMapper&quot;&gt;<br>                &lt;bean class&#x3D;&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt;<br>                    &lt;property name&#x3D;&quot;failOnEmptyBeans&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;<br>                &lt;&#x2F;bean&gt;<br>            &lt;&#x2F;property&gt;<br>        &lt;&#x2F;bean&gt;<br>    &lt;&#x2F;mvc:message-converters&gt;<br>&lt;&#x2F;mvc:annotation-driven&gt;<br></code></pre></td></tr></table></figure></li>
<li>å°†æ§åˆ¶å™¨æ³¨è§£ä½@RestController</li>
</ul>
<p>æ­¤æ—¶æ§åˆ¶å™¨ç±»çš„æ‰€æœ‰å¤„ç†æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œä¸å†è¿›è¡Œè§†å›¾è§£æ</p>
<h2 id="fastjson"><a href="#fastjson" class="headerlink" title="fastjson"></a><strong>fastjson</strong></h2><p>æ·»åŠ ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>    &lt;groupId&gt;com.alibaba&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;fastjson&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;1.2.74&lt;&#x2F;version&gt;<br> &lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<p>fastjsonä¸­JSONç±»ä¸­æœ‰å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œåªè¦è¿”å›å­—ç¬¦ä¸²å°±å¥½ï¼Œå¦‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">String str &#x3D; JSON.toJSONString(stu);<br></code></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿæœ‰jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡çš„æ–¹æ³•</p>
<h2 id="ajax-jsonä¸MVCäº¤äº’å®ä¾‹"><a href="#ajax-jsonä¸MVCäº¤äº’å®ä¾‹" class="headerlink" title="ajax jsonä¸MVCäº¤äº’å®ä¾‹"></a><strong>ajax jsonä¸MVCäº¤äº’å®ä¾‹</strong></h2><p>æ¨¡ä»¿æ³¨å†Œé¡µé¢ä¸­è´¦å·å’Œå¯†ç çš„æœ‰æ•ˆæ€§æ£€éªŒ</p>
<p>Userç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class User &#123;<br><br>    @NotBlank(message &#x3D; &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)<br>    private String name;<br>    @NotBlank(message &#x3D; &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)<br>    @Length(min &#x3D; 3,max &#x3D; 8,message &#x3D; &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)<br>    private String passwords;<br><br>    public String getPasswords() &#123;<br>        return passwords;<br>    &#125;<br><br>    public String getName() &#123;<br>        return name;<br>    &#125;<br><br>    public void setPasswords(String passwords) &#123;<br><br>        this.passwords &#x3D; passwords;<br>    &#125;<br><br>    public void setName(String name) &#123;<br>        this.name &#x3D; name;<br>    &#125;<br><br>    public String toString()&#123;<br>        return &quot;[name&#x3D;&quot;+name+&quot;,passwords&#x3D;&quot;+passwords+&quot;]&quot;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>UserControllerï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class UserController &#123;<br><br>    @RequestMapping(&quot;&#x2F;test&quot;)<br>    @ResponseBody<br>    public String test(User user)&#123;<br>&#x2F;&#x2F;        System.out.println(user+&quot; &quot;+passwords);<br>        System.out.println(user);<br>        String msg &#x3D; &quot;&quot;;<br>        if(user.getName()!&#x3D;null)&#123;<br>            if(user.getName().equals(&quot;123&quot;))&#123;<br>                msg &#x3D;  &quot;ok&quot;;<br>            &#125;else&#123;<br>                msg &#x3D;  &quot;failed&quot;;<br>            &#125;<br>        &#125;<br>        if(user.getPasswords()!&#x3D;null)&#123;<br>            if(user.getPasswords().equals(&quot;1233&quot;))&#123;<br>                msg &#x3D;  &quot;ok&quot;;<br>            &#125;else&#123;<br>                msg &#x3D; &quot;failed&quot;;<br>            &#125;<br>        &#125;<br>        return msg;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>jspæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;s3.pstatp.com&#x2F;cdn&#x2F;expire-1-M&#x2F;jquery&#x2F;3.3.1&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>    &lt;script&gt;<br>        function uservalidator() &#123;<br>            $.ajax(&#123;<br>                url:&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;test&quot;,<br>                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,<br>                success:function (data) &#123;<br>                    $(&quot;#usermsg&quot;).html(data)<br>                &#125;<br>            &#125;)<br>        &#125;<br>    &lt;&#x2F;script&gt;<br>    &lt;script&gt;<br>        function passwordsvalidator() &#123;<br>            $.ajax(&#123;<br>                url:&quot;$&#123;pageContext.request.contextPath&#125;&#x2F;test&quot;,<br>                data:&#123;&quot;name&quot;:$(&quot;#user&quot;).val(),&quot;passwords&quot;:$(&quot;#passwords&quot;).val()&#125;,<br>                success:function (data) &#123;<br>                    $(&quot;#pswmsg&quot;).html(data)<br>                &#125;<br>            &#125;)<br>        &#125;<br>    &lt;&#x2F;script&gt;<br>    &lt;form&gt;<br>        ç”¨æˆ·åï¼š&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;user&quot; id&#x3D;&quot;user&quot; onblur&#x3D;&quot;uservalidator()&quot;&gt;&lt;br&gt;<br>        &lt;p id&#x3D;&quot;usermsg&quot;&gt;&lt;&#x2F;p&gt;<br>        å¯†ç ï¼š&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;passwords&quot; id&#x3D;&quot;passwords&quot; onblur&#x3D;&quot;passwordsvalidator()&quot;&gt;<br>        &lt;p id&#x3D;&quot;pswmsg&quot;&gt;&lt;&#x2F;p&gt;<br>    &lt;&#x2F;form&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>

<h1 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a><strong>æ‹¦æˆªå™¨</strong></h1><p>SpringMVCçš„æ‹¦æˆªå™¨å’ŒServletä¸­çš„Filterç›¸ä¼¼ï¼Œä¸»è¦ç”¨äºæ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚å¹¶åšç›¸åº”çš„å¤„ç†ï¼Œé€šå¸¸åº”ç”¨åœ¨æƒé™éªŒè¯ã€è®°å½•è¯·æ±‚ä¿¡æ¯çš„æ—¥å¿—ã€åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ç­‰åŠŸèƒ½ä¸Š</p>
<p>å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptoræ¥å£ï¼ŒHandlerInterceptoræ¥å£ä¸­æœ‰ä¸‰ä¸ªæ–¹æ³•</p>
<ul>
<li><p>preHandleï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•å‰æ‰§è¡Œï¼Œå…¶è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦ä¸­æ–­åç»­æ“ä½œï¼Œè¿”å› true è¡¨ç¤ºç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œè¿”å› false è¡¨ç¤ºä¸­æ–­åç»­æ“ä½œã€‚</p>
</li>
<li><p>postHandleï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•è°ƒç”¨ä¹‹åã€è§£æè§†å›¾ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å¯¹è¯·æ±‚åŸŸä¸­çš„æ¨¡å‹<br>å’Œè§†å›¾åšè¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚</p>
</li>
<li><p>afterCompletionï¼šè¯¥æ–¹æ³•åœ¨æ§åˆ¶å™¨çš„å¤„ç†è¯·æ±‚æ–¹æ³•æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼Œå³è§†å›¾æ¸²æŸ“ç»“æŸåæ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å®ç°ä¸€äº›èµ„æºæ¸…ç†ã€è®°å½•æ—¥å¿—ä¿¡æ¯ç­‰å·¥ä½œã€‚</p>
</li>
</ul>
<h2 id="æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨"><a href="#æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨" class="headerlink" title="æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨"></a><strong>æ‹¦æˆªå™¨çš„é…ç½®ä¸ä½¿ç”¨</strong></h2><p>åœ¨springmvc.controlleråŒ…ä¸‹å®šä¹‰ä¸€ä¸ªMyInterceptorç±»ï¼Œå®ç°HandlerInterceptoræ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class MyInterceptor implements HandlerInterceptor &#123;<br>    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;<br>        System.out.println(&quot;preHandle&quot;);<br>        return true;<br>    &#125;<br><br>    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;<br>        System.out.println(&quot;postHandle&quot;);<br>    &#125;<br><br>    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;<br>        System.out.println(&quot;afterCompletion&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨springmvc-dispatcher.xmlä¸­é…ç½®æ‹¦æˆªå™¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:interceptors&gt;<br>       &lt;bean class&#x3D;&quot;springmvc.controller.MyInterceptor&quot;&gt;&lt;&#x2F;bean&gt;<br>   &lt;&#x2F;mvc:interceptors&gt;<br></code></pre></td></tr></table></figure>
<p>&lt;mvcï¼š interceptors&gt; å…ƒç´ ç”¨äºé…ç½®ä¸€ç»„æ‹¦æˆªå™¨ï¼Œå…¶å­å…ƒç´  <bean> å®šä¹‰çš„æ˜¯å…¨å±€æ‹¦æˆªå™¨ï¼Œå³æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ã€‚</bean></p>
<p>è‹¥è¿˜è¦å®šä¹‰å…¶ä»–æ‹¦æˆªå™¨ï¼Œå¯åœ¨é‡Œé¢åŠ ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:interceptor&gt;<br>    &lt;!-- é…ç½®æ‹¦æˆªå™¨ä½œç”¨çš„è·¯å¾„ --&gt;<br>    &lt;mvc:mapping path&#x3D;&quot;&quot; &#x2F;&gt;<br>    &lt;!-- é…ç½®ä¸éœ€è¦æ‹¦æˆªä½œç”¨çš„è·¯å¾„ --&gt;<br>    &lt;mvc:exclude-mapping path&#x3D;&quot;&quot; &#x2F;&gt;<br>    &lt;!-- å®šä¹‰&lt;mvc:interceptor&gt;å…ƒç´ ä¸­ï¼Œè¡¨ç¤ºåŒ¹é…æŒ‡å®šè·¯å¾„çš„è¯·æ±‚æ‰è¿›è¡Œæ‹¦æˆª --&gt;<br>    &lt;bean class&#x3D;&quot;&quot;&#x2F;&gt;<br>&lt;&#x2F;mvc:interceptor&gt;<br></code></pre></td></tr></table></figure>
<p>&lt;mvcï¼š interceptor&gt; å…ƒç´ çš„å­å…ƒç´ å¿…é¡»æŒ‰ç…§ &lt;mvcï¼š mappingâ€¦/&gt;ã€&lt;mvcï¼š exclude-mappingâ€¦/&gt;ã€&lt;beanâ€¦/&gt; çš„é¡ºåºé…ç½®ã€‚</p>
<p>è¿è¡Œç¨‹åºï¼Œè¾“å‡ºç«¯è¾“å‡ºï¼š</p>
<p>preHandle<br>springmvc.controller.LoginController<br>postHandle<br>afterCompletion</p>
<h2 id="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"><a href="#æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"></a><strong>æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</strong></h2><p>è‹¥é…ç½®æ–‡ä»¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œåˆ™æ ¹æ® preHandle -&gt; ControllerMethod -&gt; postHandle -&gt; afterCompletionæ‰§è¡Œ</p>
<p>è‹¥é…ç½®äº†å¤šä¸ªæ‹¦æˆªå™¨ï¼Œåˆ™å®ƒä»¬çš„ preHandle æ–¹æ³•å°†æŒ‰ç…§é…ç½®æ–‡ä»¶ä¸­æ‹¦æˆªå™¨çš„é…ç½®é¡ºåºæ‰§è¡Œï¼Œè€Œå®ƒä»¬çš„ postHandle æ–¹æ³•å’Œ afterCompletion æ–¹æ³•åˆ™æŒ‰ç…§é…ç½®é¡ºåºçš„ååºæ‰§è¡Œ</p>
<p>å®šä¹‰ä¸€ä¸ªç±»MyInterceptor1ï¼Œå’Œç±»MyInterceptorä¸€æ ·ï¼ŒMyInterceptorç±»ä¸­çš„ä¸‰ä¸ªæ–¹æ³•è¾“å‡º1ï¼ŒMyInterceptor1çš„ä¸‰ä¸ªæ–¹æ³•è¾“å‡º2ï¼Œåœ¨springmvcé…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸¤ä¸ªæ‹¦æˆªå™¨interceptorã€interceptor1</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:interceptors&gt;<br>&lt;!--        &lt;bean class&#x3D;&quot;springmvc.controller.MyInterceptor&quot;&gt;&lt;&#x2F;bean&gt;--&gt;<br>    &lt;mvc:interceptor&gt;<br>        &lt;mvc:mapping path&#x3D;&quot;&#x2F;**&quot;&#x2F;&gt;<br>        &lt;bean class&#x3D;&quot;springmvc.controller.MyInterceptor&quot;&gt;&lt;&#x2F;bean&gt;<br>    &lt;&#x2F;mvc:interceptor&gt;<br>    &lt;mvc:interceptor&gt;<br>        &lt;mvc:mapping path&#x3D;&quot;&#x2F;login&quot;&#x2F;&gt;<br>        &lt;bean class&#x3D;&quot;springmvc.controller.MyInterceptor1&quot;&gt;&lt;&#x2F;bean&gt;<br>    &lt;&#x2F;mvc:interceptor&gt;<br>&lt;&#x2F;mvc:interceptors&gt;<br></code></pre></td></tr></table></figure>

<p>è¾“å‡ºç«¯è¾“å‡ºï¼š</p>
<p>preHandle 1<br>preHandle 2<br>postHandle 2<br>postHandle 1<br>afterCompletion 2<br>afterCompletion 1</p>
<h2 id="æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯"><a href="#æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯" class="headerlink" title="æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯"></a><strong>æ‹¦æˆªå™¨å®ä¾‹ï¼šç”¨æˆ·çš„ç™»å½•æƒé™éªŒè¯</strong></h2><p>è¿™ä¸ªWEBåº”ç”¨ä¸­ï¼Œä¸»è¦æœ‰tologinè·³è½¬ç™»å½•é¡µé¢ã€loginç™»å½•é¡µé¢ã€resultç»“æœé¡µé¢ï¼Œå¦‚æœç”¨æˆ·æœªç™»å½•ç›´æ¥è¿›å…¥åˆ°resulté¡µé¢ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·æœªç™»å½•ï¼Œå¦‚æœç”¨æˆ·è´¦å·æˆ–å¯†ç é”™è¯¯ï¼Œåˆ™æç¤ºè´¦å·æˆ–å¯†ç é”™è¯¯</p>
<p>åœ¨springmvc.interceptoråŒ…ä¸‹æ·»åŠ Userç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class User &#123;<br><br>    private String users;<br><br>    private String passwords;<br><br>    &#x2F;&#x2F;çœç•¥getterå’Œsetteræ–¹æ³•<br>&#125;<br></code></pre></td></tr></table></figure>
<p>UserControlleræ§åˆ¶å™¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Controller<br>public class UserController &#123;<br>    @RequestMapping(&quot;&#x2F;tologin&quot;)<br>    public String tologin()&#123;<br>        return &quot;login&quot;;<br>    &#125;<br>    @RequestMapping(&quot;&#x2F;login&quot;)<br>    public String login(User user, HttpSession session, Model model)&#123;<br>        System.out.println(user.getUsers()+&quot; &quot;+user.getPasswords());<br>        if(&quot;123&quot;.equals(user.getUsers())&amp;&amp;&quot;123&quot;.equals(user.getPasswords()))&#123;<br>            session.setAttribute(&quot;user&quot;,user);<br>            return &quot;redirect:result&quot;;<br>        &#125;<br>        model.addAttribute(&quot;msg&quot;,&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°ç™»å½•ï¼&quot;);<br>        return &quot;login&quot;;<br>    &#125;<br>    @RequestMapping(&quot;&#x2F;result&quot;)<br>    public String result()&#123;<br>        return &quot;result&quot;;<br>    &#125;<br><br>    @RequestMapping(&quot;&#x2F;exit&quot;)<br>	public String exit(HttpServletRequest request,HttpSession session)&#123;<br>    session.invalidate();<br>    return &quot;login&quot;;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>åˆ›å»ºæ‹¦æˆªå™¨loginInterceptor</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class loginInterceptor implements HandlerInterceptor &#123;<br><br>    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;<br>        System.out.println(&quot;123&quot;);<br>        StringBuffer url &#x3D; request.getRequestURL();<br>        if(url.indexOf(&quot;&#x2F;tologin&quot;)&gt;&#x3D;0||url.indexOf(&quot;&#x2F;login&quot;)&gt;&#x3D;0) return true;<br>        HttpSession session &#x3D; request.getSession();<br>        Object obj &#x3D; session.getAttribute(&quot;user&quot;);<br>        if(obj !&#x3D; null) return true;<br>        request.setAttribute(&quot;msg&quot;,&quot;è¯·ç™»å½•ï¼&quot;);<br>        request.getRequestDispatcher(&quot;&#x2F;WEB-INF&#x2F;login.jsp&quot;).forward(request,response);<br>        return false;<br>    &#125;<br><br>    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;<br><br>    &#125;<br><br>    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>é…ç½®Dispatcher-servlet.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;<br>       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;<br>       xmlns:mvc&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&quot;<br>       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc https:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&#x2F;spring-mvc.xsd&quot;&gt;<br>        &lt;context:component-scan base-package&#x3D;&quot;springmvc.interceptor&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br>    &lt;bean class&#x3D;&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;<br>        &lt;property name&#x3D;&quot;prefix&quot; value&#x3D;&quot;&#x2F;WEB-INF&#x2F;&quot;&gt;&lt;&#x2F;property&gt;<br>        &lt;property name&#x3D;&quot;suffix&quot; value&#x3D;&quot;.jsp&quot;&gt;&lt;&#x2F;property&gt;<br>    &lt;&#x2F;bean&gt;<br>    &lt;mvc:interceptors&gt;<br>        &lt;mvc:interceptor&gt;<br>            &lt;mvc:mapping path&#x3D;&quot;&#x2F;**&quot;&#x2F;&gt;<br>            &lt;bean class&#x3D;&quot;springmvc.interceptor.loginInterceptor&quot;&gt;&lt;&#x2F;bean&gt;<br>        &lt;&#x2F;mvc:interceptor&gt;<br>    &lt;&#x2F;mvc:interceptors&gt;<br>&lt;&#x2F;beans&gt;<br></code></pre></td></tr></table></figure>
<p>é…ç½®web.xml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;<br>&lt;web-app version&#x3D;&quot;2.4&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&quot;<br>         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;<br>         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee<br>http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&#x2F;web-app_2_4.xsd&quot;&gt;<br>    &lt;servlet&gt;<br>        &lt;servlet-name&gt;interceptor&lt;&#x2F;servlet-name&gt;<br>        &lt;servlet-class&gt;<br>            org.springframework.web.servlet.DispatcherServlet<br>        &lt;&#x2F;servlet-class&gt;<br>        &lt;load-on-startup&gt;1&lt;&#x2F;load-on-startup&gt;<br>    &lt;&#x2F;servlet&gt;<br>    &lt;servlet-mapping&gt;<br>        &lt;servlet-name&gt;interceptor&lt;&#x2F;servlet-name&gt;<br>        &lt;url-pattern&gt;&#x2F;&lt;&#x2F;url-pattern&gt;<br>    &lt;&#x2F;servlet-mapping&gt;<br>&lt;&#x2F;web-app&gt;<br></code></pre></td></tr></table></figure>
<p>login.jspï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;$Title$&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;$&#123;msg&#125;&lt;&#x2F;h1&gt;<br>&lt;form method&#x3D;&quot;get&quot; action&#x3D;&quot;&#x2F;login&quot;&gt;<br>    è´¦å·ï¼š&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;users&quot; id&#x3D;&quot;users&quot;&gt;&lt;br&gt;<br>    å¯†ç ï¼š&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;passwords&quot; id&#x3D;&quot;passwords&quot;&gt;&lt;br&gt;<br>    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;æäº¤&quot; &gt;<br>&lt;&#x2F;form&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>
<p>result.jspï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>    &lt;p&gt;å½“å‰ç”¨æˆ·ï¼š$&#123;user.users&#125;&lt;&#x2F;p&gt;<br>    &lt;form action&#x3D;&quot;&#x2F;exit&quot;&gt;<br>        &lt;button type&#x3D;&quot;submit&quot;&gt;é€€å‡º&lt;&#x2F;button&gt;<br>    &lt;&#x2F;form&gt;<br>&lt;&#x2F;body&gt;<br>&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>
<p>ç›´æ¥è¿›å…¥result<br><img src="/2020/10/04/SpringMVC/1.png" alt="1"></p>
<p>è¾“å…¥è´¦å·å¯†ç <br><img src="/2020/10/04/SpringMVC/2.png" alt="2"></p>
<p>é€€å‡º<br><img src="/2020/10/04/SpringMVC/3.png" alt="3"></p>
<p>å†æ¬¡ç›´æ¥è¿›å…¥result<br><img src="/2020/10/04/SpringMVC/4.png" alt="4"></p>
<h1 id="éªŒè¯å™¨"><a href="#éªŒè¯å™¨" class="headerlink" title="éªŒè¯å™¨"></a><strong>éªŒè¯å™¨</strong></h1><h2 id="Validatoræ¥å£"><a href="#Validatoræ¥å£" class="headerlink" title="Validatoræ¥å£"></a><strong>Validatoræ¥å£</strong></h2><p>åˆ›å»ºè‡ªå®šä¹‰çš„éªŒè¯å™¨éœ€è¦å®ç°org.springframework.validation.Validator æ¥å£ï¼Œè¯¥æ¥å£æœ‰ä¸¤ä¸ªæ¥å£æ–¹æ³•ï¼š</p>
<p>boolean supports(Class&lt;?&gt; klass)<br>void validate(Object object,Errors errors)</p>
<p>å½“supportsè¿”å›trueæ—¶ï¼ŒéªŒè¯å™¨å¯ä»¥å¤„ç†æŒ‡å®šçš„Class</p>
<p>validate æ–¹æ³•çš„åŠŸèƒ½æ˜¯éªŒè¯ç›®æ ‡å¯¹è±¡ objectï¼Œå¹¶å°†éªŒè¯é”™è¯¯æ¶ˆæ¯å­˜å…¥ Errors å¯¹è±¡</p>
<p>å¾€ Errors å¯¹è±¡å­˜å…¥é”™è¯¯æ¶ˆæ¯çš„æ–¹æ³•æ˜¯ reject æˆ– rejectValueï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„éƒ¨åˆ†é‡è½½æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>void reject(String errorCode)<br>void reject(String errorCode,String defaultMessage)<br>void rejectValue(String filed,String errorCode)<br>void rejectValue(String filed,String errorCode,String defaultMessage)</p>
<h2 id="ValidationUtilsç±»"><a href="#ValidationUtilsç±»" class="headerlink" title="ValidationUtilsç±»"></a><strong>ValidationUtilsç±»</strong></h2><p>org.springframework.validation.ValidationUtils æ˜¯ä¸€ä¸ªå·¥å…·ç±»</p>
<h2 id="éªŒè¯å™¨å®ä¾‹"><a href="#éªŒè¯å™¨å®ä¾‹" class="headerlink" title="éªŒè¯å™¨å®ä¾‹"></a>éªŒè¯å™¨å®ä¾‹</h2><p>å¼•ç”¨ä¸Šé¢ç”¨æˆ·ç™»å½•çš„ä¾‹å­ï¼Œå½“ç”¨æˆ·ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©ºçš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯</p>
<p>åœ¨springmvc.validatoråŒ…ä¸‹åˆ›å»ºMyValidatorç±»ï¼Œå®ç°Validatoræ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Component<br>public class MyValidator implements Validator &#123;<br>    public boolean supports(Class&lt;?&gt; aClass) &#123;<br>        return User.class.isAssignableFrom(aClass);<br>    &#125;<br><br>    public void validate(Object o, Errors errors) &#123;<br>        User user &#x3D; (User)o;<br>        ValidationUtils.rejectIfEmpty(errors,&quot;users&quot;,&quot;user.users.required&quot;);<br>        ValidationUtils.rejectIfEmpty(errors,&quot;passwords&quot;,&quot;passwords.invalid&quot;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨interceptor-servlet.xmlä¸­æ·»åŠ å¯¹validatoråŒ…çš„è‡ªåŠ¨æ‰«ææœºåˆ¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">    &lt;context:component-scan base-package&#x3D;&quot;springmvc.validator&quot;&gt;&lt;&#x2F;context:component-scan&gt;<br><br>ä¿®æ”¹UserControllerä¸­çš„loginå¤„ç†æ–¹æ³•<br><br>public String login(@ModelAttribute User user, HttpSession session, Model model, BindingResult result)&#123;<br>    MyValidator myValidator &#x3D; new MyValidator();<br>    if(myValidator.supports(User.class))&#123;<br>    	myValidator.validate(user,result);<br>        List&lt;ObjectError&gt; list &#x3D; result.getAllErrors();<br>        for(ObjectError error:list)&#123;<br>            System.out.println(error.getCode());<br>        &#125;<br>    &#125;<br>    if(result.hasErrors())  return &quot;redirect:tologin&quot;;<br>    if(&quot;123&quot;.equals(user.getUsers())&amp;&amp;&quot;123&quot;.equals(user.getPasswords()))&#123;<br>        session.setAttribute(&quot;user&quot;,user);<br>        return &quot;redirect:result&quot;;<br>    &#125;<br>    model.addAttribute(&quot;msg&quot;,&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°ç™»å½•ï¼&quot;);<br>    return &quot;login&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œè‹¥ä¸è¾“å…¥è´¦å·å¯†ç ç›´æ¥ç™»å½•ï¼Œåˆ™ç»ˆç«¯è¾“å‡º</p>
<p>user.users.required<br>passwords.invalid</p>
<p>##<strong>Spring MVC JSR-303éªŒè¯æ¡†æ¶ä¹‹Hibernate-Validator</strong></p>
<p>JSR-303æ˜¯ä¸€ä¸ªæ•°æ®éªŒè¯çš„è§„èŒƒï¼ŒJSR-303çš„æ ¡éªŒæ˜¯åŸºäºæ³¨è§£çš„ï¼ŒSpringä¸­æ²¡æœ‰å¯¹è¿™ä¸€è§„èŒƒè¿›è¡Œå®ç°ï¼Œæ‰€ä»¥åœ¨SpringMVCä¸­ä½¿ç”¨JSR-303çš„æ—¶å€™å°±éœ€è¦æä¾›ä¸€ä¸ªå¯¹JSR-303è§„èŒƒçš„å®ç°ï¼Œè€ŒHibernate-Validatoræ˜¯å®ç°äº†è¿™ä¸€è§„èŒƒçš„ï¼Œä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œä¸å†éœ€è¦å®ç°Validatoræ¥å£</p>
<p>Hibernate-Validatorå†…éƒ¨å·²ç»å®šä¹‰å¥½äº†ä¸€ç³»åˆ—çš„é™åˆ¶æ³¨è§£ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¿™äº›æ³¨è§£æ ‡è®°åœ¨éœ€è¦éªŒè¯çš„å®ä½“ç±»çš„å±æ€§ä¸Šæˆ–æ˜¯å…¶å¯¹åº”çš„getæ–¹æ³•ä¸Š</p>
<p><strong>æ³¨ï¼šè¦ä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mvc:annotation-driven&#x2F;&gt;  <br></code></pre></td></tr></table></figure>
<p><strong>å¹¶æ·»åŠ ä¾èµ–ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">dependency&gt;<br>        &lt;groupId&gt;org.hibernate&lt;&#x2F;groupId&gt;<br>        &lt;artifactId&gt;hibernate-validator&lt;&#x2F;artifactId&gt;<br>        &lt;version&gt;6.1.6.Final&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨Hibernate-Validatorè¿›è¡ŒéªŒè¯ï¼Œå¯ä»¥åœ¨è¦éªŒè¯çš„ ç±»çš„å±æ€§ æˆ– getteræ–¹æ³•åŠ ä¸Šç›¸åº”çš„æ³¨è§£</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>@Nul</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</td>
</tr>
<tr>
<td>@NotNull</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</td>
</tr>
<tr>
<td>@AssertTrue</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</td>
</tr>
<tr>
<td>@AssertFalse</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</td>
</tr>
<tr>
<td>@Min(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td>
</tr>
<tr>
<td>@Max(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td>@DecimalMin(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td>
</tr>
<tr>
<td>@DecimalMax(value)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td>
</tr>
<tr>
<td>@Size(max, min)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…ï¼Œå…ƒç´ å¿…é¡»ä¸ºé›†åˆï¼Œä»£è¡¨é›†åˆä¸ªæ•°</td>
</tr>
<tr>
<td>@Digits (integer, fraction)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</td>
</tr>
<tr>
<td>@Past</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</td>
</tr>
<tr>
<td>@Future</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</td>
</tr>
<tr>
<td>@Email</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</td>
</tr>
<tr>
<td>@Length(min=, max=)</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…ï¼Œå¿…é¡»ä¸ºæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ï¼Œè‹¥å¾®æ•°ç»„åˆ™è¡¨ç¤ºä¸ºæ•°ç»„é•¿åº¦ï¼Œå­—ç¬¦ä¸²åˆ™è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td>@NotEmpty</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</td>
</tr>
<tr>
<td>@Range(min=, max=)</td>
<td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</td>
</tr>
<tr>
<td>@NotBlank</td>
<td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</td>
</tr>
<tr>
<td>@Pattern(regexp = )</td>
<td>æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒ</td>
</tr>
<tr>
<td>@Valid</td>
<td>å¯¹è±¡çº§è”æ ¡éªŒ,å³æ ¡éªŒå¯¹è±¡ä¸­å¯¹è±¡çš„å±æ€§</td>
</tr>
</tbody></table>
<p>å¦‚ï¼š</p>
<p>åœ¨Userçš„å­—æ®µä¸­æ·»åŠ æ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public class User &#123;<br><br>    @NotBlank(message &#x3D; &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)<br>    private String users;<br><br>    @NotBlank(message &#x3D; &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)<br>	@Length(min &#x3D; 3,max &#x3D; 8,message &#x3D; &quot;å¯†ç ä½æ•°ä¸º3-8ä½&quot;)<br>    private String passwords;<br><br>    &#x2F;&#x2F;çœç•¥getterå’Œsetteræ–¹æ³•<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨UserControlleræ·»åŠ testå¤„ç†æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(&quot;&#x2F;test&quot;)<br>public String test(@Valid User user,BindingResult result)&#123;<br>    if(result.hasErrors())&#123;<br>        for (ObjectError error:result.getAllErrors())&#123;<br>            System.out.println(error.getDefaultMessage());<br>        &#125;<br>    &#125;<br>    return &quot;test&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>testé¡µé¢å’Œloginé¡µé¢ä¸€æ ·ï¼ˆçœå»æ‹¦æˆªå™¨ï¼‰</p>
<p>éƒ¨ç½²é¡¹ç›®ï¼Œæ­¤æ—¶ï¼Œå¦‚æœè´¦å·å¯†ç éƒ½ä¸ºç©ºï¼Œç›´æ¥ç™»å½•ï¼Œåˆ™è¾“å‡º</p>
<p>ç”¨æˆ·åä¸èƒ½ä¸ºç©º<br>å¯†ç ä½æ•°ä¸º3-8ä½<br>å¯†ç ä¸èƒ½ä¸ºç©º</p>
<h1 id="RESTfulé£æ ¼"><a href="#RESTfulé£æ ¼" class="headerlink" title="RESTfulé£æ ¼"></a><strong>RESTfulé£æ ¼</strong></h1><p>RESTfulé£æ ¼æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠæ“ä½œçš„é£æ ¼ï¼Œå®ƒæ—¢ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œä»…ä»…åªæ˜¯ä¸€ç§é£æ ¼ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p>
<p>ä½¿ç”¨RESTfulé£æ ¼å¯ä»¥é€šè¿‡ç›¸åŒçš„è¯·æ±‚æ–¹å¼å®ç°ä¸åŒçš„æ•ˆæœï¼Œå¯¹äºç›¸åŒçš„è¯·æ±‚æ–¹å¼ï¼Œåªè¦åœ¨è¡¨å•å…ƒç´ ä¸­ä½¿ç”¨ä¸åŒçš„methodï¼Œç„¶ååœ¨mvcçš„æ§åˆ¶å™¨ç›¸åº”çš„å¤„ç†æ–¹æ³•ä¸­ä½¿ç”¨ä¸åŒçš„methodä½œå‡ºå›åº”ï¼Œå³å¯å®ç°</p>
<p>åŸæ¥çš„è¯·æ±‚æ–¹å¼ï¼š</p>
<p><a href="http://localhost:8080/login?name=123&amp;passwords=123">http://localhost:8080/login?name=123&amp;passwords=123</a></p>
<p>ä½¿ç”¨RESTfulé£æ ¼ï¼š</p>
<p><a href="http://localhost:8080/login/123/123">http://localhost:8080/login/123/123</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(&quot;&#x2F;test&#x2F;&#123;name&#125;&#x2F;&#123;passwords&#125;&quot;)<br>public String login(@PathVariable int name,@PathVariable String passwords)&#123;<br>    System.out.println(name);<br>    System.out.println(passwords);<br>    return &quot;newresult&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>newresulté¡µé¢ä¸ºæ–°jsp</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;&#x2F;title&gt;<br>&lt;&#x2F;head&gt;<br>&lt;body&gt;<br>    &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;&#x2F;h1&gt;<br>    $&#123;name&#125;<br>    &lt;br&gt;<br>    $&#123;passwords&#125;<br>&lt;&#x2F;body&gt;<br>	&lt;&#x2F;html&gt;<br></code></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨å¯¹åº”äºè¡¨å•ä¸­çš„è¯·æ±‚æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@RequestMapping(&quot;&#x2F;test&quot;,method &#x3D; RequestMethod.POST)<br>public String login(@PathVariable int name,@PathVariable String passwords)&#123;<br>    System.out.println(name);<br>    System.out.println(passwords);<br>    return &quot;newresult&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œè‹¥è¡¨å•ä¸­çš„è¯·æ±‚æ–¹å¼ä¸ºpostï¼Œåˆ™ä¼šå‡ºç°405æ–¹æ³•ä¸å…è®¸é”™è¯¯</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºäºæ³¨è§£çš„è¯·æ±‚æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@GetMapping(&quot;&#x2F;login&#x2F;&#123;name&#125;&#x2F;&#123;passwords&#125;&quot;)<br>public String login(@PathVariable int name, @PathVariable String passwords, Model model)&#123;<br>    model.addAttribute(&quot;name&quot;,name);<br>    model.addAttribute(&quot;passwords&quot;,passwords);<br>    return &quot;result&quot;;<br>&#125;<br></code></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Spring</tag>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatiså…¥é—¨</title>
    <url>/2020/10/22/mybatis/</url>
    <content><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯MyBatis"><a href="#ä»€ä¹ˆæ˜¯MyBatis" class="headerlink" title="ä»€ä¹ˆæ˜¯MyBatis"></a><strong>ä»€ä¹ˆæ˜¯MyBatis</strong></h1><p>MyBatis(iBatis)æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚</strong>æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJO ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<p>MyBatisçš„æ ¸å¿ƒæ˜¯SqlSessionå¯¹è±¡ï¼Œsqlsessionæ˜¯ä¸€ä¸ªè¿æ¥å™¨ï¼Œå®ƒä¼šè¯»å–mybatisä¸­çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</p>
<h1 id="ç¬¬ä¸€ä¸ªMyBatisç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªMyBatisç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªMyBatisç¨‹åº"></a><strong>ç¬¬ä¸€ä¸ªMyBatisç¨‹åº</strong></h1><p>åˆ›å»ºæ•°æ®åº“dbtest01ï¼Œå¹¶åˆ›å»ºå­¦ç”Ÿè¡¨stu</p>
<p><img src="/2020/10/22/mybatis/stu.jpg" alt="stu"></p>
<p>æ­¥éª¤ï¼š</p>
<p><img src="/2020/10/22/mybatis/sequence.jpg" alt="sequence"></p>
<h2 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a><strong>é…ç½®ç¯å¢ƒ</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;dependency&gt;<br>    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;8.0.22&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.mybatis&lt;&#x2F;groupId&gt;<br>    &lt;artifactId&gt;mybatis&lt;&#x2F;artifactId&gt;<br>    &lt;version&gt;3.5.6&lt;&#x2F;version&gt;<br>&lt;&#x2F;dependency&gt;<br></code></pre></td></tr></table></figure>

<h2 id="ç¼–å†™pojoç±»å’Œdaoæ¥å£"><a href="#ç¼–å†™pojoç±»å’Œdaoæ¥å£" class="headerlink" title="ç¼–å†™pojoç±»å’Œdaoæ¥å£"></a><strong>ç¼–å†™pojoç±»å’Œdaoæ¥å£</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package mybatis.pojo;<br><br>public class student &#123;<br>    private int sno;<br>    private String sname;<br>    private int sage;<br>    private String ssex;<br>    private String sdept;<br>    ...çœç•¥getterã€setter ã€constructor å’Œ tostringæ–¹æ³•...<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>åœ¨daoåŒ…ä¸‹åˆ›å»ºstudentMapperæ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package mybatis.dao;<br><br>import mybatis.pojo.student;<br><br>import java.util.List;<br><br>public interface studentMapper &#123;<br>    public List&lt;student&gt; getStudentList();<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºstudentMapper-xmlæ–‡ä»¶"><a href="#åˆ›å»ºstudentMapper-xmlæ–‡ä»¶" class="headerlink" title="åˆ›å»ºstudentMapper.xmlæ–‡ä»¶"></a><strong>åˆ›å»ºstudentMapper.xmlæ–‡ä»¶</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;<br>&lt;!DOCTYPE mapper<br>        PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;<br>        &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;<br>&lt;!--namespace: ç»‘å®šä¸€ä¸ªmapperæ¥å£ åŒ…å.--&gt;<br>&lt;mapper namespace&#x3D;&quot;mybatis.dao.studentMapper&quot;&gt;<br>&lt;!--    &lt;insert&#x2F;delete&#x2F;select&#x2F;update ä¸ºå¯¹åº”çš„æ“ä½œ--&gt;<br><br>&lt;!--    id ä¸ºmapperæ¥å£ä¸­çš„æ–¹æ³•å    resultTypeä¸ºsqlè¯­å¥è¿”å›çš„ç±»å‹--&gt;<br>&lt;!--    ç›¸å½“äºå®ç°äº†Mapperæ¥å£å¹¶é‡å†™äº†æŸä¸ªæ–¹æ³•ï¼Œç„¶åç”¨è¿™ä¸ªæ–¹æ³•å»å®ç°jdbcæ“ä½œ--&gt;<br>&lt;!--    &lt;selectæ ‡ç­¾è¡¨ç¤ºæ¥å£ä¸­çš„æ–¹æ³•è¦æ‰§è¡Œé€‰æ‹©æ“ä½œï¼Œè¿”å›çš„ç»“æœä¸ºstudentç±»å‹--&gt;<br>    &lt;select id&#x3D;&quot;getStudentList&quot; resultType&#x3D;&quot;mybatis.pojo.student&quot;&gt;<br>    select * from dbtest01.stu;<br>  &lt;&#x2F;select&gt;<br><br>&lt;!-- æ³¨ï¼šä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆäº†å¯¹åº”çš„Mapper.xmlæ–‡ä»¶åï¼Œè¦åˆ°config.xmlæ–‡ä»¶ä¸­é…ç½® æ˜ å°„    --&gt;<br>&lt;&#x2F;mapper&gt;<br></code></pre></td></tr></table></figure>

<p><strong>æ³¨ï¼šresulttypeä¸­çš„ç±»ç±»å‹è¦å†™å…¨åï¼Œå³packageâ€¦ç±»å</strong>    </p>
<p>studentMapper.xmlé…ç½®æ–‡ä»¶ä¸ºstudentMapperæ¥å£çœå»äº†jdbcçš„æ“ä½œ</p>
<p>æ ‡ç­¾æ˜¯ä¸ºæ¥å£ä¸­çš„æ–¹æ³•æœåŠ¡çš„ï¼Œxmlæ–‡ä»¶ç›¸å½“äºæ¥å£çš„å®ç°ç±»</p>
<p><strong>æ³¨ï¼šä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆäº†å¯¹åº”çš„Mapper.xmlæ–‡ä»¶åï¼Œè¦åˆ°config.xmlæ–‡ä»¶ä¸­é…ç½®æ˜ å°„</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mappers&gt;<br>	&lt;!--èµ„æºæ–‡ä»¶çš„è·¯å¾„--&gt;<br>    &lt;mapper resource&#x3D;&quot;mybatis&#x2F;dao&#x2F;studentMapper.xml&quot;&#x2F;&gt;<br>&lt;&#x2F;mappers&gt;<br></code></pre></td></tr></table></figure>

<p>è‹¥ä¸è¿›è¡Œé…ç½®ï¼Œåˆ™ä¼šå‡ºç°å¼‚å¸¸ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">org.apache.ibatis.binding.BindingException: Type interface mybatis.dao.studentMapper is not known to the MapperRegistry.<br></code></pre></td></tr></table></figure>
<h2 id="ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a><strong>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong></h2><p>åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹é…ç½®mybatis-config.xmlæ ¸å¿ƒæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;<br>&lt;!DOCTYPE configuration<br>        PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;<br>        &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;<br>&lt;configuration&gt;<br>    &lt;environments default&#x3D;&quot;development&quot;&gt;<br>&lt;!--        å¯ä»¥é…ç½®å¤šä¸ªenvironmentç¯å¢ƒ--&gt;<br>        &lt;environment id&#x3D;&quot;development&quot;&gt;<br>            &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;<br>            &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;<br>                &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;com.mysql.cj.jdbc.Driver&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;dbtest01?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;UTC&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;root&quot;&#x2F;&gt;<br>                &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;111111&quot;&#x2F;&gt;<br>            &lt;&#x2F;dataSource&gt;<br>        &lt;&#x2F;environment&gt;<br>    &lt;&#x2F;environments&gt;<br>    &lt;mappers&gt;<br>    	&lt;!--èµ„æºæ–‡ä»¶çš„è·¯å¾„--&gt;<br>        &lt;mapper resource&#x3D;&quot;mybatis&#x2F;dao&#x2F;studentMapper.xml&quot;&#x2F;&gt;<br>    &lt;&#x2F;mappers&gt;<br><br>&lt;&#x2F;configuration&gt;<br></code></pre></td></tr></table></figure>

<p><strong>è¦æ³¨æ„ï¼šæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„&amp;å¿…é¡»è½¬æ„ä¸º &amp;amp;</strong></p>
<h2 id="ç¼–å†™mybatisUtilç±»"><a href="#ç¼–å†™mybatisUtilç±»" class="headerlink" title="ç¼–å†™mybatisUtilç±»"></a><strong>ç¼–å†™mybatisUtilç±»</strong></h2><p>åˆ›å»ºmyBatisUtilå°è£…ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">package mybatis.utils;<br><br>import org.apache.ibatis.io.Resources;<br>import org.apache.ibatis.session.SqlSession;<br>import org.apache.ibatis.session.SqlSessionFactory;<br>import org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br>import java.io.IOException;<br>import java.io.InputStream;<br><br>public class myBatisUtil &#123;<br>    private static SqlSessionFactory sqlSessionFactory;<br>    static &#123;<br>        try &#123;<br>&#x2F;&#x2F;            å›ºå®šä»£ç <br>            String resource &#x3D; &quot;mybatis-config.xml&quot;;<br>            <br>            InputStream inputStream &#x3D; Resources.getResourceAsStream(resource);<br>            <br>&#x2F;&#x2F;            é¦–å…ˆå…ˆè·å–sqlsessionfactroyå¯¹è±¡ é€šè¿‡è¿™ä¸ªå¯¹è±¡è·å–sqlsessionå¯¹è±¡<br>            sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);<br>            <br>        &#125; catch (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>&#x2F;&#x2F;    è·å–sqlsessionå¯¹è±¡<br>    public static SqlSession getSqlSession()&#123;<br>        return sqlSessionFactory.openSession();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>æ³¨ï¼šè¿™é‡Œçš„Resourcesè¦é€‰æ‹©iBatisä¸­çš„</strong></p>
<p><img src="/2020/10/22/mybatis/resource.png" alt="resources"></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a><strong>æµ‹è¯•</strong></h2><p>åœ¨å•å…ƒæµ‹è¯•ä¸­è¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">class studentMapperTest &#123;<br><br>    @Test<br>    public void test1()&#123;<br><br>        SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>        &#x2F;&#x2F;é€šè¿‡getMapperè·å¾—æ¥å£<br>        studentMapper studentMapper &#x3D; sqlSession.getMapper(studentMapper.class);<br><br>        List&lt;student&gt; list &#x3D;  studentMapper.getStudentList();<br><br>        for(student stu:list)&#123;<br>            System.out.println(stu);<br>        &#125;<br><br>        sqlSession.close();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶å‘ç°å‡ºç°é”™è¯¯</p>
<p><img src="/2020/10/22/mybatis/wrong.png" alt="wrong"></p>
<p>æç¤ºåˆå§‹åŒ–å¤±è´¥ï¼Œæ‰¾ä¸åˆ°studentMapper.xmlæ–‡ä»¶ï¼ŒåŸå› æ˜¯mavençš„èµ„æºå¯¼å‡ºé—®é¢˜ï¼Œå‘ç°mavençš„targetç”Ÿæˆç›®å½•ä¸­æ²¡æœ‰ç”Ÿæˆè¿™ä¸ª.xmlæ–‡ä»¶ï¼Œæ­¤æ—¶å¯ä»¥é€‰æ‹©å°†daoä¸­çš„xmlæ–‡ä»¶å¤åˆ¶åˆ°targetçš„daoæ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶è§£å†³é—®é¢˜ï¼Œä½†æ˜¯è¦ç§»åŠ¨å¤ªéº»çƒ¦äº†ï¼Œå¯ä»¥å¾€pom.xmlæ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹ä»£ç æ‰‹åŠ¨é…ç½®èµ„æºè¿‡æ»¤ï¼Œè§£å†³é—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;build&gt;<br>    &lt;resources&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;resources&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>        &lt;resource&gt;<br>            &lt;directory&gt;src&#x2F;main&#x2F;java&lt;&#x2F;directory&gt;<br>            &lt;includes&gt;<br>                &lt;include&gt;**&#x2F;*.properties&lt;&#x2F;include&gt;<br>                &lt;include&gt;**&#x2F;*.xml&lt;&#x2F;include&gt;<br>            &lt;&#x2F;includes&gt;<br>            &lt;filtering&gt;true&lt;&#x2F;filtering&gt;<br>        &lt;&#x2F;resource&gt;<br>    &lt;&#x2F;resources&gt;<br>&lt;&#x2F;build&gt;<br></code></pre></td></tr></table></figure>

<p>å†æ¬¡è¿›è¡Œæµ‹è¯•</p>
<p>student{sno=201215121, sname=â€™æå‹‡â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215122, sname=â€™åˆ˜æ™¨â€™, sage=19, ssex=â€™å¥³â€™, sdept=â€™csâ€™}<br>student{sno=201215123, sname=â€™ç‹æ•â€™, sage=18, ssex=â€™å¥³â€™, sdept=â€™maâ€™}<br>student{sno=201215125, sname=â€™å¼ ç«‹â€™, sage=19, ssex=â€™ç”·â€™, sdept=â€™isâ€™}</p>
<p>æˆåŠŸè¾“å‡ºæ•°æ®åº“ä¸­çš„ç»“æœ</p>
<p>ç»“æ„ç›®å½•å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/22/mybatis/con.jpg" alt="ç»“æ„ç›®å½•"></p>
<h2 id="å¢åˆ æ”¹æŸ¥çš„å®ç°"><a href="#å¢åˆ æ”¹æŸ¥çš„å®ç°" class="headerlink" title="å¢åˆ æ”¹æŸ¥çš„å®ç°"></a><strong>å¢åˆ æ”¹æŸ¥çš„å®ç°</strong></h2><h3 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a><strong>æŸ¥</strong></h3><p>åœ¨studentMapperæ¥å£ä¸­æ·»åŠ æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public student getStudentById(int sno);<br></code></pre></td></tr></table></figure>

<p>åœ¨studentMapper.xmlæ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”é…ç½®é¡¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentById&quot; resultType&#x3D;&quot;mybatis.pojo.student&quot; parameterType&#x3D;&quot;int&quot;&gt;<br>    select * from dbtest01.stu where sno &#x3D; #&#123;sno&#125;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>æ‰§è¡Œå•å…ƒæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void test2()&#123;<br><br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    studentMapper studentMapper &#x3D; sqlSession.getMapper(studentMapper.class);<br><br>    student stu &#x3D; studentMapper.getStudentById(201215121);<br><br>    System.out.println(stu);<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æˆåŠŸè¾“å‡º</p>
<p>student{sno=201215121, sname=â€™æå‹‡â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}</p>
<h3 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a><strong>å¢</strong></h3><p>studentMapperæ¥å£ä¸­æ·»åŠ æ–¹æ³•  </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void addStudent(student stu);<br></code></pre></td></tr></table></figure>

<p>studentMapper.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;insert id&#x3D;&quot;addStudent&quot; parameterType&#x3D;&quot;mybatis.pojo.student&quot;&gt;<br>&lt;!-- ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„å±æ€§åç§°å°±å¯ä»¥ èƒ½è‡ªåŠ¨è·å– --&gt;<br>    insert into dbtest01.stu values(#&#123;sno&#125;,#&#123;sname&#125;,#&#123;sage&#125;,#&#123;ssex&#125;,#&#123;sdept&#125;);<br>&lt;&#x2F;insert&gt;<br></code></pre></td></tr></table></figure>
<p>æ‰§è¡Œå•å…ƒæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void test3()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    studentMapper studentMapper &#x3D; sqlSession.getMapper(studentMapper.class);<br><br>    studentMapper.addStudent(<br>            new student(20185625,&quot;zl&quot;,21,&quot;ç”·&quot;,&quot;cs&quot;)<br>    );<br><br>    System.out.println(studentMapper.getStudentById(20185625));<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶æŸ¥çœ‹æ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­å¹¶æ²¡æœ‰æ–°æ’å…¥çš„å…ƒç»„</p>
<p>åŸå› ä¸ºï¼š<strong>å¯¹æ•°æ®åº“çš„ å¢ åˆ  æ”¹ æ“ä½œéƒ½éœ€è¦è¿›è¡Œäº‹åŠ¡æäº¤çš„æ“ä½œ</strong></p>
<p>åœ¨sqlSession.close()å‰æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">sqlSession.commit();<br></code></pre></td></tr></table></figure>

<p>å†æ¬¡è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒæˆåŠŸæ’å…¥</p>
<p>æˆ–è€…å¯ä»¥ä½¿ç”¨openSession(boolean)çš„é‡è½½æ–¹æ³•è®¾ç½®è‡ªåŠ¨æäº¤äº‹åŠ¡</p>
<h3 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a><strong>åˆ </strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void deleteStudent(int sno);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;delete id&#x3D;&quot;deleteStudent&quot; parameterType&#x3D;&quot;int&quot;&gt;<br>    delete from dbtest01.stu where sno &#x3D; #&#123;sno&#125;;<br>&lt;&#x2F;delete&gt;<br></code></pre></td></tr></table></figure>

<h3 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a><strong>æ”¹</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void updateStudent();<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;update id&#x3D;&quot;updateStudent&quot;&gt;<br>    update dbtest01.stu set sname &#x3D; &quot;handsomeboy&quot; where sno &#x3D; 20185625;<br>&lt;&#x2F;update&gt;<br></code></pre></td></tr></table></figure>

<p>è‹¥æ•°æ®åº“è¡¨ä¸­å­—æ®µè¾ƒå¤šï¼Œä½†è¦ä¿®æ”¹çš„å­—æ®µæ¯”è¾ƒå°‘ï¼Œå‚æ•°ä½¿ç”¨å¯¹è±¡ç±»å‹çš„è¯å¾ˆéº»çƒ¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mapä¼ å…¥å‚æ•°ï¼Œæ­¤æ—¶ï¼Œmapå¯ä»¥ä¸ºå±æ€§å–ä»»æ„åå­—ï¼Œæˆ–è€…ä½¿ç”¨<strong>æ³¨è§£</strong></p>
<p>å¦‚ï¼š</p>
<p>æ¥å£ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public void updateStudent1(Map&lt;String,Object&gt; map);<br></code></pre></td></tr></table></figure>
<p>é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;update id&#x3D;&quot;updateStudent1&quot; parameterType&#x3D;&quot;map&quot;&gt;<br>    update dbtest01.stu set sname &#x3D; #&#123;name&#125; where sno &#x3D; 201215125;<br>&lt;&#x2F;update&gt;<br></code></pre></td></tr></table></figure>

<p>å•å…ƒæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void Test6()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br>    Map&lt;String,Object&gt; map &#x3D; new HashMap&lt;String, Object&gt;();<br>    map.put(&quot;name&quot;,&quot;å¼ &quot;);<br>    studentMapper studentMapper &#x3D; sqlSession.getMapper(mybatis.dao.studentMapper.class);<br>    studentMapper.updateStudent1(map);<br>    System.out.println(studentMapper.getStudentById(201215125));<br>    sqlSession.commit();<br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p>student{sno=201215125, sname=â€™å¼ â€™, sage=19, ssex=â€™ç”·â€™, sdept=â€™isâ€™}</p>
<h1 id="Mybatisçš„æ‰§è¡Œæµç¨‹"><a href="#Mybatisçš„æ‰§è¡Œæµç¨‹" class="headerlink" title="Mybatisçš„æ‰§è¡Œæµç¨‹"></a><strong>Mybatisçš„æ‰§è¡Œæµç¨‹</strong></h1><p><img src="/2020/10/22/mybatis/process.jpg" alt="process"></p>
<h1 id="MyBatisé…ç½®è§£æ"><a href="#MyBatisé…ç½®è§£æ" class="headerlink" title="MyBatisé…ç½®è§£æ"></a><strong>MyBatisé…ç½®è§£æ</strong></h1><p>MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸º mybatis-config.xml</p>
<p>ä¸‹å›¾åˆ—å‡ºäº†é…ç½®æ–‡ä»¶ä¸­çš„é‡è¦é…ç½®é¡¹</p>
<p><img src="/2020/10/22/mybatis/config.jpg" alt="config"></p>
<h2 id="é…ç½®ç¯å¢ƒï¼ˆenvironmentsï¼‰"><a href="#é…ç½®ç¯å¢ƒï¼ˆenvironmentsï¼‰" class="headerlink" title="é…ç½®ç¯å¢ƒï¼ˆenvironmentsï¼‰"></a><strong>é…ç½®ç¯å¢ƒï¼ˆenvironmentsï¼‰</strong></h2><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åŠ©äºå°† SQL æ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­</p>
<p><strong>æ³¨ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¿æ¥ä¸¤ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦åˆ›å»ºä¸¤ä¸ª SqlSessionFactory å®ä¾‹ï¼Œæ¯ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªã€‚</p>
<p>ä¸€ä¸ªç¯å¢ƒé…ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/10/22/mybatis/environments.jpg" alt="environments"></p>
<p><strong>environments</strong></p>
<p>è¡¨ç¤ºå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒé¡¹ï¼Œdefalutä¸ºé»˜è®¤é€‰ä¸­çš„ç¯å¢ƒ</p>
<p><strong>environment ç¯å¢ƒé¡¹</strong></p>
<p>environmenté…ç½®ç¯å¢ƒé¡¹ï¼Œidä¸ºå…¶æ ‡è¯†ç¬¦</p>
<p><strong>transactionManager äº‹åŠ¡ç®¡ç†å™¨</strong></p>
<p>é»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨ä¸ºJDBC</p>
<p><strong>dataSource æ•°æ®æº</strong><br>ä½¿ç”¨æ ‡å‡†çš„jdbcæ•°æ®æºæ¥å£é…ç½®jdbcè¿æ¥å¯¹è±¡çš„èµ„æº dataSourceä¸­é‡è¦çš„typeæœ‰ä¸¤ç§ï¼šPOOLEDã€UNPOOLED</p>
<p>POOLEDï¼šè¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´</p>
<p>UNPOOLEDï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°ä¼šæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚</p>
<h2 id="å±æ€§ï¼ˆpropertiesï¼‰"><a href="#å±æ€§ï¼ˆpropertiesï¼‰" class="headerlink" title="å±æ€§ï¼ˆpropertiesï¼‰"></a><strong>å±æ€§ï¼ˆpropertiesï¼‰</strong></h2><p>å¯ä»¥é€šè¿‡propertieså±æ€§å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶ï¼Œè¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ï¼Œå¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§</p>
<p>å¦‚ï¼š</p>
<p>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºjavaå±æ€§æ–‡ä»¶ db.propertiesï¼Œé‡Œé¢é…ç½®äº†jdbcè¿æ¥æ•°æ®åº“çš„å››ä¸ªå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">driver&#x3D;com.mysql.cj.jdbc.Driver<br>url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;dbtest01?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;UTC&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true<br>username&#x3D;root<br>password&#x3D;111111<br></code></pre></td></tr></table></figure>

<p>å°†ç¯å¢ƒé¡¹æ”¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;environment id&#x3D;&quot;development&quot;&gt;<br>    &lt;transactionManager type&#x3D;&quot;JDBC&quot;&gt;&lt;&#x2F;transactionManager&gt;<br>    &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;<br>        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driver&#125;&quot;&#x2F;&gt;<br>        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;url&#125;&quot;&#x2F;&gt;<br>        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;<br>        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;<br>    &lt;&#x2F;dataSource&gt;<br>&lt;&#x2F;environment&gt;<br></code></pre></td></tr></table></figure>

<p>åœ¨configé…ç½®æ–‡ä»¶ä¸­çš„&lt; configuration&gt;æ ‡ç­¾çš„æœ€å¼€å§‹å¼•å…¥db.propertieså¤–éƒ¨é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;properties resource&#x3D;&quot;db.properties&quot;&gt;&lt;&#x2F;properties&gt;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœä¸åœ¨æœ€å¼€å§‹å¼•å…¥ï¼Œåˆ™ä¼šæç¤ºé”™è¯¯</p>
<p><img src="/2020/10/22/mybatis/properties_wrong.jpg" alt="properties_wrong"></p>
<p>æç¤ºåœ¨configurationé…ç½®ä¸‹ å¿…é¡»æŒ‰ç…§ properties -&gt; â€¦ -&gt; mappers çš„é¡ºåºè¿›è¡Œé…ç½®</p>
<p>å¯¹Test1è¿›è¡Œæµ‹è¯•ï¼š</p>
<p>student{sno=201215121, sname=â€™æå‹‡â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215122, sname=â€™åˆ˜æ™¨â€™, sage=19, ssex=â€™å¥³â€™, sdept=â€™csâ€™}<br>student{sno=201215123, sname=â€™ç‹æ•â€™, sage=18, ssex=â€™å¥³â€™, sdept=â€™maâ€™}<br>student{sno=201215124, sname=â€™å¼ ä¸‰â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215125, sname=â€™å¼ â€™, sage=19, ssex=â€™ç”·â€™, sdept=â€™isâ€™}<br>student{sno=201215126, sname=â€™å¼ å››â€™, sage=21, ssex=â€™å¥³â€™, sdept=â€™maâ€™}</p>
<hr>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥åœ¨propertiesæ ‡ç­¾ä¸‹é€šè¿‡&lt; property name=â€â€ value=â€â€&gt; æ·»åŠ æ„¿propertiesæ–‡ä»¶ä¸­æ²¡æœ‰çš„å±æ€§</p>
<p>å¦‚ï¼šæŠŠdb.propertiesä¸­çš„userå±æ€§å’Œpasswordå±æ€§åˆ é™¤</p>
<p>å°†propertiesæ ‡ç­¾æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;properties resource&#x3D;&quot;db.properties&quot;&gt;<br>    &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;root&quot;&#x2F;&gt;<br>    &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;111111&quot;&#x2F;&gt;<br>&lt;&#x2F;properties&gt;<br></code></pre></td></tr></table></figure>

<hr>
<p>å¦‚æœæ­¤æ—¶å¤–éƒ¨propertiesæ–‡ä»¶ä¸­ä¸&lt; property&gt;é…ç½®é¡¹æ‹¥æœ‰ç›¸åŒçš„å±æ€§ï¼Œæ­¤æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨æ–‡ä»¶ä¸­çš„å±æ€§</p>
<p>å¦‚ï¼š</p>
<p>db.propertiesæ–‡ä»¶:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">driver&#x3D;com.mysql.cj.jdbc.Driver<br>url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;dbtest01?characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;UTC&amp;useServerPrepStmts&#x3D;true&amp;cachePrepStmts&#x3D;true<br>username&#x3D;root<br>password&#x3D;111111<br></code></pre></td></tr></table></figure>
<p>&lt; properties&gt;æ ‡ç­¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;<br>&lt;properties resource&#x3D;&quot;db.properties&quot;&gt;<br>    &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;root&quot;&#x2F;&gt;<br>    &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;123456&quot;&#x2F;&gt;<br>&lt;&#x2F;properties&gt;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•æ—¶ï¼Œå‘ç°è¿æ¥æ•°æ®åº“æˆåŠŸï¼Œåˆ™è¯´æ˜ä¼˜å…ˆä½¿ç”¨çš„æ˜¯å¤–éƒ¨æ–‡ä»¶ä¸­çš„å±æ€§</p>
<h2 id="è®¾ç½®ï¼ˆsettingsï¼‰"><a href="#è®¾ç½®ï¼ˆsettingsï¼‰" class="headerlink" title="è®¾ç½®ï¼ˆsettingsï¼‰"></a><strong>è®¾ç½®ï¼ˆsettingsï¼‰</strong></h2><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p>
<table>
<thead>
<tr>
<th>è®¾ç½®å</th>
<th>æè¿°</th>
<th>æœ‰æ•ˆå€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>cacheEnabled</td>
<td>å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</td>
<td>trueã€false</td>
<td>true</td>
</tr>
<tr>
<td>lazyLoadingEnabled</td>
<td>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® fetchType å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td>
<td>trueã€false</td>
<td>false</td>
</tr>
<tr>
<td>useGeneratedKeys</td>
<td>å…è®¸ JDBC æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œå°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›æ•°æ®åº“é©±åŠ¨ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½†ä»å¯æ­£å¸¸å·¥ä½œï¼ˆå¦‚ Derbyï¼‰ã€‚</td>
<td>trueã€false</td>
<td>False</td>
</tr>
<tr>
<td>mapUnderscoreToCamelCase</td>
<td>æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚</td>
<td>trueã€false</td>
<td>False</td>
</tr>
<tr>
<td>logImpl</td>
<td>æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td>
<td>SLF4Jã€LOG4Jã€LOG4J2ã€JDK_LOGGINGã€COMMONS_LOGGINGã€STDOUT_LOGGINGã€NO_LOGGING</td>
<td>æœªè®¾ç½®</td>
</tr>
</tbody></table>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„settingsé…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;settings&gt;<br>  &lt;setting name&#x3D;&quot;cacheEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;lazyLoadingEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;multipleResultSetsEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;useColumnLabel&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;useGeneratedKeys&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;autoMappingBehavior&quot; value&#x3D;&quot;PARTIAL&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;autoMappingUnknownColumnBehavior&quot; value&#x3D;&quot;WARNING&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;defaultExecutorType&quot; value&#x3D;&quot;SIMPLE&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;defaultStatementTimeout&quot; value&#x3D;&quot;25&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;defaultFetchSize&quot; value&#x3D;&quot;100&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;safeRowBoundsEnabled&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;false&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;localCacheScope&quot; value&#x3D;&quot;SESSION&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;jdbcTypeForNull&quot; value&#x3D;&quot;OTHER&quot;&#x2F;&gt;<br>  &lt;setting name&#x3D;&quot;lazyLoadTriggerMethods&quot; value&#x3D;&quot;equals,clone,hashCode,toString&quot;&#x2F;&gt;<br>&lt;&#x2F;settings&gt;<br></code></pre></td></tr></table></figure>


<h2 id="ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"><a href="#ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰" class="headerlink" title="ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"></a><strong>ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</strong></h2><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ï¼Œå®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™</p>
<p>å¦‚ï¼šåœ¨studentMapper.xmlé…ç½®æ–‡ä»¶ä¸‹ï¼ŒæŸ¥è¯¢è¯­å¥çš„è¿”å›ç»“æœä¸ºï¼š</p>
<p><img src="/2020/10/22/mybatis/resulttype.jpg" alt="resulttype"></p>
<p>è¿”å›ç»“æœçš„å…¨ç§°ä¸º mybatis.pojo.student ï¼Œç±»åå¤ªé•¿ï¼Œå¦‚æœæƒ³ç¼©çŸ­å…¨ç§°ï¼Œå¦‚ç›´æ¥è¿”å› student ï¼Œå¯ä½¿ç”¨ç±»å‹åˆ«å</p>
<p>åœ¨configæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®é¡¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;typeAliases&gt;<br>    &lt;typeAlias type&#x3D;&quot;mybatis.pojo.student&quot; alias&#x3D;&quot;student&quot;&gt;&lt;&#x2F;typeAlias&gt;<br>&lt;&#x2F;typeAliases&gt;<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹Mapper.xmlä¸­çš„è¿”å›ç±»å‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentList&quot; resultType&#x3D;&quot;student&quot; &gt;<br>   select * from dbtest01.stu;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>æ‰§è¡ŒTest1ï¼Œæ­¤æ—¶æ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ç±»å‹åˆ«åç”Ÿæ•ˆ</p>
<hr>
<p>å¦å¤–ï¼Œåœ¨é…ç½®ç±»å‹åˆ«åçš„æ—¶å€™ä¸ç”¨ä¸ºæ¯ä¸ªç±»éƒ½é…ç½®ä¸€ä¸ªåˆ«åï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯ä¸€ä¸ªåŒ…ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;typeAliases&gt;<br>    &lt;package name&#x3D;&quot;mybatis.pojo&quot;&#x2F;&gt;<br>&lt;&#x2F;typeAliases&gt;<br></code></pre></td></tr></table></figure>

<p>å†æ¬¡æµ‹è¯•ï¼Œè¿”å›ç›¸åŒç»“æœ</p>
<hr>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ @Alias æ³¨è§£çš„æ–¹å¼ä¸ºæŸä¸ªç±»å–åˆ«å</p>
<p>å¦‚ï¼š @Alias(â€œhelloâ€) æ³¨è§£ä½œç”¨äºstudentç±»ä¸­ï¼Œæ­¤æ—¶åœ¨Mapper.xmlæ–‡ä»¶ä¸‹ä¿®æ”¹è¿”å›ç±»å‹ä¸ºhelloï¼Œåˆ™æ–¹æ³•æ‰§è¡ŒæˆåŠŸ</p>
<hr>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¸ºå¸¸è§çš„ Java ç±»å‹å†…å»ºçš„ç±»å‹åˆ«åã€‚å®ƒä»¬éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ³¨æ„ï¼Œä¸ºäº†åº”å¯¹åŸå§‹ç±»å‹çš„å‘½åé‡å¤ï¼Œé‡‡å–äº†ç‰¹æ®Šçš„å‘½åé£æ ¼ã€‚</p>
<table>
<thead>
<tr>
<th>åˆ«å</th>
<th>æ˜ å°„çš„ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>_byte</td>
<td>byte</td>
</tr>
<tr>
<td>_long</td>
<td>long</td>
</tr>
<tr>
<td>_short</td>
<td>short</td>
</tr>
<tr>
<td>_int</td>
<td>int</td>
</tr>
<tr>
<td>_integer</td>
<td>int</td>
</tr>
<tr>
<td>_double</td>
<td>double</td>
</tr>
<tr>
<td>_float</td>
<td>float</td>
</tr>
<tr>
<td>_boolean</td>
<td>boolean</td>
</tr>
<tr>
<td>string</td>
<td>String</td>
</tr>
<tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td>Integer</td>
</tr>
<tr>
<td>integer</td>
<td>Integer</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>date</td>
<td>Date</td>
</tr>
<tr>
<td>decimal</td>
<td>BigDecimal</td>
</tr>
<tr>
<td>bigdecimal</td>
<td>BigDecimal</td>
</tr>
<tr>
<td>object</td>
<td>Object</td>
</tr>
<tr>
<td>map</td>
<td>Map</td>
</tr>
<tr>
<td>hashmap</td>
<td>HashMap</td>
</tr>
<tr>
<td>list</td>
<td>List</td>
</tr>
<tr>
<td>arraylist</td>
<td>ArrayList</td>
</tr>
<tr>
<td>collection</td>
<td>Collection</td>
</tr>
<tr>
<td>iterator</td>
<td>Iterator</td>
</tr>
</tbody></table>
<h2 id="æ˜ å°„å™¨ï¼ˆmappersï¼‰"><a href="#æ˜ å°„å™¨ï¼ˆmappersï¼‰" class="headerlink" title="æ˜ å°„å™¨ï¼ˆmappersï¼‰"></a><strong>æ˜ å°„å™¨ï¼ˆmappersï¼‰</strong></h2><p>æ˜ å°„å™¨æ˜¯æ ¸å¿ƒæ–‡ä»¶é…ç½®çš„æœ€åä¸€é¡¹ï¼Œåœ¨ä¸ºæ¯ä¸ªdaoæ¥å£ç”Ÿæˆäº†å¯¹åº”çš„Mapper.xmlæ–‡ä»¶åï¼Œè¦åˆ°config.xmlæ–‡ä»¶ä¸­é…ç½® æ˜ å°„ï¼Œå‘Šè¯‰mybatisåˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥</p>
<h3 id="ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨"><a href="#ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨" class="headerlink" title="ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨"></a><strong>ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨</strong></h3><p>ç»‘å®šxmlæ–‡ä»¶</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mappers&gt;<br>    &lt;mapper resource&#x3D;&quot;mybatis&#x2F;dao&#x2F;studentMapper.xml&quot;&#x2F;&gt;<br>&lt;&#x2F;mappers&gt;<br></code></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ"><a href="#ä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ" class="headerlink" title="ä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ"></a><strong>ä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ</strong></h3><p>ç»‘å®šæ¥å£</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mappers&gt;<br>    &lt;mapper class&#x3D;&quot;mybatis.dao.studentMapper&quot;&gt;&lt;&#x2F;mapper&gt;<br>&lt;&#x2F;mappers&gt;<br></code></pre></td></tr></table></figure>

<p><strong>æ³¨ï¼šæ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼Œå¹¶åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</strong></p>
<h3 id="ä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š"><a href="#ä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š" class="headerlink" title="ä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š"></a><strong>ä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mappers&gt;<br>    &lt;package name&#x3D;&quot;mybatis.dao&quot;&#x2F;&gt;<br>&lt;&#x2F;mappers&gt;<br></code></pre></td></tr></table></figure>

<p><strong>æ³¨ï¼šæ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼Œå¹¶åœ¨åŒä¸€ä¸ªåŒ…ä¸‹</strong></p>
<h2 id="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a><strong>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</strong></h2><p><strong>SqlSessionFactoryBuilder</strong></p>
<p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ï¼Œå› æ­¤SqlSessionFactoryBuilderå®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸ</p>
<p><strong>SqlSessionFactory</strong></p>
<p><strong>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨</strong>ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚å¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ï¼Œå› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸï¼Œæœ€ç®€å•çš„å®ç°æ–¹æ³•å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</p>
<p><strong>SqlSession</strong></p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSessionçš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ä½¿ç”¨å®Œä¹‹åéœ€è¦å…³é—­</p>
<h1 id="ResultMapç»“æœæ˜ å°„é›†"><a href="#ResultMapç»“æœæ˜ å°„é›†" class="headerlink" title="ResultMapç»“æœæ˜ å°„é›†"></a><strong>ResultMapç»“æœæ˜ å°„é›†</strong></h1><p>ä¸Šé¢æ‰€å†™çš„pojoç±»çš„å­—æ®µä¸æ•°æ®åº“è¡¨ä¸­çš„å­—æ®µæ˜¯å®Œå…¨å¯¹åº”çš„ã€‚<br><img src="/2020/10/22/mybatis/stu_.jpg" alt="stu_"></p>
<p><img src="/2020/10/22/mybatis/pojo.jpg" alt="pojo"></p>
<p>è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼Œè‹¥pojoç±»çš„å­—æ®µåä¸æ•°æ®åº“çš„å­—æ®µåä¸ä¸€æ ·ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</p>
<p>å¦‚ï¼š</p>
<p>å°†pojoç±»çš„snameå­—æ®µæ”¹ä¸ºnameï¼Œè¿›è¡Œtest1æµ‹è¯•ï¼Œæ­¤æ—¶è¾“å‡º</p>
<p>student{sno=201215121, name=â€™nullâ€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215122, name=â€™nullâ€™, sage=19, ssex=â€™å¥³â€™, sdept=â€™csâ€™}<br>student{sno=201215123, name=â€™nullâ€™, sage=18, ssex=â€™å¥³â€™, sdept=â€™maâ€™}<br>student{sno=201215124, name=â€™nullâ€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215125, name=â€™nullâ€™, sage=19, ssex=â€™ç”·â€™, sdept=â€™isâ€™}<br>student{sno=201215126, name=â€™nullâ€™, sage=21, ssex=â€™å¥³â€™, sdept=â€™maâ€™}</p>
<p>å‘ç°nameå­—æ®µçš„å€¼å…¨ä¸ºnull</p>
<p>åŸå› æ˜¯æŸ¥è¯¢è¯­å¥ä¸­æŸ¥è¯¢ç»“æœçš„å­—æ®µä¸º snoã€snameã€sageã€ssexã€sdeptï¼Œæ— æ³•æ‰¾åˆ°nameè¿™ä¸ªå­—æ®µï¼Œæ€ä¹ˆæ ·å¤„ç†è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>
<h2 id="åœ¨sqlè¯­å¥ä¸­èµ·åˆ«å"><a href="#åœ¨sqlè¯­å¥ä¸­èµ·åˆ«å" class="headerlink" title="åœ¨sqlè¯­å¥ä¸­èµ·åˆ«å"></a><strong>åœ¨sqlè¯­å¥ä¸­èµ·åˆ«å</strong></h2><p>å›é¡¾æ•°æ®åº“çš„æŸ¥è¯¢è¯­å¥ä¸­çš„aså…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºæŸä¸ªå­—æ®µå­åˆ«åï¼Œæ­¤æ—¶åœ¨sqlè¯­å¥ä¸­ä¸ºsnameèµ·åˆ«åä¸ºnameï¼Œè¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentList&quot; resultType&#x3D;&quot;student&quot; &gt;<br>select sno,sname as name,sage,ssex,sdept from dbtest01.stu;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼ŒæˆåŠŸè¾“å‡ºnameå±æ€§çš„å€¼</p>
<p>student{sno=201215121, name=â€™æå‹‡â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215122, name=â€™åˆ˜æ™¨â€™, sage=19, ssex=â€™å¥³â€™, sdept=â€™csâ€™}<br>student{sno=201215123, name=â€™ç‹æ•â€™, sage=18, ssex=â€™å¥³â€™, sdept=â€™maâ€™}<br>student{sno=201215124, name=â€™å¼ ä¸‰â€™, sage=20, ssex=â€™ç”·â€™, sdept=â€™csâ€™}<br>student{sno=201215125, name=â€™å¼ â€™, sage=19, ssex=â€™ç”·â€™, sdept=â€™isâ€™}<br>student{sno=201215126, name=â€™å¼ å››â€™, sage=21, ssex=â€™å¥³â€™, sdept=â€™maâ€™}</p>
<h2 id="ResultMap"><a href="#ResultMap" class="headerlink" title="ResultMap"></a><strong>ResultMap</strong></h2><p>resultmapæ˜¯ä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼Œresultmapå…ƒç´ æ˜¯mybatisä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚resultmapçš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</p>
<p>å›åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œä½¿ç”¨resultmapå°†ç»“æœæ˜ å°„ä¸ºpojoç±»ä¸­çš„å±æ€§ï¼Œå³å¯è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>åœ¨studentMapper.xmlæ–‡ä»¶ä¸­æ·»åŠ resultMapæ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;!--    resultmapç»“æœé›†æ˜ å°„--&gt;<br>&lt;!--    idä¸ºsqlæ ‡ç­¾ä¸­çš„resultmap typeä¸ºè¿”å›ç±»å‹--&gt;<br>&lt;resultMap id&#x3D;&quot;studentMap&quot; type&#x3D;&quot;student&quot;&gt;<br>&lt;!--        columnä¸ºæ•°æ®åº“è¡¨ä¸­çš„å­—æ®µ propertyä¸ºpojoç±»ä¸­çš„å±æ€§å--&gt;<br>    &lt;result column&#x3D;&quot;sname&quot; property&#x3D;&quot;name&quot;&gt;&lt;&#x2F;result&gt;<br>&lt;&#x2F;resultMap&gt;<br><br></code></pre></td></tr></table></figure>

<p>å¹¶å°†sqlæ ‡ç­¾æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentList&quot; resultMap&#x3D;&quot;studentMap&quot; &gt;<br>select * from dbtest01.stu;<br>&lt;&#x2F;select&gt;<br><br></code></pre></td></tr></table></figure>

<h1 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a><strong>æ—¥å¿—</strong></h1><p>é€šå¸¸ï¼Œåœ¨å¹³æ—¶å†™ä»£ç å‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œä¹ æƒ¯ä½¿ç”¨debugæˆ–è€…soutæ¥è°ƒè¯•é”™è¯¯ï¼Œä½†æœ‰æ—¶å€™é”™è¯¯å¾ˆéš¾æ‰¾ï¼Œè¿™æ—¶å€™éœ€è¦æ’é”™å°±æ˜¾å¾—å¾ˆå›°éš¾äº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ—¥å¿—æ¥å¸®åŠ©æˆ‘ä»¬æ›´æœ‰æ•ˆåœ°æ’é”™</p>
<h2 id="æ—¥å¿—å·¥å‚"><a href="#æ—¥å¿—å·¥å‚" class="headerlink" title="æ—¥å¿—å·¥å‚"></a><strong>æ—¥å¿—å·¥å‚</strong></h2><p>å›é¡¾configé…ç½®æ–‡ä»¶ä¸­çš„settingsé…ç½®é¡¹ï¼Œæœ‰logImplè¿™æ ·ä¸€ä¸ªå±æ€§ï¼ŒlogImplæ˜¯ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œå®ç°æ–¹å¼æœ‰SLF4Jã€LOG4Jã€LOG4J2ã€JDK_LOGGINGã€COMMONS_LOGGINGã€STDOUT_LOGGINGã€NO_LOGGING</p>
<p>å…¶ä¸­æœ€å¸¸ç”¨çš„æœ‰LOG4Jã€STDOUT_LOGGING</p>
<p><strong>ä»¥STDOUT_LOGGINGä¸ºä¾‹</strong></p>
<p>è¿™ä¸ªæ—¥å¿—çš„å®ç°ä¸ç”¨ä»»ä½•å¯¼åŒ…æˆ–è€…ä¾èµ–çš„é…ç½®ï¼Œç›´æ¥å°±å¯ä»¥ä½¿ç”¨</p>
<p>é…ç½®settingé…ç½®é¡¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;settings&gt;<br>    &lt;setting name&#x3D;&quot;logImpl&quot; value&#x3D;&quot;STDOUT_LOGGING&quot;&#x2F;&gt;<br>&lt;&#x2F;settings&gt;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶ideaçš„è¾“å‡ºç«¯å°±ä¼šè¾“å‡ºä¸€å¤§ä¸²ä¸œè¥¿</p>
<p><img src="/2020/10/22/mybatis/adapter.jpg" alt="adapter"></p>
<p>è¡¨ç¤ºä½¿ç”¨çš„æ—¥å¿—å·¥å‚</p>
<p><img src="/2020/10/22/mybatis/deal.jpg" alt="deal"></p>
<p>è¡¨ç¤ºideaè¿›è¡Œçš„ä¸€äº›æ“ä½œ</p>
<p><img src="/2020/10/22/mybatis/jdbc.jpg" alt="jdbc"></p>
<p>è¿™æ˜¯çœŸæ­£çš„æ—¥å¿—éƒ¨åˆ†ï¼Œè®°å½•äº†å¯¹æ•°æ®åº“çš„æ¯ä¸€ä¸ªæ“ä½œ</p>
<p><strong>å…³äºjavaæ—¥å¿—ï¼Œå¯ä»¥å‚è€ƒå¦å¤–ä¸€ç¯‡åšå®¢ï¼Œä¼ é€é—¨ï¼š<a href="https://zleo-bug.github.io/2020/10/24/javarecord/">https://zleo-bug.github.io/2020/10/24/javarecord/</a></strong></p>
<h1 id="mybatiså®ç°åˆ†é¡µ"><a href="#mybatiså®ç°åˆ†é¡µ" class="headerlink" title="mybatiså®ç°åˆ†é¡µ"></a><strong>mybatiså®ç°åˆ†é¡µ</strong></h1><p>ä¼ é€é—¨ï¼š<strong><a href="https://zleo-bug.github.io/2020/10/24/mybatisPaging/">https://zleo-bug.github.io/2020/10/24/mybatisPaging/</a></strong></p>
<h1 id="æ³¨è§£å¼€å‘"><a href="#æ³¨è§£å¼€å‘" class="headerlink" title="æ³¨è§£å¼€å‘"></a><strong>æ³¨è§£å¼€å‘</strong></h1><p>åœ¨ä¸€äº›ç®€å•çš„sqlè¯­å¥ä¸­ï¼Œä½¿ç”¨æ³¨è§£å¼€å‘èƒ½å¤Ÿç®€åŒ–å¼€å‘çš„æ­¥éª¤ï¼Œåˆ©ç”¨ä¸€ä¸ªç®€å•çš„æ³¨é‡Šå³å¯ï¼Œä¸å†éœ€è¦é…ç½®æ¥å£å¯¹åº”çš„xmlæ–‡ä»¶ï¼Œæ³¨è§£çš„æœ¬è´¨æ˜¯é€šè¿‡åå°„å®ç°çš„</p>
<p>å¦‚ï¼š</p>
<p>åœ¨studentMapperä¸­æ·»åŠ æ–°æ–¹æ³•ï¼Œå¹¶æ·»åŠ æ³¨é‡Š@Select</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Select(&quot;select * from dbtest01.stu&quot;)<br>public List&lt;student&gt; getStudents();<br></code></pre></td></tr></table></figure>

<p>æ ¸å¿ƒxmlæ–‡ä»¶ä¸­ç»‘å®šstudentMapperæ¥å£</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;mappers&gt;<br>    &lt;mapper class&#x3D;&quot;mybatis.dao.studentMapper&quot;&gt;&lt;&#x2F;mapper&gt;<br>&lt;&#x2F;mappers&gt;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void getStudentByAnnotation()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtil.getSqlSession();<br><br>    studentMapper mapper &#x3D; sqlSession.getMapper(studentMapper.class);<br><br>    List&lt;student&gt; students &#x3D; mapper.getStudents();<br><br>    for (student student : students) &#123;<br>        System.out.println(student);<br>    &#125;<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶å‘ç°consoleç«¯æˆåŠŸè¾“å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰å…ƒç»„ï¼ŒåŒæ—¶ä¹Ÿå‘ç°nameçš„å­—æ®µä¸ºç©ºå€¼</p>
<p><img src="/2020/10/22/mybatis/annonation.jpg" alt="annonation"></p>
<p>è¿™æ˜¯å› ä¸ºï¼Œä½¿ç”¨æ³¨è§£å¹¶ä¸èƒ½è¿›è¡ŒresultMapçš„æ˜ å°„ï¼Œæ•°æ®åº“çš„å­—æ®µsnameæ— æ³•æ‰¾åˆ°pojoç±»ç›¸å¯¹åº”çš„å±æ€§</p>
<p>å› æ­¤ï¼Œä½¿ç”¨æ³¨è§£æ˜¯æœ‰å±€é™æ€§çš„ï¼Œåªèƒ½é€‚ç”¨äºç®€å•çš„sqlè¯­å¥</p>
<h2 id="åŸºäºæ³¨è§£çš„å¢åˆ æŸ¥æ”¹"><a href="#åŸºäºæ³¨è§£çš„å¢åˆ æŸ¥æ”¹" class="headerlink" title="åŸºäºæ³¨è§£çš„å¢åˆ æŸ¥æ”¹"></a><strong>åŸºäºæ³¨è§£çš„å¢åˆ æŸ¥æ”¹</strong></h2><p>å…³äº@Param()æ³¨è§£ï¼š</p>
<p>åœ¨ä½¿ç”¨åŸºäºæ³¨è§£çš„sqlè¯­å¥æ—¶ï¼Œè¦ç”¨åˆ°@Param()è¿™ä¸ªæ³¨è§£ï¼Œå®ƒä½œç”¨åœ¨æ–¹æ³•å‚æ•°ä¸Šï¼Œç»‘å®šæŸä¸ªå±æ€§æˆ–å¤šä¸ªå±æ€§</p>
<p>å½“å‚æ•°ä¸ºåŸºæœ¬ç±»å‹æˆ–è€…Stringç±»å‹æ—¶ï¼Œè¦åŠ ä¸Š@Param()æ³¨è§£ï¼Œå½“æˆ‘ä»¬åœ¨å†™sqlè¯­å¥æ—¶ï¼Œsqlè¯­å¥ä¸­å¼•ç”¨çš„å€¼å°±æ˜¯@Param()é‡Œé¢æŒ‡å®šçš„å±æ€§å</p>
<p>å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™å¯ä»¥ä¸ç”¨æ·»åŠ æ­¤æ³¨é‡Šï¼Œsqlè¯­å¥ä¸­ä¼šæ ¹æ®å¼•ç”¨ç±»å‹ä¸­çš„å±æ€§åè·å–åˆ°ç›¸åº”çš„å€¼</p>
<ul>
<li><p>å¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Insert(&quot;insert into dbtest01.stu values(#&#123;sno&#125;,#&#123;name&#125;,#&#123;sage&#125;,#&#123;ssex&#125;,#&#123;sdept&#125;);&quot;)<br>    public void add(student student);<br></code></pre></td></tr></table></figure></li>
<li><p>åˆ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Delete(&quot;delete from stu where id &#x3D; #&#123;id&#125;&quot;)<br>    public void delete(@Param(&quot;id&quot;) int id);<br></code></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Select(&quot;select * from stu where sno &#x3D; #&#123;sno&#125;&quot;)<br>    public student select(@Param(&quot;sno&quot;) int sno);<br></code></pre></td></tr></table></figure>
</li>
<li><p>æ”¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Update(&quot;update stu set sname &#x3D; #&#123;sname&#125; where sno &#x3D; #&#123;sno&#125;&quot;)<br>    public void update(@Param(&quot;sno&quot;) int sno,@Param(&quot;sname&quot;) String sname);<br></code></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="mybatiså¤æ‚æŸ¥è¯¢"><a href="#mybatiså¤æ‚æŸ¥è¯¢" class="headerlink" title="mybatiså¤æ‚æŸ¥è¯¢"></a><strong>mybatiså¤æ‚æŸ¥è¯¢</strong></h1><p>åˆ›å»ºå­¦ç”Ÿè¡¨student æ•™å¸ˆè¡¨teacher</p>
<p><img src="/2020/10/22/mybatis/student.jpg" alt="student"></p>
<p><img src="/2020/10/22/mybatis/teacher.jpg" alt="teacher"></p>
<h2 id="å¤šå¯¹ä¸€å¤„ç†"><a href="#å¤šå¯¹ä¸€å¤„ç†" class="headerlink" title="å¤šå¯¹ä¸€å¤„ç†"></a><strong>å¤šå¯¹ä¸€å¤„ç†</strong></h2><p>åˆ›å»ºä¸¤ä¸ªpojoç±» Student Teacher</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>@Data<br>public class Student &#123;<br>    private int sno;<br>    private String sname;<br>    private Teacher teacher;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>@Data<br>public class Teacher &#123;<br>    private int tno;<br>    private String tname;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åˆ›å»ºStudent\TeacherMapper</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface StudentMapper &#123;<br>    <br>    public List&lt;Student&gt; getStudentInfo();<br><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">public interface TeacherMapper &#123;<br><br>    public List&lt;Teacher&gt; getTeacherList();<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¹¶è¿›è¡Œç›¸åº”é…ç½®</p>
<p>ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šè·å¾—å­¦ç”Ÿçš„å­¦å·ã€å§“åã€ä»¥åŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯</p>
<p>æ ¹æ®éœ€æ±‚ï¼Œå¾ˆå®¹æ˜“å†™å‡ºsqlè¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentInfo&quot; resultType&#x3D;&quot;Student&quot;&gt;<br>    select student.*,teacher.* from student,teacher<br>    where student.tno &#x3D; teacher.tno;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶è¿›è¡Œæµ‹è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void getStudentInfo()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtils.getSqlSession();<br><br>    StudentMapper studentMapper &#x3D; sqlSession.getMapper(StudentMapper.class);<br><br>    List&lt;Student&gt; students &#x3D; studentMapper.getStudentInfo();<br><br>    for (Student student : students) &#123;<br>        System.out.println(student);<br>    &#125;<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœï¼š</p>
<p><img src="/2020/10/22/mybatis/stresult.jpg" alt="stresult"></p>
<p>ç»“æœå‘ç°teacheré¡¹ä¸ºç©º</p>
<p>å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸ºä»€ä¹ˆteacheré¡¹æ˜¯ä¸ºç©ºï¼Œå› ä¸ºæ²¡æœ‰ä¸teacheré¡¹å¯¹åº”çš„å­—æ®µï¼Œé‚£è¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠå‘¢</p>
<p>æ­¤æ—¶çš„teacherå±æ€§æ¯”è¾ƒå¤æ‚ï¼ˆå±æ€§ä¸ºå¯¹è±¡ï¼‰ï¼Œéœ€è¦è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œä½¿ç”¨resultMapä¸­çš„&lt;assocation&gt;æ ‡ç­¾å¯¹teacherå±æ€§è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œè§£å†³æ­¤ç±»é—®é¢˜çš„ç­”æ¡ˆå°±æ˜¯ï¼š<strong>å¤æ‚çš„å±æ€§å•ç‹¬å¤„ç†</strong></p>
<h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a><strong>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</strong></h3><p>å…ˆæŸ¥è¯¢å‡ºæ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ï¼Œç„¶åç”±å­¦ç”Ÿä¿¡æ¯ä¸­çš„å­—æ®µtnoåˆ°teacherè¡¨ä¸­æ‰¾å‡ºç›¸åº”çš„æ•™å¸ˆï¼ˆç›¸å½“äºåµŒå¥—æŸ¥è¯¢ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentInfo&quot; resultMap&#x3D;&quot;StudentTeacher&quot;&gt;<br>    select * from dbtest01.student;<br>&lt;&#x2F;select&gt;<br><br>&lt;resultMap id&#x3D;&quot;StudentTeacher&quot; type&#x3D;&quot;Student&quot;&gt;<br>    &lt;result property&#x3D;&quot;sno&quot; column&#x3D;&quot;sno&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;result property&#x3D;&quot;sname&quot; column&#x3D;&quot;sname&quot;&gt;&lt;&#x2F;result&gt;<br>&lt;!--        å¯¹äºå¤æ‚çš„å±æ€§ï¼Œå•ç‹¬å¤„ç†--&gt;<br>    &lt;association property&#x3D;&quot;teacher&quot; column&#x3D;&quot;tno&quot; javaType&#x3D;&quot;Teacher&quot; select&#x3D;&quot;getTeacherInfo&quot;&gt;&lt;&#x2F;association&gt;<br>&lt;&#x2F;resultMap&gt;<br><br>&lt;select id&#x3D;&quot;getTeacherInfo&quot; resultType&#x3D;&quot;Teacher&quot;&gt;<br>    select * from teacher where tno &#x3D; #&#123;tno&#125;;<br>&lt;&#x2F;select&gt;<br><br></code></pre></td></tr></table></figure>

<p>&lt;assocation&gt;æ ‡ç­¾ä¸­ï¼Œselectå±æ€§ä¸ºåµŒå¥—æŸ¥è¯¢ï¼Œé€šè¿‡columnå°†tnoçš„å€¼ä¼ é€’ç»™åµŒå¥—æŸ¥è¯¢ï¼ŒjavaTypeä¸ºåµŒå¥—æŸ¥è¯¢ä¸­çš„ç»“æœç±»å‹ï¼Œæœ€åå†æœ‰åµŒå¥—æŸ¥è¯¢çš„ç»“æœä¸propertyåŒ¹é…</p>
<h3 id="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a><strong>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</strong></h3><p>å…ˆç”±è¿è¡¨æŸ¥è¯¢æŸ¥è¯¢å‡ºæ‰€æœ‰çš„ä¿¡æ¯ï¼Œç„¶åå†å¯¹å±æ€§è¿›è¡Œä¸€ä¸€å¤„ç†ï¼Œæ­¤æ—¶ç›¸å½“äºsqlä¸­çš„è¿è¡¨æŸ¥è¯¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getStudentInfo&quot; resultMap&#x3D;&quot;StudentTeacher&quot;&gt;<br>    select * from student,teacher where student.tno &#x3D; teacher.tno;<br>&lt;&#x2F;select&gt;<br><br>&lt;resultMap id&#x3D;&quot;StudentTeacher&quot; type&#x3D;&quot;Student&quot;&gt;<br>    &lt;result property&#x3D;&quot;sno&quot; column&#x3D;&quot;sno&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;result property&#x3D;&quot;sname&quot; column&#x3D;&quot;sname&quot;&gt;&lt;&#x2F;result&gt;<br>&lt;!--        å¯¹äºå¤æ‚çš„å±æ€§ï¼Œå•ç‹¬å¤„ç†--&gt;<br>    &lt;association property&#x3D;&quot;teacher&quot; javaType&#x3D;&quot;Teacher&quot; &gt;<br>        &lt;result property&#x3D;&quot;tno&quot; column&#x3D;&quot;tno&quot;&gt;&lt;&#x2F;result&gt;<br>        &lt;result property&#x3D;&quot;tname&quot; column&#x3D;&quot;tname&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;&#x2F;association&gt;<br>&lt;&#x2F;resultMap&gt;<br></code></pre></td></tr></table></figure>

<h2 id="ä¸€å¯¹å¤šå¤„ç†"><a href="#ä¸€å¯¹å¤šå¤„ç†" class="headerlink" title="ä¸€å¯¹å¤šå¤„ç†"></a><strong>ä¸€å¯¹å¤šå¤„ç†</strong></h2><p>å½“å±æ€§ä¸ºé›†åˆçš„æ—¶å€™ï¼Œä½¿ç”¨/<collection>æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨ofTypeä»£è¡¨é›†åˆä¸­èŒƒå‹ç±»å‹</collection></p>
<p>ä¿®æ”¹pojoç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>@Data<br>public class Teacher &#123;<br>    private int tno;<br>    private String tname;<br>    private List&lt;Student&gt; studentList;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@NoArgsConstructor<br>@AllArgsConstructor<br>@Data<br>public class Student &#123;<br>    private int sno;<br>    private String sname;<br>&#x2F;&#x2F;    private Teacher teacher;<br>    private int tno;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>ç°åœ¨æœ‰å¦‚ä¸‹éœ€æ±‚ï¼š</p>
<p>è·å–æŒ‡å®šæ•™å¸ˆçš„ä¿¡æ¯ä»¥åŠå¯¹åº”çš„å­¦ç”Ÿä¿¡æ¯</p>
<h3 id="æ ¹æ®ç»“æœåµŒå¥—å¤„ç†"><a href="#æ ¹æ®ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="æ ¹æ®ç»“æœåµŒå¥—å¤„ç†"></a><strong>æ ¹æ®ç»“æœåµŒå¥—å¤„ç†</strong></h3><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getTeacherInfo&quot; resultMap&#x3D;&quot;TeacherStudent&quot;&gt;<br>    select * from teacher,student where teacher.tno &#x3D; #&#123;tno&#125; and student.tno &#x3D; teacher.tno;<br>&lt;&#x2F;select&gt;<br><br>&lt;resultMap id&#x3D;&quot;TeacherStudent&quot; type&#x3D;&quot;Teacher&quot;&gt;<br>    &lt;result property&#x3D;&quot;tno&quot; column&#x3D;&quot;tno&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;result property&#x3D;&quot;tname&quot; column&#x3D;&quot;tname&quot;&gt;&lt;&#x2F;result&gt;<br>&lt;!--        ofTypeä¸ºstudentListä¸­çš„èŒƒå‹ä¿¡æ¯--&gt;<br>    &lt;collection property&#x3D;&quot;studentList&quot; ofType&#x3D;&quot;Student&quot;&gt;<br>        &lt;result property&#x3D;&quot;sno&quot; column&#x3D;&quot;sno&quot;&gt;&lt;&#x2F;result&gt;<br>        &lt;result property&#x3D;&quot;sname&quot; column&#x3D;&quot;sname&quot;&gt;&lt;&#x2F;result&gt;<br>        &lt;result property&#x3D;&quot;tno&quot; column&#x3D;&quot;tno&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;&#x2F;collection&gt;<br>&lt;&#x2F;resultMap&gt;<br><br></code></pre></td></tr></table></figure>

<p>è¿”å›å¦‚ä¸‹ä¿¡æ¯ï¼š<br>Teacher(tno=1, tname=è€å¼ , studentList=[Student(sno=123, sname=å¼ ä¸‰, tno=1), Student(sno=124, sname=æå››, tno=1), Student(sno=125, sname=ç‹äº”, tno=1), Student(sno=126, sname=èµµå…­, tno=1)])</p>
<h3 id="æ ¹æ®æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æ ¹æ®æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æ ¹æ®æŸ¥è¯¢åµŒå¥—å¤„ç†"></a><strong>æ ¹æ®æŸ¥è¯¢åµŒå¥—å¤„ç†</strong></h3><p>ä¸å¤šå¯¹ä¸€çš„æƒ…å†µä¸€æ ·</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;getTeacherInfo&quot; resultMap&#x3D;&quot;TeacherStudent&quot;&gt;<br>    select * from teacher where tno &#x3D; #&#123;tno&#125;;<br>&lt;&#x2F;select&gt;<br><br>&lt;resultMap id&#x3D;&quot;TeacherStudent&quot; type&#x3D;&quot;Teacher&quot;&gt;<br>    &lt;result property&#x3D;&quot;tno&quot; column&#x3D;&quot;tno&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;result property&#x3D;&quot;tname&quot; column&#x3D;&quot;tname&quot;&gt;&lt;&#x2F;result&gt;<br>    &lt;collection property&#x3D;&quot;studentList&quot; column&#x3D;&quot;tno&quot;javaType&#x3D;&quot;ArrayList&quot; ofType&#x3D;&quot;Student&quot; select&#x3D;&quot;getStudentInfo&quot;&gt;&lt;&#x2F;collection&gt;<br>&lt;&#x2F;resultMap&gt;<br><br>&lt;select id&#x3D;&quot;getStudentInfo&quot; resultType&#x3D;&quot;Student&quot;&gt;<br>    select * from student where tno &#x3D; #&#123;tno&#125;;<br>&lt;&#x2F;select&gt;<br><br></code></pre></td></tr></table></figure>

<h1 id="åŠ¨æ€sqlè¯­å¥"><a href="#åŠ¨æ€sqlè¯­å¥" class="headerlink" title="åŠ¨æ€sqlè¯­å¥"></a><strong>åŠ¨æ€sqlè¯­å¥</strong></h1><p>åŠ¨æ€sqlå°±æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„sqlè¯­å¥</p>
<p>pojoåŒ…ä¸‹åˆ›å»ºBlogç±»</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Data<br>@AllArgsConstructor<br>public class Blog &#123;<br><br>    private String id;<br>    private String title;<br>    private String author;<br>    private Date createTime;<br>    private int views;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>åˆ›å»ºblogè¡¨</p>
<p><img src="/2020/10/22/mybatis/blog.jpg" alt="blog"></p>
<p>å…¶ä¸­çš„idç”¨javaä¸­çš„UUIDç±»å®ç°</p>
<h2 id="å¸¸ç”¨çš„æ ‡ç­¾"><a href="#å¸¸ç”¨çš„æ ‡ç­¾" class="headerlink" title="å¸¸ç”¨çš„æ ‡ç­¾"></a><strong>å¸¸ç”¨çš„æ ‡ç­¾</strong></h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a><strong>if</strong></h3><p>ifæ ‡ç­¾ç”¨æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œä¾‹å¦‚ï¼šæœ‰ä¸€ä¸ªéœ€æ±‚ï¼ŒæŸ¥è¯¢åšå®¢çš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å®šæŸä¸ªå­—æ®µï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè‹¥ç»™å®šæŸä¸ªå­—æ®µï¼Œåˆ™æ ¹æ®è¿™ä¸ªå­—æ®µå»æŸ¥æ‰¾ç›¸åº”çš„ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;selectBlog&quot; parameterType&#x3D;&quot;map&quot; resultType&#x3D;&quot;Blog&quot;&gt;<br>    select * from blog where 1&#x3D;1<br>    &lt;if test&#x3D;&quot;author !&#x3D; null&quot;&gt;<br>        and author &#x3D; #&#123;author&#125;<br>    &lt;&#x2F;if&gt;<br><br>    &lt;if test&#x3D;&quot;title !&#x3D; null&quot;&gt;<br>        and title &#x3D; #&#123;title&#125;<br>    &lt;&#x2F;if&gt;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œtest=â€â€ä¸ºåˆ¤æ–­çš„æ¡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void selectBlog()&#123;<br>    SqlSession sqlSession &#x3D; myBatisUtils.getSqlSession();<br><br>    BlogMapper mapper &#x3D; sqlSession.getMapper(BlogMapper.class);<br><br>    HashMap map &#x3D; new HashMap();<br><br>    map.put(&quot;author&quot;,&quot;ç¡ä»€ä¹ˆç¡&quot;);<br><br>    map.put(&quot;title&quot;,&quot;å­¦ä¹ ä½¿æˆ‘å¿«ä¹&quot;);<br><br>    List&lt;Blog&gt; blogs &#x3D; mapper.selectBlog(map);<br><br>    for (Blog blog : blogs) &#123;<br>        System.out.println(blog);<br>    &#125;<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a><strong>where</strong></h3><p>åœ¨ä¸Šé¢çš„ifæ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªä¸è§„èŒƒçš„sqlè¯­å¥ï¼Œé‚£ä¸ªè¯­å¥åªæ˜¯ä¸ºäº†æµ‹è¯•æ–¹ä¾¿æ‰å¼•å…¥çš„ï¼Œä¸‹é¢å°†sqlè¯­å¥æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from blog where<br>&lt;if test&#x3D;&quot;author !&#x3D; null&quot;&gt;<br>    author &#x3D; #&#123;author&#125;<br>&lt;&#x2F;if&gt;<br>&lt;if test&#x3D;&quot;title !&#x3D; null&quot;&gt;<br>	and title &#x3D; #&#123;title&#125;<br>&lt;&#x2F;if&gt;<br></code></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå‚æ•°mapæ²¡æœ‰authorå¯¹åº”çš„æ˜ å°„ï¼Œæ­¤æ—¶çš„sqlè¯­å¥å˜ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">select * from blog where and title &#x3D; #&#123;title&#125;<br></code></pre></td></tr></table></figure>

<p>å°±ä¼šå‡ºç°æŠ¥é”™ä¿¡æ¯</p>
<p><strong>ä¸ºäº†åº”ä»˜è¿™ç§æƒ…å†µï¼Œåœ¨MyBatisä¸­å¯ä»¥ä½¿ç”¨whereæ ‡ç­¾æ¥è§£å†³</strong></p>
<p>where å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œwhere å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;selectBlog&quot; parameterType&#x3D;&quot;map&quot; resultType&#x3D;&quot;Blog&quot;&gt;<br>    select * from blog<br>    &lt;where&gt;<br>        &lt;if test&#x3D;&quot;author !&#x3D; null&quot;&gt;<br>            author &#x3D; #&#123;author&#125;<br>        &lt;&#x2F;if&gt;<br><br>        &lt;if test&#x3D;&quot;title !&#x3D; null&quot;&gt;<br>            and title &#x3D; #&#123;title&#125;<br>        &lt;&#x2F;if&gt;<br>    &lt;&#x2F;where&gt;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="headerlink" title="choose(when otherwise)"></a><strong>choose(when otherwise)</strong></h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;where&gt;<br>    &lt;choose&gt;<br>        &lt;when test&#x3D;&quot;author!&#x3D;null&quot;&gt;<br>            and author &#x3D; #&#123;author&#125;<br>        &lt;&#x2F;when&gt;<br>        &lt;when test&#x3D;&quot;title!&#x3D;null&quot;&gt;<br>            and title &#x3D; #&#123;title&#125;<br>        &lt;&#x2F;when&gt;<br>        &lt;otherwise&gt;&lt;&#x2F;otherwise&gt;<br><br>    &lt;&#x2F;choose&gt;<br>&lt;&#x2F;where&gt;<br></code></pre></td></tr></table></figure>

<h3 id="set"><a href="#set" class="headerlink" title="set"></a><strong>set</strong></h3><p>æœ‰æ—¶å€™åœ¨å†™sqlè¯­å¥çš„æ—¶å€™ï¼Œæ¯”å¦‚æ›´æ–°æ“ä½œï¼Œå¾ˆå®¹æ˜“å› ä¸ºå¤šåŠ æˆ–è€…å°‘åŠ ä¸€ä¸ªé€—å·å¯¼è‡´å‡ºé”™</p>
<p>set å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·</p>
<p>å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;update id&#x3D;&quot;updateBlog&quot; parameterType&#x3D;&quot;Blog&quot;&gt;<br>    update blog<br>    &lt;set&gt;<br>        &lt;if test&#x3D;&quot;title !&#x3D; null&quot;&gt;<br>            title &#x3D; #&#123;title&#125;,<br>        &lt;&#x2F;if&gt;<br>        &lt;if test&#x3D;&quot;author !&#x3D; null&quot;&gt;<br>            author &#x3D; #&#123;author&#125;,<br>        &lt;&#x2F;if&gt;<br>        &lt;if test&#x3D;&quot;createTime!&#x3D;null&quot;&gt;<br>            create_time &#x3D; #&#123;createTime&#125;,<br>        &lt;&#x2F;if&gt;<br>        views &#x3D; #&#123;views&#125;,<br>    &lt;&#x2F;set&gt;<br>    where id &#x3D; #&#123;id&#125;;<br>&lt;&#x2F;update&gt;<br><br></code></pre></td></tr></table></figure>
<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a><strong>sql</strong></h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€äº›å…¬å…±çš„sqlè¯­å¥æŠ½å–å‡ºæ¥ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°sqlæ ‡ç­¾å–includeæ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;sql id&#x3D;&quot;if-author-title&quot;&gt;<br>    &lt;where&gt;<br>        &lt;choose&gt;<br>            &lt;when test&#x3D;&quot;author!&#x3D;null&quot;&gt;<br>                and author &#x3D; #&#123;author&#125;<br>            &lt;&#x2F;when&gt;<br>            &lt;when test&#x3D;&quot;title!&#x3D;null&quot;&gt;<br>                and title &#x3D; #&#123;title&#125;<br>            &lt;&#x2F;when&gt;<br>            &lt;otherwise&gt;&lt;&#x2F;otherwise&gt;<br>        &lt;&#x2F;choose&gt;<br>    &lt;&#x2F;where&gt;<br>&lt;&#x2F;sql&gt;<br>&lt;select id&#x3D;&quot;selectBlog&quot; parameterType&#x3D;&quot;map&quot; resultType&#x3D;&quot;Blog&quot;&gt;<br>    select * from blog<br>    &lt;include refid&#x3D;&quot;if-author-title&quot;&gt;&lt;&#x2F;include&gt;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>
<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a><strong>foreach</strong></h3><p>foreachæ ‡ç­¾çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚</p>
<p>å¯ä»¥å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚Listã€Setç­‰ï¼‰ã€Mapå¯¹è±¡æˆ–è€…æ•°ç»„å¯¹è±¡ä½œä¸ºé›†åˆå‚æ•°ä¼ é€’ç»™foreachã€‚å½“ä½¿ç”¨å¯è¿­ä»£å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶ï¼Œindex æ˜¯å½“å‰è¿­ä»£çš„åºå·ï¼Œitem çš„å€¼æ˜¯æœ¬æ¬¡è¿­ä»£è·å–åˆ°çš„å…ƒç´ ã€‚å½“ä½¿ç”¨ Map å¯¹è±¡ï¼ˆæˆ–è€… Map.Entry å¯¹è±¡çš„é›†åˆï¼‰æ—¶ï¼Œindex æ˜¯é”®ï¼Œitem æ˜¯å€¼ã€‚</p>
<p>å¦‚ï¼šå½“æˆ‘ä»¬éœ€è¦æŸ¥è¯¢ç­›é€‰å‡ºåœ¨æŸä¸ªé›†åˆä¸­çš„blogæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨foreachæ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;select id&#x3D;&quot;selectBlogForeach&quot; resultType&#x3D;&quot;Blog&quot; parameterType&#x3D;&quot;map&quot;&gt;<br>    select * from blog<br>    &lt;where&gt;<br>        &lt;foreach collection&#x3D;&quot;list&quot; item&#x3D;&quot;id&quot; open&#x3D;&quot;and (&quot; close&#x3D;&quot;)&quot; separator&#x3D;&quot;or&quot;&gt;<br>            id &#x3D; #&#123;id&#125;<br>        &lt;&#x2F;foreach&gt;<br>    &lt;&#x2F;where&gt;<br>&lt;&#x2F;select&gt;<br></code></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œcollectionä¸ºmapä¸­çš„é”®ï¼Œitemä¸ºcollectionä¸­çš„å…ƒç´ ç±»å‹ï¼Œseparatorä¸ºåˆ†éš”ç¬¦</p>
<h1 id="Mybatisç¼“å­˜"><a href="#Mybatisç¼“å­˜" class="headerlink" title="Mybatisç¼“å­˜"></a><strong>Mybatisç¼“å­˜</strong></h1><h2 id="ä»€ä¹ˆæ˜¯ç¼“å­˜"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜"></a><strong>ä»€ä¹ˆæ˜¯ç¼“å­˜</strong></h2><p>ç¼“å­˜æ˜¯ä¸´æ—¶å­˜åœ¨å†…å­˜ä¸­çš„æ•°æ®ï¼Œå°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œç”¨æˆ·åŒºæŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸ŠæŸ¥è¯¢ï¼Œè€Œæ˜¯ä»ç¼“å­˜ä¸­æŸ¥è¯¢</p>
<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜"></a><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜</strong></h2><p>è¿æ¥æ•°æ®åº“éå¸¸æ¶ˆè€—èµ„æºï¼Œä¸ºäº†å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</p>
<h2 id="Mybatisç¼“å­˜-1"><a href="#Mybatisç¼“å­˜-1" class="headerlink" title="Mybatisç¼“å­˜"></a><strong>Mybatisç¼“å­˜</strong></h2><p>MybatisåŒ…å«äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜</p>
<p>Mybatisä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong> å’Œ <strong>äºŒçº§ç¼“å­˜</strong></p>
<h3 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a><strong>ä¸€çº§ç¼“å­˜</strong></h3><p>é»˜è®¤æƒ…å†µä¸‹å¼€å¯ä¸€çº§ç¼“å­˜ï¼ˆsqlsessionçº§åˆ«ï¼‰ï¼Œsqlsessionåœ¨openå’Œcloseä¹‹é—´æœ‰æ•ˆ</p>
<p>å¯¹äºselectBlogByIdæŸ¥è¯¢è¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void selectBlogById()&#123;<br><br>    SqlSession sqlSession &#x3D; myBatisUtils.getSqlSession();<br><br>    BlogMapper mapper &#x3D; sqlSession.getMapper(BlogMapper.class);<br><br>    Blog blog &#x3D; mapper.selectBlogById(1);<br><br>    Blog blog1 &#x3D; mapper.selectBlogById(1);<br><br>    System.out.println(blog&#x3D;&#x3D;blog1);<br><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="/2020/10/22/mybatis/cache1.jpg" alt="cache1"></p>
<p>ä»åˆ›å»ºè¿æ¥æ± åˆ°å…³é—­è¿æ¥æ± ï¼Œåªæ‰§è¡Œäº†ä¸€æ¬¡sqlè¯­å¥</p>
<p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p>
<ul>
<li>æŸ¥è¯¢ä¸åŒçš„ä¿¡æ¯</li>
<li>è¿›è¡Œå¢åˆ æ”¹æ“ä½œä¼šåˆ·æ–°åŸæ¥çš„ç¼“å­˜ï¼ŒåŸå› æ˜¯å¢åˆ æ”¹æ“ä½œå¯èƒ½ä¼šæ”¹å˜åŸæœ‰æ•°æ®</li>
</ul>
<h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a><strong>äºŒçº§ç¼“å­˜</strong></h3><p>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œå®ƒæ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜</p>
<p>è¦ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œå…ˆè¦åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ˜¾ç¤ºå¼€å¯ç¼“å­˜</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;settings&gt;<br>    &lt;setting name&#x3D;&quot;logImpl&quot; value&#x3D;&quot;STDOUT_LOGGING&quot;&#x2F;&gt;<br>    &lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>    &lt;setting name&#x3D;&quot;cacheEnabled&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;<br>&lt;&#x2F;settings&gt;<br></code></pre></td></tr></table></figure>

<p>è¦åœ¨xxxMapper.xmlæ–‡ä»¶ä¸­åŠ ä¸Šé…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&lt;cache&gt;<br>	properties...<br>&lt;cache&#x2F;&gt;<br></code></pre></td></tr></table></figure>
<p>å½“æŸä¸ªsqlsession.closeçš„æ—¶å€™ï¼Œä¸€çº§ç¼“å­˜ä¼šè¿›å…¥äºŒçº§ç¼“å­˜ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@Test<br>public void selectBlogById()&#123;<br><br>    SqlSession sqlSession &#x3D; myBatisUtils.getSqlSession();<br><br>    SqlSession sqlSession1 &#x3D; myBatisUtils.getSqlSession();<br><br>    BlogMapper mapper &#x3D; sqlSession.getMapper(BlogMapper.class);<br><br>    Blog blog &#x3D; mapper.selectBlogById(1);<br><br>    sqlSession.close();<br><br>    BlogMapper mapper1 &#x3D; sqlSession1.getMapper(BlogMapper.class);<br><br>    Blog blog1 &#x3D; mapper1.selectBlogById(1);<br><br>    System.out.println(blog&#x3D;&#x3D;blog1);<br><br>    sqlSession1.close();<br><br>    &#125;<br> &#96;&#96;&#96; <br><br>![cache2wrong](cache2wrong.jpg)<br><br>æ­¤æ—¶å‘ç°æ‰§è¡Œäº†ä¸¤æ¬¡æŸ¥è¯¢æ“ä½œ<br><br>è‹¥å°†æŸ¥è¯¢è¯­å¥æ”¾åœ¨xmlæ–‡ä»¶ä¸­é…ç½®<br><br>![cache2true](cache2true.jpg)<br><br>å‘ç°äºŒçº§ç¼“å­˜é…ç½®æˆåŠŸ<br><br>**åŸå› æ˜¯ï¼šä½¿ç”¨åŸºäºæ³¨è§£çš„äºŒçº§ç¼“å­˜è¦åœ¨ éœ€è¦å¼€å¯äºŒçº§ç¼“å­˜çš„daoæ¥å£ä¸­æ·»åŠ å¦‚ä¸‹æ³¨é‡Š**<br><br></code></pre></td></tr></table></figure>
<p>@CacheNamespace(blocking = true)</p>
<pre><code>
</code></pre>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>SSMæ¡†æ¶</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
</search>
